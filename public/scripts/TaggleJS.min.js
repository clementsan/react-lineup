!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3")):"function"==typeof define&&define.amd?define(["d3"],e):"object"==typeof exports?exports.LineUpJS=e(require("d3")):t.LineUpJS=e(t.d3)}(this,function(t){return function(t){function e(i){if(r[i])return r[i].exports;var n=r[i]={i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=140)}([function(t,e,r){"use strict";function i(...t){let e=null;for(const r of t){const t=Object.keys(r);if(null!==e)for(const n of t){const t=r[n];Object.prototype.toString.call(t)===u&&Object.getPrototypeOf(t)===Object.prototype?(void 0===e[n]&&(e[n]={}),e[n]=i(e[n],t)):Array.isArray(t)?(void 0===e[n]&&(e[n]=[]),e[n]=t.concat(e[n])):e[n]=t}else e=r}return e}function n(t){const e=t.getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:e.width,height:e.height}}function s(t,e){const r=t.dataTransfer.types;return"function"==typeof r.indexOf?e.some(t=>r.indexOf(t)>=0):"function"==typeof r.includes?e.some(t=>r.includes(t)):"function"==typeof r.contains&&e.some(t=>r.contains(t))}function a(t){return g.size>0&&s(t,["text/plain"])}function o(t){const e=t.dataTransfer;return t.ctrlKey&&null!=e.effectAllowed.match(/copy/gi)||null==e.effectAllowed.match(/move/gi)}function l(t,e){return void 0===e?t:(t.textContent!==e&&(t.textContent=e),t)}function c(t,e,r){Array.from(t.querySelectorAll(e)).forEach(r)}e.q=function(t,e=0){if(0===e)return Math.round(t);const r=Math.pow(10,e);return Math.round(t*r)/r},e.k=function(t){return(e,r)=>{if(e in t)return t[e];if(e.indexOf(".")>0){const r=e.substring(0,e.indexOf("."));if(e=e.substring(e.indexOf(".")+1),r in t&&e in t[r])return t[r][e]}return r}},e.t=function(t,e,r=.5){return t===e||Math.abs(t-e)<r},e.f=function(t,e=100,r){let i=-1,n=null;return function(...s){i>=0&&(clearTimeout(i),i=-1);const a={self:this,args:s};n=n&&r?r(n,a):a,i=setTimeout(()=>{console.assert(null!=n),t.call(n.self,...n.args),n=null},e)}},e.u=function(t,...e){return e.map(e=>`${e}${t}`)},e.p=i,e.h=function(t){return e=>{e.on("dragstart",e=>{const r=h.event,i=t(e);if(r.dataTransfer.effectAllowed=i.effectAllowed,Object.keys(i.data).every(t=>{try{return r.dataTransfer.setData(t,i.data[t]),!0}catch(t){return!1}}))return;const n=i.data["text/plain"]||"";r.dataTransfer.setData("text/plain",`${e.id}${n?`: ${n}`:""}`),g.set(e.id,i.data)}).on("dragend",t=>{g.size>0&&g.delete(t.id)})}},e.i=function(t,e){return r=>{r.on("dragenter",function(){const e=h.event;if(s(e,t)||a(e))return Object(h.select)(this).classed("drag_over",!0),!1;Object(h.select)(this).classed("drag_over",!1)}).on("dragover",function(){const e=h.event;if(s(e,t)||a(e))return e.preventDefault(),function(t){const e=t.dataTransfer;o(t)?e.dropEffect="copy":e.dropEffect="move"}(e),Object(h.select)(this).classed("drag_over",!0),!1}).on("dragleave",function(){Object(h.select)(this).classed("drag_over",!1)}).on("drop",function(r){const i=h.event;if(i.preventDefault(),Object(h.select)(this).classed("drag_over",!1),a(i)){const t=i.dataTransfer.getData("text/plain"),n=t.indexOf(":")>=0?t.substring(0,t.indexOf(":")):t;if(g.has(n)){const t=g.get(n);return g.delete(n),e(t,r,o(i))}}if(s(i,t)){const n={};return t.forEach(t=>{const e=i.dataTransfer.getData(t);""!==e&&(n[t]=e)}),e(n,r,o(i))}})}},e.c=function(t,e={},r={},i){return Object.keys(e).forEach(r=>{const i=String(e[r]);t.getAttribute(r)!==i&&t.setAttribute(r,i)}),Object.keys(r).forEach(e=>{const i=r[e];t.style.getPropertyValue(e)!==i&&t.style.setProperty(e,i)}),l(t,i)},e.r=l,e.l=c,e.m=function(t,e){Array.from(t.children).forEach(e)},e.e=function(t,e){const r=t.font,i=function(t){return t.font="10pt FontAwesome",t.measureText("").width}(t);t.font=e;const n="abcdefghijklmnopqrstuvwxyz",s=`${n}${n.toUpperCase()}0123456789`,a={maxLetterWidth:t.measureText("M").width,avgLetterWidth:t.measureText(s).width/s.length,ellipsisWidth:t.measureText(f).width,spinnerWidth:i};return t.font=r,a},e.d=function(t,e,r,i,n,s){const a=e=>t.fillText(e,r,i,n);if(s.maxLetterWidth*e.length<=n||n<=s.ellipsisWidth||0===e.length)return a(e);if(t.measureText(e).width<=n)return a(e);const o=n-s.ellipsisWidth;let l=0,c=e.length-1,h=Math.min(c,Math.floor(n/s.avgLetterWidth));for(;l<c;){const r=o-t.measureText(e.substring(0,h+1)).width;if(r<0)c=h-1;else{if(!(r>0))break;l=h+1}h=Math.floor((c+l)/2)}return a(e.substring(0,l+1)+f)},e.s=function(t,e,r,i){let n=t.querySelector(`div.lu-overlay#O${e}`);return n||((n=t.ownerDocument.createElement("div")).classList.add("lu-overlay"),n.id=`O${e}`,t.appendChild(n)),n.style.display="block",n.style.left=`${r}px`,n.style.top=`${i}px`,n},e.n=function(t){c(t,"div.lu-overlay",t=>t.style.display=null)},e.o=function(t,e,r,i="svg"){const n="detail"===r?t=>t.column.getRendererType():t=>t.column.getGroupRenderer();if(0===t.childElementCount)return t.innerHTML=e.map(t=>("detail"===r?t.renderer:t.groupRenderer).template).join(""),void e.forEach((e,r)=>{const i=t.childNodes[r];i.setAttribute("data-column-id",e.column.id),i.setAttribute("data-renderer",n(e))});if(e.every(function(e,r){const i=t.childElementCount<=r?null:t.childNodes[r];return null!=i&&i.getAttribute("data-column-id")===e.column.id&&i.getAttribute("data-renderer")===n(e)}))return;const s=new Set(e.map(t=>`${t.column.id}@${n(t)}`));Array.from(t.childNodes).forEach(e=>{const r=`${e.getAttribute("data-column-id")}@${e.getAttribute("data-renderer")}`;s.has(r)||t.removeChild(e)});const a="svg"===i?document.createElementNS("http://www.w3.org/2000/svg","g"):document.createElement("div");e.forEach(e=>{let i=t.querySelector(`[data-column-id="${e.column.id}"]`);i||(a.innerHTML=("detail"===r?e.renderer:e.groupRenderer).template,(i=a.childNodes[0]).setAttribute("data-column-id",e.column.id),i.setAttribute("data-renderer",n(e))),t.appendChild(i)})},e.j=function(t,e){return t.length===e.length&&t.every((t,r)=>t===e[r])},e.g=function(t){const e=h.scale.category10().range().slice();return t.forEach(t=>{switch(t.type){case"number":t.color=e.shift()}}),t};var h=r(3);r.n(h);class d{constructor(){this.listeners=Object(h.dispatch)(...this.createEventList());const t=this;this.forwarder=function(...e){t.fireImpl(this.type,this.primaryType,this.origin,...e)}}on(t,e){return void 0!==e?(Array.isArray(t)?t.forEach(t=>this.listeners.on(t,e)):this.listeners.on(t,e),this):this.listeners.on(t)}createEventList(){return[]}fire(t,...e){const r=Array.isArray(t)?t[0]:t;this.fireImpl(t,r,this,...e)}fireImpl(t,e,r,...i){const n=t=>{const n={source:this,origin:r,type:t,primaryType:e,args:i};this.listeners[t].apply(n,i)};Array.isArray(t)?t.forEach(n.bind(this)):n(t)}forward(t,...e){t.on(e,this.forwarder)}unforward(t,...e){t.on(e,null)}}e.a=d;const u="[object Object]";class p extends d{constructor(t,e,r={}){super(),this.container=t,this.options={pageSize:100,rowHeight:20,backupRows:5},this.prevScrollTop=0,this.shift=0,i(this.options,r),Object(h.select)(t).on("scroll.scroller",()=>this.onScroll()),this.prevScrollTop=t.scrollTop,this.shift=n(e).top-n(t).top}createEventList(){return super.createEventList().concat([p.EVENT_REDRAW,p.EVENT_SCROLL])}scrollIntoView(t,e,r,i){const n=this.selectImpl(t,e,i,0);if(n.from<=r&&r<=n.to)return;const s=i(r)-10,a=this.container.scrollHeight-this.container.clientHeight;this.container.scrollTop=Math.max(0,Math.min(a,s))}select(t,e,r){return this.selectImpl(t,e,r,this.options.backupRows)}selectImpl(t,e,r,i){const n=this.container.scrollTop-this.shift,s=n+this.container.clientHeight;let a,o=0;if(n>0){for(o=Math.round(n/this.options.rowHeight);o>=t&&r(o+1)>n;)o--;o-=i}for(a=Math.round(s/this.options.rowHeight);a<=e&&r(a-1)<s;)a++;return a+=i,{from:Math.max(o,t),to:Math.min(a,e)}}onScroll(){const t=this.container.scrollTop,e=this.container.scrollLeft;if(this.fire(p.EVENT_SCROLL,t,e),Math.abs(this.prevScrollTop-t)<this.options.pageSize)return;const r=this.prevScrollTop-t;this.prevScrollTop=t,this.fire(p.EVENT_REDRAW,r)}destroy(){Object(h.select)(this.container).on("scroll.scroller",null)}}e.b=p,p.EVENT_SCROLL="scroll",p.EVENT_REDRAW="redraw";const g=new Map,f="…"},function(t,e,r){"use strict";function i(t){return t.replace(/[\s!#$%&'()*+,.\/:;<=>?@\[\\\]\^`{|}~]/g,"_")}e.b=i;var n=r(0),s=r(24),a=r(5);class o extends n.a{constructor(t,e){super(),this.desc=e,this.width=100,this.parent=null,this.uid=i(t),this.rendererInfo={renderer:this.desc.rendererType||this.desc.type,groupRenderer:this.desc.groupRenderer||this.desc.type},this.cssClass=e.cssClass||"",this.metadata={label:e.label||this.id,description:e.description||"",color:e.color||(""!==this.cssClass?null:o.DEFAULT_COLOR)}}get id(){return this.uid}assignNewId(t){this.uid=i(t())}get label(){return this.metadata.label}get description(){return this.metadata.description}get color(){return this.metadata.color}get headerCssClass(){return this.desc.type}get fqid(){return this.parent?`${this.parent.fqid}_${this.id}`:this.id}get fqpath(){return this.parent?`${this.parent.fqpath}@${this.parent.indexOf(this)}`:""}createEventList(){return super.createEventList().concat([o.EVENT_WIDTH_CHANGED,o.EVENT_FILTER_CHANGED,o.EVENT_LABEL_CHANGED,o.EVENT_METADATA_CHANGED,o.EVENT_ADD_COLUMN,o.EVENT_REMOVE_COLUMN,o.EVENT_RENDERER_TYPE_CHANGED,o.EVENT_GROUP_RENDERER_TYPE_CHANGED,o.EVENT_SORTMETHOD_CHANGED,o.EVENT_MOVE_COLUMN,o.EVENT_DIRTY,o.EVENT_DIRTY_HEADER,o.EVENT_DIRTY_VALUES,o.EVENT_GROUPING_CHANGED])}getWidth(){return this.width}isHidden(){return this.width<=0}hide(){return this.setWidth(0)}flatten(t,e,r=0,i=0){const n=this.getWidth();return t.push({col:this,offset:e,width:n}),n}setWidth(t){Object(n.t)(this.width,t,.5)||this.fire([o.EVENT_WIDTH_CHANGED,o.EVENT_DIRTY_HEADER,o.EVENT_DIRTY_VALUES,o.EVENT_DIRTY],this.width,this.width=t)}setWidthImpl(t){this.width=t}setMetaData(t){if(t.label===this.label&&this.color===t.color&&this.description===t.description)return;const e=this.color===t.color?[o.EVENT_LABEL_CHANGED,o.EVENT_METADATA_CHANGED,o.EVENT_DIRTY_HEADER,o.EVENT_DIRTY]:[o.EVENT_LABEL_CHANGED,o.EVENT_METADATA_CHANGED,o.EVENT_DIRTY_HEADER,o.EVENT_DIRTY_VALUES,o.EVENT_DIRTY],r=this.getMetaData();this.metadata={label:t.label,color:t.color,description:t.description},this.fire(e,r,this.getMetaData())}getMetaData(){return{label:this.label,color:this.color,description:this.description}}sortByMe(t=!1){const e=this.findMyRanker();return!!e&&e.sortBy(this,t)}groupByMe(){const t=this.findMyRanker();return!!t&&t.toggleGrouping(this)}isGroupedBy(){const t=this.findMyRanker();return t?t.getGroupCriteria().indexOf(this):-1}toggleMySorting(){const t=this.findMyRanker();return!!t&&t.toggleSorting(this)}isSortedByMeImpl(t){const e=this.findMyRanker();if(!e)return{asc:void 0,priority:void 0};const r=t(e),i=r.findIndex(t=>t.col===this);return i<0?{asc:void 0,priority:void 0}:{asc:r[i].asc?"asc":"desc",priority:i.toString()}}isSortedByMe(){return this.isSortedByMeImpl(t=>t.getSortCriterias())}groupSortByMe(t=!1){const e=this.findMyRanker();return!!e&&e.groupSortBy(this,t)}toggleMyGroupSorting(){const t=this.findMyRanker();return!!t&&t.toggleGroupSorting(this)}isGroupSortedByMe(){return this.isSortedByMeImpl(t=>t.getGroupSortCriteria())}removeMe(){return!!this.parent&&this.parent.remove(this)}insertAfterMe(t){return!!this.parent&&null!=this.parent.insertAfter(t,this)}findMyRanker(){return this.parent?this.parent.findMyRanker():null}dump(t){const e={id:this.id,desc:t(this.desc),width:this.width};return this.label!==(this.desc.label||this.id)&&(e.label=this.label),this.color!==(this.desc.color||o.DEFAULT_COLOR)&&this.color&&(e.color=this.color),this.getRendererType()!==this.desc.type&&(e.rendererType=this.getRendererType()),e}restore(t,e){this.width=t.width||this.width,this.metadata={label:t.label||this.label,color:t.color||this.color,description:this.description},t.rendererType&&(this.rendererInfo.renderer=t.rendererType),t.groupRenderer&&(this.rendererInfo.groupRenderer=t.groupRenderer)}getLabel(t,e){return String(this.getValue(t,e))}getValue(t,e){return""}isMissing(t,e){return Object(a.b)(this.getValue(t,e))}compare(t,e,r,i){return 0}group(t,e){return s.a}groupCompare(t,e){return t.name.toLowerCase().localeCompare(e.name.toLowerCase())}isFiltered(){return!1}filter(t,e){return null!==t}getRendererType(){return this.rendererInfo.renderer}getGroupRenderer(){return this.rendererInfo.groupRenderer}setRendererType(t){t!==this.rendererInfo.renderer&&this.fire([o.EVENT_RENDERER_TYPE_CHANGED,o.EVENT_DIRTY_VALUES,o.EVENT_DIRTY],this.rendererInfo.renderer,this.rendererInfo.renderer=t)}setDefaultRenderer(t){if(this.rendererInfo.renderer===this.desc.type)return this.setRendererType(t)}setGroupRenderer(t){t!==this.rendererInfo.groupRenderer&&this.fire([o.EVENT_GROUP_RENDERER_TYPE_CHANGED,o.EVENT_DIRTY_VALUES,o.EVENT_DIRTY],this.rendererInfo.groupRenderer,this.rendererInfo.groupRenderer=t)}setDefaultGroupRenderer(t){if(this.rendererInfo.groupRenderer===this.desc.type)return this.setGroupRenderer(t)}toSortingDesc(t){return t(this.desc)}}e.a=o,o.DEFAULT_COLOR="#C1C1C1",o.FLAT_ALL_COLUMNS=-1,o.EVENT_WIDTH_CHANGED="widthChanged",o.EVENT_FILTER_CHANGED="filterChanged",o.EVENT_LABEL_CHANGED="labelChanged",o.EVENT_METADATA_CHANGED="metaDataChanged",o.EVENT_ADD_COLUMN="addColumn",o.EVENT_MOVE_COLUMN="moveColumn",o.EVENT_REMOVE_COLUMN="removeColumn",o.EVENT_DIRTY="dirty",o.EVENT_DIRTY_HEADER="dirtyHeader",o.EVENT_DIRTY_VALUES="dirtyValues",o.EVENT_RENDERER_TYPE_CHANGED="rendererTypeChanged",o.EVENT_GROUP_RENDERER_TYPE_CHANGED="groupRendererChanged",o.EVENT_SORTMETHOD_CHANGED="sortMethodChanged",o.EVENT_GROUPING_CHANGED="groupingChanged"},function(t,e,r){"use strict";function i(t){return t instanceof a.a&&"function"==typeof t.getNumber||!(t instanceof a.a)&&null!=t.type.match(/(number|stack|ordinal)/)}function n(t,e,r=!1,i=!1){return r=r||null===t||isNaN(t),i=i||null===e||isNaN(e),r?i?0:s.a:i?-1*s.a:t-e}e.h=i,e.e=function(t,e,r,i,a){const o=t.getBoxPlotData(e,i),l=t.getBoxPlotData(r,a);if(null===o)return null===l?0:s.a;if(null===l)return-1*s.a;const c=t.getSortMethod();return n(o[c],l[c])},e.f=function(t,e,r,i){const n="normalized"===i?t.getBoxPlotData(e,r):t.getRawBoxPlotData(e,r);return null===n?NaN:n[t.getSortMethod()]},e.i=function(t){return void 0!==t.getNumbers&&i(t)},e.m=n,e.k=function(t,e){const r=t.map((t,r)=>({i:r,v:e.getNumber(t.v,t.dataIndex),m:e.isMissing(t.v,t.dataIndex)})).filter(t=>!t.m).sort((t,e)=>n(t.v,e.v)),i=r[Math.floor(r.length/2)];return void 0===i?0:i.i},e.g=function(t,e,r,i){const s=new u(t.map(t=>r.getNumber(t.v,t.dataIndex))),a=new u(e.map(t=>r.getNumber(t.v,t.dataIndex)));return n(s[i],a[i])},e.l=function(){return{min:-1/0,max:1/0,filterMissing:!1}},e.j=function(t,e){return Object(l.t)(t.min,e.min,.001)&&Object(l.t)(t.max,e.max,.001)&&t.filterMissing===e.filterMissing},e.n=function(t){return{min:null!==t.min&&isFinite(t.min)?t.min:-1/0,max:null!==t.max&&isFinite(t.max)?t.max:1/0,filterMissing:t.filterMissing}};var s=r(5),a=r(1),o=r(3),l=(r.n(o),r(0));const c=Object(o.format)(".3n");e.b=c;const h={min:"min",max:"max",median:"median",q1:"q1",q3:"q3"};e.d=h;const d=Object.assign({mean:"mean"},h);e.a=d;class u{constructor(t,e){this.scale=e,this._sorted=null,this._outlier=null,this.values=t.filter(t=>!Object(s.b)(t))}get sorted(){return null===this._sorted&&(this._sorted=this.values.slice().sort(o.ascending)),this._sorted}map(t){return this.scale?this.scale.apply(t):t}get min(){return this.map(Math.min(...this.values))}get max(){return this.map(Math.max(...this.values))}get median(){return this.map(Object(o.median)(this.sorted))}get q1(){return this.map(Object(o.quantile)(this.sorted,.25))}get q3(){return this.map(Object(o.quantile)(this.sorted,.75))}get mean(){return this.map(Object(o.mean)(this.values))}get outlier(){if(this._outlier)return this._outlier;const t=Object(o.quantile)(this.sorted,.25),e=Object(o.quantile)(this.sorted,.75),r=e-t,i=t-1.5*r,n=e+1.5*r;return this._outlier=this.sorted.filter(t=>(t<i||t>n)&&!Object(s.b)(t)),this.scale&&(this._outlier=this._outlier.map(t=>this.scale.apply(t))),this._outlier}}e.c=u},function(e,r){e.exports=t},function(t,e,r){"use strict";function i(t,e,r,i=0,n=0){const s=(e-i-10)/2,a=(r-n-3)/2;t.fillStyle="#c1c1c1",t.fillRect(s,a,10,3)}e.c=i,e.b=function(t,e,r){const i=e.isMissing(r.v,r.dataIndex);return t.classList.toggle("lu-missing",i),i},e.a=function(t,e,r,n,s=0,a=0){const o=e.isMissing(r.v,r.dataIndex);return o&&i(t,e.getWidth(),n,s,a),o}},function(t,e,r){"use strict";function i(t){return void 0===t||null==t||"number"==typeof t&&isNaN(t)||""===t||"NA"===t||"string"==typeof t&&"na"===t.toLowerCase()||t instanceof Array&&t.every(t=>i(t))}e.b=i,e.c=function(t){return null===t||void 0===t||isNaN(t)};e.a=-1},function(t,e,r){"use strict";function i(t){if(27===t.which&&s.visiblePopups.length>0){const t=s.visiblePopups[s.visiblePopups.length-1];s.removePopup(t)}}e.b=function(t){return(e,r)=>{const i=e[t],n=r[t];return i.toLowerCase().localeCompare(n.toLowerCase())}};var n=r(58);class s{constructor(t,e){this.attachment=t,this.title=e}static removePopup(t){const e=s.visiblePopups.indexOf(t);e>-1&&t&&(s.visiblePopups.splice(e,1),t.remove()),0===s.visiblePopups.length&&t.ownerDocument.removeEventListener("keyup",i)}static removeAllPopups(){0!==s.visiblePopups.length&&s.visiblePopups.splice(0,s.visiblePopups.length).forEach(t=>{t.ownerDocument.removeEventListener("keyup",i),t.remove()})}static registerPopup(t,e,r,n=!0){r&&s.removeAllPopups(),0===s.visiblePopups.length&&t.ownerDocument.addEventListener("keyup",i);const a=()=>{s.visiblePopups[s.visiblePopups.length-1]===t&&(t.removeEventListener("mouseleave",a),e.destroy(),s.removePopup(t))};n&&t.addEventListener("mouseleave",a),s.visiblePopups.push(t)}makeMenuPopup(t){const e=this.attachment.ownerDocument.body;e.insertAdjacentHTML("beforeend",`<div class="lu-popup2 lu-popup-menu">${t}</div>`);const r=e.lastElementChild,i=new n.a(this.attachment,r,{placement:"bottom-start",removeOnDestroy:!0});return s.registerPopup(r,i,!0),this.hidePopupOnClickOutside(r),r}makePopup(t,e=!0){const r=this.attachment.ownerDocument.body;r.insertAdjacentHTML("beforeend",`<div class="lu-popup2">${this.dialogForm(t)}</div>`);const i=r.lastElementChild,a=i.querySelector("input[autofocus]");a&&a.focus();const o=new n.a(this.attachment,i,{placement:"bottom-start",removeOnDestroy:!0});return s.registerPopup(i,o,!1,e),this.hidePopupOnClickOutside(i),i}makeChoosePopup(t){const e=this.attachment.ownerDocument.body;e.insertAdjacentHTML("beforeend",`<div class="lu-popup2 chooser">${this.basicDialog(t)}</div>`);const r=e.lastElementChild,i=new n.a(this.attachment,r,{placement:"bottom-start",removeOnDestroy:!0});return s.registerPopup(r,i,!1),this.hidePopupOnClickOutside(r),r}dialogForm(t,e=!0){return`<span style="font-weight: bold" class="lu-popup-title">${this.title}</span>\n            <form onsubmit="return false">\n                ${t}\n                ${e?'<button type = "submit" class="ok fa fa-check" title="ok"></button><button type = "reset" class="cancel fa fa-times" title="cancel"></button><button type = "button" class="reset fa fa-undo" title="reset"></button></form>':""}\n            </form>`}onButton(t,e){t.querySelector(".cancel").addEventListener("click",r=>{e.cancel(),s.removePopup(t),r.stopPropagation(),r.preventDefault()}),t.querySelector(".reset").addEventListener("click",t=>{e.reset(),t.stopPropagation(),t.preventDefault()}),t.querySelector(".ok").addEventListener("click",t=>{e.submit()&&s.removeAllPopups(),t.stopPropagation(),t.preventDefault()})}basicDialog(t){return`<span style="font-weight: bold" class="lu-popup-title">${this.title}</span>\n            <form onsubmit="return false">\n                ${t}\n            </form>`}hidePopupOnClickOutside(t){const e=this.attachment.ownerDocument.body;t.addEventListener("click",t=>{t.stopPropagation()});const r=()=>{s.removeAllPopups(),e.removeEventListener("click",r)};e.addEventListener("click",r)}}s.visiblePopups=[],e.a=s},function(t,e,r){"use strict";var i=r(1);class n extends i.a{constructor(t,e){super(t,e),this.accessor=e.accessor||(()=>null),this.loaded=!0!==e.lazyLoaded}getLabel(t,e){return this.isLoaded()?String(this.getValue(t,e)):""}getRaw(t,e){return this.isLoaded()?this.accessor(t,e,this.id,this.desc,this.findMyRanker()):null}getValue(t,e){return this.getRaw(t,e)}isLoaded(){return this.loaded}setLoaded(t){this.loaded!==t&&this.fire([i.a.EVENT_DIRTY_HEADER,i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY],this.loaded,this.loaded=t)}getRendererType(){return this.isLoaded()?super.getRendererType():n.RENDERER_LOADING}dump(t){const e=super.dump(t);return e.loaded=this.loaded,this.loaded||e.rendererType!==n.RENDERER_LOADING||delete e.rendererType,e}restore(t,e){void 0!==t.loaded&&(this.loaded=t.loaded),super.restore(t,e)}}e.a=n,n.RENDERER_LOADING="loading"},function(t,e,r){"use strict";function i(t="linear"){switch(t){case"log":return o.scale.log().clamp(!0);case"sqrt":return o.scale.sqrt().clamp(!0);case"pow1.1":return o.scale.pow().exponent(1.1).clamp(!0);case"pow2":return o.scale.pow().exponent(2).clamp(!0);case"pow3":return o.scale.pow().exponent(3).clamp(!0);default:return o.scale.linear().clamp(!0)}}function n(t,e){return t.length===e.length&&t.every((t,r)=>Object(h.t)(t,e[r],1e-4))}function s(t,e){return"log"===e&&0===t[0]&&(t[0]=1e-7),t}function a(t){if("script"===t.type){const e=new g;return e.restore(t),e}const e=new p;return e.restore(t),e}e.c=a,e.e=function(t){return"function"==typeof t.getMapping};var o=r(3),l=(r.n(o),r(1)),c=r(7),h=r(0),d=r(5),u=r(2);class p{constructor(t=[0,1],e="linear",r=[0,1]){this.type=e,this.s=i(e).domain(s(t,this.type)).range(r)}get domain(){return this.s.domain()}set domain(t){this.s.domain(s(t,this.type))}get range(){return this.s.range()}set range(t){this.s.range(t)}getRange(t){return[t(this.invert(0)),t(this.invert(1))]}apply(t){return this.s(t)}invert(t){return this.s.invert(t)}get scaleType(){return this.type}dump(){return{type:this.type,domain:this.domain,range:this.range}}eq(t){if(!(t instanceof p))return!1;const e=t;return e.type===this.type&&n(this.domain,e.domain)&&n(this.range,e.range)}restore(t){this.type=t.type,this.s=i(t.type).domain(t.domain).range(t.range)}clone(){return new p(this.domain,this.type,this.range)}}e.a=p;class g{constructor(t=[0,1],e="return this.linear(value,this.value_min,this.value_max);"){this.domain=t,this._code=e,this.f=new Function("value",e)}get code(){return this._code}set code(t){this._code!==t&&(this._code=t,this.f=new Function("value",t))}getRange(){return["?","?"]}apply(t){const e=this.domain[0],r=this.domain[this.domain.length-1],i=this.f.call({value_min:e,value_max:r,value_range:r-e,value_domain:this.domain.slice(),linear:(t,e,r)=>(t-e)/(r-e)},t);return"number"==typeof i?Math.max(Math.min(i,1),0):NaN}dump(){return{type:"script",code:this.code}}eq(t){if(!(t instanceof g))return!1;return t.code===this.code}restore(t){this.code=t.code}clone(){return new g(this.domain,this.code)}}e.b=g;class f extends c.a{constructor(t,e){super(t,e),this.missingValue=NaN,this.currentFilter=Object(u.l)(),this.numberFormat=Object(o.format)(".2f"),this.currentStratifyThresholds=[],this.groupSortMethod=u.a.median,e.map?this.mapping=a(e.map):e.domain&&(this.mapping=new p(e.domain,"linear",e.range||[0,1])),this.original=this.mapping.clone(),e.numberFormat&&(this.numberFormat=Object(o.format)(e.numberFormat)),void 0!==e.missingValue&&(this.missingValue=e.missingValue),this.setGroupRenderer("boxplot")}dump(t){const e=super.dump(t);return e.map=this.mapping.dump(),e.filter=Object(u.j)(this.currentFilter,Object(u.l)())?null:this.currentFilter,e.missingValue=this.missingValue,e.groupSortMethod=this.groupSortMethod,this.currentStratifyThresholds&&(e.stratifyThreshholds=this.currentStratifyThresholds),e}restore(t,e){super.restore(t,e),t.map?this.mapping=a(t.map):t.domain&&(this.mapping=new p(t.domain,"linear",t.range||[0,1])),t.groupSortMethod&&(this.groupSortMethod=t.groupSortMethod),t.filter&&(this.currentFilter=Object(u.n)(t.filter)),t.stratifyThreshholds&&(this.currentStratifyThresholds=t.stratifyThresholds),void 0!==t.missingValue&&(this.missingValue=t.missingValue),t.numberFormat&&(this.numberFormat=Object(o.format)(t.numberFormat))}createEventList(){return super.createEventList().concat([f.EVENT_MAPPING_CHANGED])}getLabel(t,e){if(this.desc.numberFormat){const r=this.getRawValue(t,e);return isNaN(r)?"NaN":isFinite(r)?this.numberFormat(r):r.toString()}const r=super.getValue(t,e);return"number"==typeof r?this.numberFormat(+r):String(r)}getRange(){return this.mapping.getRange(this.numberFormat)}getRawValue(t,e,r=this.missingValue){const i=super.getValue(t,e);return Object(d.b)(i)?r:+i}isMissing(t,e){return Object(d.b)(super.getValue(t,e))}getValue(t,e){const r=this.getRawValue(t,e);return isNaN(r)?r:this.mapping.apply(r)}getNumber(t,e){return this.getValue(t,e)}getRawNumber(t,e,r=this.missingValue){return this.getRawValue(t,e,r)}compare(t,e,r,i){return Object(u.m)(this.getNumber(t,r),this.getNumber(e,i),this.isMissing(t,r),this.isMissing(e,i))}groupCompare(t,e){return Object(u.g)(t.rows,e.rows,this,this.groupSortMethod)}getOriginalMapping(){return this.original.clone()}getMapping(){return this.mapping.clone()}setMapping(t){this.mapping.eq(t)||this.fire([f.EVENT_MAPPING_CHANGED,l.a.EVENT_DIRTY_VALUES,l.a.EVENT_DIRTY],this.mapping.clone(),this.mapping=t)}isFiltered(){return this.currentFilter.filterMissing||isFinite(this.currentFilter.min)||isFinite(this.currentFilter.max)}get filterMin(){return this.currentFilter.min}get filterMax(){return this.currentFilter.max}get filterMissing(){return this.currentFilter.filterMissing}getFilter(){return{min:this.currentFilter.min,max:this.currentFilter.max,filterMissing:this.currentFilter.filterMissing}}set filterMin(t){const e=this.getFilter();this.currentFilter.min=Object(d.c)(t)?-1/0:t,this.fire([l.a.EVENT_FILTER_CHANGED,l.a.EVENT_DIRTY_VALUES,l.a.EVENT_DIRTY],e,this.getFilter())}set filterMax(t){const e=this.getFilter();this.currentFilter.max=Object(d.c)(t)?1/0:t,this.fire([l.a.EVENT_FILTER_CHANGED,l.a.EVENT_DIRTY_VALUES,l.a.EVENT_DIRTY],e,this.getFilter())}set filterMissing(t){const e=this.getFilter();this.currentFilter.filterMissing=t,this.fire([l.a.EVENT_FILTER_CHANGED,l.a.EVENT_DIRTY_VALUES,l.a.EVENT_DIRTY],e,this.getFilter())}setFilter(t={min:-1/0,max:1/0,filterMissing:!1}){if(Object(u.j)(t,this.currentFilter))return;const e=this.getFilter();this.currentFilter.min=Object(d.c)(t.min)?-1/0:t.min,this.currentFilter.max=Object(d.c)(t.max)?1/0:t.max,this.currentFilter.filterMissing=t.filterMissing,this.fire([l.a.EVENT_FILTER_CHANGED,l.a.EVENT_DIRTY_VALUES,l.a.EVENT_DIRTY],e,this.getFilter())}filter(t,e){if(!this.isFiltered())return!0;const r=this.getRawNumber(t,e,NaN);if(isNaN(r))return!this.filterMissing;const i=+r;return!(isFinite(this.currentFilter.min)&&i<this.currentFilter.min||isFinite(this.currentFilter.max)&&i>this.currentFilter.max)}getStratifyThresholds(){return this.currentStratifyThresholds.slice()}setStratifyThresholds(t){if(Object(h.j)(this.currentStratifyThresholds,t))return;const e=this.getStratifyThresholds();this.currentStratifyThresholds=t.slice(),this.fire([l.a.EVENT_GROUPING_CHANGED,l.a.EVENT_DIRTY_VALUES,l.a.EVENT_DIRTY],e,t)}group(t,e){if(0===this.currentStratifyThresholds.length)return super.group(t,e);const r=this.getRawNumber(t,e);switch(this.currentStratifyThresholds.findIndex(t=>t<=r)){case-1:return{name:`${this.label} > ${this.currentStratifyThresholds[this.currentStratifyThresholds.length-1]}`,color:"gray"};case 0:return{name:`${this.label} <= ${this.currentStratifyThresholds[0]}`,color:"gray"};default:return{name:`${this.currentStratifyThresholds[e-1]} <= ${this.label} <= ${this.currentStratifyThresholds[e]}`,color:"gray"}}}getSortMethod(){return this.groupSortMethod}setSortMethod(t){this.groupSortMethod!==t&&(this.fire([l.a.EVENT_SORTMETHOD_CHANGED],this.groupSortMethod,this.groupSortMethod=t),this.isGroupSortedByMe().asc||this.toggleMyGroupSorting())}}e.d=f,f.EVENT_MAPPING_CHANGED="mappingChanged"},function(t,e,r){"use strict";var i=r(1),n=r(7);class s extends n.a{constructor(t,e){super(t,e),this.currentFilter=null,this._alignment="left",this.setWidthImpl(200),this._alignment=e.alignment||"left"}get alignment(){return this._alignment}getValue(t,e){const r=super.getValue(t,e);return void 0===r||null==r?"":String(r)}dump(t){const e=super.dump(t);return this.currentFilter instanceof RegExp?e.filter=`REGEX:${this.currentFilter.source}`:e.filter=this.currentFilter,e.alignment=this.alignment,e}restore(t,e){super.restore(t,e),t.filter&&"REGEX:"===t.filter.slice(0,6)?this.currentFilter=new RegExp(t.filter.slice(6)):this.currentFilter=t.filter||null,this._alignment=t.alignment||this._alignment}isFiltered(){return null!=this.currentFilter}filter(t,e){if(!this.isFiltered())return!0;const r=this.getLabel(t,e),i=this.currentFilter;return i===s.FILTER_MISSING?null!=r&&""!==r.trim():"string"==typeof i&&i.length>0?""!==r&&r.toLowerCase().indexOf(i.toLowerCase())>=0:!(i instanceof RegExp)||""!==r&&i.test(r)}getFilter(){return this.currentFilter}setFilter(t){""===t&&(t=null),this.currentFilter!==t&&this.fire([i.a.EVENT_FILTER_CHANGED,i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY],this.currentFilter,this.currentFilter=t)}compare(t,e,r,i){const n=this.getValue(t,r),s=this.getValue(e,i);return""===n?""===s?0:1:""===s?-1:n.toLowerCase().localeCompare(s.toLowerCase())}}e.a=s,s.FILTER_MISSING="__FILTER_MISSING"},function(t,e,r){"use strict";e.b=function(t){return t instanceof n.a&&"function"==typeof t.getCategories||!(t instanceof n.a)&&null!=t.type.match(/(categorical|ordinal|hierarchy)/)};var i=r(3),n=(r.n(i),r(1)),s=r(7),a=r(9),o=r(5);class l extends s.a{constructor(t,e){super(t,e),this.colors=i.scale.category10(),this.catLabels=new Map,this.currentFilter=null,this.separator=";",this.separator=e.separator||this.separator,this.initCategories(e)}initCategories(t){if(!t.categories)return;const e=[],r=this.colors.range().slice(),i=new Map;t.categories.forEach((t,n)=>{"string"!=typeof t?(e.push(t.name||t.value),t.label&&i.set(t.name,t.label),t.color&&(r[n]=t.color)):e.push(t)}),this.catLabels=i,this.colors.domain(e).range(r)}get categories(){return this.colors.domain()}get categoryColors(){return this.colors.range()}get categoryLabels(){return null===this.catLabels||0===this.catLabels.size?this.categories:this.categories.map(t=>this.catLabels.has(t)?this.catLabels.get(t):t)}getLabel(t,e){return null===this.catLabels||0===this.catLabels.size?a.a.prototype.getValue.call(this,t,e):this.getLabels(t,e).join(this.separator)}getFirstLabel(t,e){const r=this.getLabels(t,e);return r.length>0?r[0]:null}getLabels(t,e){const r=a.a.prototype.getValue.call(this,t,e);return(t=>null===this.catLabels||0===this.catLabels.size?t:t.map(t=>this.catLabels.has(t)?this.catLabels.get(t):t))(r?r.split(this.separator):[])}getValue(t,e){const r=this.getValues(t,e);return r.length>0?r[0]:null}getValues(t,e){const r=a.a.prototype.getValue.call(this,t,e);return r?r.split(this.separator):[]}isMissing(t,e){const r=this.getValues(t,e);return!r||0===r.length}getCategories(t,e){return this.getValues(t,e)}getColor(t,e){const r=this.getValue(t,e);return null===r||""===r?null:this.colors(r)}getColors(t,e){return this.getCategories(t,e).map(this.colors)}dump(t){const e=super.dump(t);return e.filter=this.currentFilter,e.colors={domain:this.colors.domain(),range:this.colors.range(),separator:this.separator},null!==this.catLabels&&0!==this.catLabels.size&&(e.labels=Array.from(this.catLabels.entries())),e}restore(t,e){if(super.restore(t,e),"filter"in t){const e=t.filter;"string"==typeof e||Array.isArray(e)?this.currentFilter={filter:e,filterMissing:!1}:this.currentFilter=e}else this.currentFilter=null;t.colors&&this.colors.domain(t.colors.domain).range(t.colors.range),Array.isArray(t.labels)&&(this.catLabels=new Map,t.labels.forEach(t=>this.catLabels.set(t.key,t.value))),this.separator=t.separator||this.separator}isFiltered(){return null!=this.currentFilter}static filter(t,e){if(!t)return!0;if(null==e&&t.filterMissing)return!1;const r=t.filter;return Array.isArray(r)?r.indexOf(e)>=0:"string"==typeof r&&r.length>0?null!=e&&e.toLowerCase().indexOf(r.toLowerCase())>=0:!(r instanceof RegExp)||null!=e&&r.test(e)}filter(t,e){if(!this.isFiltered())return!0;const r=this.getCategories(t,e);return(!this.currentFilter.filterMissing||0!==r.length)&&r.every(t=>l.filter(this.currentFilter,t))}getFilter(){return this.currentFilter}setFilter(t){(function(t,e){return t===e||null!==t&&null!==e&&t.filterMissing===e.filterMissing&&typeof t.filter==typeof e.filter&&(Array.isArray(t.filter)?function(t,e){const r=null!=t?t.length:0,i=null!=e?e.length:0;return r===i&&(0===r||t.every((t,r)=>t===e[r]))}(t.filter,e.filter):String(t.filter)===String(e.filter))})(this.currentFilter,t)||this.fire([n.a.EVENT_FILTER_CHANGED,n.a.EVENT_DIRTY_VALUES,n.a.EVENT_DIRTY],this.currentFilter,this.currentFilter=t)}compare(t,e,r,i){const n=this.getValues(t,r),s=this.getValues(e,i);if(0===n.length)return 0===s.length?0:o.a;if(0===s.length)return-1*o.a;for(let t=0;t<Math.min(n.length,s.length);++t){const e=n[t].localeCompare(s[t]);if(0!==e)return e}return n.length-s.length}group(t,e){const r=this.getValue(t,e);if(!r)return super.group(t,e);return{name:r,color:this.getColor(t,e)}}getGroupRenderer(){const t=super.getGroupRenderer();return t===this.desc.type&&this.isGroupedBy()>=0?"catcolorshifted":t}}e.a=l},function(t,e,r){"use strict";e.b=function(t){return"function"==typeof t.getCollapsed};var i=r(1),n=r(2),s=r(7),a=r(0);class o extends i.a{constructor(t,e){super(t,e),this._children=[]}assignNewId(t){super.assignNewId(t),this._children.forEach(e=>e.assignNewId(t))}get children(){return this._children.slice()}get length(){return this._children.length}flatten(t,e,r=0,n=0){let s=0;return(0===r||r<=i.a.FLAT_ALL_COLUMNS)&&(s=this.getWidth(),t.push({col:this,offset:e,width:s}),0===r)?s:(this._children.forEach(s=>{(!s.isHidden()||r<=i.a.FLAT_ALL_COLUMNS)&&s.flatten(t,e,r-1,n)}),s)}dump(t){const e=super.dump(t);return e.children=this._children.map(e=>e.dump(t)),e}restore(t,e){t.children.map(t=>{const r=e(t);r&&this.push(r)}),super.restore(t,e)}insert(t,e){return!Object(n.h)(t)&&this.canJustAddNumbers?null:(this._children.splice(e,0,t),this.insertImpl(t,e))}move(t,e){if(t.parent!==this)return null;const r=this._children.indexOf(t);return e===r?t:(this._children.splice(r,1),this._children.splice(r<e?e-1:e,0,t),this.moveImpl(t,e,r))}insertImpl(t,e){return t.parent=this,this.forward(t,...Object(a.u)(".combine",i.a.EVENT_DIRTY_HEADER,i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY,i.a.EVENT_FILTER_CHANGED)),this.fire([i.a.EVENT_ADD_COLUMN,i.a.EVENT_DIRTY_HEADER,i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY],t,e),t}moveImpl(t,e,r){return this.fire([i.a.EVENT_MOVE_COLUMN,i.a.EVENT_DIRTY_HEADER,i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY],t,e,r),t}push(t){return this.insert(t,this._children.length)}at(t){return this._children[t]}indexOf(t){return this._children.indexOf(t)}insertAfter(t,e){const r=this.indexOf(e);return r<0?null:this.insert(t,r+1)}moveAfter(t,e){const r=this.indexOf(e);return r<0?null:this.move(t,r+1)}remove(t){const e=this._children.indexOf(t);return!(e<0)&&(this._children.splice(e,1),this.removeImpl(t))}removeImpl(t){return t.parent=null,this.unforward(t,...Object(a.u)(".combine",i.a.EVENT_DIRTY_HEADER,i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY,i.a.EVENT_FILTER_CHANGED)),this.fire([i.a.EVENT_REMOVE_COLUMN,i.a.EVENT_DIRTY_HEADER,i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY],t),!0}getColor(t,e){return this.color}isFiltered(){return this._children.some(t=>t.isFiltered())}filter(t,e){return this._children.every(r=>r.filter(t,e))}isLoaded(){return this._children.every(t=>!(t instanceof s.a||t instanceof o)||t.isLoaded())}toSortingDesc(t){return this._children.map(e=>e.toSortingDesc(t))}get canJustAddNumbers(){return!1}}e.a=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defineColumn=function(t,e={}){class r extends i.a{constructor(t,e){super(t,e),"function"==typeof this.init&&this.init.apply(this,[].slice.apply(arguments))}init(){}}return r.prototype.toString=(()=>t),r.prototype=Object.assign(r.prototype,e),r},e.models=function(){return{number:n.d,date:N.a,image:v.a,numbers:_.a,string:s.a,link:v.a,stack:a.b,rank:p.b,boolean:l.a,booleans:y.a,categorical:c.a,ordinal:m.a,actions:b.b,annotate:o.a,selection:g.b,max:d.b,min:h.b,mean:u.b,script:f.b,nested:E.b,boxplot:T.a,aggregate:x.b,hierarchy:C.a,imposition:O.b}};var i=r(7),n=r(8),s=r(9),a=r(19),o=r(45),l=r(46),c=r(10),h=r(47),d=r(48),u=r(49),p=r(25),g=r(20),f=r(27),m=r(50),E=r(35),b=r(36),v=r(28),y=r(71),_=r(51),T=r(26),x=r(29),C=r(37),N=r(72),O=r(30),R=r(1);r.d(e,"Column",function(){return R.a});var D=r(11);r.d(e,"CompositeColumn",function(){return D.a}),r.d(e,"createMappingFunction",function(){return n.c}),r.d(e,"ScaleMappingFunction",function(){return n.a}),r.d(e,"ScriptMappingFunction",function(){return n.b});var A=r(2);r.d(e,"isNumberColumn",function(){return A.h}),r.d(e,"isCategoricalColumn",function(){return c.b});var L=r(13);r.d(e,"Ranking",function(){return L.a}),r.d(e,"isSupportType",function(){return L.b}),r.d(e,"createMinDesc",function(){return h.a}),r.d(e,"createMaxDesc",function(){return d.a}),r.d(e,"createMeanDesc",function(){return u.a}),r.d(e,"createRankDesc",function(){return p.a}),r.d(e,"createSelectionDesc",function(){return g.a}),r.d(e,"createScriptDesc",function(){return f.a}),r.d(e,"createNestedDesc",function(){return E.a}),r.d(e,"createStackDesc",function(){return a.a}),r.d(e,"createActionDesc",function(){return b.a}),r.d(e,"createAggregateDesc",function(){return x.a}),r.d(e,"createImpositionDesc",function(){return O.a})},function(t,e,r){"use strict";function i(t){return["rank","selection","actions","aggregate"].indexOf(t.type)>=0}e.b=i;var n=r(1),s=r(9),a=r(24),o=r(0);class l extends o.a{constructor(t,e=1,r=1){super(),this.id=t,this.maxSortCriteria=e,this.maxGroupColumns=r,this.sortCriteria=[],this.groupSortCriteria=[],this.groupColumns=[],this.columns=[],this.comparator=((t,e,r,i)=>{if(0===this.sortCriteria.length)return 0;for(const n of this.sortCriteria){const s=n.col.compare(t,e,r,i);if(0!==s)return n.asc?s:-s}return r-i}),this.groupComparator=((t,e)=>{if(0===this.groupSortCriteria.length)return t.name.toLowerCase().localeCompare(e.name.toLowerCase());for(const r of this.groupSortCriteria){const i=r.col.groupCompare(t,e);if(0!==i)return r.asc?i:-i}return t.name.localeCompare(e.name)}),this.grouper=((t,e)=>{const r=this.groupColumns;switch(r.length){case 0:return a.a;case 1:return r[0].group(t,e);default:const i=r.map(r=>r.group(t,e));return Object(a.b)(i)}}),this.dirtyOrder=(()=>{this.fire([l.EVENT_DIRTY_ORDER,l.EVENT_DIRTY_VALUES,l.EVENT_DIRTY],this.getSortCriteria())}),this.groups=[Object.assign({order:[]},a.a)],this.id=Object(n.b)(t)}createEventList(){return super.createEventList().concat([l.EVENT_WIDTH_CHANGED,l.EVENT_FILTER_CHANGED,l.EVENT_LABEL_CHANGED,l.EVENT_GROUPS_CHANGED,l.EVENT_ADD_COLUMN,l.EVENT_REMOVE_COLUMN,l.EVENT_GROUP_CRITERIA_CHANGED,l.EVENT_MOVE_COLUMN,l.EVENT_DIRTY,l.EVENT_DIRTY_HEADER,l.EVENT_DIRTY_VALUES,l.EVENT_GROUP_SORT_CRITERIA_CHANGED,l.EVENT_SORT_CRITERIA_CHANGED,l.EVENT_SORT_CRITERIAS_CHANGED,l.EVENT_DIRTY_ORDER,l.EVENT_ORDER_CHANGED])}assignNewId(t){this.id=Object(n.b)(t()),this.columns.forEach(e=>e.assignNewId(t))}setOrder(t){this.setGroups([Object.assign({order:t},a.a)])}setGroups(t){const e=this.getOrder(),r=this.groups;this.groups=t,this.fire([l.EVENT_ORDER_CHANGED,l.EVENT_GROUPS_CHANGED,l.EVENT_DIRTY_VALUES,l.EVENT_DIRTY],e,this.getOrder(),r,t)}getOrder(){switch(this.groups.length){case 0:return[];case 1:return this.groups[0].order;default:return[].concat(...this.groups.map(t=>t.order))}}getGroups(){return this.groups.slice()}dump(t){const e={};return e.columns=this.columns.map(e=>e.dump(t)),e.sortCriterias=this.sortCriteria.map(t=>({asc:t.asc,sortBy:t.col.id})),e.groupColumns=this.groupColumns.map(t=>t.id),e}restore(t,e){if(this.clear(),t.columns.map(t=>{const r=e(t);r&&this.push(r)}),t.sortColumn&&t.sortColumn.sortBy){const e=this.columns.filter(e=>e.id===t.sortColumn.sortBy);this.sortBy(0===e.length?null:e[0],t.sortColumn.asc)}if(t.groupColumns){const e=t.groupColumns.map(t=>this.columns.find(e=>e.id===t));this.groupBy(e)}const r=t=>t.map(t=>({asc:t.asc,col:this.columns.find(e=>e.id===t.sortBy)||null})).filter(t=>t.col);t.sortCriterias&&this.setSortCriteria(r(t.sortCriterias)),t.groupSortCriterias&&this.setGroupSortCriteria(r(t.groupSortCriterias))}flatten(t,e,r=0,i=0){let s=e;return(r>0||r<=n.a.FLAT_ALL_COLUMNS)&&this.columns.forEach(e=>{(!e.isHidden()||r<=n.a.FLAT_ALL_COLUMNS)&&(s+=e.flatten(t,s,r-1,i)+i)}),s-e}get primarySortCriteria(){return 0===this.sortCriteria.length?null:this.sortCriteria[0]}getSortCriteria(){const t=this.primarySortCriteria;return null===t?null:Object.assign({},t)}getSortCriterias(){return this.sortCriteria.map(t=>Object.assign({},t))}getGroupSortCriteria(){return this.groupSortCriteria.map(t=>Object.assign({},t))}toggleSorting(t){const e=this.primarySortCriteria;return e&&e.col===t?this.sortBy(t,!e.asc):this.sortBy(t)}toggleGrouping(t){const e=this.groupColumns.indexOf(t);if(e>=0){const t=this.groupColumns.slice();return t.splice(e,1),this.groupBy(t)}return this.groupBy([t].concat(this.groupColumns))}getGroupCriteria(){return this.groupColumns.slice()}setGroupCriteria(t){return this.groupBy(t)}sortBy(t,e=!1){if(null!==t&&t.findMyRanker()!==this)return!1;const r=this.primarySortCriteria;if(null===t&&null===r||r&&r.col===t&&r.asc===e)return!0;const i=this.getSortCriteria();if(t){const e=this.sortCriteria.findIndex(e=>e.col===t);if(e>=0)this.sortCriteria.splice(e,1);else if(this.sortCriteria.length===this.maxSortCriteria){const t=this.sortCriteria.pop();t.col.on(`${n.a.EVENT_DIRTY_VALUES}.order`,null),t.col.on(`${n.a.EVENT_SORTMETHOD_CHANGED}.order`,null)}}else this.sortCriteria.forEach(t=>{t.col.on(`${n.a.EVENT_DIRTY_VALUES}.order`,null),t.col.on(`${n.a.EVENT_SORTMETHOD_CHANGED}.order`,null)}),this.sortCriteria.splice(0,this.sortCriteria.length);return t&&(this.sortCriteria.unshift({col:t,asc:e}),t.on(`${n.a.EVENT_DIRTY_VALUES}.order`,this.dirtyOrder),t.on(`${n.a.EVENT_SORTMETHOD_CHANGED}.order`,this.dirtyOrder)),this.triggerResort(i),!0}groupBy(t){let e=Array.isArray(t)?t:t instanceof n.a?[t]:[];if(e.length>this.maxGroupColumns&&(e=e.slice(0,this.maxGroupColumns)),Object(o.j)(this.groupColumns,e))return!0;this.groupColumns.forEach(t=>{t.on(Object(o.u)(".group",n.a.EVENT_DIRTY_VALUES,n.a.EVENT_SORTMETHOD_CHANGED,n.a.EVENT_GROUPING_CHANGED),null)});const r=this.groupColumns.slice();return this.groupColumns.splice(0,this.groupColumns.length,...e),this.groupColumns.forEach(t=>{t.on(Object(o.u)(".group",n.a.EVENT_DIRTY_VALUES,n.a.EVENT_SORTMETHOD_CHANGED,n.a.EVENT_GROUPING_CHANGED),this.dirtyOrder)}),this.fire([l.EVENT_GROUP_CRITERIA_CHANGED,l.EVENT_DIRTY_ORDER,l.EVENT_DIRTY_HEADER,l.EVENT_DIRTY_VALUES,l.EVENT_DIRTY],r,this.getGroupCriteria()),!0}setSortCriteria(t){let e=Array.isArray(t)?t:[t];if(e.length>this.maxSortCriteria&&(e=e.slice(0,this.maxSortCriteria)),0===e.length)return this.sortBy(null);if(1===e.length)return this.sortBy(e[0].col,e[0].asc);const r=this.sortCriteria.slice();return r.forEach(t=>{t.col.on(`${n.a.EVENT_DIRTY_VALUES}.order`,null),t.col.on(`${n.a.EVENT_SORTMETHOD_CHANGED}.order`,null)}),e.forEach(t=>{t.col.on(`${n.a.EVENT_DIRTY_VALUES}.order`,this.dirtyOrder),t.col.on(`${n.a.EVENT_SORTMETHOD_CHANGED}.order`,this.dirtyOrder)}),this.sortCriteria.splice(0,this.sortCriteria.length,...e.slice()),this.triggerResort(r),!0}toggleGroupSorting(t){const e=this.groupSortCriteria[0],r=e&&e.col===t&&!e.asc;return this.setGroupSortCriteria({col:t,asc:r})}groupSortBy(t,e){return this.setGroupSortCriteria({col:t,asc:e})}setMaxSortCriteria(t){const e=this.maxSortCriteria;e!==t&&(this.maxSortCriteria=t,e<t||this.sortCriteria.length<t||this.setSortCriteria(this.sortCriteria.slice(0,t)))}getMaxSortCriteria(){return this.maxSortCriteria}setMaxGroupColumns(t){const e=this.maxGroupColumns;e!==t&&(this.maxGroupColumns=t,e<t||this.groupColumns.length<t||this.setGroupCriteria(this.groupColumns.slice(0,t)))}getMaxGroupColumns(){return this.maxGroupColumns}setGroupSortCriteria(t){let e=Array.isArray(t)?t:[t];return e.length>this.maxSortCriteria&&(e=e.slice(0,this.maxSortCriteria)),this.groupSortCriteria.forEach(t=>{t.col.on(`${n.a.EVENT_SORTMETHOD_CHANGED}.groupOrder`,null)}),e.forEach(t=>{t.col.on(`${n.a.EVENT_SORTMETHOD_CHANGED}.groupOrder`,this.dirtyOrder)}),this.groupSortCriteria.splice(0,this.groupSortCriteria.length,...e.slice()),this.triggerResort(this.sortCriteria.slice()),!0}triggerResort(t){const e=this.getSortCriterias(),r=Array.isArray(t)?t[0]:t,i=Array.isArray(t)?t:e;this.fire([l.EVENT_SORT_CRITERIA_CHANGED,l.EVENT_DIRTY_ORDER,l.EVENT_DIRTY_HEADER,l.EVENT_DIRTY_VALUES,l.EVENT_DIRTY],r,e[0]),this.fire(l.EVENT_SORT_CRITERIAS_CHANGED,i,e)}get children(){return this.columns.slice()}get length(){return this.columns.length}insert(t,e=this.columns.length){return this.columns.splice(e,0,t),t.parent=this,this.forward(t,...Object(o.u)(".ranking",n.a.EVENT_DIRTY_VALUES,n.a.EVENT_DIRTY_HEADER,n.a.EVENT_DIRTY,n.a.EVENT_FILTER_CHANGED)),t.on(`${l.EVENT_FILTER_CHANGED}.order`,this.dirtyOrder),this.fire([l.EVENT_ADD_COLUMN,l.EVENT_DIRTY_HEADER,l.EVENT_DIRTY_VALUES,l.EVENT_DIRTY],t,e),0!==this.sortCriteria.length||i(t.desc)||this.sortBy(t,t instanceof s.a),t}move(t,e=this.columns.length){if(t.parent!==this)return console.error("invalid move operation: ",t),null;const r=this.columns.indexOf(t);return e===r?t:(this.columns.splice(r,1),this.columns.splice(r<e?e-1:e,0,t),this.fire([l.EVENT_MOVE_COLUMN,l.EVENT_DIRTY_HEADER,l.EVENT_DIRTY_VALUES,l.EVENT_DIRTY],t,e,r),t)}moveAfter(t,e){const r=this.columns.indexOf(e);return r<0?null:this.move(t,r+1)}get fqpath(){return""}findByPath(t){let e=this;const r=t.split("@").map(Number).slice(1);for(;r.length>0;){const t=r.shift();e=e.at(t)}return e}indexOf(t){return this.columns.indexOf(t)}at(t){return this.columns[t]}insertAfter(t,e){const r=this.columns.indexOf(e);return r<0?null:this.insert(t,r+1)}push(t){return this.insert(t)}remove(t){const e=this.columns.indexOf(t);if(e<0)return!1;this.unforward(t,...Object(o.u)(".ranking",n.a.EVENT_DIRTY_VALUES,n.a.EVENT_DIRTY_HEADER,n.a.EVENT_DIRTY,n.a.EVENT_FILTER_CHANGED));const r=this.sortCriteria.findIndex(e=>e.col===t);if(0===r)if(this.sortCriteria.shift(),this.sortCriteria.length>0)this.sortBy(this.sortCriteria[0].col);else{const e=this.columns.filter(e=>e!==t&&!i(e.desc))[0];this.sortBy(e||null)}else r>0&&(this.sortCriteria.splice(r,1),this.triggerResort(null));const s=this.groupColumns.indexOf(t);if(s>=0){const t=this.groupColumns.slice();t.splice(s,1),this.groupBy(t)}return t.parent=null,this.columns.splice(e,1),this.fire([l.EVENT_REMOVE_COLUMN,l.EVENT_DIRTY_HEADER,l.EVENT_DIRTY_VALUES,l.EVENT_DIRTY],t,e),!0}clear(){0!==this.columns.length&&(this.sortCriteria.splice(0,this.sortCriteria.length),this.groupColumns.forEach(t=>{t.on(`${n.a.EVENT_DIRTY_VALUES}.group`,null),t.on(`${n.a.EVENT_SORTMETHOD_CHANGED}.group`,null)}),this.groupColumns.splice(0,this.groupColumns.length),this.columns.forEach(t=>{this.unforward(t,...Object(o.u)(".ranking",n.a.EVENT_DIRTY_VALUES,n.a.EVENT_DIRTY_HEADER,n.a.EVENT_DIRTY,n.a.EVENT_FILTER_CHANGED)),t.parent=null}),this.columns.length=0,this.fire([l.EVENT_REMOVE_COLUMN,l.EVENT_DIRTY_HEADER,l.EVENT_DIRTY_VALUES,l.EVENT_DIRTY],null))}get flatColumns(){const t=[];return this.flatten(t,0,n.a.FLAT_ALL_COLUMNS),t.map(t=>t.col)}find(t){const e="string"==typeof t?e=>e.id===t:t,r=this.flatColumns;for(const t of r)if(e(t))return t;return null}toSortingDesc(t){const e=this.primarySortCriteria;if(null===e)return null;const r=(e=>null===e?null:e.toSortingDesc(t))(e.col);return null===r?null:{id:r,asc:e.asc}}isFiltered(){return this.columns.some(t=>t.isFiltered())}filter(t,e){return this.columns.every(r=>r.filter(t,e))}findMyRanker(){return this}get fqid(){return this.id}}e.a=l,l.EVENT_WIDTH_CHANGED=n.a.EVENT_WIDTH_CHANGED,l.EVENT_FILTER_CHANGED=n.a.EVENT_FILTER_CHANGED,l.EVENT_LABEL_CHANGED=n.a.EVENT_LABEL_CHANGED,l.EVENT_ADD_COLUMN=n.a.EVENT_ADD_COLUMN,l.EVENT_MOVE_COLUMN=n.a.EVENT_MOVE_COLUMN,l.EVENT_REMOVE_COLUMN=n.a.EVENT_REMOVE_COLUMN,l.EVENT_DIRTY=n.a.EVENT_DIRTY,l.EVENT_DIRTY_HEADER=n.a.EVENT_DIRTY_HEADER,l.EVENT_DIRTY_VALUES=n.a.EVENT_DIRTY_VALUES,l.EVENT_SORT_CRITERIA_CHANGED="sortCriteriaChanged",l.EVENT_GROUP_CRITERIA_CHANGED="groupCriteriaChanged",l.EVENT_GROUP_SORT_CRITERIA_CHANGED="groupSortCriteriaChanged",l.EVENT_SORT_CRITERIAS_CHANGED="sortCriteriasChanged",l.EVENT_DIRTY_ORDER="dirtyOrder",l.EVENT_ORDER_CHANGED="orderChanged",l.EVENT_GROUPS_CHANGED="groupsChanged"},function(t,e,r){"use strict";var i=r(12),n=r(13),s=r(25),a=r(0),o=r(24),l=r(29),c=r(53),h=r(54);class d extends a.a{constructor(t={}){super(),this.rankings=[],this.selection=new c.a,this.aggregations=new Set,this.uid=0,this.createHelper=(t=>{const e=this.fromDescRef(t.desc);let r=null;if(e&&e.type){this.fixDesc(t.desc);(r=new(0,this.columnTypes[e.type])(t.id,e)).restore(t,this.createHelper)}return r}),this.columnTypes=Object.assign(Object(i.models)(),t.columnTypes||{}),this.multiSelections=!1!==t.multiSelection,this.groupings=!0===t.grouping}createEventList(){return super.createEventList().concat([d.EVENT_ADD_COLUMN,d.EVENT_REMOVE_COLUMN,d.EVENT_ADD_RANKING,d.EVENT_REMOVE_RANKING,d.EVENT_DIRTY,d.EVENT_DIRTY_HEADER,d.EVENT_DIRTY_VALUES,d.EVENT_ORDER_CHANGED,d.EVENT_SELECTION_CHANGED,d.EVENT_ADD_DESC,d.EVENT_CLEAR_DESC,d.EVENT_JUMP_TO_NEAREST,d.EVENT_GROUP_AGGREGATION_CHANGED])}pushRanking(t){const e=this.cloneRanking(t);return this.groupings||e.setMaxGroupColumns(0),this.insertRanking(e),e}takeSnapshot(t){const e=this.cloneRanking();return e.push(this.clone(t)),this.insertRanking(e),e}insertRanking(t,e=this.rankings.length){this.rankings.splice(e,0,t),this.forward(t,...Object(a.u)(".provider",n.a.EVENT_ADD_COLUMN,n.a.EVENT_REMOVE_COLUMN,n.a.EVENT_DIRTY,n.a.EVENT_DIRTY_HEADER,n.a.EVENT_ORDER_CHANGED,n.a.EVENT_DIRTY_VALUES));const r=this;t.on(`${n.a.EVENT_DIRTY_ORDER}.provider`,Object(a.f)(function(){r.triggerReorder(this.source)},100)),this.fire([d.EVENT_ADD_RANKING,d.EVENT_DIRTY_HEADER,d.EVENT_DIRTY_VALUES,d.EVENT_DIRTY],t,e),this.triggerReorder(t)}triggerReorder(t){Promise.resolve(this.sort(t)).then(e=>{Object(o.d)(e),t.setGroups(e)})}removeRanking(t){const e=this.rankings.indexOf(t);return!(e<0)&&(this.unforward(t,...Object(a.u)(".provider",n.a.EVENT_ADD_COLUMN,n.a.EVENT_REMOVE_COLUMN,n.a.EVENT_DIRTY,n.a.EVENT_DIRTY_HEADER,n.a.EVENT_ORDER_CHANGED,n.a.EVENT_DIRTY_VALUES)),this.rankings.splice(e,1),t.on(`${n.a.EVENT_DIRTY_ORDER}.provider`,null),this.cleanUpRanking(t),this.fire([d.EVENT_REMOVE_RANKING,d.EVENT_DIRTY_HEADER,d.EVENT_DIRTY_VALUES,d.EVENT_DIRTY],t,e),!0)}clearRankings(){this.rankings.forEach(t=>{this.unforward(t,...Object(a.u)(".provider",n.a.EVENT_ADD_COLUMN,n.a.EVENT_REMOVE_COLUMN,n.a.EVENT_DIRTY,n.a.EVENT_DIRTY_HEADER,n.a.EVENT_ORDER_CHANGED,n.a.EVENT_DIRTY_VALUES)),t.on(`${n.a.EVENT_DIRTY_ORDER}.provider`,null),this.cleanUpRanking(t)}),this.rankings=[],this.fire([d.EVENT_REMOVE_RANKING,d.EVENT_DIRTY_HEADER,d.EVENT_DIRTY_VALUES,d.EVENT_DIRTY],null)}getRankings(){return this.rankings.slice()}getLastRanking(){return this.rankings[this.rankings.length-1]}ensureOneRanking(){0===this.rankings.length&&this.pushRanking()}cleanUpRanking(t){}push(t,e){const r=this.create(e);return r?(t.push(r),r):null}insert(t,e,r){const i=this.create(r);return i?(t.insert(i,e),i):null}nextId(){return`col${this.uid++}`}fixDesc(t){"rank"===t.type?t.accessor=this.rankAccessor.bind(this):"selection"===t.type?(t.accessor=((t,e)=>this.isSelected(e)),t.setter=((t,e,r)=>r?this.select(e):this.deselect(e))):"aggregate"===t.type&&(t.isAggregated=((t,e)=>this.isAggregated(t,e)),t.setAggregated=((t,e,r)=>this.setAggregated(t,e,r)))}create(t){this.fixDesc(t);const e=this.columnTypes[t.type];return e?new e(this.nextId(),t):null}clone(t){const e=this.dumpColumn(t);return this.restoreColumn(e)}restoreColumn(t){const e=t=>{const r=this.fromDescRef(t.desc),i=this.columnTypes[r.type];this.fixDesc(r);const n=new i("",r);return n.restore(t,e),n.assignNewId(this.nextId.bind(this)),n};return e(t)}find(t){const e="string"==typeof t?e=>e.id===t:t;for(const t of this.rankings){const r=t.find(e);if(r)return r}return null}dump(){return{uid:this.uid,selection:this.getSelection(),aggregations:Array.from(this.aggregations),rankings:this.rankings.map(t=>t.dump(this.toDescRef))}}dumpColumn(t){return t.dump(this.toDescRef)}toDescRef(t){return t}fromDescRef(t){return t}restoreRanking(t){const e=this.cloneRanking();e.restore(t,this.createHelper),e.children.some(t=>t instanceof s.b)||e.insert(this.create(Object(i.createRankDesc)()),0);const r=this.nextId.bind(this);return e.children.forEach(t=>t.assignNewId(r)),e}restore(t){this.clearRankings(),this.uid=t.uid||0,t.selection&&t.selection.forEach(t=>this.selection.add(t)),t.aggregations&&(this.aggregations.clear(),t.aggregations.forEach(t=>this.aggregations.add(t))),t.rankings&&t.rankings.forEach(t=>{const e=this.cloneRanking();e.restore(t,this.createHelper),e.children.some(t=>t instanceof s.b)||e.insert(this.create(Object(i.createRankDesc)()),0),this.insertRanking(e)}),t.layout&&Object.keys(t.layout).forEach(e=>{this.deriveRanking(t.layout[e])});const e=this.nextId.bind(this);this.rankings.forEach(t=>{t.children.forEach(t=>t.assignNewId(e))})}deriveDefault(){if(this.rankings.length>0)return;const t=this.pushRanking();this.getColumns().forEach(e=>{Object(i.isSupportType)(e)||this.push(t,e)})}deriveRanking(t){const e=this.cloneRanking();e.clear();const r=t=>{switch(t.type){case"rank":return this.create(Object(i.createRankDesc)());case"selection":return this.create(Object(i.createSelectionDesc)());case"aggregate":return this.create(Object(i.createAggregateDesc)());case"actions":const e=this.create(Object(i.createActionDesc)(t.label||"actions"));return e.restore(t,this.createHelper),e;case"stacked":const n=this.create(Object(i.createStackDesc)(t.label||"Combined"));return(t.children||[]).forEach(t=>{const e=r(t);e&&n.push(e)}),n;default:{const e=this.findDesc(t.column);if(e){const r=this.create(e);return t.label=t.label||e.label||e.column,r&&r.restore(t,this.createHelper),r}return null}}};return t.forEach(t=>{const i=r(t);i&&e.push(i)}),e.children.some(t=>t instanceof s.b)||e.insert(this.create(Object(i.createRankDesc)()),0),this.insertRanking(e),e}isAggregated(t,e){let r=e;for(;r;){const e=`${t.id}@${Object(o.c)(r)}`;if(this.aggregations.has(e))return!0;r=r.parent}return!1}setAggregated(t,e,r){const i=`${t.id}@${Object(o.c)(e)}`;r!==this.aggregations.has(i)&&(r?this.aggregations.add(i):this.aggregations.delete(i),this.fire([d.EVENT_GROUP_AGGREGATION_CHANGED,d.EVENT_DIRTY_VALUES,d.EVENT_DIRTY],t,e,r))}aggregateAllOf(t,e){const r=t.getGroups();r.forEach(r=>{const i=`${t.id}@${Object(o.c)(r)}`;e?this.aggregations.add(i):this.aggregations.delete(i)}),this.fire([d.EVENT_GROUP_AGGREGATION_CHANGED,d.EVENT_DIRTY_VALUES,d.EVENT_DIRTY],t,r,e)}isSelected(t){return this.selection.has(t)}select(t){this.selection.has(t)||(!this.multiSelections&&this.selection.size>0&&this.selection.clear(),this.selection.add(t),this.fire(d.EVENT_SELECTION_CHANGED,this.getSelection()))}jumpToNearest(t){0!==t.length&&this.fire(d.EVENT_JUMP_TO_NEAREST,t)}selectAll(t){t.every(t=>this.selection.has(t))||(this.multiSelections||(this.selection.clear(),t=t.slice(0,1)),t.forEach(t=>{this.selection.add(t)}),this.fire(d.EVENT_SELECTION_CHANGED,this.getSelection()))}selectAllOf(t){this.setSelection(t.getOrder())}setSelection(t){if(0===t.length)return this.clearSelection();this.selection.size===t.length&&t.every(t=>this.selection.has(t))||(this.selection.clear(),this.selectAll(t))}toggleSelection(t,e=!1){return this.isSelected(t)?(e?this.deselect(t):this.clearSelection(),!1):(e?this.select(t):this.setSelection([t]),!0)}deselect(t){this.selection.has(t)&&(this.selection.delete(t),this.fire(d.EVENT_SELECTION_CHANGED,this.getSelection()))}selectedRows(){return 0===this.selection.size?Promise.resolve([]):this.view(this.getSelection())}getSelection(){return Array.from(this.selection)}clearSelection(){0!==this.selection.size&&(this.selection.clear(),this.fire(d.EVENT_SELECTION_CHANGED,[],!1))}exportTable(t,e={}){return Promise.resolve(this.view(t.getOrder())).then(r=>Object(h.b)(t,r,e))}}d.EVENT_SELECTION_CHANGED="selectionChanged",d.EVENT_ADD_COLUMN=n.a.EVENT_ADD_COLUMN,d.EVENT_REMOVE_COLUMN=n.a.EVENT_REMOVE_COLUMN,d.EVENT_ADD_RANKING="addRanking",d.EVENT_REMOVE_RANKING="removeRanking",d.EVENT_DIRTY=n.a.EVENT_DIRTY,d.EVENT_DIRTY_HEADER=n.a.EVENT_DIRTY_HEADER,d.EVENT_DIRTY_VALUES=n.a.EVENT_DIRTY_VALUES,d.EVENT_ORDER_CHANGED=n.a.EVENT_ORDER_CHANGED,d.EVENT_ADD_DESC="addDesc",d.EVENT_CLEAR_DESC="clearDesc",d.EVENT_JUMP_TO_NEAREST="jumpToNearest",d.EVENT_GROUP_AGGREGATION_CHANGED=l.b.EVENT_AGGREGATE,e.a=d},function(t,e,r){"use strict";var i=r(3),n=(r.n(i),r(11)),s=r(8),a=r(5);class o extends n.a{constructor(t,e){super(t,e),this.missingValue=NaN,this.numberFormat=Object(i.format)(".3n"),e.numberFormat&&(this.numberFormat=Object(i.format)(e.numberFormat)),void 0!==e.missingValue&&(this.missingValue=e.missingValue),this.setDefaultRenderer("interleaving"),this.setDefaultGroupRenderer("interleaving")}dump(t){const e=super.dump(t);return e.missingValue=this.missingValue,e}restore(t,e){void 0!==t.missingValue&&(this.missingValue=t.missingValue),t.numberFormat&&(this.numberFormat=Object(i.format)(t.numberFormat)),super.restore(t,e)}getLabel(t,e){if(!this.isLoaded())return"";const r=this.getValue(t,e);return String("number"==typeof r&&!isNaN(r)&&isFinite(r)?this.numberFormat(r):r)}getValue(t,e){if(!this.isLoaded())return null;const r=this.compute(t,e);return Object(a.b)(r)?this.missingValue:r}compute(t,e){return NaN}getNumber(t,e){const r=this.getValue(t,e);return null===r?NaN:r}getRawNumber(t,e){return this.getNumber(t,e)}isMissing(t,e){return Object(a.b)(this.compute(t,e))}compare(t,e,r,i){return s.d.prototype.compare.call(this,t,e,r,i)}groupCompare(t,e){return s.d.prototype.groupCompare.call(this,t,e)}getRendererType(){return s.d.prototype.getRendererType.call(this)}}e.a=o},function(t,e,r){"use strict";var i=r(6);class n extends i.a{constructor(t,e,r){super(e,r),this.column=t}markFiltered(t=!1){this.attachment.classList.toggle("filtered",t)}}const s="Filter out rows containing missing values";e.d=s;e.b=(t=>`<label><input class="lu_filter_missing" type="checkbox" ${t?'checked="checked"':""}>${s}</label>`);e.c=((t,e)=>`<label ${0===e?'class="lu-disabled"':""}><input class="lu_filter_missing" type="checkbox" ${t?'checked="checked"':""} ${0===e?"disabled":""}>Filter out ${e} missing value rows</label>`),e.a=n},function(t,e,r){"use strict";function i(t,e=NaN,r=0){const i=new Map,s=[],a="function"==typeof r?r:()=>r;isNaN(e)&&(e=function(t){const e=new Map;if(t.forEach(t=>{e.set(t,(e.get(t)||0)+1)}),0===e.size)return 20;const r=Array.from(e).sort((t,e)=>t[1]!==e[1]?e[1]-t[1]:t[0]-e[0]),i=r[0][0];return 0===i?r.length>1?r[1][0]:20:i}(t)),e+=a(-1);let o=-1,l=0,c=0,h=0;return t.forEach((t,r)=>{if(t+=a(r),c+=t,h++,t===e)return;i.set(r,t);const d=(r-o-1)*e;o=r;const u=l+d;l=u+t,s.push(new n(r,u,t))}),{exceptionsLookup:i,exceptions:s,totalHeight:c,defaultRowHeight:e,numberOfRows:h,padding:a}}e.d=function(t,e,r=0){return{exceptions:[],exceptionsLookup:{keys:()=>[].values(),get:()=>e,has:()=>!1,size:0},totalHeight:t*(e+=r),numberOfRows:t,defaultRowHeight:e,padding:()=>r}},e.b=i,e.c=function(t,e,r,i,n){function s(t,e){return Math.min(n-1,e+Math.max(0,Math.floor(t/r)))}function a(t,e,i=!1){const a=l-t,c=s(o-t,e),h=s(a,e),d=t+(c-e)*r,u=t+(h+1-e)*r;return console.assert(!i||!(d>o||u<l&&h<n-1),"error",i,d,u,o,l,e,t),{first:c,last:h,firstRowPos:d,endPos:u}}if(0===n)return{first:0,last:-1,firstRowPos:0,endPos:0};if(1===n)return{first:0,last:0,firstRowPos:0,endPos:0===i.length?r:i[0].y2};const o=t,l=o+e,c=a(0,0,!0);if(0===i.length)return c;if(c.last<=i[0].index)return c.last===i[0].index?Object.assign(c,{endPos:i[0].y2}):c;const h=i[i.length-1];if(o>=h.y){const t=a(h.y2,h.index+1);return o<h.y2?Object.assign(t,{first:h.index,firstRowPos:h.y}):t}const d=[];let u=i[0];for(const t of i){const{y:e,y2:r}=t;if(e>=l)break;r<=o?u=t:d.push(t)}if(0===d.length)return a(u.y2,u.index+1);{const t=d[0],e=d[d.length-1],i=Math.max(0,t.index-Math.max(0,Math.ceil((t.y-o)/r)));let a=e.index;l>=e.y2&&(a=s(l-e.y2,e.index+1));const c=t.y-(t.index-i)*r,h=e.y2+(a-e.index)*r;return console.assert(c<=o&&(h>=l||a===n-1),"error",c,h,o,l,t,e),{first:i,last:a,firstRowPos:c,endPos:h}}},e.a=function(t,e){const r=t.length,i=e.length;if(0===r)return{added:e,removed:[],common:0};if(0===i)return{added:[],removed:t,common:0};if(r===i)return{added:[],removed:[],common:r};const n=t.slice(Math.min(i,r));return{added:e.slice(Math.min(i,r)),removed:n,common:r-n.length}},e.e=function(t,e,r){const i=0===t.length?0:t[t.length-1]+1,n=[],s=[];for(let e=t.length-1;e>=0&&t[e]>=r;--e)s.push(t.pop());for(let s=i;s<r;++s)e[s].frozen&&(n.push(s),t.push(s));return{target:t,added:n,removed:s}};class n{constructor(t,e,r){this.index=t,this.y=e,this.height=r}get y2(){return this.y+this.height}}},function(t,e,r){"use strict";function i(t){let e=t.label;return null!=t.description&&""!==t.description&&(e+=`\n${t.description}`),e}function n(t,e,r){return(i,n,...s)=>{t.insertAdjacentHTML("beforeend",`<i title="${i}"><span${r?"":' aria-hidden="true"'}>${i}</span> </i>`);const a=t.lastElementChild;return n?(a.onclick=(t=>{t.stopPropagation();new n(e,a,...s).openDialog()}),a):a}}function s(t,e,r){return a(n(t,e,!1),e,r)}function a(t,e,r){(!Object(c.isSupportType)(e.desc)||e instanceof I.b)&&(t("Sort").onclick=(t=>{t.stopPropagation(),e.toggleMySorting()})),Object(L.b)(e)&&(t("Stratify").onclick=(t=>{t.stopPropagation(),e.groupByMe()})),e instanceof R.d&&t("Stratify by Threshold &hellip;",w.a),e instanceof y.b||(t("Remove").onclick=(t=>{t.stopPropagation(),e instanceof y.b?(r.provider.removeRanking(e.findMyRanker()),r.provider.ensureOneRanking()):e.removeMe()})),t("More &hellip;",V.a,"",r)}function o(t,e,r=22.5){const i=t.querySelector(".lu-toolbar"),n=i.querySelector("[title^=More]"),s=e.getWidth()-(n.clientWidth||r),a=Array.from(i.children).filter(t=>t!==n).reverse();a.forEach(t=>{t.classList.remove("hidden")}),a.forEach(t=>{const e=a.reduce((t,e)=>{const i=e.clientWidth;return i>0?t+i:e.classList.contains("hidden")?t:t+r},0);t.classList.toggle("hidden",e>s)})}function l(t,e,r){Object(O.a)(t,()=>{const t=JSON.stringify(r.provider.toDescRef(e.desc)),i={"text/plain":e.label,[`${j}-ref`]:e.id,[j]:t};return Object(D.h)(e)&&(i[`${j}-number`]=t,i[`${j}-number-ref`]=e.id),{effectAllowed:"copyMove",data:i}},!0)}e.i=i,e.c=function(t,e,r,i={}){i=Object.assign({dragAble:!0,mergeDropAble:!0,rearrangeAble:!0,resizeable:!0},i);const n=e.createElement("section");return n.innerHTML=`\n    <div class="lu-label">${t.label}</div>\n    <div class="lu-toolbar"></div>\n    <div class="lu-spacing"></div>\n    <div class="lu-summary"></div>\n    <div class="lu-handle"></div>\n  `,s(n.querySelector("div.lu-toolbar"),t,r),o(n,t),i.dragAble&&l(n,t,r),i.mergeDropAble&&function(t,e,r){const i=(t,i)=>{const n=t.data,s="copy"===t.effect,a=`${j}${i?"-number":""}`;if(`${a}-ref`in n){const t=n[`${a}-ref`];let i=r.provider.find(t);if(s)i=r.provider.clone(i);else{if(i===e)return null;i.removeMe()}return i}const o=JSON.parse(n[a]);return r.provider.create(r.provider.fromDescRef(o))};if(Object(v.b)(e))return void(e.canJustAddNumbers?Object(O.b)(t,[`${j}-number-ref`,`${j}-number`],t=>{const r=i(t,!0);return null!=r&&null!=e.push(r)}):Object(O.b)(t,[`${j}-ref`,j],t=>{const r=i(t,!1);return null!=r&&null!=e.push(r)}));const n=t=>n=>{const s=i(n,t);if(!s)return!1;if(e instanceof v.a)return null!==e.push(s);const a=e.findMyRanker(),o=a.indexOf(e),l=r.provider.create(t?Object(c.createStackDesc)():Object(c.createNestedDesc)());return e.removeMe(),l.push(e),l.push(s),null!=a.insert(l,o)};(t=>t instanceof v.a&&t.canJustAddNumbers||Object(D.h)(t)&&t.parent instanceof A.a&&!(t instanceof k.b))(e)?Object(O.b)(t,[`${j}-number-ref`,`${j}-number`],n(!0)):Object(O.b)(t,[`${j}-ref`,`${j}`],n(!1))}(n,t,r),i.rearrangeAble&&function(t,e,r){Object(O.b)(t,[`${j}-ref`,j],t=>{let i=null;const n=t.data;if(!(`${j}-ref`in n)){const t=JSON.parse(n[j]);return null!=(i=r.provider.create(r.provider.fromDescRef(t)))&&null!=e.insertAfterMe(i)}const s=n[`${j}-ref`];if(!(i=r.provider.find(s))||i===e&&!t.effect.startsWith("copy"))return!1;if(t.effect.startsWith("copy"))return null!=(i=r.provider.clone(i))&&null!=e.insertAfterMe(i);const a=i.parent;return a?a===e.parent?null!=a.moveAfter(i,e):(i.removeMe(),null!=e.insertAfterMe(i)):null!=e.insertAfterMe(i)},null,!0)}(n.querySelector(".lu-handle"),t,r),i.resizeable&&function(t,e){let r;const i=e.querySelector(".lu-handle");let n=0;const s=r=>{r.stopPropagation(),r.preventDefault();const i=r.clientX;if(Math.abs(n-i)<2)return;const s=i-n;n=i;const a=Math.max(0,t.getWidth()+s);t.setWidth(a),o(e,t)},a=i=>{i.stopPropagation(),i.preventDefault();const l=i.clientX;if(e.classList.remove("lu-change-width"),r.removeEventListener("mousemove",s),r.removeEventListener("mouseup",a),r.removeEventListener("mouseleave",a),Math.abs(n-l)<2)return;const c=l-n,h=Math.max(0,t.getWidth()+c);t.setWidth(h),o(e,t)};i.onmousedown=(t=>{t.stopPropagation(),t.preventDefault(),e.classList.add("lu-change-width"),n=t.clientX,(r=e.closest("header")).addEventListener("mousemove",s),r.addEventListener("mouseup",a),r.addEventListener("mouseleave",a)}),i.onclick=(t=>{t.stopPropagation(),t.preventDefault()})}(t,n),n},e.j=function(t,e,r,n=!1){t.querySelector(".lu-label").innerHTML=e.label,t.title=i(e);const s=t.querySelector("i[title='Sort']");if(s){const{asc:t,priority:r}=e.isSortedByMe();s.dataset.sort=void 0!==t?t:"",void 0!==r?s.dataset.priority=(parseInt(r,10)+1).toString():delete s.dataset.priority}const a=t.querySelector("i[title^='Stratify']");if(a){const t=e.isGroupedBy();a.dataset.stratify=t>=0?"true":"false",t>=0?a.dataset.priority=(t+1).toString():delete a.dataset.priority}const o=Object(M.a)(e,r.summaries);o&&o(e,t.querySelector(".lu-summary"),n,r)},e.b=n,e.e=s,e.d=a,e.f=function(t,e,r){const i=Object(c.isSupportType)(e.desc);i||t("Rename + Color &hellip;",p.a),e instanceof H.a&&(t("Sort Group by Name").onclick=(t=>{t.stopPropagation(),e.toggleMyGroupSorting()})),e instanceof R.d&&t("Sort Group by &hellip;",u.a),(e instanceof h.a||e instanceof d.a)&&t("Sort by &hellip;",u.a),(Object(L.b)(e)||e instanceof I.b)&&(t("Stratify").onclick=(t=>{t.stopPropagation(),e.groupByMe()})),e instanceof R.d&&t("Stratify by Threshold &hellip;",w.a);const n=r.getPossibleRenderer(e);(n.item.length>2||n.group.length>2)&&t("Visualization &hellip;",g.a,r),e instanceof f.a&&t("Edit Link Pattern &hellip;",b.a,r.idPrefix,[].concat(e.desc.templates||[],r.linkTemplates)),e instanceof m.b&&t("Edit Combine Script &hellip;",E.a);const s=Object(M.a)(e,r.filters);if(s&&t("Filter &hellip;",s,"",r.provider,r.idPrefix),e instanceof N.a&&t("Set Cut Off &hellip;",x.a,r.idPrefix),r.searchAble(e)&&t("Search &hellip;",C.a,r.provider),e instanceof T.b&&t("Edit Weights &hellip;",_.a),Object(v.b)(e)){const r=e;t(r.getCollapsed()?"Expand":"Compress").onclick=(t=>{t.stopPropagation(),r.setCollapsed(!r.getCollapsed()),t.currentTarget.title=r.getCollapsed()?"Expand":"Compress"})}e instanceof v.a&&e.parent instanceof A.a&&(t("Split Combined Column").onclick=(t=>{t.stopPropagation(),e.children.reverse().forEach(t=>e.insertAfterMe(t)),e.removeMe()})),e instanceof v.a&&(!Object(v.b)(e)||e.getCollapsed())&&t("Contained Columns &hellip;",$.a,r),i||(t("Generate Snapshot").onclick=(t=>{t.stopPropagation(),r.provider.takeSnapshot(e)})),t("Remove").onclick=(t=>{t.stopPropagation(),e instanceof y.b?(r.provider.removeRanking(e.findMyRanker()),r.provider.ensureOneRanking()):e.removeMe()})},e.g=l,e.h=function(t,e,r,i,n){Object(O.b)(t,[`${j}-ref`,j],t=>{let s=null;const a=t.data;if(`${j}-ref`in a){const t=a[`${j}-ref`];if(!(s=r.provider.find(t))||s===e)return!1}else{const t=JSON.parse(a[j]);(s=r.provider.create(r.provider.fromDescRef(t)))&&e.findMyRanker().push(s)}const o=e.findMyRanker();if(!s||s===e||!o)return!1;const l=o.getSortCriterias(),c=o.getGroupCriteria(),h=t=>{const e=l.findIndex(e=>e.col===t);return e>=0&&l.splice(e,1)[0].asc},d=h(s),u=c.indexOf(e),p=l.findIndex(t=>t.col===e);if(n&&u>=0)if(h(e),Object(L.b)(s)){if(c.splice(u+("after"===i?1:0),0,s),c.length>o.getMaxGroupColumns()){const t=c.splice(0,c.length-o.getMaxGroupColumns());l.unshift(...t.reverse().map(t=>({asc:!1,col:t})))}}else{const t=c.splice(0,c.length-u);l.unshift(...t.reverse().map(t=>({asc:!1,col:t}))),l.unshift({asc:d,col:s})}else p<0?l.push({asc:d,col:s}):0===p&&n&&Object(L.b)(s)?c.push(s):l.splice(p+("after"===i?1:0),0,{asc:d,col:s});return Object(S.j)(c,o.getGroupCriteria())||o.groupBy(c),o.setSortCriteria(l),!0},null,!0)};var c=r(12),h=r(51),d=r(26),u=r(101),p=r(103),g=r(104),f=r(28),m=r(27),E=r(105),b=r(106),v=r(11),y=r(25),_=r(107),T=r(19),x=r(108),C=r(109),N=r(37),O=r(110),R=r(8),D=r(2),A=r(13),L=r(10),w=r(111),S=r(0),V=r(112),M=r(113),I=r(20),$=r(114),H=r(9),k=r(30);const j="text/x-caleydo-lineup-column";e.a=j},function(t,e,r){"use strict";e.a=function(t="Weighted Sum"){return{type:"stack",label:t}};var i=r(15),n=r(1),s=r(2),a=r(0);class o extends i.a{constructor(t,e){super(t,e),this.collapsed=!1;const r=this;this.adaptChange=function(t,e){r.adaptWidthChange(this.source,t,e)},"interleaving"===this.getRendererType()&&this.setRendererType("stack"),"interleaving"===this.getGroupRenderer()&&this.setGroupRenderer("stack")}createEventList(){return super.createEventList().concat([o.EVENT_COLLAPSE_CHANGED,o.EVENT_WEIGHTS_CHANGED,o.EVENT_MULTI_LEVEL_CHANGED])}setCollapsed(t){this.collapsed!==t&&this.fire([o.EVENT_COLLAPSE_CHANGED,n.a.EVENT_DIRTY_HEADER,n.a.EVENT_DIRTY_VALUES,n.a.EVENT_DIRTY],this.collapsed,this.collapsed=t)}getCollapsed(){return this.collapsed}get canJustAddNumbers(){return!0}flatten(t,e,r=0,i=0){let s=null;const a=r<=n.a.FLAT_ALL_COLUMNS?this._children:this._children.filter(t=>!t.isHidden());if(0===r||r<=n.a.FLAT_ALL_COLUMNS){let n=this.getWidth();if(this.collapsed||(n+=(a.length-1)*i),t.push(s={col:this,offset:e,width:n}),0===r)return n}let o=e;return a.forEach(e=>{o+=e.flatten(t,o,r-1,i)+i}),s&&(s.width=o-e-i),o-e-i}dump(t){const e=super.dump(t);return e.collapsed=this.collapsed,e}restore(t,e){this.collapsed=!0===t.collapsed,super.restore(t,e)}insert(t,e,r=NaN){return isNaN(r)||t.setWidth(r/(1-r)*this.getWidth()),t.on(`${n.a.EVENT_WIDTH_CHANGED}.stack`,this.adaptChange),super.setWidth(0===this.length?t.getWidth():this.getWidth()+t.getWidth()),super.insert(t,e)}push(t,e=NaN){return this.insert(t,this.length,e)}insertAfter(t,e,r=NaN){const i=this.indexOf(e);return i<0?null:this.insert(t,i+1,r)}adaptWidthChange(t,e,r){if(Object(a.t)(e,r,.5))return;const i=this.getWeights(),s=this.getWidth(),l=e/s,c=(1-l-(r-e)/s)/(1-l),h=this._children.map(e=>{if(e===t)return r;const i=e.getWidth()*c,n=isNaN(i)||i<1?0:i;return e.setWidthImpl(n),n});super.setWidth(h.reduce((t,e)=>t+e,0)),this.fire([o.EVENT_WEIGHTS_CHANGED,o.EVENT_MULTI_LEVEL_CHANGED,n.a.EVENT_DIRTY_HEADER,n.a.EVENT_DIRTY_VALUES,n.a.EVENT_DIRTY],i,this.getWeights())}getWeights(){const t=this.getWidth();return this._children.map(e=>e.getWidth()/t)}setWeights(t){const e=this.getWeights(),r=t.length-this.length;let i;if(r<0)if((i=t.reduce((t,e)=>t+e,0))<=1)for(let e=0;e<-r;++e)t.push(1/-r*(1-i));else if(i<=100)for(let e=0;e<-r;++e)t.push(1/-r*(100-i));t=t.slice(0,this.length),i=t.reduce((t,e)=>t+e,0)/this.getWidth(),t=t.map(t=>t/i),this._children.forEach((e,r)=>{e.setWidthImpl(t[r])}),this.fire([o.EVENT_WEIGHTS_CHANGED,o.EVENT_MULTI_LEVEL_CHANGED,n.a.EVENT_DIRTY_HEADER,n.a.EVENT_DIRTY_VALUES,n.a.EVENT_DIRTY],e,t)}removeImpl(t){return t.on(`${n.a.EVENT_WIDTH_CHANGED}.stack`,null),super.setWidth(0===this.length?100:this.getWidth()-t.getWidth()),super.removeImpl(t)}setWidth(t){const e=t/this.getWidth();this._children.forEach(t=>{t.setWidthImpl(t.getWidth()*e)}),super.setWidth(t)}compute(t,e){const r=this.getWidth();return this._children.reduce((i,n)=>i+n.getValue(t,e)*(n.getWidth()/r),0)}getRendererType(){return this.getCollapsed()&&this.isLoaded()?o.COLLAPSED_RENDERER:super.getRendererType()}toSortingDesc(t){const e=this.getWeights();return this._children.map((r,i)=>({weight:e[i],id:r.toSortingDesc(t)}))}isMissing(t,e){return this._children.some(r=>Object(s.h)(r)&&r.isMissing(t,e))}}e.b=o,o.EVENT_COLLAPSE_CHANGED="collapseChanged",o.EVENT_WEIGHTS_CHANGED="weightsChanged",o.COLLAPSED_RENDERER="number",o.EVENT_MULTI_LEVEL_CHANGED="nestedChildRatio"},function(t,e,r){"use strict";e.a=function(t="S"){return{type:"selection",label:t}};var i=r(7);class n extends i.a{constructor(t,e){super(t,e),this.setWidth(20)}createEventList(){return super.createEventList().concat([n.EVENT_SELECT])}setValue(t,e,r){return this.getValue(t,e)===r||this.setImpl(t,e,r)}setImpl(t,e,r){return this.desc.setter&&this.desc.setter(t,e,r),this.fire(n.EVENT_SELECT,t,r),!0}toggleValue(t,e){const r=this.getValue(t,e);return this.setImpl(t,e,!r),!r}compare(t,e,r,i){const n=!0===this.getValue(t,r),s=!0===this.getValue(e,i);return n===s?0:n<s?-1:1}group(t,e){return this.getValue(t,e)?n.SELECTED_GROUP:n.NOT_SELECTED_GROUP}}e.b=n,n.SELECTED_GROUP={name:"Selected",color:"orange"},n.NOT_SELECTED_GROUP={name:"Unselected",color:"gray"},n.EVENT_SELECT="select"},function(t,e,r){"use strict";e.a=function(t,e,r){return r&&r.color?r.color(e):e&&(t instanceof i.a||Object(n.isCategoricalColumn)(t)||t instanceof s.b)?t.getColor(e.v,e.dataIndex):t.color};var i=r(15),n=r(12),s=r(30)},function(t,e,r){"use strict";e.a=function(t){return t&&void 0!==t.name}},function(t,e,r){"use strict";function i(t,e){return e[t.getRendererType()]||V}function n(t,e){return e[t.getGroupRenderer()]||V}function s(t,e,r=!1){return Object.keys(e).filter(i=>{return e[i].canRender(t,r)}).map(t=>({type:t,label:r?e[t].groupTitle||e[t].title:e[t].title}))}Object.defineProperty(e,"__esModule",{value:!0}),e.createDOM=function(t,e,r,n){const s=i(t,e);return(s.createDOM?s.createDOM.bind(s):V.createDOM.bind(V))(t,r,n)},e.createCanvas=function(t,e,r,n){const s=i(t,e);return(s.createCanvas?s.createCanvas.bind(s):V.createCanvas.bind(V))(t,r,n)},e.createDOMGroup=function(t,e,r,i){const s=n(t,e);return(s.createGroupDOM?s.createGroupDOM.bind(s):V.createGroupDOM.bind(V))(t,r,i)},e.createCanvasGroup=function(t,e,r,i){const s=n(t,e);return(s.createGroupCanvas?s.createGroupCanvas.bind(s):V.createGroupCanvas.bind(V))(t,r,i)},e.possibleRenderer=s,e.possibleGroupRenderer=function(t,e){return s(t,e,!0)};var a=r(75),o=r(31),l=r(76),c=r(77),h=r(78),d=r(79),u=r(80),p=r(40),g=r(83),f=r(84),m=r(85),E=r(86),b=r(87),v=r(88),y=r(89),_=r(90),T=r(91),x=r(92),C=r(93),N=r(57),O=r(94),R=r(95),D=r(96),A=r(97),L=r(98),w=r(99),S=r(100);const V=new o.a;e.defaultCellRenderer=V;const M={rank:new C.a,boolean:new L.a,number:new a.a,string:new l.a,selection:new c.a,heatmap:new T.a,image:new A.a,link:new h.a,annotate:new d.a,actions:new u.a,stack:new p.b,nested:new p.b(!1),categorical:new g.a,catcolor:new N.a,catcolorshifted:new D.a,numbers:new f.a,sparkline:new m.a,verticalbar:new E.a,upset:new b.a,circle:new v.a,boxplot:new y.a,loading:new _.a,empty:new x.a,aggregate:new O.a,histogram:new R.a,interleaving:new w.a,dot:new S.a,default:V};e.renderers=M},function(t,e,r){"use strict";e.b=function(t){if(console.assert(t.length>0),1===t.length)return t[0];const e=t.map(t=>Object.assign({subGroups:[]},t));t.slice(1).forEach((t,r)=>{t.parent=e[r],e[r].subGroups.push(t)});const r={name:t.map(t=>t.name).join(" ∩ "),color:t[0].color,parent:e[e.length-1]};return r.parent.subGroups.push(r),r},e.c=function(t){let e=t.name,r=t.parent;for(;r;)e=`${r.name}.${e}`,r=r.parent;return e},e.d=function(t){if(t.length<=1)return;const e=new Map,r=t=>{let i=t.name;if(t.parent){const e=r(t.parent);t.parent=e.g,i=`${e.id}.$[id}`}return e.has(i)?{g:e.get(i),id:i}:(t.parent&&t.parent.subGroups.push(t),t.subGroups=[],e.set(i,t),{g:t,id:i})};t.forEach(t=>{t.parent&&(t.parent=r(t.parent).g,t.parent.subGroups.push(t))})};e.a={name:"Default",color:"gray"}},function(t,e,r){"use strict";e.a=function(t="Rank"){return{type:"rank",label:t}};var i=r(7);class n extends i.a{constructor(t,e){super(t,e),this.setWidthImpl(50)}}e.b=n},function(t,e,r){"use strict";e.b=function(t){return"function"==typeof t.getBoxPlotData};var i=r(7),n=r(1),s=r(3),a=(r.n(s),r(8)),o=r(2);class l extends i.a{constructor(t,e){super(t,e),this.currentFilter=Object(o.l)(),e.map?this.mapping=Object(a.c)(e.map):e.domain&&(this.mapping=new a.a(e.domain,"linear",e.range||[0,1])),this.original=this.mapping.clone(),this.sort=e.sort||o.d.min}compare(t,e,r,i){return Object(o.e)(this,t,e,r,i)}getBoxPlotData(t,e){return this.getValue(t,e)}getRange(){return this.mapping.getRange(l.DEFAULT_FORMATTER)}getRawBoxPlotData(t,e){return this.getRawValue(t,e)}getRawValue(t,e){return super.getValue(t,e)}getValue(t,e){const r=this.getRawValue(t,e);return null===r?r:{min:this.mapping.apply(r.min),max:this.mapping.apply(r.max),median:this.mapping.apply(r.median),q1:this.mapping.apply(r.q1),q3:this.mapping.apply(r.q3)}}getNumber(t,e){return Object(o.f)(this,t,e,"normalized")}getRawNumber(t,e){return Object(o.f)(this,t,e,"raw")}getLabel(t,e){const r=this.getRawValue(t,e);if(null===r)return"";const i=l.DEFAULT_FORMATTER;return`BoxPlot(min = ${i(r.min)}, q1 = ${i(r.q1)}, median = ${i(r.median)}, q3 = ${i(r.q3)}, max = ${i(r.max)})`}getSortMethod(){return this.sort}setSortMethod(t){this.sort!==t&&(this.fire([n.a.EVENT_SORTMETHOD_CHANGED],this.sort,this.sort=t),this.isSortedByMe().asc||this.sortByMe())}dump(t){const e=super.dump(t);return e.sortMethod=this.getSortMethod(),e.filter=Object(o.j)(this.currentFilter,Object(o.l)())?null:this.currentFilter,e.map=this.mapping.dump(),e}restore(t,e){super.restore(t,e),t.sortMethod&&(this.sort=t.sortMethod),t.filter&&(this.currentFilter=Object(o.n)(t.filter)),t.map?this.mapping=Object(a.c)(t.map):t.domain&&(this.mapping=new a.a(t.domain,"linear",t.range||[0,1]))}createEventList(){return super.createEventList().concat([a.d.EVENT_MAPPING_CHANGED])}getOriginalMapping(){return this.original.clone()}getMapping(){return this.mapping.clone()}setMapping(t){this.mapping.eq(t)||this.fire([l.EVENT_MAPPING_CHANGED,n.a.EVENT_DIRTY_VALUES,n.a.EVENT_DIRTY],this.mapping.clone(),this.mapping=t)}isFiltered(){return a.d.prototype.isFiltered.call(this)}getFilter(){return a.d.prototype.getFilter.call(this)}setFilter(t={min:-1/0,max:1/0,filterMissing:!1}){a.d.prototype.setFilter.call(this,t)}filter(t,e){return a.d.prototype.filter.call(this,t,e)}}e.a=l,l.EVENT_MAPPING_CHANGED=a.d.EVENT_MAPPING_CHANGED,l.DEFAULT_FORMATTER=Object(s.format)(".3n")},function(t,e,r){"use strict";e.a=function(t="script"){return{type:"script",label:t,script:a}};var i=r(1),n=r(15),s=r(2);const a="let s = 0;\ncol.forEach((c) => s += c.v);\nreturn s / col.length";class o{constructor(t,e,r){this.c=t,this.v=e,this.raw=r}get type(){return this.c.desc.type}get name(){return this.c.getMetaData().label}get id(){return this.c.id}}class l{constructor(t,e){this.children=t,this.allFactory=e,this.lookup=new Map,this._all=null,t.forEach(t=>{this.lookup.set(`ID@${t.id}`,t),this.lookup.set(`NAME@${t.name}`,t)})}byName(t){return this.lookup.get(`NAME@${t}`)}byID(t){return this.lookup.get(`ID@${t}`)}byIndex(t){return this.children[t]}forEach(t){return this.children.forEach(t)}get length(){return this.children.length}get all(){return null===this._all&&(this._all=this.allFactory?this.allFactory():null),this._all}}class c extends n.a{constructor(t,e){super(t,e),this.script=c.DEFAULT_SCRIPT,this.f=null,this.script=e.script||this.script}createEventList(){return super.createEventList().concat([c.EVENT_SCRIPT_CHANGED])}setScript(t){this.script!==t&&(this.f=null,this.fire([c.EVENT_SCRIPT_CHANGED,i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY],this.script,this.script=t))}getScript(){return this.script}dump(t){const e=super.dump(t);return e.script=this.script,e}restore(t,e){this.script=t.script||this.script,super.restore(t,e)}compute(t,e){null==this.f&&(this.f=new Function("children","values","raws","col","row","index",function(t){let e=t.trim();return e.includes("return")||(e=`return (${e});`),`\n  const max = function(arr) { return Math.max.apply(Math, arr); };\n  const min = function(arr) { return Math.min.apply(Math, arr); };\n  const extent = function(arr) { return [min(arr), max(arr)]; };\n  const clamp = function(v, minValue, maxValue) { return v < minValue ? minValue : (v > maxValue ? maxValue : v); };\n  const normalize = function(v, minMax, max) {\n    if (Array.isArray(minMax)) {\n      minMax = minMax[0];\n      max = minMax[1];\n    }\n    return (v - minMax) / (max - minMax);\n  };\n  const denormalize = function(v, minMax, max) {\n    if (Array.isArray(minMax)) {\n      minMax = minMax[0];\n      max = minMax[1];\n    }\n    return v * (max - minMax) + minMax;\n  };\n  const linear = function(v, source, target) {\n    target = target || [0, 1];\n    return denormalize(normalize(v, source), target);\n  };\n  const v = (function custom() {\n    ${e}\n  })();\n\n  return typeof v === 'number' ? v : NaN`}(this.script)));const r=this._children,i=this._children.map(r=>r.getValue(t,e)),n=this._children.map(r=>Object(s.h)(r)?r.getRawNumber(t,e):null),a=new l(r.map((t,e)=>new o(t,i[e],n[e])),()=>{const r=this.findMyRanker().flatColumns;return new l(r.map(r=>new o(r,r.getValue(t,e),Object(s.h)(r)?r.getRawNumber(t,e):null)))});return this.f.call(this,r,i,n,a,t,e)}toSortingDesc(t){return{code:this.script,operands:this._children.map(e=>e.toSortingDesc(t))}}}e.b=c,c.EVENT_SCRIPT_CHANGED="scriptChanged",c.DEFAULT_SCRIPT=a},function(t,e,r){"use strict";var i=r(1),n=r(9),s=r(5);class a extends n.a{constructor(t,e){super(t,e),this.link=null,this.link=e.link||null}get headerCssClass(){return null==this.link?"link":"link link_pattern"}createEventList(){return super.createEventList().concat([a.EVENT_LINK_CHANGED])}setLink(t){t!=this.link&&this.fire([a.EVENT_LINK_CHANGED,i.a.EVENT_DIRTY_HEADER,i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY],this.link,this.link=t)}getLink(){return this.link||""}dump(t){const e=super.dump(t);return this.link!=this.desc.link&&(e.link=this.link),e}restore(t,e){super.restore(t,e),t.link&&(this.link=t.link)}getLabel(t,e){const r=super.getRaw(t,e);return r&&r.alt?r.alt:String(r)}isLink(t,e){const r=super.getRaw(t,e);return!Object(s.b)(r)&&(null!=r.href||this.link)}getValue(t,e){const r=super.getRaw(t,e);return r&&r.href?r.href:this.link?this.link.replace(/\$1/g,r||""):r}}e.a=a,a.EVENT_LINK_CHANGED="linkChanged"},function(t,e,r){"use strict";e.a=function(t="A"){return{type:"aggregate",label:t}};var i=r(1);class n extends i.a{constructor(t,e){super(t,e),this.setWidth(20)}createEventList(){return super.createEventList().concat([n.EVENT_AGGREGATE])}isAggregated(t){const e=this.findMyRanker();return!!this.desc.isAggregated&&this.desc.isAggregated(e,t)}setAggregated(t,e){const r=this.findMyRanker();return(this.desc.isAggregated&&this.desc.isAggregated(r,t))===e||(this.desc.setAggregated&&this.desc.setAggregated(r,t,e),this.fire(n.EVENT_AGGREGATE,r,t,e),!1)}}e.b=n,n.EVENT_AGGREGATE="aggregate"},function(t,e,r){"use strict";e.a=function(t="Imposition"){return{type:"imposition",label:t}};var i=r(11),n=r(8),s=r(2),a=r(10);class o extends i.a{constructor(t,e){super(t,e),this.setDefaultRenderer("number"),this.setDefaultGroupRenderer("boxplot")}getLabel(t,e){const r=this._children;return 0===r.length?"":1===r.length?r[0].getLabel(t,e):`${r[0].getLabel(t,e)} (${r.slice(1).map(r=>`${r.label} = ${r.getLabel(t,e)}`)})`}getValue(t,e){const r=this._children;return 0===r.length?NaN:r[0].getValue(t,e)}getColor(t,e){const r=this._children;return r.length<2?this.color:r[1].getColor(t,e)}getNumber(t,e){const r=this.getValue(t,e);return null===r?NaN:r}getRawNumber(t,e){return this.getNumber(t,e)}isMissing(t,e){return 0===this._children.length||this._children[0].isMissing(t,e)}compare(t,e,r,i){return n.d.prototype.compare.call(this,t,e,r,i)}groupCompare(t,e){return n.d.prototype.groupCompare.call(this,t,e)}insert(t,e){return(0!==this._children.length||Object(s.h)(t))&&(1!==this._children.length||Object(a.b)(t))?this._children.length>=2?null:super.insert(t,e):null}}e.b=o},function(t,e,r){"use strict";var i=r(0),n=r(4);class s{constructor(t="text",e="left"){this.textClass=t,this.align=e,this.title="String"}canRender(t){return!0}createDOM(t){return{template:`<div class="${this.textClass} ${this.align}"> </div>`,update:(e,r)=>{Object(n.b)(e,t,r),Object(i.r)(e,t.getLabel(r.v,r.dataIndex))}}}createCanvas(t,e){return(r,s,a)=>{if(Object(n.a)(r,t,s,e.rowHeight(a)))return;const o=r.textAlign;r.textAlign=this.align;const l=e.colWidth(t);let c=0;"center"===this.align?c=l/2:"right"===this.align&&(c=l),Object(i.d)(r,t.getLabel(s.v,s.dataIndex),c,0,l,e.textHints),r.textAlign=o}}static exampleText(t,e){let r=e.slice(0,5).map(e=>t.getLabel(e.v,e.dataIndex)).join(", ");return e.length>5&&(r+=", &hellip;"),r}createGroupDOM(t){return{template:`<div class="${this.textClass} ${this.align}"> </div>`,update:(e,r,i)=>{e.innerHTML=`\n            ${r.name} (${i.length})\n            <div>${s.exampleText(t,i)}</div>\n        `}}}createGroupCanvas(t,e){const r=e.colWidth(t);return(n,a,o)=>{Object(i.d)(n,`${a.name} (${o.length})`,0,2,r,e.textHints);const l=n.font;n.font='8pt "Helvetica Neue", Helvetica, Arial, sans-serif',Object(i.d)(n,s.exampleText(t,o),0,14,r,e.textHints),n.font=l}}}e.a=s},function(t,e,r){"use strict";var i,n=r(3),s=(r.n(n),r(0)),a=r(12),o=r(11),l=r(14),c=r(34),h=r(44);!function(t){t[t.DIRTY=0]="DIRTY",t[t.SCROLLED=1]="SCROLLED"}(i||(i={}));class d extends s.a{constructor(t,e,r,i,a={}){super(),this.data=t,this.slicer=r,this.options=Object(c.a)().body,this.histCache=new Map,Object(s.p)(this.options,a),this.$node=n.select(e).append(i).classed("lu-body",!0),this.changeDataStorage(t)}createEventList(){return super.createEventList().concat([d.EVENT_HOVER_CHANGED,d.EVENT_RENDER_FINISHED])}get node(){return this.$node.node()}setOption(t,e){this.options[t]=e}changeDataStorage(t){this.data&&this.data.on([`${l.a.EVENT_DIRTY_VALUES}.bodyRenderer`,`${l.a.EVENT_SELECTION_CHANGED}.bodyRenderer`],null),this.data=t,t.on(`${l.a.EVENT_DIRTY_VALUES}.bodyRenderer`,Object(s.f)(this.update.bind(this),1)),t.on(`${l.a.EVENT_SELECTION_CHANGED}.bodyRenderer`,Object(s.f)(this.drawSelection.bind(this),1))}showMeanLine(t){return this.options.meanLine&&Object(a.isNumberColumn)(t)&&t.parent instanceof a.Ranking}fireFinished(){this.fire(d.EVENT_RENDER_FINISHED,this)}createContext(t,e,r,i){const n=this.options;return{cellY:e=>(e+t)*this.options.rowHeight,cellPrevY:e=>(e+t)*this.options.rowHeight,idPrefix:n.idPrefix,totalNumberOfRows:e,option:Object(s.k)(n),renderer(t){return r(t,n.renderers,this)},groupRenderer(t){return i(t,n.renderers,this)}}}select(t,e=!1){return this.data.toggleSelection(t,e)}fakeHover(t){this.mouseOver(t,!0)}mouseOver(t,e=!0){this.fire(d.EVENT_HOVER_CHANGED,e?t:-1)}scrolled(){return this.update(i.SCROLLED)}showAggregatedGroup(t,e){return this.data.isAggregated(t,e)}resolveHistMap(t){return Promise.all(t.columns.map(t=>Promise.resolve(this.histCache.get(t.column.id)))).then(e=>{const r=new Map;return e.forEach((e,i)=>{e&&r.set(t.columns[i].column.id,e)}),r})}update(t=i.DIRTY){const e=this.data.getRankings(),r=e.every(t=>t.getGroups().length<=1),s=n.max(e,t=>n.sum(t.getGroups(),e=>this.showAggregatedGroup(t,e)?this.options.groupHeight:this.options.rowHeight*e.order.length))||0,a=n.max(e,t=>n.sum(t.getGroups(),t=>t.order.length)),l=r?this.slicer(0,a,t=>t*this.options.rowHeight):{from:0,to:1/0},c=this.createContextImpl(l.from,a),h=[].concat(...e.map(t=>t.getGroups().map(t=>(t=>0===l.from&&t.length<=l.to?t:t.slice(l.from,Math.min(t.length,l.to)))(t.order))));let d=0;const u=this.data.fetch(h),p=this.options.columnPadding;let g=0;const f=e.map(t=>{const e=t.children.filter(t=>!t.isHidden()),r=g;let i=0;const s=e.map(t=>{const e=i;return i+=t.getWidth()+p,Object(o.b)(t)&&!t.getCollapsed()&&(i+=p*(t.length-1)),{column:t,renderer:c.renderer(t),groupRenderer:c.groupRenderer(t),shift:e}});g+=i,g+=this.options.slopeWidth;const a=s.slice(0,this.options.freezeCols),l=d;d+=t.getGroups().length;let f=0;const m=t.getGroups().map((e,r)=>{const i=this.showAggregatedGroup(t,e),n=h[l+r],s=f,a=i?this.options.groupHeight:this.options.rowHeight*n.length;return f+=a,{group:e,order:n,data:u[l+r],aggregate:i,y:s,height:a}});return{id:t.id,ranking:t,shift:r,width:i,frozen:a,frozenWidth:Math.max(...a.map(t=>t.shift+t.column.getWidth())),columns:s.slice(this.options.freezeCols),groups:m,height:n.sum(m,t=>t.height)}});return g-=this.options.slopeWidth,this.updateImpl(f,c,g,s,t).then(this.fireFinished.bind(this))}}d.EVENT_HOVER_CHANGED=h.a,d.EVENT_RENDER_FINISHED=h.b,e.a=d},function(t,e,r){"use strict";var i=r(60);r.d(e,"a",function(){return i.a});r(61)},function(t,e,r){"use strict";function i(){return null}e.b=i,e.a=function(){const t=`lu${Math.random().toString(36).slice(-8).substr(0,3)}`,e=Object.assign({},n.renderers);return{idPrefix:t,header:{idPrefix:t,slopeWidth:150,columnPadding:5,headerHistogramHeight:40,headerHeight:20,manipulative:!0,summary:!1,filters:Object.assign({},s.a),summaries:Object.assign({},o.a),linkTemplates:[],searchAble:t=>t instanceof a.a,sortOnLabel:!0,autoRotateLabels:!1,rotationHeight:50,rotationDegree:-20,freezeCols:0,rankingButtons:i},renderingOptions:{stacked:!0,animation:!0,summary:!1,meanLine:!1,histograms:!1},body:{renderer:"svg",visibleRowsOnly:!0,backupScrollRows:5,rowHeight:16,groupHeight:70,groupPadding:5,rowPadding:2,columnPadding:5,textHeight:13,rowBarPadding:1,rowBarTopPadding:1,rowBarBottomPadding:1,idPrefix:"",slopeWidth:150,stacked:!0,animation:!1,animationDuration:1e3,renderers:e,meanLine:!1,actions:[],freezeCols:0},manipulative:!0,pool:!1,renderers:e}};var n=r(23),s=r(115),a=r(9),o=r(121)},function(t,e,r){"use strict";e.a=function(t="Nested"){return{type:"nested",label:t}};var i=r(70);class n extends i.a{compare(t,e,r,i){const n=this.children;for(const s of n){const n=s.compare(t,e,r,i);if(0!==n)return n}return 0}getLabel(t,e){return this.children.map(r=>r.getLabel(t,e)).join(";")}getValue(t,e){return this.children.map(r=>r.getValue(t,e)).join(";")}}e.b=n},function(t,e,r){"use strict";e.a=function(t="actions",e=[],r=[]){return{type:"actions",label:t,actions:e,groupActions:r}};var i=r(1);class n extends i.a{constructor(t,e){super(t,e),this.actions=e.actions||[],this.groupActions=e.groupActions||[]}getLabel(){return""}getValue(){return""}compare(){return 0}}e.b=n},function(t,e,r){"use strict";function i(t,e=1/0){const r=[],i=(t,n)=>{n>=e||0===t.children.length?r.push(t):t.children.forEach(t=>i(t,n+1))};return i(t,0),r}e.b=function(t){const e=[t];let r=0;for(;r<e.length;){const t=e[r++];e.push(...t.children)}return e};var n=r(3),s=(r.n(n),r(1)),a=r(7),o=r(9),l=r(5);class c extends a.a{constructor(t,e){super(t,e),this.currentMaxDepth=1/0,this.currentLeaves=[],this.currentLeavesNameCache=new Map,this.currentLeavesPathCache=new Map,this.separator=";",this.separator=e.separator||this.separator,this.hierarchySeparator=e.hierarchySeparator||".",this.hierarchy=this.initHierarchy(e.hierarchy),this.currentNode=this.hierarchy,this.currentLeaves=i(this.currentNode,this.currentMaxDepth),this.updateCaches(),this.setDefaultRenderer("categorical")}initHierarchy(t){const e=n.scale.category10().range().slice(),r=this.hierarchySeparator,i=(t,n)=>{const s=void 0===n.name?n.value:n.name;let a=-1;const o=(n.children||[]).map(n=>{if("string"==typeof n){const r=t+n;return{path:r,name:n,label:r,color:e[a++%e.length],children:[]}}const o=i(`${t}${s}${r}`,n);return o.color||(o.color=e[a++%e.length]),o}),l=t+s,c=n.label?`${n.label}`:l;return{path:l,name:s,children:o,label:c,color:n.color}};return i("",t)}createEventList(){return super.createEventList().concat([c.EVENT_CUTOFF_CHANGED])}get categories(){return this.currentLeaves.map(t=>t.name)}get categoryLabels(){return this.currentLeaves.map(t=>t.label)}get categoryColors(){return this.currentLeaves.map(t=>t.color)}getCutOff(){return{node:this.currentNode,maxDepth:this.currentMaxDepth}}setCutOff(t,e=1/0){if(this.currentNode===t&&this.currentMaxDepth===e)return;const r=this.getCutOff();this.currentNode=t,this.currentMaxDepth=e,this.currentLeaves=i(t,e),this.updateCaches(),this.fire([c.EVENT_CUTOFF_CHANGED,s.a.EVENT_DIRTY_VALUES,s.a.EVENT_DIRTY],r,this.getCutOff())}resolveCategories(t,e){const r=o.a.prototype.getValue.call(this,t,e);return null===r||""===r?[]:r.split(this.separator).map(t=>(t=t.trim(),this.currentLeavesNameCache.has(t)?this.currentLeavesNameCache.get(t):this.currentLeavesPathCache.has(t)?this.currentLeavesPathCache.get(t):this.currentLeaves.find(e=>e.path===t||e.name===t||t.startsWith(e.path+this.hierarchySeparator)))).filter(t=>Boolean(t))}resolveCategory(t,e){const r=this.resolveCategories(t,e);return r.length>0?r[0]:null}getValue(t,e){const r=this.getValues(t,e);return r.length>0?r[0]:null}getValues(t,e){return this.resolveCategories(t,e).map(t=>t.name)}getLabel(t,e){return this.getLabels(t,e).join(this.separator)}getLabels(t,e){return this.resolveCategories(t,e).map(t=>t.label)}getFirstLabel(t,e){const r=this.getLabels(t,e);return r.length>0?r[0]:null}getCategories(t,e){return this.getValues(t,e)}getColor(t,e){const r=this.resolveCategory(t,e);return r?r.color:null}compare(t,e,r,i){const n=this.resolveCategories(t,r),s=this.resolveCategories(e,i);if(0===n.length)return 0===s.length?0:l.a;if(0===s.length)return-1*l.a;for(let t=0;t<Math.min(n.length,s.length);++t){const e=n[t].path.localeCompare(s[t].path);if(0!==e)return e}return n.length-s.length}group(t,e){const r=this.resolveCategory(t,e);return r?{name:r.name,color:r.color}:super.group(t,e)}updateCaches(){this.currentLeavesPathCache.clear(),this.currentLeavesNameCache.clear(),this.currentLeaves.forEach(t=>{this.currentLeavesPathCache.set(t.path,t),this.currentLeavesNameCache.set(t.name,t)})}}e.a=c,c.EVENT_CUTOFF_CHANGED="cutOffChanged"},function(t,e,r){"use strict";function i(t){return Math.ceil(Math.log(t)/Math.LN2)+1}e.c=i,e.b=function(t,e,r,s,a,o){if(0===t.length)return{min:NaN,max:NaN,mean:NaN,count:0,maxBin:0,hist:[],missing:0};let l=0;const c=t.map((t,i)=>s(t,e[i])?NaN:r(t,e[i])).reduce((t,e)=>(isNaN(e)?l++:t.push(e),t),[]),h=n.layout.histogram();a&&h.range(()=>a),o?h.bins(o):h.bins(i(t.length));const d=n.extent(c),u=h(c);return{min:d[0],max:d[1],mean:n.mean(c),count:t.length,maxBin:Math.max(...u.map(t=>t.y)),hist:u,missing:l}},e.a=function(t,e,r,i){const n=new Map;let s=0;i.forEach(t=>n.set(t,0)),t.forEach((t,i)=>{const a=r(t,e[i]);null!=a&&0!==a.length?a.forEach(t=>{n.set(t,(n.get(t)||0)+1)}):s+=1});const a=[];return n.forEach((t,e)=>a.push({cat:e,y:t})),{maxBin:Math.max(...a.map(t=>t.y)),hist:a,missing:s}};var n=r(3);r.n(n)},function(t,e,r){"use strict";class i{createGroupDOM(){return{template:"",update:()=>void 0}}createGroupCanvas(){return()=>void 0}}e.a=i},function(t,e,r){"use strict";function i(t){return`lu-stacked-${t.id}`}function n(t,e,r,i){const n=r&&e.option("stacked",!0),s=e.option("columnPadding",0);let a=0;return{cols:t.children.map(t=>{const r=a,o=t.getWidth();return a+=o,a+=n?0:s,{column:t,shift:r,width:o,renderer:e.renderer(t,i),groupRenderer:e.groupRenderer(t,i)}}),stacked:n,padding:s}}e.c=i,e.a=n;var s=r(0),a=r(81),o=r(11),l=r(41),c=r(4),h=r(2);class d extends a.a{constructor(t=!0){super(),this.nestingPossible=t,this.title=this.nestingPossible?"Stacked Bar":"Nested"}canRender(t){return Object(o.b)(t)}createDOM(t,e,r){const{cols:a,stacked:o,padding:h}=n(t,e,this.nestingPossible,r),d=e.option("useGridLayout",!1);return{template:`<div class='${t.desc.type} component${e.option("stackLevel",0)} ${d?i(t):""}${d&&!o?" lu-grid-space":""}'>${a.map(t=>t.renderer.template).join("")}</div>`,update:(e,r,i,n)=>{if(Object(c.b)(e,t,r))return;Object(s.o)(e,a,"detail","html");const u=Array.from(e.children),p=t.getWidth();let g=0;a.forEach((t,e)=>{const a=t.column.getWidth()/p,c=u[e];c.style.transform=o?`translate(-${Object(s.q)(g/a*100,4)}%,0)`:null,d?l.b?c.style.msGridColumn=(e+1).toString():c.style.gridColumnStart=(e+1).toString():(c.style.width=`${Object(s.q)(100*a,2)}%`,c.style.marginRight=o?null:`${h}px`),t.renderer.update(c,r,i,n),o&&(g+=(1-t.column.getValue(r.v,r.dataIndex))*a)})}}}createCanvas(t,e,r){const{cols:i,stacked:s}=n(t,e,this.nestingPossible,r);return(r,n,a,o,l,h)=>{if(Object(c.a)(r,t,n,e.rowHeight(a)))return;let d=0;i.forEach(t=>{const e=t.shift-d;r.translate(e,0),t.renderer(r,n,a,o+e,l,h),r.translate(-e,0),s&&(d+=t.width*(1-t.column.getValue(n.v,n.dataIndex)))})}}createGroupDOM(t,e,r){if(this.nestingPossible&&Object(h.h)(t))return super.createGroupDOM(t,e,r);const{cols:a,padding:o}=n(t,e,!1,r),c=e.option("useGridLayout",!1);return{template:`<div class='${t.desc.type} component${e.option("stackLevel",0)} ${c?i(t):""}${c?" lu-grid-space":""}'>${a.map(t=>t.groupRenderer.template).join("")}</div>`,update:(e,r,i)=>{Object(s.o)(e,a,"detail","html");const n=Array.from(e.children),h=t.getWidth();a.forEach((t,e)=>{const a=t.column.getWidth()/h,d=n[e];c?l.b?d.style.msGridColumn=(e+1).toString():d.style.gridColumnStart=(e+1).toString():(d.style.width=`${Object(s.q)(100*a,2)}%`,d.style.marginRight=`${o}px`),t.groupRenderer.update(d,r,i)})}}}createGroupCanvas(t,e,r){if(this.nestingPossible&&Object(h.h)(t))return super.createGroupCanvas(t,e,r);const{cols:i}=n(t,e,!1,r);return(t,e,r,n,s)=>{i.forEach(i=>{const a=i.shift;t.translate(a,0),i.groupRenderer(t,e,r,n+a,s,e),t.translate(-a,0)})}}aggregatedIndex(t,e){return console.assert(Object(h.h)(e)),Object(h.k)(t,e)}}e.b=d},function(t,e,r){"use strict";var i=r(82),n=(r.n(i),r(42));r.d(e,"a",function(){return n.a});var s=r(56);r.d(e,"b",function(){return s.b})},function(t,e,r){"use strict";e.b=function(t,e){i.b?t.style.msGridColumn=e.index+1:t.style.gridColumnStart=e.id,t.dataset.id=e.id};var i=r(56);class n extends i.a{constructor(t,e){super(t),this.id=e,this.extraScrollUpdater=[];const r=t.querySelector("header"),i=t.querySelector("main");i.addEventListener("scroll",()=>{const t=i.scrollLeft;r.scrollLeft=t,this.extraScrollUpdater.forEach(e=>e(t))})}static columnWidths(t,e="px"){const r=i.b?function(t,e){return`(${e})[${t}]`}:function(t,e){return`repeat(${t}, ${e})`};let n=0,s=0,a="";return t.forEach(({width:t})=>{n!==t?(s>0&&(a+=1===s?`${n}${e} `:`${r(s,`${n}${e}`)} `),s=1,n=t):s++}),s>0&&(a+=1===s?`${n}${e}`:`${r(s,`${n}${e}`)}`),a}static gridColumn(t,e,r="px"){const s=n.columnWidths(t,r);return i.b?`-ms-grid-columns: ${s};`:`grid-template-columns: ${s};\n      grid-template-areas: "${t.map(t=>t.id).join(" ")}";\n      grid-auto-columns: ${e}px;`}update(t,e,r,s,a,o="px"){const l=void 0!==a?this.tableIds(a,!0):{header:`${this.id} > header > article`,body:`${this.id} > main > article`};if(this.updateRule(`__heightsRule${l.body}`,`${l.body} > div {\n      height: ${t}px;\n    }`),0===e.length)return void this.deleteRule(`__widthRule${l.body}`);const c=n.gridColumn(e,r,o);i.b&&this.extraScrollUpdater.push(this.updateFrozenColumnsShift.bind(this,e,l,s,o)),this.updateRule(`__widthRule${l.body}`,`${l.body} > div, ${l.header} { ${c} }`),this.updateFrozen(e,l,s,o)}remove(t){const e=this.tableIds(t,!0);this.deleteRule(`__heightsRule${e.body}`),this.deleteRule(`__widthRule${e.body}`);const r=`__frozen${e.body}_`,i=this.ruleNames.reduce((t,e)=>t+(e.startsWith(r)?1:0),0);for(let t=0;t<i;++t)this.deleteRule(`${r}${t}`)}tableIds(t,e=!1){const r=this.id.startsWith("#")?this.id.slice(1):this.id;return{header:`${e?"#":""}${r}_H${t}`,body:`${e?"#":""}${r}_B${t}`}}updateFrozen(t,e,r,n){if(i.b)return;const s=`__frozen${e.body}_`,a=this.ruleNames.reduce((t,e)=>t+(e.startsWith(s)?1:0),0),o=t.filter(t=>t.frozen);if(o.length<=0||i.b){for(let t=0;t<a;++t)this.deleteRule(`${s}${t}`);return}let l=o[0].width;o.slice(1).forEach((t,r)=>{const i=`${e.body} > div > .frozen[data-id="${t.id}"], ${e.header} .frozen[data-id="${t.id}"] {\n        left: ${l}${n};\n      }`;l+=t.width,this.updateRule(`${s}${r}`,i)});for(let t=o.length-1;t<a;++t)this.deleteRule(`${s}${t}`)}updateFrozenColumnsShift(t,e,r,n,s){if(!i.b)return;const a=`__frozen${e.body}_`,o=this.ruleNames.reduce((t,e)=>t+(e.startsWith(a)?1:0),0);if(!t.some(t=>t.frozen)){for(let t=0;t<o;++t)this.deleteRule(`${a}${t}`);return}let l=0,c=0,h=0;t.forEach(t=>{if(t.frozen&&l<s+c){const r=`${e.body} > div > .frozen[data-id="${t.id}"], ${e.header} .frozen[data-id="${t.id}"] {\n          transform: translate(${s-l+c}${n}, 0);\n        }`;this.updateRule(`${a}${h++}`,r),c+=t.width}l+=t.width});for(let t=h;t<o;++t)this.deleteRule(`${a}${t}`)}}e.a=n},function(t,e,r){"use strict";e.b=function(t,e,r){const i=Array.from(t.children);i.length>e.length?i.slice(e.length).forEach(t=>t.remove()):e.length>i.length&&t.insertAdjacentHTML("beforeend",r.repeat(e.length-i.length))};var i=r(3),n=(r.n(i),r(4)),s=r(5),a=r(2);class o{canRender(t,e){return Object(a.i)(t)}static choose(t,e){const r=e.map(e=>t.getRawNumbers(e.v,e.dataIndex)),n=t.getDataLength(),a=[];for(let t=0;t<n;++t){const e=r.map(e=>e[t]).filter(t=>!Object(s.b)(t));a.push(Object(i.mean)(e))}return a}createDOM(t){const{templateRow:e,render:r}=this.createDOMContext(t);return{template:`<div>${e}</div>`,update:(e,i)=>{Object(n.b)(e,t,i)||r(e,t.getRawNumbers(i.v,i.dataIndex))}}}createGroupDOM(t){const{templateRow:e,render:r}=this.createDOMContext(t);return{template:`<div>${e}</div>`,update:(e,i,n)=>{const s=o.choose(t,n);r(e,s)}}}createCanvas(t,e){const r=this.createCanvasContext(t,e);return(i,s,a)=>{if(Object(n.a)(i,t,s,e.rowHeight(a)))return;const o=e.rowHeight(a);r(i,t.getRawNumbers(s.v,s.dataIndex),0,o)}}createGroupCanvas(t,e){const r=this.createCanvasContext(t,e);return(i,n,s)=>{const a=e.groupHeight(n),l=o.choose(t,s);r(i,l,0,a)}}}e.a=o},function(t,e,r){"use strict";e.a="hoverChanged";e.b="renderFinished"},function(t,e,r){"use strict";var i=r(1),n=r(9);class s extends n.a{constructor(t,e){super(t,e),this.annotations=new Map}createEventList(){return super.createEventList().concat([s.EVENT_VALUE_CHANGED])}getValue(t,e){return this.annotations.has(e)?this.annotations.get(e):super.getValue(t,e)}dump(t){const e=super.dump(t);return e.annotations={},this.annotations.forEach((t,r)=>{e.annotations[r]=t}),e}restore(t,e){super.restore(t,e),t.annotations&&Object.keys(t.annotations).forEach(e=>{this.annotations.set(Number(e),t.annotations[e])})}setValue(t,e,r){const n=this.getValue(t,e);return n===r||(""===r||null==r?this.annotations.delete(e):this.annotations.set(e,r),this.fire([s.EVENT_VALUE_CHANGED,i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY],e,n,r),!0)}}e.a=s,s.EVENT_VALUE_CHANGED="valueChanged"},function(t,e,r){"use strict";var i=r(1),n=r(7);class s extends n.a{constructor(t,e){super(t,e),this.currentFilter=null,this.trueMarker="X",this.falseMarker="",this.setWidthImpl(30),this.trueMarker=e.trueMarker||this.trueMarker,this.falseMarker=e.falseMarker||this.falseMarker}get categories(){return[this.trueMarker,this.falseMarker]}get categoryLabels(){return["True","False"]}get categoryColors(){return["green","red"]}getValue(t,e){const r=super.getValue(t,e);return void 0!==r&&null!=r&&(!0===r||"true"===r||"yes"===r||"x"===r)}isMissing(){return!1}getCategories(t,e){return this.getValue(t,e)?[this.trueMarker]:[this.falseMarker]}getColor(t,e){return this.getValue(t,e)?"green":"red"}getLabel(t,e){return this.getValue(t,e)?this.trueMarker:this.falseMarker}dump(t){const e=super.dump(t);return null!==this.currentFilter&&(e.filter=this.currentFilter),e}restore(t,e){super.restore(t,e),void 0!==t.filter&&(this.currentFilter=t.filter)}isFiltered(){return null!==this.currentFilter}filter(t,e){if(!this.isFiltered())return!0;return this.getValue(t,e)===this.currentFilter}getFilter(){return this.currentFilter}setFilter(t){this.currentFilter!==t&&this.fire([i.a.EVENT_FILTER_CHANGED,i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY],this.currentFilter,this.currentFilter=t)}compare(t,e,r,i){const n=this.getValue(t,r),s=this.getValue(e,i);return n===s?0:n<s?-1:1}group(t,e){return this.getValue(t,e)?s.GROUP_TRUE:s.GROUP_FALSE}}e.a=s,s.GROUP_TRUE={name:"True",color:"black"},s.GROUP_FALSE={name:"False",color:"white"}},function(t,e,r){"use strict";e.a=function(t="Min"){return{type:"min",label:t}};var i=r(15);class n extends i.a{constructor(t,e){super(t,e),this.setDefaultRenderer("interleaving")}getColor(t,e){const r=this._children;if(0===r.length)return this.color;let i=0,n=r[0].getValue(t,e);for(let s=1;s<r.length;++s){const a=r[s].getValue(t,e);a<n&&(i=s,n=a),s++}return r[i].color}compute(t,e){return Math.min(...this._children.map(r=>r.getValue(t,e)))}toSortingDesc(t){return{operation:"min",operands:this._children.map(e=>e.toSortingDesc(t))}}get canJustAddNumbers(){return!0}}e.b=n},function(t,e,r){"use strict";e.a=function(t="Max"){return{type:"max",label:t}};var i=r(15);class n extends i.a{constructor(t,e){super(t,e),this.setDefaultRenderer("interleaving")}getColor(t,e){const r=this._children;if(0===r.length)return this.color;let i=0,n=r[0].getValue(t,e);for(let s=1;s<r.length;++s){const a=r[s].getValue(t,e);a>n&&(i=s,n=a)}return r[i].color}compute(t,e){return Math.max(...this._children.map(r=>r.getValue(t,e)))}toSortingDesc(t){return{operation:"max",operands:this._children.map(e=>e.toSortingDesc(t))}}get canJustAddNumbers(){return!0}}e.b=n},function(t,e,r){"use strict";e.a=function(t="Mean"){return{type:"mean",label:t}};var i=r(3),n=(r.n(i),r(15));class s extends n.a{compute(t,e){return Object(i.mean)(this._children,r=>r.getValue(t,e))}toSortingDesc(t){return{operation:"avg",operands:this._children.map(e=>e.toSortingDesc(t))}}get canJustAddNumbers(){return!0}}e.b=s},function(t,e,r){"use strict";var i=r(3),n=(r.n(i),r(1)),s=r(7),a=r(10),o=r(8);class l extends s.a{constructor(t,e){if(super(t,e),this.colors=i.scale.category10(),this.catLabels=new Map,this.scale=i.scale.ordinal().rangeRoundPoints([0,1]),this.currentFilter=null,this.separator=";",this.combiner=i.max,this.separator=e.separator||this.separator,a.a.prototype.initCategories.call(this,e),this.scale.domain(this.colors.domain()),e.categories){const t=e.categories.map(t=>"string"!=typeof t&&"number"==typeof t.value?t.value:.5);this.scale.range(t)}this.setDefaultRenderer("number"),this.setDefaultGroupRenderer("boxplot")}createEventList(){return super.createEventList().concat([l.EVENT_MAPPING_CHANGED])}get categories(){return this.colors.domain().slice()}get categoryColors(){return this.colors.range().slice()}get categoryLabels(){return null===this.catLabels||0===this.catLabels.size?this.categories:this.categories.map(t=>this.catLabels.has(t)?this.catLabels.get(t):t)}colorOf(t){return this.colors(t)}getLabel(t,e){return a.a.prototype.getLabel.call(this,t,e)}getFirstLabel(t,e){return a.a.prototype.getFirstLabel.call(this,t,e)}getLabels(t,e){return a.a.prototype.getLabels.call(this,t,e)}getValue(t,e){const r=this.getValues(t,e);return r.length>0?this.combiner(r):0}getValues(t,e){return a.a.prototype.getValues.call(this,t,e).map(this.scale)}getCategories(t,e){return a.a.prototype.getValues.call(this,t,e)}getNumber(t,e){return this.getValue(t,e)}isMissing(t,e){return 0===this.getLabels(t,e).length}getRawNumber(t,e){return this.getNumber(t,e)}getColor(t,e){const r=this.getValues(t,e),n=this.getColors(t,e);return this.combiner===i.max?n.slice(1).reduce((t,e,i)=>r[i+1]>t.v?{c:e,v:r[i+1]}:t,{c:n[0],v:r[0]}).c:this.combiner===i.min?n.slice(1).reduce((t,e,i)=>r[i+1]<t.v?{c:e,v:r[i+1]}:t,{c:n[0],v:r[0]}).c:n[0]||null}getColors(t,e){return a.a.prototype.getColors.call(this,t,e)}dump(t){const e=a.a.prototype.dump.call(this,t);return e.scale={domain:this.scale.domain(),range:this.scale.range(),separator:this.separator},e}restore(t,e){a.a.prototype.restore.call(this,t,e),t.scale&&this.scale.domain(t.scale.domain).range(t.scale.range),this.separator=t.separator||this.separator}getScale(){return{domain:this.scale.domain(),range:this.scale.range()}}getMapping(){return this.scale.range().slice()}setMapping(t){const e=this.getScale();this.scale.range(t),this.fire([l.EVENT_MAPPING_CHANGED,n.a.EVENT_DIRTY_VALUES,n.a.EVENT_DIRTY],e,this.getScale())}isFiltered(){return null!=this.currentFilter}filter(t,e){return a.a.prototype.filter.call(this,t,e)}group(t,e){return a.a.prototype.group.call(this,t,e)}getFilter(){return this.currentFilter}setFilter(t){return a.a.prototype.setFilter.call(this,t)}compare(t,e,r,i){return o.d.prototype.compare.call(this,t,e,r,i)}groupCompare(t,e){return o.d.prototype.groupCompare.call(this,t,e)}getRendererType(){return o.d.prototype.getRendererType.call(this)}}e.a=l,l.EVENT_MAPPING_CHANGED=o.d.EVENT_MAPPING_CHANGED},function(t,e,r){"use strict";var i=r(3),n=(r.n(i),r(7)),s=r(1),a=r(8),o=r(5),l=r(2);class c extends n.a{constructor(t,e){super(t,e),this.currentFilter=Object(l.l)(),e.map?this.mapping=Object(a.c)(e.map):e.domain&&(this.mapping=new a.a(e.domain,"linear",e.range||[0,1])),this.original=this.mapping.clone(),this.dataLength=e.dataLength,this.threshold=e.threshold||0,this.colorRange=e.colorRange||["blue","red"],this.sort=e.sort||l.d.median,this.setWidth(Math.min(Math.max(100,10*this.dataLength),500)),this.splicer={length:this.dataLength,splice:t=>t}}setSplicer(t){this.fire([c.EVENT_SPLICE_CHANGED,s.a.EVENT_DIRTY_VALUES,s.a.EVENT_DIRTY_HEADER,s.a.EVENT_DIRTY],this.splicer,this.splicer=t)}getSplicer(){return this.splicer}compare(t,e,r,i){return Object(l.e)(this,t,e,r,i)}getColorRange(){return this.colorRange.slice()}getRawColorScale(){const t=i.scale.linear(),e=this.mapping.domain;return e[0]<0?t.domain([e[0],0,e[1]]).range([this.colorRange[0],this.colorRange.length>2?this.colorRange[1]:"white",this.colorRange[this.colorRange.length-1]]):t.domain([e[0],e[1]]).range([this.colorRange[0],this.colorRange[this.colorRange.length-1]]),t}getRawNumbers(t,e){return this.getRawValue(t,e)}getDataLength(){return this.splicer?this.splicer.length:this.dataLength}getThreshold(){return this.threshold}getBoxPlotData(t,e){const r=this.getRawValue(t,e);return null===r?null:new l.c(r,this.mapping)}getRange(){return this.mapping.getRange(l.b)}getRawBoxPlotData(t,e){const r=this.getRawValue(t,e);return null===r?null:new l.c(r)}getNumbers(t,e){return this.getValue(t,e)}getNumber(t,e){return Object(l.f)(this,t,e,"normalized")}getRawNumber(t,e){return Object(l.f)(this,t,e,"raw")}getValue(t,e){return this.getRawValue(t,e).map(t=>Object(o.b)(t)?NaN:this.mapping.apply(t))}getRawValue(t,e){let r=super.getValue(t,e);return this.splicer&&null!==r&&(r=this.splicer.splice(r)),null===r?[]:r}getLabel(t,e){const r=this.getRawValue(t,e);return null===r?"":`[${r.map(l.b).join(", ")}]`}getSortMethod(){return this.sort}setSortMethod(t){this.sort!==t&&(this.fire([s.a.EVENT_SORTMETHOD_CHANGED],this.sort,this.sort=t),this.isSortedByMe().asc||this.sortByMe())}dump(t){const e=super.dump(t);return e.sortMethod=this.getSortMethod(),e.filter=Object(l.j)(this.currentFilter,Object(l.l)())?null:this.currentFilter,e.map=this.mapping.dump(),e}restore(t,e){super.restore(t,e),t.sortMethod&&(this.sort=t.sortMethod),t.filter&&(this.currentFilter=Object(l.n)(t.filter)),t.map?this.mapping=Object(a.c)(t.map):t.domain&&(this.mapping=new a.a(t.domain,"linear",t.range||[0,1]))}createEventList(){return super.createEventList().concat([c.EVENT_MAPPING_CHANGED,c.EVENT_SPLICE_CHANGED])}getOriginalMapping(){return this.original.clone()}getMapping(){return this.mapping.clone()}setMapping(t){this.mapping.eq(t)||this.fire([c.EVENT_MAPPING_CHANGED,s.a.EVENT_DIRTY_VALUES,s.a.EVENT_DIRTY],this.mapping.clone(),this.mapping=t)}isFiltered(){return a.d.prototype.isFiltered.call(this)}getFilter(){return a.d.prototype.getFilter.call(this)}setFilter(t={min:-1/0,max:1/0,filterMissing:!1}){a.d.prototype.setFilter.call(this,t)}filter(t,e){return a.d.prototype.filter.call(this,t,e)}}e.a=c,c.EVENT_MAPPING_CHANGED=a.d.EVENT_MAPPING_CHANGED,c.EVENT_SPLICE_CHANGED="spliceChanged"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(14);r.d(e,"DataProvider",function(){return i.a});var n=r(73);r.d(e,"LocalDataProvider",function(){return n.a});var s=r(74);r.d(e,"RemoteDataProvider",function(){return s.a});var a=r(54);r.d(e,"deriveColumnDescriptions",function(){return a.a})},function(t,e,r){"use strict";class i{constructor(t=[]){this[Symbol.toStringTag]=Symbol("OrderedSet"),this.set=new Set,this.list=[],this.addAll(t)}get size(){return this.set.size}clear(){this.set.clear(),this.list.splice(0,this.list.length)}addAll(t){return t.forEach(t=>this.add(t)),this}add(t){return this.set.has(t)?this:(this.set.add(t),this.list.push(t),this)}has(t){return this.set.has(t)}delete(t){if(!this.set.delete(t))return!1;const e=this.list.indexOf(t);return console.assert(e>=0),this.list.splice(e,1),!0}deleteAll(t){return t.reduce((t,e)=>this.delete(e)&&t,!0)}forEach(t,e){this.list.forEach(function(e){t.call(this,e,e,this)},e)}[Symbol.iterator](){return this.list[Symbol.iterator]()}}e.a=i},function(t,e,r){"use strict";function i(t,e,r,i,s){const a={type:"string",label:t,column:r};if("number"==typeof e)return a.type="number",a.domain=Object(n.extent)(i,t=>t[r]),a;if("boolean"==typeof e)return a.type="boolean",a;if("string"==typeof e){const t=new Set(i.map(t=>t[r]));return t.size<i.length*s.categoricalThreshold&&(a.type="categorical",a.categories=t),a}return a}e.a=function(t,e={}){const r=Object.assign({categoricalThreshold:.7},e),n=[];if(0===t.length)return n;const s=t[0];return Array.isArray(s)?s.map((e,n)=>i(`Col${n}`,e,n,t,r)):Object.keys(s).map(e=>i(e,s[e],e,t,r))},e.b=function(t,e,r={}){function i(t,e){return!(n.quote||t.indexOf("\n")>=0)||e&&Object(s.isNumberColumn)(e)?t:`${n.quoteChar}${t.replace(a,n.quoteChar+n.quoteChar)}${n.quoteChar}`}const n=Object.assign({separator:"\t",newline:"\n",header:!0,quote:!1,quoteChar:'"',filter:t=>!Object(s.isSupportType)(t),verboseColumnHeaders:!1},r),a=new RegExp(`[${n.quoteChar}]`,"g"),o=t.flatColumns.filter(t=>n.filter(t.desc)),l=t.getOrder(),c=[];return n.header&&c.push(o.map(t=>i(`${t.label}${n.verboseColumnHeaders&&t.description?`\n${t.description}`:""}`)).join(n.separator)),e.forEach((t,e)=>{c.push(o.map(r=>i(r.getLabel(t,l[e]),r)).join(n.separator))}),c.join(n.newline)};var n=r(3),s=(r.n(n),r(12))},function(t,e,r){"use strict";function i(t,e,r,i){const n=i.column;return function(t){return"string"==typeof t&&t.indexOf(".")>=0}(n)?function(t,e){return t.split(".").reduce((t,e)=>void 0===t?t:/\d+/.test(e)?t[+e]:t[e],e)}(n,t):t[n]}var n=r(12),s=r(13),a=r(14);class o extends a.a{constructor(t=[],e={}){super(e),this.columns=t,this.rankingIndex=0,this.ranks=new Map,t.forEach(t=>{t.accessor=t.accessor||i,t.label=t.label||t.column})}rankAccessor(t,e,r,i,n){const s=this.ranks.get(n.id)||[];let a=0;for(const t of s){const r=t.order.indexOf(e);if(r>=0)return a+r+1;a+=t.order.length}return-1}getMaxNestedSortingCriteria(){return 1}getMaxGroupColumns(){return 1}cloneRanking(t){const e=this.nextRankingId(),r=new s.a(e,this.getMaxNestedSortingCriteria(),this.getMaxGroupColumns());return t?(this.ranks.set(e,this.ranks.get(t.id)),t.children.forEach(t=>{this.push(r,t.desc)})):r.push(this.create(Object(n.createRankDesc)())),r}cleanUpRanking(t){this.ranks.delete(t.id)}sort(t){const e=this.sortImpl(t);return Array.isArray(e)?(this.ranks.set(t.id,e),e):e.then(e=>(this.ranks.set(t.id,e),e))}pushDesc(t){const e=t;e.accessor=e.accessor||i,e.label=t.label||e.column,this.columns.push(t),this.fire(a.a.EVENT_ADD_DESC,e)}clearColumns(){this.clearRankings(),this.columns.splice(0,this.columns.length),this.fire(a.a.EVENT_CLEAR_DESC)}getColumns(){return this.columns.slice()}findDesc(t){return this.columns.filter(e=>e.column===t)[0]}toDescRef(t){return void 0!==t.column?`${t.type}@${t.column}`:t}fromDescRef(t){return"string"==typeof t?this.columns.find(e=>`${e.type}@${e.column}`===t):t}restore(t){super.restore(t),this.rankingIndex=1+Math.max(...this.getRankings().map(t=>+t.id.substring(4)))}nextRankingId(){return`rank${this.rankingIndex++}`}}e.a=o},function(t,e,r){"use strict";const i="undefined"!=typeof CSS&&CSS.supports("(-ms-ime-align:auto)");e.b=i;class n{constructor(t){this.rules=new Map,this.node=t.ownerDocument.createElement("style"),t.appendChild(this.node),i&&t.classList.add("ms-edge")}get stylesheet(){const t=this.node.sheet;return this.rules.size>0&&0===t.cssRules.length&&this.rules.forEach(e=>{e.index=t.cssRules.length,t.insertRule(e.rule.cssText),e.rule=t.cssRules.item(e.index)}),t}destroy(){this.node.remove()}addRule(t,e){const r=this.stylesheet.cssRules.length;return this.stylesheet.insertRule(e,r),this.rules.set(t,{rule:this.stylesheet.cssRules[r],index:r}),t}findIndex(t,e){return this.stylesheet.cssRules[t]===e?t:Array.from(this.stylesheet.cssRules).indexOf(e)}updateRule(t,e){const r=this.rules.get(t);return r?(r.index=this.findIndex(r.index,r.rule),this.stylesheet.deleteRule(r.index),this.stylesheet.insertRule(e,r.index),r.rule=this.stylesheet.cssRules[r.index],t):this.addRule(t,e)}deleteRule(t){const e=this.rules.get(t);e&&(e.index=this.findIndex(e.index,e.rule),this.stylesheet.deleteRule(e.index),this.rules.delete(t))}get ruleNames(){return Array.from(this.rules.keys())}}e.a=n},function(t,e,r){"use strict";var i=r(0),n=r(4);class s{constructor(){this.title="Color"}canRender(){return!1}createDOM(t){return{template:'<div style="background-color: transparent" title=""></div>',update:(e,r)=>{const i=Object(n.b)(e,t,r);e.style.backgroundColor=i?null:t.getColor(r.v,r.dataIndex),e.title=t.getLabel(r.v,r.dataIndex)}}}createCanvas(t,e){return(r,i,s)=>{Object(n.a)(r,t,i,e.rowHeight(s))||(r.fillStyle=t.getColor(i.v,i.dataIndex)||"",r.fillRect(0,0,e.colWidth(t),e.rowHeight(s)))}}static choose(t,e){const r=new Map;t.categories.forEach(t=>r.set(t,0)),e.forEach(e=>t.getCategories(e.v,e.dataIndex).forEach(t=>r.set(t,(r.get(t)||0)+1)));let i=0,n=0;return t.categories.forEach((t,e)=>{const s=r.get(t);s>i&&(i=s,n=e)}),{count:i,label:t.categoryLabels[n],color:t.categoryColors[n]}}createGroupDOM(t){return{template:'<div style="background-color: white"></div>',update:(e,r,i)=>{const{count:n,label:a,color:o}=s.choose(t,i);e.textContent=`${a} (${n})`,e.style.backgroundColor=o}}}createGroupCanvas(t,e){const r=e.colWidth(t);return(n,a,o)=>{const l=e.groupHeight(a),{count:c,label:h,color:d}=s.choose(t,o);n.fillStyle=d,n.fillRect(0,0,r,l),n.fillStyle=e.option("style.text","black");const u=n.textAlign;n.textAlign="center",Object(i.d)(n,`${h} (${c})`,r/2,l/2,r,e.textHints),n.textAlign=u}}}e.a=s},function(t,e,r){"use strict";(function(t){function r(t){return t&&"[object Function]"==={}.toString.call(t)}function i(t,e){if(1!==t.nodeType)return[];var r=getComputedStyle(t,null);return e?r[e]:r}function n(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function s(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=i(t),r=e.overflow,a=e.overflowX,o=e.overflowY;return/(auto|scroll)/.test(r+o+a)?t:s(n(t))}function a(t){var e=t&&t.offsetParent,r=e&&e.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TD","TABLE"].indexOf(e.nodeName)&&"static"===i(e,"position")?a(e):e:t?t.ownerDocument.documentElement:document.documentElement}function o(t){return null!==t.parentNode?o(t.parentNode):t}function l(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var r=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,i=r?t:e,n=r?e:t,s=document.createRange();s.setStart(i,0),s.setEnd(n,0);var c=s.commonAncestorContainer;if(t!==c&&e!==c||i.contains(n))return function(t){var e=t.nodeName;return"BODY"!==e&&("HTML"===e||a(t.firstElementChild)===t)}(c)?c:a(c);var h=o(t);return h.host?l(h.host,e):l(t,o(e).host)}function c(t){var e="top"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",r=t.nodeName;if("BODY"===r||"HTML"===r){var i=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||i)[e]}return t[e]}function h(t,e){var r="x"===e?"Left":"Top",i="Left"===r?"Right":"Bottom";return parseFloat(t["border"+r+"Width"],10)+parseFloat(t["border"+i+"Width"],10)}function d(t,e,r,i){return Math.max(e["offset"+t],e["scroll"+t],r["client"+t],r["offset"+t],r["scroll"+t],F()?r["offset"+t]+i["margin"+("Height"===t?"Top":"Left")]+i["margin"+("Height"===t?"Bottom":"Right")]:0)}function u(){var t=document.body,e=document.documentElement,r=F()&&getComputedStyle(e);return{height:d("Height",t,e,r),width:d("Width",t,e,r)}}function p(t){return q({},t,{right:t.left+t.width,bottom:t.top+t.height})}function g(t){var e={};if(F())try{e=t.getBoundingClientRect();var r=c(t,"top"),n=c(t,"left");e.top+=r,e.left+=n,e.bottom+=r,e.right+=n}catch(t){}else e=t.getBoundingClientRect();var s={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},a="HTML"===t.nodeName?u():{},o=a.width||t.clientWidth||s.right-s.left,l=a.height||t.clientHeight||s.bottom-s.top,d=t.offsetWidth-o,g=t.offsetHeight-l;if(d||g){var f=i(t);d-=h(f,"x"),g-=h(f,"y"),s.width-=d,s.height-=g}return p(s)}function f(t,e){var r=F(),n="HTML"===e.nodeName,a=g(t),o=g(e),l=s(t),h=i(e),d=parseFloat(h.borderTopWidth,10),u=parseFloat(h.borderLeftWidth,10),f=p({top:a.top-o.top-d,left:a.left-o.left-u,width:a.width,height:a.height});if(f.marginTop=0,f.marginLeft=0,!r&&n){var m=parseFloat(h.marginTop,10),E=parseFloat(h.marginLeft,10);f.top-=d-m,f.bottom-=d-m,f.left-=u-E,f.right-=u-E,f.marginTop=m,f.marginLeft=E}return(r?e.contains(l):e===l&&"BODY"!==l.nodeName)&&(f=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=c(e,"top"),n=c(e,"left"),s=r?-1:1;return t.top+=i*s,t.bottom+=i*s,t.left+=n*s,t.right+=n*s,t}(f,e)),f}function m(t){var e=t.nodeName;return"BODY"!==e&&"HTML"!==e&&("fixed"===i(t,"position")||m(n(t)))}function E(t,e,r,i){var a={top:0,left:0},o=l(t,e);if("viewport"===i)a=function(t){var e=t.ownerDocument.documentElement,r=f(t,e),i=Math.max(e.clientWidth,window.innerWidth||0),n=Math.max(e.clientHeight,window.innerHeight||0),s=c(e),a=c(e,"left");return p({top:s-r.top+r.marginTop,left:a-r.left+r.marginLeft,width:i,height:n})}(o);else{var h=void 0;"scrollParent"===i?"BODY"===(h=s(n(e))).nodeName&&(h=t.ownerDocument.documentElement):h="window"===i?t.ownerDocument.documentElement:i;var d=f(h,o);if("HTML"!==h.nodeName||m(o))a=d;else{var g=u(),E=g.height,b=g.width;a.top+=d.top-d.marginTop,a.bottom=E+d.top,a.left+=d.left-d.marginLeft,a.right=b+d.left}}return a.left+=r,a.top+=r,a.right-=r,a.bottom-=r,a}function b(t,e,r,i,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var a=E(r,i,s,n),o={top:{width:a.width,height:e.top-a.top},right:{width:a.right-e.right,height:a.height},bottom:{width:a.width,height:a.bottom-e.bottom},left:{width:e.left-a.left,height:a.height}},l=Object.keys(o).map(function(t){return q({key:t},o[t],{area:function(t){return t.width*t.height}(o[t])})}).sort(function(t,e){return e.area-t.area}),c=l.filter(function(t){var e=t.width,i=t.height;return e>=r.clientWidth&&i>=r.clientHeight}),h=c.length>0?c[0].key:l[0].key,d=t.split("-")[1];return h+(d?"-"+d:"")}function v(t,e,r){return f(r,l(e,r))}function y(t){var e=getComputedStyle(t),r=parseFloat(e.marginTop)+parseFloat(e.marginBottom),i=parseFloat(e.marginLeft)+parseFloat(e.marginRight);return{width:t.offsetWidth+i,height:t.offsetHeight+r}}function _(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function T(t,e,r){r=r.split("-")[0];var i=y(t),n={width:i.width,height:i.height},s=-1!==["right","left"].indexOf(r),a=s?"top":"left",o=s?"left":"top",l=s?"height":"width",c=s?"width":"height";return n[a]=e[a]+e[l]/2-i[l]/2,n[o]=r===o?e[o]-i[c]:e[_(o)],n}function x(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function C(t,e,i){return(void 0===i?t:t.slice(0,function(t,e,r){if(Array.prototype.findIndex)return t.findIndex(function(t){return t[e]===r});var i=x(t,function(t){return t[e]===r});return t.indexOf(i)}(t,"name",i))).forEach(function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var i=t.function||t.fn;t.enabled&&r(i)&&(e.offsets.popper=p(e.offsets.popper),e.offsets.reference=p(e.offsets.reference),e=i(e,t))}),e}function N(t,e){return t.some(function(t){var r=t.name;return t.enabled&&r===e})}function O(t){for(var e=[!1,"ms","Webkit","Moz","O"],r=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<e.length-1;i++){var n=e[i],s=n?""+n+r:t;if(void 0!==document.body.style[s])return s}return null}function R(t){var e=t.ownerDocument;return e?e.defaultView:window}function D(t,e,r,i){var n="BODY"===t.nodeName,a=n?t.ownerDocument.defaultView:t;a.addEventListener(e,r,{passive:!0}),n||D(s(a.parentNode),e,r,i),i.push(a)}function A(){this.state.eventsEnabled||(this.state=function(t,e,r,i){r.updateBound=i,R(t).addEventListener("resize",r.updateBound,{passive:!0});var n=s(t);return D(n,"scroll",r.updateBound,r.scrollParents),r.scrollElement=n,r.eventsEnabled=!0,r}(this.reference,this.options,this.state,this.scheduleUpdate))}function L(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function(t,e){return R(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e}(this.reference,this.state))}function w(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function S(t,e){Object.keys(e).forEach(function(r){var i="";-1!==["width","height","top","right","bottom","left"].indexOf(r)&&w(e[r])&&(i="px"),t.style[r]=e[r]+i})}function V(t,e,r){var i=x(t,function(t){return t.name===e}),n=!!i&&t.some(function(t){return t.name===r&&t.enabled&&t.order<i.order});if(!n){var s="`"+e+"`",a="`"+r+"`";console.warn(a+" modifier is required by "+s+" modifier in order to work, be sure to include it before "+s+"!")}return n}function M(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=B.indexOf(t),i=B.slice(r+1).concat(B.slice(0,r));return e?i.reverse():i}function I(t,e,r,i){var n=[0,0],s=-1!==["right","left"].indexOf(i),a=t.split(/(\+|\-)/).map(function(t){return t.trim()}),o=a.indexOf(x(a,function(t){return-1!==t.search(/,|\s/)}));a[o]&&-1===a[o].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,c=-1!==o?[a.slice(0,o).concat([a[o].split(l)[0]]),[a[o].split(l)[1]].concat(a.slice(o+1))]:[a];return(c=c.map(function(t,i){var n=(1===i?!s:s)?"height":"width",a=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,a=!0,t):a?(t[t.length-1]+=e,a=!1,t):t.concat(e)},[]).map(function(t){return function(t,e,r,i){var n=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),s=+n[1],a=n[2];if(!s)return t;if(0===a.indexOf("%")){var o=void 0;switch(a){case"%p":o=r;break;case"%":case"%r":default:o=i}return p(o)[e]/100*s}if("vh"===a||"vw"===a)return("vh"===a?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*s;return s}(t,n,e,r)})})).forEach(function(t,e){t.forEach(function(r,i){w(r)&&(n[e]+=r*("-"===t[i-1]?-1:1))})}),n}for(var $="undefined"!=typeof window&&"undefined"!=typeof document,H=["Edge","Trident","Firefox"],k=0,j=0;j<H.length;j+=1)if($&&navigator.userAgent.indexOf(H[j])>=0){k=1;break}var G=$&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},k))}},P=void 0,F=function(){return void 0===P&&(P=-1!==navigator.appVersion.indexOf("MSIE 10")),P},U=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},W=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),Y=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},q=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},z=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],B=z.slice(3),K={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"},J={placement:"bottom",eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,r=e.split("-")[0],i=e.split("-")[1];if(i){var n=t.offsets,s=n.reference,a=n.popper,o=-1!==["bottom","top"].indexOf(r),l=o?"left":"top",c=o?"width":"height",h={start:Y({},l,s[l]),end:Y({},l,s[l]+s[c]-a[c])};t.offsets.popper=q({},a,h[i])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var r=e.offset,i=t.placement,n=t.offsets,s=n.popper,a=n.reference,o=i.split("-")[0],l=void 0;return l=w(+r)?[+r,0]:I(r,s,a,o),"left"===o?(s.top+=l[0],s.left-=l[1]):"right"===o?(s.top+=l[0],s.left+=l[1]):"top"===o?(s.left+=l[0],s.top-=l[1]):"bottom"===o&&(s.left+=l[0],s.top+=l[1]),t.popper=s,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var r=e.boundariesElement||a(t.instance.popper);t.instance.reference===r&&(r=a(r));var i=E(t.instance.popper,t.instance.reference,e.padding,r);e.boundaries=i;var n=e.priority,s=t.offsets.popper,o={primary:function(t){var r=s[t];return s[t]<i[t]&&!e.escapeWithReference&&(r=Math.max(s[t],i[t])),Y({},t,r)},secondary:function(t){var r="right"===t?"left":"top",n=s[r];return s[t]>i[t]&&!e.escapeWithReference&&(n=Math.min(s[r],i[t]-("right"===t?s.width:s.height))),Y({},r,n)}};return n.forEach(function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";s=q({},s,o[e](t))}),t.offsets.popper=s,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,r=e.popper,i=e.reference,n=t.placement.split("-")[0],s=Math.floor,a=-1!==["top","bottom"].indexOf(n),o=a?"right":"bottom",l=a?"left":"top",c=a?"width":"height";return r[o]<s(i[l])&&(t.offsets.popper[l]=s(i[l])-r[c]),r[l]>s(i[o])&&(t.offsets.popper[l]=s(i[o])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var r;if(!V(t.instance.modifiers,"arrow","keepTogether"))return t;var n=e.element;if("string"==typeof n){if(!(n=t.instance.popper.querySelector(n)))return t}else if(!t.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var s=t.placement.split("-")[0],a=t.offsets,o=a.popper,l=a.reference,c=-1!==["left","right"].indexOf(s),h=c?"height":"width",d=c?"Top":"Left",u=d.toLowerCase(),g=c?"left":"top",f=c?"bottom":"right",m=y(n)[h];l[f]-m<o[u]&&(t.offsets.popper[u]-=o[u]-(l[f]-m)),l[u]+m>o[f]&&(t.offsets.popper[u]+=l[u]+m-o[f]),t.offsets.popper=p(t.offsets.popper);var E=l[u]+l[h]/2-m/2,b=i(t.instance.popper),v=parseFloat(b["margin"+d],10),_=parseFloat(b["border"+d+"Width"],10),T=E-t.offsets.popper[u]-v-_;return T=Math.max(Math.min(o[h]-m,T),0),t.arrowElement=n,t.offsets.arrow=(r={},Y(r,u,Math.round(T)),Y(r,g,""),r),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(N(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var r=E(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement),i=t.placement.split("-")[0],n=_(i),s=t.placement.split("-")[1]||"",a=[];switch(e.behavior){case K.FLIP:a=[i,n];break;case K.CLOCKWISE:a=M(i);break;case K.COUNTERCLOCKWISE:a=M(i,!0);break;default:a=e.behavior}return a.forEach(function(o,l){if(i!==o||a.length===l+1)return t;i=t.placement.split("-")[0],n=_(i);var c=t.offsets.popper,h=t.offsets.reference,d=Math.floor,u="left"===i&&d(c.right)>d(h.left)||"right"===i&&d(c.left)<d(h.right)||"top"===i&&d(c.bottom)>d(h.top)||"bottom"===i&&d(c.top)<d(h.bottom),p=d(c.left)<d(r.left),g=d(c.right)>d(r.right),f=d(c.top)<d(r.top),m=d(c.bottom)>d(r.bottom),E="left"===i&&p||"right"===i&&g||"top"===i&&f||"bottom"===i&&m,b=-1!==["top","bottom"].indexOf(i),v=!!e.flipVariations&&(b&&"start"===s&&p||b&&"end"===s&&g||!b&&"start"===s&&f||!b&&"end"===s&&m);(u||E||v)&&(t.flipped=!0,(u||E)&&(i=a[l+1]),v&&(s="end"===s?"start":"start"===s?"end":s),t.placement=i+(s?"-"+s:""),t.offsets.popper=q({},t.offsets.popper,T(t.instance.popper,t.offsets.reference,t.placement)),t=C(t.instance.modifiers,t,"flip"))}),t},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,r=e.split("-")[0],i=t.offsets,n=i.popper,s=i.reference,a=-1!==["left","right"].indexOf(r),o=-1===["top","left"].indexOf(r);return n[a?"left":"top"]=s[r]-(o?n[a?"width":"height"]:0),t.placement=_(e),t.offsets.popper=p(n),t}},hide:{order:800,enabled:!0,fn:function(t){if(!V(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,r=x(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<r.top||e.left>r.right||e.top>r.bottom||e.right<r.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var r=e.x,i=e.y,n=t.offsets.popper,s=x(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration;void 0!==s&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var o=void 0!==s?s:e.gpuAcceleration,l=g(a(t.instance.popper)),c={position:n.position},h={left:Math.floor(n.left),top:Math.floor(n.top),bottom:Math.floor(n.bottom),right:Math.floor(n.right)},d="bottom"===r?"top":"bottom",u="right"===i?"left":"right",p=O("transform"),f=void 0,m=void 0;if(m="bottom"===d?-l.height+h.bottom:h.top,f="right"===u?-l.width+h.right:h.left,o&&p)c[p]="translate3d("+f+"px, "+m+"px, 0)",c[d]=0,c[u]=0,c.willChange="transform";else{var E="bottom"===d?-1:1,b="right"===u?-1:1;c[d]=m*E,c[u]=f*b,c.willChange=d+", "+u}var v={"x-placement":t.placement};return t.attributes=q({},v,t.attributes),t.styles=q({},c,t.styles),t.arrowStyles=q({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){return S(t.instance.popper,t.styles),function(t,e){Object.keys(e).forEach(function(r){!1!==e[r]?t.setAttribute(r,e[r]):t.removeAttribute(r)})}(t.instance.popper,t.attributes),t.arrowElement&&Object.keys(t.arrowStyles).length&&S(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,r,i,n){var s=v(0,e,t),a=b(r.placement,s,e,t,r.modifiers.flip.boundariesElement,r.modifiers.flip.padding);return e.setAttribute("x-placement",a),S(e,{position:"absolute"}),r},gpuAcceleration:void 0}}},X=function(){function t(e,i){var n=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};U(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=G(this.update.bind(this)),this.options=q({},t.Defaults,s),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=i&&i.jquery?i[0]:i,this.options.modifiers={},Object.keys(q({},t.Defaults.modifiers,s.modifiers)).forEach(function(e){n.options.modifiers[e]=q({},t.Defaults.modifiers[e]||{},s.modifiers?s.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return q({name:t},n.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(t){t.enabled&&r(t.onLoad)&&t.onLoad(n.reference,n.popper,n.options,t,n.state)}),this.update();var a=this.options.eventsEnabled;a&&this.enableEventListeners(),this.state.eventsEnabled=a}return W(t,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=v(this.state,this.popper,this.reference),t.placement=b(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.offsets.popper=T(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position="absolute",t=C(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,N(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.left="",this.popper.style.position="",this.popper.style.top="",this.popper.style[O("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return A.call(this)}},{key:"disableEventListeners",value:function(){return L.call(this)}}]),t}();X.Utils=("undefined"!=typeof window?window:t).PopperUtils,X.placements=z,X.Defaults=J,e.a=X}).call(e,r(102))},function(t,e,r){"use strict";function i(t){let e=t.getFilter()||"";const r=e,i=e===n.a.FILTER_MISSING;return i&&(e=""),{original:r,template:`<input type="text" placeholder="containing..." autofocus value="${e instanceof RegExp?e.source:e}" style="width: 100%">\n  <br><label><input type="checkbox" ${e instanceof RegExp?'checked="checked"':""}>RegExp</label>\n  ${Object(s.b)(i)}`,update(t){const r=t.querySelector('input[type="checkbox"]:first-of-type'),n=t.querySelector('input[type="checkbox"].lu_filter_missing'),s=t.querySelector('input[type="text"]');r.checked=e instanceof RegExp,n.checked=i,s.value!==e&&(s.value=e instanceof RegExp?e.source:e)},init(e,r){function i(t){let e=o.value;a.checked&&""===e&&(e=n.a.FILTER_MISSING),""!==e?e.length<3&&!t||(s.checked&&e!==n.a.FILTER_MISSING&&(e=new RegExp(e)),l(e)):l(e)}const s=e.querySelector('input[type="checkbox"]:first-of-type'),a=e.querySelector('input[type="checkbox"].lu_filter_missing'),o=e.querySelector('input[type="text"]'),l=e=>{r&&r(null!=e&&""!==e),t.setFilter(e)};return s.onchange=(()=>i(!1)),a.onchange=(()=>i(!1)),o.oninput=(()=>i(!1)),i}}}e.b=i;var n=r(9),s=r(16);class a extends s.a{constructor(t,e,r="Filter"){super(t,e,r)}openDialog(){const t=i(this.column),e=this.makePopup(t.template),r=t=>{this.markFiltered(null!=t&&""!==t),this.column.setFilter(t)},n=t.init(e.querySelector("form"),t=>this.markFiltered(t));this.onButton(e,{cancel:()=>{r(t.original)},reset:()=>{e.querySelector('input[type="text"]').value="",Array.from(e.querySelectorAll("input[type=checkbox")).forEach(t=>t.checked=!1),r(null)},submit:()=>(n(!0),!0)})}}e.a=a},function(t,e,r){"use strict";r.d(e,"a",function(){return i});var i;!function(t){t[t.NONE=0]="NONE",t[t.ALL=1]="ALL",t[t.PARTIAL=2]="PARTIAL"}(i||(i={}))},function(t,e,r){"use strict";var i=r(17),n=r(60);class s{constructor(t,e){return this.adapter=t,this.prefetchTimeout=-1,this.options={prefetchRows:20,cleanUpRows:3,delay:50},Object.assign(this.options,e),this}prefetchDown(){this.prefetchTimeout=-1;const t=this.adapter.context,e=Math.min(this.adapter.visible.last+this.options.prefetchRows,t.numberOfRows-1);this.adapter.visible.last===e&&this.adapter.visible.last>=this.adapter.visible.forcedLast+this.options.prefetchRows||(this.adapter.addAtBottom(this.adapter.visible.last+1,e),this.adapter.visible.last=e)}prefetchUp(){if(this.prefetchTimeout=-1,this.adapter.visible.first<=this.adapter.visible.forcedFirst-this.options.prefetchRows)return;const t=this.adapter.context,e=this.adapter.scroller,r=Math.max(e.scrollTop-this.options.prefetchRows*t.defaultRowHeight,0),n=e.clientHeight,{first:s,firstRowPos:a}=Object(i.c)(r,n,t.defaultRowHeight,t.exceptions,t.numberOfRows);if(s===this.adapter.visible.first)return;const o=this.adapter.syncFrozen?this.adapter.syncFrozen(s):0;this.adapter.addAtBeginning(s,this.adapter.visible.first-1,o),this.adapter.visible.first=s,this.adapter.updateOffset(a)}triggerPrefetch(t){this.prefetchTimeout>=0&&clearTimeout(this.prefetchTimeout),t&&this.adapter.visible.last>=this.adapter.visible.forcedLast+this.options.prefetchRows||!t&&this.adapter.visible.first<=this.adapter.visible.forcedFirst-this.options.prefetchRows||(this.prefetchTimeout=setTimeout(t?this.prefetchDown.bind(this):this.prefetchUp.bind(this),this.options.delay))}cleanUpTop(t){this.prefetchTimeout=-1;const e=Math.max(0,t-this.options.cleanUpRows);if(e<=this.adapter.visible.first)return;const r=this.adapter.syncFrozen?this.adapter.syncFrozen(e):0;this.adapter.removeFromBeginning(this.adapter.visible.first,e-1,r);const i=this.adapter.context;let n=(e-this.adapter.visible.first)*i.defaultRowHeight;if(i.exceptions.length>0)for(let t=this.adapter.visible.first;t<e;++t)i.exceptionsLookup.has(t)&&(n+=i.exceptionsLookup.get(t)-i.defaultRowHeight);this.adapter.visible.first=e,this.adapter.updateOffset(this.adapter.visibleFirstRowPos+n),this.prefetchDown()}cleanUpBottom(t){this.prefetchTimeout=-1;const e=t+this.options.cleanUpRows;this.adapter.visible.last<=e||(this.adapter.removeFromBottom(e+1,this.adapter.visible.last),this.adapter.visible.last=e,this.prefetchUp())}triggerCleanUp(t,e,r){this.prefetchTimeout>=0&&clearTimeout(this.prefetchTimeout),r&&t-this.options.cleanUpRows<=this.adapter.visible.first||!r&&this.adapter.visible.last<=e+this.options.cleanUpRows||(this.prefetchTimeout=setTimeout(r?this.cleanUpTop.bind(this):this.cleanUpBottom.bind(this),this.options.delay,r?t:e))}onScrolled(t,e){e===n.a.NONE?this.options.cleanUpRows>0&&this.triggerCleanUp(this.adapter.visible.forcedFirst,this.adapter.visible.forcedLast,t):this.options.prefetchRows>0&&this.triggerPrefetch(t)}}e.a=s},function(t,e,r){"use strict";class i{constructor(t,e){this.context=t,this.key=e,this.cache=[],this.lastFilled=0,this.key2index=new Map,this.context.exceptions.forEach(t=>{this.cache[t.index]=t.y,this.key2index.set(e(t.index),t.index)})}findValidStart(t){for(let e=t-1;e>=0;--e)if(void 0!==this.cache[e])return e;return-1}posByKey(t){if(this.key2index.has(t)){const e=this.key2index.get(t);return{index:e,pos:this.pos(e)}}return this.fillCacheTillKey(t)}pos(t){if(0===this.context.exceptions.length)return t*this.context.defaultRowHeight;const e=this.cache[t];if(void 0!==e)return e;const r=this.findValidStart(t);return r<0?this.fillCache(0,t,0):this.fillCache(r+1,t,this.cache[r]+this.heightOf(r)),this.cache[t]}fillCache(t,e,r,i){if(e<=this.lastFilled){if(!i)return;for(let r=t;r<=e;++r)i(r,this.key(r),this.cache[r]);return}let n=r;for(let r=t;r<=e;++r){this.cache[r]=n;const t=this.key(r);this.key2index.set(t,r),i&&i(r,t,n),n+=this.heightOf(r)}}heightOf(t){const e=this.context.exceptionsLookup;return e.has(t)?e.get(t):this.context.defaultRowHeight}exceptionHeightOf(t,e=!1){const r=this.context.padding(t),i=this.context.exceptionsLookup;return i.has(t)?i.get(t)-r:e?this.context.defaultRowHeight-r:null}padding(t){return this.context.padding(t)}fillCacheTillKey(t){let e=0;for(let r=this.lastFilled;r<this.context.numberOfRows;++r,++this.lastFilled){const i=this.cache[r];if(void 0!==i){e=i+this.heightOf(r);continue}const n=this.key(r);if(this.cache[r]=e,this.key2index.set(n,r),n===t)return{index:r,pos:e};e+=this.heightOf(r)}return{index:-1,pos:-1}}positions(t,e,r,i){this.fillCache(t,e,r,i)}}e.a=i},function(t,e,r){"use strict";r.d(e,"a",function(){return i});var i;r(62);!function(t){t[t.UPDATE=0]="UPDATE",t[t.UPDATE_CREATE=1]="UPDATE_CREATE",t[t.UPDATE_REMOVE=2]="UPDATE_REMOVE",t[t.SHOW=3]="SHOW",t[t.HIDE=4]="HIDE"}(i||(i={}));const n=[{delay:0,apply({mode:t,previous:e,nodeY:r,current:n,node:s}){s.dataset.animation=i[t].toLowerCase(),s.style.transform=`translate(0, ${e.y-r}px)`,t===i.SHOW?s.style.height=null!==n.height?`${n.height}px`:null:s.style.height=`${e.height}px`,s.style.opacity=t===i.SHOW?"0":t===i.HIDE?"1":null}},{delay:10,apply({mode:t,current:e,nodeY:r,node:n}){n.style.transform=t===i.HIDE||t===i.UPDATE_REMOVE?`translate(0, ${e.y-r}px)`:null,t!==i.HIDE&&(n.style.height=null!==e.height?`${e.height}px`:null),n.style.opacity=t===i.SHOW?"1":t===i.HIDE?"0":null}},{delay:1100,apply({node:t}){delete t.dataset.animation,t.style.opacity=null,t.style.transform=null}}];e.b=n},function(t,e,r){"use strict";function i(t,e){const r=t.createElement("div");r.innerHTML=e;const i=r.firstElementChild;return r.innerHTML="",i}var n=r(18),s=r(13);class a{constructor(t,e,r){this.c=t,this.renderers=e,this.index=r}get width(){return this.c.getWidth()}get id(){return this.c.id}get frozen(){return Object(s.b)(this.c.desc)||!0===this.c.desc.frozen}createHeader(t,e){const r=Object(n.c)(this.c,t,e);return this.updateHeader(r,e),r}updateHeader(t,e){t.className=`lu-header ${this.c.cssClass?` ${this.c.cssClass}`:""} ${this.c.headerCssClass}${e.autoRotateLabels?" rotateable":""}${this.c.isFiltered()?" lu-filtered":""}`,t.classList.toggle("frozen",this.frozen),Object(n.j)(t,this.c,e)}createCell(t,e,r){const n=r.isGroup(t),s=i(e,n?this.renderers.group.template:this.renderers.single.template);return s.dataset.renderer=n?this.renderers.groupId:this.renderers.singleId,s.dataset.group=n?"g":"d",this.updateCell(s,t,r),s}updateCell(t,e,r){t.classList.toggle("frozen",this.frozen);const n=r.isGroup(e),s=t.dataset.renderer,a=n?this.renderers.groupId:this.renderers.singleId,o=t.dataset.group,l=n?"g":"d";if(s===a&&o===l||((t=i(document,n?this.renderers.group.template:this.renderers.single.template)).dataset.renderer=a,t.dataset.group=l),n){const i=r.getGroup(e);this.renderers.group.update(t,i,i.rows,r.statsOf(this.c))}else{const i=r.getRow(e);this.renderers.single.update(t,i,i.relativeIndex,i.group,r.statsOf(this.c))}return t}}e.a=a},function(t,e,r){"use strict";function i(t){return Object(c.b)(t)&&!t.getCollapsed()?1+Math.max.apply(Math,t.children.map(i)):1}var n=r(3),s=(r.n(n),r(0)),a=r(1),o=r(9),l=r(13),c=r(11),h=r(2),d=r(10),u=r(19),p=r(35),g=r(14),f=r(20),m=r(18),E=r(34),b=r(8),v=r(23);class y{constructor(t,e,r){this.data=t,this.options=Object(E.a)().header,this.histCache=new Map,this.dragHandler=n.behavior.drag().on("dragstart",function(){n.select(this).classed("dragging",!0),n.event.sourceEvent.stopPropagation(),n.event.sourceEvent.preventDefault()}).on("drag",function(t){const e=Math.max(n.mouse(this.parentNode)[0],2);t.setWidth(e),n.event.sourceEvent.stopPropagation(),n.event.sourceEvent.preventDefault()}).on("dragend",function(){n.select(this).classed("dragging",!1),n.event.sourceEvent.stopPropagation(),n.event.sourceEvent.preventDefault()}),this.dropHandler=Object(s.i)([`${m.a}-ref`,m.a],(t,e,r)=>{let i=null;if(`${m.a}-ref`in t){const e=t[`${m.a}-ref`];if(!(i=this.data.find(e)))return!1;r?i=this.data.clone(i):i.removeMe()}else{const e=JSON.parse(t[m.a]);i=this.data.create(this.data.fromDescRef(e))}if(!i)return!1;if(e instanceof a.a)return null!=e.insertAfterMe(i);return null!==this.data.getLastRanking().push(i)}),Object(s.p)(this.options,r),this.$node=n.select(e).append("div").classed("lu-header",!0),this.$node.append("div").classed("drop",!0).call(this.dropHandler),this.changeDataStorage(t)}changeDataStorage(t){this.data&&this.data.on(Object(s.u)(".headerRenderer",g.a.EVENT_DIRTY_HEADER,g.a.EVENT_ORDER_CHANGED,g.a.EVENT_SELECTION_CHANGED),null),this.data=t,t.on(`${g.a.EVENT_DIRTY_HEADER}.headerRenderer`,Object(s.f)(this.update.bind(this),1)),this.options.summary&&(t.on(`${g.a.EVENT_ORDER_CHANGED}.headerRenderer`,()=>{this.updateHist(),this.update()}),t.on(`${g.a.EVENT_SELECTION_CHANGED}.headerRenderer`,Object(s.f)(this.drawSelection.bind(this),1)))}get sharedHistCache(){return this.histCache}currentHeight(){return parseInt(this.$node.style("height"),10)}updateHist(){this.data.getRankings().forEach(t=>{const e=t.getOrder(),r=t.flatColumns,i=null==e?null:this.data.stats(e);r.filter(t=>t instanceof b.d&&!t.isHidden()).forEach(t=>{this.histCache.set(t.id,null===i?null:i.stats(t))}),r.filter(t=>Object(d.b)(t)&&!t.isHidden()).forEach(t=>{this.histCache.set(t.id,null===i?null:i.hist(t))})})}drawSelection(){if(!this.options.summary)return;const t=this.$node.node();Object(s.l)(t,"div.bar",t=>t.classList.remove("selected"));const e=this.data.getSelection();if(e.length<=0)return;const r=r=>{this.data.getRankings().forEach(i=>{const n=i.flatColumns;n.filter(t=>t instanceof b.d&&!t.isHidden()).forEach(i=>{const n=[].slice.call(t.querySelectorAll(`div.header[data-id="${i.id}"] div.bar`));r.forEach((t,r)=>{const s=i.getValue(t,e[r]);for(let t=1;t<n.length;++t){const e=n[t];if(e.dataset.x>s){n[t-1].classList.add("selected");break}if(t===n.length-1){e.classList.add("selected");break}}})}),n.filter(t=>Object(d.b)(t)&&!t.isHidden()).forEach(i=>{const n=t.querySelector(`div.header[data-id="${i.id}"]`);r.forEach((t,r)=>{(i.getCategories(t,e[r])||[]).forEach(t=>{const e=n.querySelector(`div.bar[data-cat="${t}"]`);e&&e.classList.add("selected")})})})})},i=this.data.view(e);Array.isArray(i)?r(i):i.then(r)}renderRankingButtons(t,e){const r=this.$node.selectAll("div.rankingbuttons").data(t);r.enter().append("div").classed("rankingbuttons",!0).call(this.options.rankingButtons),r.style("left",(t,r)=>`${e[r]}px`),r.exit().remove()}update(){const t=this,e=this.data.getRankings(),r=[],s=[];let a=0;e.forEach(t=>{a+=t.flatten(r,a,1,this.options.columnPadding)+this.options.slopeWidth,s.push(a-this.options.slopeWidth)}),a-=this.options.slopeWidth,this.$node.select("div.drop").style("min-width",`${a}px`);const o=r.map(t=>t.col);this.options.summary&&0===this.histCache.size&&e.length>0&&this.updateHist(),this.renderColumns(o,r),this.options.rankingButtons!==E.b&&this.renderRankingButtons(e,s);const l=Math.max(...o.map(i));let c=(this.options.summary?this.options.headerHistogramHeight:this.options.headerHeight)+(l-1)*this.options.headerHeight;if(this.options.autoRotateLabels){let e=!1;this.$node.selectAll("div.header").style("height",`${c}px`).select("div.lu-label").each(function(r){this.querySelector("span.lu-label").offsetWidth>r.getWidth()+30?(n.select(this).style("transform",`rotate(${t.options.rotationDegree}deg)`),e=!0):n.select(this).style("transform",null)}),this.$node.selectAll("div.header").style("margin-top",e?`${this.options.rotationHeight}px`:null),c+=e?this.options.rotationHeight:0}this.$node.style("height",`${c}px`)}createToolbar(t){const e=Object(E.a)().renderers,r=Object.assign({provider:this.data,statsOf:()=>null,getPossibleRenderer:t=>({item:Object(v.possibleRenderer)(t,e),group:Object(v.possibleGroupRenderer)(t,e)})},this.options);t.each(function(t){const e=n.select(this);Object(m.d)((r,i,...s)=>{const a={onclick:()=>void 0};return e.append("i").attr("title",r).html(`<span aria-hidden="true">${r}</span>`).on("click",function(){a.onclick(n.event)}),i?(a.onclick=(e=>{e.stopPropagation(),new i(t,e.currentTarget.parentElement,...s).openDialog()}),a):a},t,r)})}updateFreeze(t){const e=this.options.freezeCols;this.$node.selectAll("div.header").style("z-index",(t,r)=>r<e?1:null).style("transform",(r,i)=>i<e?`translate(${t}px,0)`:null)}renderColumns(t,e,r=this.$node,i="header"){const a=this,g=r.selectAll(`div.${i}`).data(t,t=>t.id),E=g.enter().append("div").attr("class",i).on("click",t=>{const e=n.event;this.options.manipulative&&!e.defaultPrevented&&e.currentTarget===e.target&&t.toggleMySorting()}),v=E.append("div").classed("lu-label",!0).on("click",t=>{const e=n.event;this.options.manipulative&&!e.defaultPrevented&&t.toggleMySorting()}).call(Object(s.h)(t=>{const e=JSON.stringify(this.data.toDescRef(t.desc)),r={"text/plain":t.label,[`${m.a}-ref`]:t.id,[m.a]:e};return Object(h.h)(t)&&(r[`${m.a}-number`]=e,r[`${m.a}-number-ref`]=t.id),{data:r,effectAllowed:"copyMove"}}));v.append("i").attr("class","fa fa sort_indicator"),v.append("span").classed("lu-label",!0).attr({draggable:this.options.manipulative}),this.options.manipulative&&(E.append("div").classed("lu-handle",!0).call(this.dragHandler).style("width",`${this.options.columnPadding}px`).call(this.dropHandler),E.append("div").classed("lu-toolbar",!0).call(this.createToolbar.bind(this))),this.options.summary&&E.append("div").classed("summary",!0),g.style({width:(t,r)=>`${e[r].width+this.options.columnPadding}px`,left:(t,r)=>`${e[r].offset}px`,"background-color":t=>t.color}),g.attr({class:t=>`${i} ${t.cssClass||""} ${t.headerCssClass} ${this.options.autoRotateLabels?"rotateable":""} ${t.isFiltered()?"filtered":""} ${t.isGroupedBy()>=0?"grouped":""}`,title:t=>Object(m.i)(t),"data-id":t=>t.id}),g.select("i.sort_indicator").attr("class",t=>{const e=t.findMyRanker();if(!e)return"sort_indicator fa";const r=e.getSortCriterias(),i=r.findIndex(e=>e.col===t);return 0===i?`sort_indicator fa fa-sort-${r[i].asc?"asc":"desc"}`:"sort_indicator fa"}),g.select("span.lu-label").text(t=>t.label);const y=(t,e,r)=>{const i=`${m.a}${r?"-number":""}`;if(`${i}-ref`in t){const r=t[`${i}-ref`];let n=this.data.find(r);return e?n=this.data.clone(n):n&&n.removeMe(),n}const n=JSON.parse(t[i]);return this.data.create(this.data.fromDescRef(n))},_=function(t){if(t.getCollapsed())return void n.select(this).selectAll(`div.${i}_i`).remove();const e=[];t.flatten(e,0,1,a.options.columnPadding);const r=e.map(t=>t.col);a.renderColumns(r,e,n.select(this),i+("_i"!==i.substr(i.length-2)?"_i":""))};g.filter(t=>Object(c.b)(t)&&t.canJustAddNumbers).each(_).select("div.lu-label").call(Object(s.i)([`${m.a}-number-ref`,`${m.a}-number`],(t,e,r)=>{const i=y(t,r,!0);return null!=e.push(i)})),g.filter(t=>Object(c.b)(t)&&!t.canJustAddNumbers).each(_).select("div.lu-label").call(Object(s.i)([`${m.a}-ref`,m.a],(t,e,r)=>{const i=y(t,r,!1);return null!=e.push(i)}));const T=t=>t instanceof c.a&&t.canJustAddNumbers||Object(h.h)(t)&&t.parent instanceof l.a,x=t=>(e,r,i)=>{const n=y(e,i,t);if(r instanceof c.a)return null!==r.push(n);const s=r.findMyRanker(),a=s.indexOf(r),o=this.data.create(t?Object(u.a)():Object(p.a)());return r.removeMe(),o.push(r),o.push(n),null!=s.insert(o,a)};g.filter(t=>!Object(c.b)(t)&&T(t)).select("div.lu-label").call(Object(s.i)([`${m.a}-number-ref`,`${m.a}-number`],x(!0))),g.filter(t=>!Object(c.b)(t)&&!T(t)).select("div.lu-label").call(Object(s.i)([`${m.a}-ref`,m.a],x(!1))),this.options.summary&&(g.filter(t=>Object(d.b)(t)).each(function(t){a.renderCategoricalSummary(t,n.select(this).select("div.summary"))}),g.filter(t=>t instanceof b.d).each(function(t){a.renderNumericalSummary(t,n.select(this).select("div.summary"))}),g.filter(t=>t instanceof o.a).each(function(t){a.renderStringSummary(t,n.select(this).select("div.summary"))}),g.filter(t=>t instanceof f.b).each(function(t){a.renderSelectionSummary(t,n.select(this).select("div.summary"))})),g.exit().remove()}renderCategoricalSummary(t,e){const r=this.histCache.get(t.id);if(!r)return;const i=r=>{const i=t.categories,s=t.categoryColors,a=e.selectAll("div.bar").data(r.hist);a.enter().append("div").classed("bar",!0);const o=n.scale.ordinal().domain(i).rangeBands([0,100],.1),l=n.scale.linear().domain([0,r.maxBin]).range([0,100]);a.style({left:t=>`${o(t.cat)}%`,width:`${o.rangeBand()}%`,top:t=>`${100-l(t.y)}%`,height:t=>`${l(t.y)}%`,"background-color":t=>s[i.indexOf(t.cat)]}).attr({title:t=>`${t.cat}: ${t.y}`,"data-cat":t=>t.cat}),a.exit().remove()};r instanceof Promise?r.then(i):i(r)}renderNumericalSummary(t,e){const r=this.histCache.get(t.id);if(!r)return;const i=t=>{const r=e.selectAll("div.bar").data(t.hist);r.enter().append("div").classed("bar",!0);const i=n.scale.ordinal().domain(n.range(t.hist.length).map(String)).rangeBands([0,100],.1),s=n.scale.linear().domain([0,t.maxBin]).range([0,100]);r.style({left:(t,e)=>`${i(String(e))}%`,width:`${i.rangeBand()}%`,top:t=>`${100-s(t.y)}%`,height:t=>`${s(t.y)}%`}).attr({title:(t,e)=>`Bin ${e}: ${t.y}`,"data-x":t=>t.x}),r.exit().remove();let a=e.select("div.mean");a.empty()&&(a=e.append("div").classed("mean",!0)),a.style("left",`${100*t.mean}%`)};r instanceof Promise?r.then(i):i(r)}renderStringSummary(t,e){const r=t.getFilter();e.text(null===r?"":r.toString())}renderSelectionSummary(t,e){let r=e.select("i");r.empty()&&(r=e.append("i").attr("class","fa fa-square-o").attr("title","Toggle Select All")),r.on("click",()=>{if(r.classed("fa-square-o")){const e=t.findMyRanker().getOrder();r.attr("class","fa fa-check-square-o"),this.data.setSelection(e)}else r.attr("class","fa fa-square-o"),this.data.clearSelection()})}}e.a=y},function(t,e,r){"use strict";var i=r(3),n=(r.n(i),r(0)),s=r(12),a=r(14),o=r(18);class l{constructor(t){this.desc=t,this.used=0}}class c{constructor(t,e,r={}){this.data=t,this.options={layout:"vertical",elemWidth:100,elemHeight:40,width:100,height:500,additionalDesc:[],hideUsed:!0,addAtEndOnClick:!1},Object(n.p)(this.options,r),this.$node=Object(i.select)(e).append("div").classed("lu-pool",!0),this.changeDataStorage(t)}changeDataStorage(t){if(this.data&&this.data.on(Object(n.u)(".pool",a.a.EVENT_ADD_COLUMN,a.a.EVENT_REMOVE_COLUMN,a.a.EVENT_ADD_RANKING,a.a.EVENT_REMOVE_RANKING,a.a.EVENT_ADD_DESC),null),this.data=t,this.entries=t.getColumns().concat(this.options.additionalDesc).map(t=>new l(t)),t.on(`${a.a.EVENT_ADD_DESC}.pool`,t=>{this.entries.push(new l(t)),this.update()}),!this.options.hideUsed)return;const e=this;t.on(Object(n.u)(".pool",a.a.EVENT_ADD_COLUMN,a.a.EVENT_REMOVE_COLUMN),function(t){const r=t.desc,i="addColumn"===this.type?1:-1;e.entries.some(t=>t.desc===r&&(t.used+=i,!0)),e.update()}),t.on(Object(n.u)(".pool",a.a.EVENT_ADD_RANKING,a.a.EVENT_REMOVE_RANKING),function(t){const r=t.flatColumns.map(t=>t.desc),i="addRanking"===this.type?1:-1;e.entries.some(t=>!(r.indexOf(t.desc)<0)&&(t.used+=i,!0)),e.update()}),t.getRankings().forEach(t=>{const r=t.flatColumns.map(t=>t.desc);e.entries.some(t=>!(r.indexOf(t.desc)<0)&&(t.used+=1,!0))})}remove(){this.$node.remove(),this.data&&this.data.on(Object(n.u)(".pool",a.a.EVENT_ADD_COLUMN,a.a.EVENT_REMOVE_COLUMN,a.a.EVENT_ADD_RANKING,a.a.EVENT_REMOVE_RANKING,a.a.EVENT_ADD_DESC),null)}update(){const t=this.data,e=this.entries.filter(t=>0===t.used).map(t=>t.desc),r=this.$node.selectAll("div.header").data(e),n=r.enter().append("div").attr({class:"header",draggable:!0}).on("dragstart",e=>{const r=i.event;r.dataTransfer.effectAllowed="copyMove",r.dataTransfer.setData("text/plain",e.label),r.dataTransfer.setData("application/caleydo-lineup-column",JSON.stringify(t.toDescRef(e))),Object(s.isNumberColumn)(e)&&r.dataTransfer.setData("application/caleydo-lineup-column-number",JSON.stringify(t.toDescRef(e)))}).style({width:`${this.options.elemWidth}px`,height:`${this.options.elemHeight}px`});switch(this.options.addAtEndOnClick&&n.on("click",t=>{this.data.push(this.data.getLastRanking(),t)}),n.append("span").classed("label",!0).text(t=>t.label),r.attr("class",t=>`header ${t.cssClass||""} ${t.type}`),r.style({transform:(t,e)=>{const r=this.layout(e);return`translate(${r.x}px,${r.y}px)`},"background-color":t=>{const e=t;return e.cssClass?null:e.color||s.Column.DEFAULT_COLOR}}),r.attr({title:t=>Object(o.i)(t)}),r.select("span").text(t=>t.label),r.exit().remove(),this.options.layout){case"horizontal":this.$node.style({width:`${this.options.elemWidth*e.length}px`,height:`${this.options.elemHeight}px`});break;case"grid":const t=Object(i.round)(this.options.width/this.options.elemWidth,0);this.$node.style({width:`${t*this.options.elemWidth}px`,height:`${Math.ceil(e.length/t)*this.options.elemHeight}px`});break;default:this.$node.style({width:`${this.options.elemWidth}px`,height:`${this.options.elemHeight*e.length}px`})}}layout(t){switch(this.options.layout){case"horizontal":return{x:t*this.options.elemWidth,y:0};case"grid":const e=Object(i.round)(this.options.width/this.options.elemWidth,0);return{x:t%e*this.options.elemWidth,y:Math.floor(t/e)*this.options.elemHeight};default:return{x:0,y:t*this.options.elemHeight}}}}e.a=c},function(t,e,r){"use strict";e.a=function(t="svg",e,r,s={}){return"engine"===t?new i.a(e,r,s):new n.a(e,r,s,t)};var i=r(68),n=r(132)},function(t,e,r){"use strict";var i=r(0),n=r(32),s=r(14),a=r(23),o=r(22),l=r(10),c=r(8),h=r(17),d=r(122),u=r(13),p=r(123),g=r(124);class f extends i.a{constructor(t,e,r){super(),this.data=t,this.histCache=new Map,this.rankings=[],this.slopeGraphs=[],this.updateAbles=[],this.zoomFactor=1,this.options=r,this.node=e.ownerDocument.createElement("main"),e.appendChild(this.node),this.ctx={provider:t,filters:this.options.header.filters,summaries:this.options.header.summaries?this.options.header.summaries:{},linkTemplates:this.options.header.linkTemplates,autoRotateLabels:!1,searchAble:this.options.header.searchAble,option:Object(i.k)(Object.assign({useGridLayout:!0},this.options.body)),statsOf:t=>{const e=this.histCache.get(t.id);return null==e||e instanceof Promise?null:e},renderer:(t,e)=>Object(a.createDOM)(t,this.options.renderers,this.ctx,e),groupRenderer:(t,e)=>Object(a.createDOMGroup)(t,this.options.renderers,this.ctx,e),idPrefix:this.options.idPrefix,totalNumberOfRows:0,createRenderer:(t,e)=>{return{single:Object(a.createDOM)(t,this.options.renderers,this.ctx,e),group:Object(a.createDOMGroup)(t,this.options.renderers,this.ctx,e),singleId:t.getRendererType(),groupId:t.getGroupRenderer()}},getPossibleRenderer:t=>({item:Object(a.possibleRenderer)(t,this.options.renderers),group:Object(a.possibleGroupRenderer)(t,this.options.renderers)}),columnPadding:this.options.body.columnPadding||5},this.node.id=this.options.idPrefix,this.table=new d.a(this.node,`#${r.idPrefix}`),this.initProvider(t)}zoomOut(){this.zoomFactor=Math.max(this.zoomFactor-.1,.5),this.updateZoomFactor(),this.update()}zoomIn(){this.zoomFactor=Math.min(this.zoomFactor+.1,2),this.updateZoomFactor(),this.update()}updateZoomFactor(){this.node.querySelector("main").style.fontSize=`${100*this.zoomFactor}%`}pushUpdateAble(t){this.updateAbles.push(t)}createEventList(){return super.createEventList().concat([f.EVENT_HOVER_CHANGED,f.EVENT_RENDER_FINISHED])}changeDataStorage(t){this.takeDownProvider(),this.data=t,this.ctx.provider=t,this.initProvider(t)}takeDownProvider(){this.data.on(`${s.a.EVENT_SELECTION_CHANGED}.body`,null),this.data.on(`${s.a.EVENT_ADD_RANKING}.body`,null),this.data.on(`${s.a.EVENT_REMOVE_RANKING}.body`,null),this.data.on(`${s.a.EVENT_GROUP_AGGREGATION_CHANGED}.body`,null),this.rankings.forEach(t=>this.table.remove(t)),this.rankings.splice(0,this.rankings.length),this.slopeGraphs.forEach(t=>this.table.remove(t)),this.slopeGraphs.splice(0,this.slopeGraphs.length)}initProvider(t){t.on(`${s.a.EVENT_SELECTION_CHANGED}.body`,()=>this.updateSelection(t.getSelection())),t.on(`${s.a.EVENT_ADD_RANKING}.body`,t=>{this.addRanking(t)}),t.on(`${s.a.EVENT_REMOVE_RANKING}.body`,t=>{this.removeRanking(t)}),t.on(`${s.a.EVENT_GROUP_AGGREGATION_CHANGED}.body`,t=>{this.update(this.rankings.filter(e=>e.ranking===t))}),this.data.getRankings().forEach(t=>this.addRanking(t))}updateSelection(t){const e=new Set(t);this.rankings.forEach(t=>t.updateSelection(e)),this.slopeGraphs.forEach(t=>t.updateSelection(e))}updateHist(t){if(!this.options.header.summary)return;(t?[t]:this.rankings).forEach(t=>{const e=t.ranking,r=e.getOrder(),i=e.flatColumns,n=null==r?null:this.data.stats(r);i.filter(t=>t instanceof c.d&&!t.isHidden()).forEach(t=>{this.histCache.set(t.id,null===n?null:n.stats(t))}),i.filter(t=>Object(l.b)(t)&&!t.isHidden()).forEach(t=>{this.histCache.set(t.id,null===n?null:n.hist(t))}),t.updateHeaders()}),this.updateAbles.forEach(t=>t(this.ctx))}addRanking(t){if(this.rankings.length>0){const e=this.table.pushSeparator((e,r)=>new p.a(e,r,`${t.id}S`,this.ctx));this.slopeGraphs.push(e)}const e=this.table.pushTable((e,r,i,n)=>new g.a(t,e,r,i,n,this.ctx,{animation:this.options.body.animation,customRowUpdate:this.options.body.customRowUpdate||(()=>void 0)}));e.on(g.a.EVENT_WIDTH_CHANGED,()=>this.table.widthChanged()),e.on(g.a.EVENT_UPDATE_DATA,()=>this.update([e])),t.on(`${u.a.EVENT_ORDER_CHANGED}.renderer`,()=>this.updateHist(e)),this.rankings.push(e),this.update([e])}removeRanking(t){const e=this.rankings.findIndex(e=>e.ranking===t);if(e<0)return;const r=this.rankings.splice(e,1)[0],i=this.slopeGraphs.splice(e-1,1)[0];this.table.remove(r),i&&this.table.remove(i)}update(t=this.rankings){if(0===(t=t.filter(t=>!t.hidden)).length)return;const e=t.map(t=>t.ranking.getOrder()),r=this.data.fetch(e);this.ctx.totalNumberOfRows=Math.max(...r.map(t=>t.length));const n=r.map(t=>t.map(t=>t));0===this.histCache.size&&this.updateHist();const s=t=>Object(i.q)(t,2),a=(t,e)=>{if(this.options.body.dynamicHeight){const r=this.options.body.dynamicHeight(e,t);return{defaultHeight:s(this.zoomFactor*r.defaultHeight),height:t=>s(this.zoomFactor*r.height(t))}}const r=s(this.zoomFactor*this.options.body.rowHeight),i=s(this.zoomFactor*this.options.body.groupHeight);return{defaultHeight:r,height:t=>Object(o.a)(t)?i:r}},l=s(this.zoomFactor*this.options.body.groupPadding),c=s(this.zoomFactor*this.options.body.rowPadding);t.forEach((t,e)=>{const r=t.groupData(n[e]),{height:i,defaultHeight:s}=a(t.ranking,r),d=Object(h.b)(r.map(i),s,t=>t>=0&&r[t]&&(Object(o.a)(r[t])||"last"===r[t].meta||"first last"===r[t].meta)?l+c:c);t.render(r,d)}),this.updateSlopeGraphs(t),this.table.widthChanged()}updateSlopeGraphs(t=this.rankings){const e=new Set(t.map(t=>this.rankings.indexOf(t)));this.slopeGraphs.forEach((t,r)=>{if(t.hidden)return;const i=r,n=r+1;if(!e.has(i)&&!e.has(n))return;const s=this.rankings[i],a=this.rankings[n];t.rebuild(s.currentData,s.context,a.currentData,a.context)})}fakeHover(t){this.rankings.forEach(e=>e.fakeHover(t))}destroy(){this.takeDownProvider(),this.table.destroy(),this.node.remove()}scrollIntoView(t){}setBodyOption(t,e){}}e.a=f,f.EVENT_HOVER_CHANGED=n.a.EVENT_HOVER_CHANGED,f.EVENT_RENDER_FINISHED=n.a.EVENT_RENDER_FINISHED},function(t,e,r){"use strict";var i=r(14),n=r(66),s=r(0),a=r(3),o=(r.n(a),r(34)),l=r(44),c=r(67);r.d(e,"b",function(){return s.g});class h extends s.a{constructor(t,e,r={}){super(),this.data=e,this.config=Object(o.a)(),this.pools=[],this.isUpdateInitialized=!1;const l=t instanceof a.selection?t:Object(a.select)(t);this.$container=l.append("div").classed("lu",!0),Object(s.p)(this.config,r),!0===this.config.renderingOptions.histograms&&(this.config.renderingOptions.summary=!0),this.data.on(`${i.a.EVENT_SELECTION_CHANGED}.main`,this.triggerSelection.bind(this)),this.data.on(`${i.a.EVENT_JUMP_TO_NEAREST}.main`,this.jumpToNearest.bind(this)),this.renderer=Object(c.a)(this.config.body.renderer,this.data,this.node,this.config),this.forward(this.renderer,h.EVENT_HOVER_CHANGED),this.config.pool&&this.config.manipulative&&this.addPool(new n.a(e,this.node,this.config.pool))}createEventList(){return super.createEventList().concat([h.EVENT_HOVER_CHANGED,h.EVENT_SELECTION_CHANGED,h.EVENT_MULTISELECTION_CHANGED,h.EVENT_UPDATE_START,h.EVENT_UPDATE_FINISHED])}addPool(t,e=("boolean"==typeof this.config.pool?{}:this.config.pool)){return t instanceof n.a?this.pools.push(t):this.pools.push(new n.a(this.data,t,e)),this.pools[this.pools.length-1]}get node(){return this.$container.node()}destroy(){this.pools.forEach(t=>t.remove()),this.$container.remove(),this.renderer.destroy()}sortBy(t,e=!1){const r=this.data.find(t);return r&&r.sortByMe(e),null!==r}dump(){return this.data.dump()}changeDataStorage(t,e){this.data&&this.data.on([`${i.a.EVENT_SELECTION_CHANGED}.main`,`${i.a.EVENT_JUMP_TO_NEAREST}.main`],null),this.data=t,e&&this.data.restore(e),this.data.on(`${i.a.EVENT_SELECTION_CHANGED}.main`,this.triggerSelection.bind(this)),this.data.on(`${i.a.EVENT_JUMP_TO_NEAREST}.main`,this.jumpToNearest.bind(this)),this.renderer.changeDataStorage(t),this.pools.forEach(e=>e.changeDataStorage(t)),this.update()}triggerSelection(t){this.fire(h.EVENT_SELECTION_CHANGED,t.length>0?t[0]:-1),this.fire(h.EVENT_MULTISELECTION_CHANGED,t)}jumpToNearest(t){const e=this.data.getRankings()[0];if(0===t.length||void 0===e)return;const r=e.getOrder(),i=t.map(t=>r.indexOf(t)).sort((t,e)=>t-e);this.renderer.scrollIntoView(r.length,i[0]),setTimeout(()=>{this.renderer.fakeHover(r[i[0]])},100)}restore(t){this.changeDataStorage(this.data,t)}update(){let t=this.isUpdateInitialized?1:3;this.isUpdateInitialized=!0,this.fire(h.EVENT_UPDATE_START),this.renderer.update(),this.pools.forEach(t=>t.update()),this.renderer.on(`${l.b}.main`,()=>{0===(t-=1)&&this.fire(h.EVENT_UPDATE_FINISHED)})}changeRenderingOption(t,e){this.config.renderingOptions[t]=e,"animation"!==t&&"stacked"!==t||this.renderer.setBodyOption(t,e)}}e.a=h,h.EVENT_HOVER_CHANGED=l.a,h.EVENT_SELECTION_CHANGED=i.a.EVENT_SELECTION_CHANGED,h.EVENT_MULTISELECTION_CHANGED="multiSelectionChanged",h.EVENT_UPDATE_START="updateStart",h.EVENT_UPDATE_FINISHED="updateFinished"},function(t,e,r){"use strict";var i=r(11),n=r(1),s=r(19),a=r(2),o=r(0);class l extends i.a{constructor(t,e){super(t,e),this.collapsed=!1;const r=this;this.adaptChange=function(t,e){r.adaptWidthChange(t,e)}}createEventList(){return super.createEventList().concat([l.EVENT_COLLAPSE_CHANGED,l.EVENT_MULTI_LEVEL_CHANGED])}setCollapsed(t){this.collapsed!==t&&this.fire([s.b.EVENT_COLLAPSE_CHANGED,n.a.EVENT_DIRTY_HEADER,n.a.EVENT_DIRTY_VALUES,n.a.EVENT_DIRTY],this.collapsed,this.collapsed=t)}getCollapsed(){return this.collapsed}dump(t){const e=super.dump(t);return e.collapsed=this.collapsed,e}restore(t,e){this.collapsed=!0===t.collapsed,super.restore(t,e)}flatten(t,e,r=0,i=0){return s.b.prototype.flatten.call(this,t,e,r,i)}insert(t,e){return t.on(`${n.a.EVENT_WIDTH_CHANGED}.stack`,this.adaptChange),super.setWidth(0===this.length?t.getWidth():this.getWidth()+t.getWidth()),super.insert(t,e)}adaptWidthChange(t,e){if(Object(o.t)(t,e,.5))return;const r=this.getWidth(),i=r+(e-t);this.fire([l.EVENT_MULTI_LEVEL_CHANGED,n.a.EVENT_DIRTY_HEADER,n.a.EVENT_DIRTY],r,i),super.setWidth(i)}removeImpl(t){return t.on(`${n.a.EVENT_WIDTH_CHANGED}.stack`,null),super.setWidth(0===this.length?100:this.getWidth()-t.getWidth()),super.removeImpl(t)}setWidth(t){const e=this.getWidth(),r=t/e;this._children.forEach(t=>{t.setWidthImpl(t.getWidth()*r)}),Object(o.t)(e,t,.5)||this.fire([l.EVENT_MULTI_LEVEL_CHANGED,n.a.EVENT_DIRTY_HEADER,n.a.EVENT_DIRTY],e,t),super.setWidth(t)}getRendererType(){return this.getCollapsed()?l.EVENT_COLLAPSE_CHANGED:super.getRendererType()}isMissing(t,e){return!!this.getCollapsed()&&this._children.some(r=>(Object(a.h)(r)||Object(i.b)(r))&&r.isMissing(t,e))}}e.a=l,l.EVENT_COLLAPSE_CHANGED=s.b.EVENT_COLLAPSE_CHANGED,l.EVENT_MULTI_LEVEL_CHANGED=s.b.EVENT_MULTI_LEVEL_CHANGED},function(t,e,r){"use strict";var i=r(7),n=r(5);class s extends i.a{constructor(t,e){super(t,e),this.dataLength=e.dataLength,this.categories=[];for(let t=0;t<this.dataLength;++t)this.categories.push(`Category #${t+1}`);this.setDefaultRenderer("upset")}get categoryLabels(){return this.categories}get categoryColors(){return["green","red"]}getCategories(t,e){const r=this.getValue(t,e);return this.categories.filter((t,e)=>null!=r&&r[e])}getColor(t,e){return this.getValue(t,e)?"green":"red"}compare(t,e,r,i){const s=this.getValue(t,r),a=this.getValue(e,i);if(null===s)return null===a?0:n.a;if(null===a)return-1*n.a;return s.filter(t=>t).length-a.filter(t=>t).length}getDataLength(){return this.dataLength}}e.a=s},function(t,e,r){"use strict";var i=r(7),n=r(5),s=r(3);r.n(s);class a extends i.a{constructor(t,e){super(t,e),this.format=s.time.format(e.dateFormat||"%x"),this.parse=e.dateParse?s.time.format(e.dateParse).parse:this.format.parse,this.setDefaultRenderer("default")}getValue(t,e){const r=super.getValue(t,e);return Object(n.b)(r)?null:r instanceof Date?r:this.parse(String(r))}getLabel(t,e){const r=this.getValue(t,e);return r instanceof Date?this.format(r):""}compare(t,e,r,i){const s=this.getValue(t,r),a=this.getValue(e,i);return s===a?0:s instanceof Date?a instanceof Date?s.getTime()-a.getTime():-1*n.a:a instanceof Date?n.a:0}}e.a=a},function(t,e,r){"use strict";var i=r(1),n=r(55),s=r(38),a=r(24);class o extends n.a{constructor(t,e=[],r={}){super(e,r),this._data=t,this.options={filterGlobally:!1,jumpToSearchResult:!1,maxNestedSortingCriteria:1,maxGroupColumns:1},Object.assign(this.options,r);const i=this;this.reorderAll=function(){const t=this.source;i.getRankings().forEach(e=>{e!==t&&e.dirtyOrder()})}}getMaxGroupColumns(){return this.options.maxGroupColumns}getMaxNestedSortingCriteria(){return this.options.maxNestedSortingCriteria}get data(){return this._data}setData(t){this._data=t,this.reorderAll()}clearData(){this.setData([])}appendData(t){this._data.push(...t),this.reorderAll()}cloneRanking(t){const e=super.cloneRanking(t);return this.options.filterGlobally&&e.on(`${i.a.EVENT_FILTER_CHANGED}.reorderAll`,this.reorderAll),e}cleanUpRanking(t){this.options.filterGlobally&&t.on(`${i.a.EVENT_FILTER_CHANGED}.reorderAll`,null),super.cleanUpRanking(t)}sortImpl(t){if(0===this._data.length)return[];let e=this._data.map((t,e)=>({v:t,dataIndex:e,group:null}));if(this.options.filterGlobally){const t=this.getRankings().filter(t=>t.isFiltered());t.length>0&&(e=e.filter(e=>t.every(t=>t.filter(e.v,e.dataIndex))))}else t.isFiltered()&&(e=e.filter(e=>t.filter(e.v,e.dataIndex)));if(0===e.length)return[];if(e.forEach(e=>e.group=t.grouper(e.v,e.dataIndex)||a.a),1===new Set(e.map(t=>t.group.name)).size){const r=e[0].group;e.sort((e,r)=>t.comparator(e.v,r.v,e.dataIndex,r.dataIndex));const i=e.map(t=>t.dataIndex);return[Object.assign({order:i},r)]}e.sort((e,r)=>{const i=e.group,n=r.group;return i.name!==n.name?i.name.toLowerCase().localeCompare(n.name.toLowerCase()):t.comparator(e.v,r.v,e.dataIndex,r.dataIndex)});const r=[Object.assign({order:[],rows:[]},e[0].group)];let i=r[0];return e.forEach(t=>{const e=t.group;e.name===i.name?(i.order.push(t.dataIndex),i.rows.push(t)):(i=Object.assign({order:[t.dataIndex],rows:[t]},e),r.push(i))}),r.sort((e,r)=>t.groupComparator(e,r)),r}viewRaw(t){return t.map(t=>this._data[t])}view(t){return this.viewRaw(t)}fetch(t){return t.map(t=>t.map(t=>({v:this._data[t],dataIndex:t})))}stats(t){let e=null;const r=()=>(null===e&&(e=this.viewRaw(t)),e);return{stats:e=>Object(s.b)(r(),t,e.getNumber.bind(e),e.isMissing.bind(e),[0,1]),hist:e=>Object(s.a)(r(),t,e.getCategories.bind(e),e.categories)}}mappingSample(t){const e=this._data.length;if(e<=500)return this._data.map(t.getRawNumber.bind(t));const r=[];for(let t=0;t<500;++t){let t=Math.floor(Math.random()*(e-1));for(;r.indexOf(t)>=0;)t=Math.floor(Math.random()*(e-1));r.push(t)}return r.map(e=>t.getRawNumber(this.data[e],e))}searchAndJump(t,e){const r="string"==typeof(t="string"==typeof t?t.toLowerCase():t)?e=>e.toLowerCase().indexOf(t)>=0:t.test.bind(t),i=[];for(let t=0;t<this._data.length;++t)r(e.getLabel(this._data[t],t))&&i.push(t);this.jumpToNearest(i)}}e.a=o},function(t,e,r){"use strict";var i=r(55),n=r(24);class s extends i.a{constructor(t,e=[],r={}){super(e,r),this.server=t,this.options={maxCacheSize:1e3},this.cache=new Map,Object.assign(this.options,r)}sortImpl(t){const e=t.toSortingDesc(t=>t.column);return this.server.sort(e).then(t=>[Object.assign({order:t},n.a)])}loadFromServer(t){return this.server.view(t).then(e=>e.map((e,r)=>{return{v:e,dataIndex:t[r]}}))}view(t){if(0===t.length)return Promise.resolve([]);const e=this.fetch([t])[0];return Promise.all(e).then(t=>t.map(t=>t.v))}computeMissing(t){const e=new Set,r=e.add.bind(e);return t.forEach(t=>t.forEach(r)),this.cache.forEach((t,r)=>e.delete(r)),this.cache.size,e.size,this.options.maxCacheSize,Array.from(e)}loadInCache(t){if(0===t.length)return;const e=this.loadFromServer(t);t.forEach((r,i)=>{const n=t[i];this.cache.set(n,e.then(t=>({v:t[i],dataIndex:n})))})}fetch(t){const e=this.computeMissing(t);return this.loadInCache(e),t.map(t=>t.map(t=>this.cache.get(t)))}mappingSample(t){return this.server.mappingSample(t.desc.column)}searchAndJump(t,e){this.server.search(t,e.desc.column).then(t=>{this.jumpToNearest(t)})}stats(t){return this.server.stats(t)}}e.a=s},function(t,e,r){"use strict";var i=r(1),n=r(2),s=r(0),a=r(4),o=r(21);class l{constructor(t=!1){this.renderValue=t,this.title="Bar"}canRender(t,e){return Object(n.h)(t)&&!e&&!Object(n.i)(t)}createDOM(t,e,r){return{template:`<div title="">\n          <div style='background-color: ${t.color}'>\n            <span ${this.renderValue?"":'class="lu-hover-only"'}></span>\n          </div>\n        </div>`,update:(e,i)=>{const n=t.getNumber(i.v,i.dataIndex),l=Object(a.b)(e,t,i),c=isNaN(n)?0:Math.round(100*n*100)/100,h=t.getLabel(i.v,i.dataIndex);e.title=h;const d=e.firstElementChild;Object(s.c)(d,{title:h},{width:l?"100%":`${c}%`,"background-color":l?null:Object(o.a)(t,i,r)}),Object(s.r)(d.firstElementChild,h)}}}createCanvas(t,e,r){const n=e.option("rowBarTopPadding",e.option("rowBarPadding",1)),l=e.option("rowBarBottomPadding",e.option("rowBarPadding",1));return(c,h,d)=>{if(Object(a.a)(c,t,h,e.rowHeight(d)))return;c.fillStyle=Object(o.a)(t,h,r)||i.a.DEFAULT_COLOR;const u=e.colWidth(t)*t.getNumber(h.v,h.dataIndex);c.fillRect(0,n,isNaN(u)?0:u,e.rowHeight(d)-(n+l)),(this.renderValue||e.hovered(h.dataIndex)||e.selected(h.dataIndex))&&(c.fillStyle=e.option("style.text","black"),Object(s.d)(c,t.getLabel(h.v,h.dataIndex),1,0,e.colWidth(t)-1,e.textHints))}}}e.a=l},function(t,e,r){"use strict";var i=r(31),n=r(9);class s{constructor(){this.alignments={left:new i.a,right:new i.a("text_right","right"),center:new i.a("text_center","center")},this.title="Default"}canRender(t){return t instanceof n.a}createDOM(t){return this.alignments[t.alignment||"left"].createDOM(t)}createCanvas(t,e){return this.alignments[t.alignment||"left"].createCanvas(t,e)}createGroupDOM(t){return this.alignments[t.alignment||"left"].createGroupDOM(t)}createGroupCanvas(t,e){return this.alignments[t.alignment||"left"].createGroupCanvas(t,e)}}e.a=s},function(t,e,r){"use strict";var i=r(20),n=r(0);class s{constructor(){this.title="Default"}canRender(t){return t instanceof i.b}createDOM(t){return{template:"<div></div>",update:(e,r)=>{e.onclick=function(e){e.preventDefault(),e.stopPropagation(),t.toggleValue(r.v,r.dataIndex)}}}}createCanvas(t,e){return(r,i)=>{const s=r.font;r.font="10pt FontAwesome",Object(n.d)(r,t.getValue(i.v,i.dataIndex)?"":"",0,0,e.colWidth(t),e.textHints),r.font=s}}createGroupCanvas(t,e){return(r,i,s)=>{const a=s.reduce((e,r)=>t.getValue(r.v,r.dataIndex)?e+1:e,0);Object(n.d)(r,String(a),0,e.groupHeight(i),t.getWidth(),e.textHints)}}createGroupDOM(t){return{template:"<div></div>",update:(e,r,i)=>{i.reduce((e,r)=>t.getValue(r.v,r.dataIndex)?e+1:e,0)>=i.length/2?e.classList.add("lu-group-selected"):e.classList.remove("lu-group-selected"),e.onclick=function(r){r.preventDefault(),r.stopPropagation();const n=e.classList.toggle("lu-group-selected");i.forEach(e=>{t.setValue(e.v,e.dataIndex,n)})}}}}}e.a=s},function(t,e,r){"use strict";var i=r(28),n=r(0),s=r(39),a=r(4);class o extends s.a{constructor(){super(...arguments),this.title="Default"}canRender(t){return t instanceof i.a}createDOM(t){return{template:"<div class='link text'></div>",update:(e,r)=>{Object(a.b)(e,t,r),e.innerHTML=t.isLink(r.v,r.dataIndex)?`<a class="link" href="${t.getValue(r.v,r.dataIndex)}" target="_blank">${t.getLabel(r.v,r.dataIndex)}</a>`:t.getLabel(r.v,r.dataIndex)}}}createCanvas(t,e){return(r,i,s,o,l)=>{if(Object(a.a)(r,t,i,e.rowHeight(s)))return;if(!t.isLink(i.v,i.dataIndex))return void Object(n.d)(r,t.getLabel(i.v,i.dataIndex),0,0,e.colWidth(t),e.textHints);if(e.hovered(i.dataIndex)){const r=Object(n.s)(e.bodyDOMElement,e.idPrefix+t.id,o,l);r.style.width=`${e.colWidth(t)}px`,r.innerHTML=`<a class='link' href='${t.getValue(i.v,i.dataIndex)}' target='_blank'>${t.getLabel(i.v,i.dataIndex)}</a>`}else{const s=r.fillStyle;r.fillStyle=e.option("style.link",e.option("style.text","black")),Object(n.d)(r,t.getLabel(i.v,i.dataIndex),0,0,e.colWidth(t),e.textHints),r.fillStyle=s}}}}e.a=o},function(t,e,r){"use strict";var i=r(45),n=r(0),s=r(39);class a extends s.a{constructor(){super(...arguments),this.title="Default"}canRender(t){return t instanceof i.a}createDOM(t){return{template:"<div class='annotations text'>\n        <input class='lu-hover-only'>\n        <span class='text lu-not-hover'></span>\n       </div>",update:(e,r)=>{const i=e.firstElementChild;i.onchange=(()=>{t.setValue(r.v,r.dataIndex,i.value)}),i.onclick=(t=>{t.stopPropagation()}),e.lastElementChild.textContent=i.value=t.getLabel(r.v,r.dataIndex)}}}createCanvas(t,e){return(r,i,s,a,o)=>{if(!e.hovered(i.dataIndex))return void Object(n.d)(r,t.getLabel(i.v,i.dataIndex),0,0,e.colWidth(t),e.textHints);const l=Object(n.s)(e.bodyDOMElement,e.idPrefix+t.id,a,o);l.style.width=`${e.colWidth(t)}px`,l.innerHTML=`<input type='text' value='${t.getValue(i.v,i.dataIndex)}' style='width:${e.colWidth(t)}px'>`;const c=l.childNodes[0];c.onchange=function(){t.setValue(i.v,i.dataIndex,c.value)},c.onclick=function(t){t.stopPropagation()}}}}e.a=a},function(t,e,r){"use strict";var i=r(0),n=r(36);class s{constructor(){this.title="Default"}canRender(t){return t instanceof n.b}createDOM(t,e){const r=e.option("actions",[]).concat(t.actions);return{template:`<div class='actions lu-hover-only'>${r.map(t=>`<span title='${t.name}' class='fa'>${t.icon}</span>`).join("")}</div>`,update:(t,e)=>{Object(i.m)(t,(t,i)=>{t.onclick=function(t){t.preventDefault(),t.stopPropagation(),r[i].action(e.v,e.dataIndex)}})}}}createGroupDOM(t,e){const r=e.option("groupActions",[]).concat(t.groupActions);return{template:`<div class='actions lu-hover-only'>${r.map(t=>`<span title='${t.name}' class='fa'>${t.icon}</span>`).join("")}</div>`,update:(t,e,n)=>{Object(i.m)(t,(t,i)=>{t.onclick=function(t){t.preventDefault(),t.stopPropagation(),r[i].action(e,n)}})}}}createCanvas(t,e){const r=e.option("actions",[]).concat(t.actions);return(n,s,a,o,l)=>{if(!e.hovered(s.dataIndex))return;const c=Object(i.s)(e.bodyDOMElement,e.idPrefix+t.id,o,l);c.style.width=`${e.colWidth(t)}px`,c.classList.add("actions"),c.innerHTML=r.map(t=>`<span title='${t.name}' class='fa'>${t.icon}</span>`).join(""),Object(i.m)(c,(t,e)=>{t.onclick=function(t){t.preventDefault(),t.stopPropagation(),r[e].action(s.v,s.dataIndex)}})}}createGroupCanvas(t,e){const r=e.option("groupActions",[]).concat(t.groupActions);return(n,s,a,o,l)=>{if(!e.groupHovered(s))return;const c=Object(i.s)(e.bodyDOMElement,e.idPrefix+t.id,o,l);c.style.width=`${e.colWidth(t)}px`,c.classList.add("actions"),c.innerHTML=r.map(t=>`<span title='${t.name}' class='fa'>${t.icon}</span>`).join(""),Object(i.m)(c,(t,e)=>{t.onclick=function(t){t.preventDefault(),t.stopPropagation(),r[e].action(s,a)}})}}}e.a=s},function(t,e,r){"use strict";class i{createGroupDOM(t,e,r){const i=this.createDOM(t,e,r);return{template:`<div>${i.template}</div>`,update:(e,r,n,s)=>{const a=this.aggregatedIndex(n,t);i.update(e.firstElementChild,n[a],a,r,s)}}}createGroupCanvas(t,e,r){const i=this.createCanvas(t,e,r);return(r,n,s,a,o,l)=>{const c=this.aggregatedIndex(s,t),h=(e.groupHeight(n)-e.rowHeight(c))/2;r.translate(0,h),i(r,s[c],c,a,o+h,n,l),r.translate(0,-h)}}}e.a=i},function(t,e){},function(t,e,r){"use strict";var i=r(10),n=r(0),s=r(38),a=r(4);class o{constructor(){this.title="Color",this.groupTitle="Histogram"}canRender(t){return Object(i.b)(t)}createDOM(t){return{template:"<div>\n        <div></div><div></div>\n      </div>",update:(e,r)=>{Object(a.b)(e,t,r),e.firstElementChild.style.backgroundColor=t.getColor(r.v,r.dataIndex),Object(n.r)(e.lastElementChild,t.getLabel(r.v,r.dataIndex))}}}createCanvas(t,e){const r=e.option("rowBarPadding",1);return(i,s,o)=>{if(Object(a.a)(i,t,s,e.rowHeight(o)))return;i.fillStyle=t.getColor(s.v,s.dataIndex)||"";const l=Math.min(.3*e.colWidth(t),Math.max(e.rowHeight(o)-2*r,0));i.fillRect(0,0,l,l),i.fillStyle=e.option("style.text","black"),Object(n.d)(i,t.getLabel(s.v,s.dataIndex),l+2,0,e.colWidth(t)-l-2,e.textHints)}}createGroupDOM(t){const e=t.categoryColors,r=t.categoryLabels;return{template:`<div>${t.categories.map((t,i)=>`<div style="height: 0; background-color: ${e[i]}" title="${r[i]}: 0" data-cat="${t}"></div>`).join("")}</div>`,update:(e,i,a,o)=>{const{maxBin:l,hist:c}=Object(s.a)(a,a.map(t=>t.dataIndex),e=>t.getCategories(e.v,e.dataIndex),t.categories),h=Math.max(l,o?o.maxBin:0);Object(n.m)(e,(t,e)=>{const{y:i}=c[e];t.style.height=`${Math.round(100*i/h)}%`,t.title=`${r[e]}: ${i}`})}}}createGroupCanvas(t,e){const r=e.option("rowBarPadding",1),i=t.categories,n=t.categoryColors,a=e.colWidth(t)/i.length;return(i,o,l,c,h,d)=>{const{maxBin:u,hist:p}=Object(s.a)(l,l.map(t=>t.dataIndex),e=>t.getCategories(e.v,e.dataIndex),t.categories),g=Math.max(u,d?d.maxBin:0),f=e.groupHeight(o)-r;p.forEach(({y:t},e)=>{const s=t/g*f;i.fillStyle=n[e],i.fillRect(e*a+r,f-s+r,a-2*r,s)})}}}e.a=o},function(t,e,r){"use strict";var i=r(0),n=r(43),s=r(4),a=r(5),o=r(2);class l extends n.a{constructor(){super(...arguments),this.title="Heatmap"}createDOMContext(t){const e=t.getRawColorScale();let r="";for(let e=0;e<t.getDataLength();++e)r+='<div style="background-color: white" title=""></div>';return{templateRow:r,render:(t,r)=>{Object(i.m)(t,(t,n)=>{const s=r[n];Object(i.c)(t,{title:Object(o.b)(s),class:Object(a.b)(s)?"lu-missing":""},{"background-color":Object(a.b)(s)?null:e(s)})})}}}createCanvasContext(t,e){const r=e.colWidth(t)/t.getDataLength(),i=e.option("rowBarPadding",1),n=t.getRawColorScale();return(t,e,o,l)=>{e.forEach((e,c)=>{const h=c*r;Object(a.b)(e)?Object(s.c)(t,r,l,h,i+o):(t.beginPath(),t.fillStyle=n(e),t.fillRect(h,i+o,r,l))})}}}e.a=l},function(t,e,r){"use strict";function i(t){if(0===t.length)return"";let e="",r=!0;return t.forEach((t,i)=>{Object(o.b)(t)?r=!0:r?(e+=`M${i},${1-t} `,r=!1):e+=`L${i},${1-t} `}),e}var n=r(43),s=r(0),a=r(4),o=r(5),l=r(2);class c{constructor(){this.title="Sparkline"}canRender(t){return Object(l.i)(t)}createDOM(t){const e=1-t.getMapping().apply(t.getThreshold());return{template:`<svg viewBox="0 0 ${t.getDataLength()-1} 1" preserveAspectRatio="none meet"><line x1="0" x2="${t.getDataLength()-1}" y1="${e}" y2="${e}"></line><path></path></svg>`,update:(e,r)=>{if(Object(a.b)(e,t,r))return;const n=t.getNumbers(r.v,r.dataIndex);e.querySelector("path").setAttribute("d",i(n))}}}createCanvas(t,e){return(r,i,n)=>{const s=e.rowHeight(n);if(Object(a.a)(r,t,i,s))return;const o=t.getNumbers(i.v,i.dataIndex);if(0===o.length)return;r.save();const l=e.colWidth(t)/(t.getDataLength()-1);r.strokeStyle="#c1c1c1",r.beginPath(),r.moveTo(0,1-t.getMapping().apply(t.getThreshold())),r.lineTo(l*(o.length-1),s),r.stroke(),r.strokeStyle="black",this.renderLine(r,o,s,l),r.restore()}}renderLine(t,e,r,i){t.beginPath();let n=!1;Object(o.b)(e[0])?n=!0:t.moveTo(0,(1-e[0])*i);for(let s=1;s<e.length;++s){const a=e[s];Object(o.b)(a)?n=!0:n?(t.moveTo(s*r,(1-e[s])*i),n=!1):t.lineTo(s*r,(1-e[s])*i)}t.stroke()}createGroupDOM(t){const e=1-t.getMapping().apply(t.getThreshold());return{template:`<svg viewBox="0 0 ${t.getDataLength()} 1" preserveAspectRatio="none meet"><line x1="0" x2="${t.getDataLength()-1}" y1="${e}" y2="${e}"></line><path></path></svg>`,update:(e,r,a)=>{Object(n.b)(e,a,"<path></path>"),Object(s.m)(e,(e,r)=>{const n=a[r];e.setAttribute("d",i(t.getNumbers(n.v,n.dataIndex)))})}}}createGroupCanvas(t,e){return(r,i,n)=>{const s=e.groupHeight(i),a=e.colWidth(t);r.save(),r.strokeStyle="#c1c1c1",r.beginPath();const o=(1-t.getMapping().apply(t.getThreshold()))*s;r.moveTo(0,o),r.lineTo(a,o),r.stroke(),r.strokeStyle="rgba(0, 0, 0, 0.2)",n.forEach(e=>{const i=t.getNumbers(e.v,e.dataIndex);0!==i.length&&this.renderLine(r,i,a,s)}),r.restore()}}}e.a=c},function(t,e,r){"use strict";var i=r(0),n=r(43),s=r(2);class a extends n.a{constructor(){super(...arguments),this.title="Bar Chart"}canRender(t,e){return super.canRender(t,e)&&!e}static compute(t,e,r){return t<e?{height:e-t,bottom:t-r[0]}:{height:t-e,bottom:e-r[0]}}createDOMContext(t){const e=t.getRawColorScale(),r=t.getMapping().domain,n=t.getThreshold(),o=r[1]-r[0];let l="";for(let e=0;e<t.getDataLength();++e)l+='<div style="background-color: white" title=""></div>';return{templateRow:l,render:(t,l)=>{Object(i.m)(t,(t,c)=>{const h=l[c],{bottom:d,height:u}=a.compute(h,n,r);Object(i.c)(t,{title:Object(s.b)(h)},{"background-color":e(h),bottom:`${Math.round(100*d/o)}%`,height:`${Math.round(100*u/o)}%`})})}}}createCanvasContext(t,e){const r=t.getRawColorScale(),i=e.colWidth(t)/t.getDataLength(),n=t.getMapping().domain,s=t.getThreshold(),o=n[1]-n[0];return(t,e,l,c)=>{const h=c/o;e.forEach((e,c)=>{t.fillStyle=r(e);const d=c*i,{bottom:u,height:p}=a.compute(e,s,n);t.fillRect(d,(o-p-u)*h+l,i,p*h)})}}}e.a=a},function(t,e,r){"use strict";var i=r(0),n=r(10),s=r(4);class a{constructor(){this.title="Matrix"}static calculateSetPath(t,e){const r=[];t.forEach((t,e)=>t?r.push(e):-1);return{left:r[0]*e+e/2,right:r[r.length-1]*e+e/2}}static createDOMContext(t){const e=t.categories.length;let r="";for(let t=0;t<e;++t)r+="<div></div>";return{templateRow:r,render:(t,e)=>{Array.from(t.children).slice(1).forEach((t,r)=>{const n=e[r];Object(i.c)(t,{class:n?"enabled":""})});const r=t.firstElementChild,n=e.findIndex(t=>t),s=e.length-1-e.reverse().findIndex(t=>t);n<0||n===s?r.style.display="none":(r.style.display=null,r.style.left=`${Math.round(100*(n+.5)/e.length)}%`,r.style.width=`${Math.round(100*(s-n)/e.length)}%`)}}}static union(t,e){const r=new Set;return e.forEach(e=>{t.getCategories(e.v,e.dataIndex).forEach(t=>r.add(t))}),t.categories.map(t=>r.has(t))}canRender(t){return Object(n.b)(t)}createDOM(t){const{templateRow:e,render:r}=a.createDOMContext(t);return{template:`<div><div></div>${e}</div>`,update:(e,i)=>{if(Object(s.b)(e,t,i))return;const n=new Set(t.getCategories(i.v,i.dataIndex)),a=t.categories.map(t=>n.has(t));r(e,a)}}}createGroupDOM(t){const{templateRow:e,render:r}=a.createDOMContext(t);return{template:`<div><div></div>${e}</div>`,update:(e,i,n)=>{const s=a.union(t,n);r(e,s)}}}static createCanvasContext(t,e){const r=t.categories.length,i=e.colWidth(t)/r,n=e.option("style.upset.circle","black"),s=e.option("style.upset.inactiveOpacity",.1),o=e.option("style.upset.stroke","black");return(t,e,r)=>{const l=e.some(t=>t),c=r/3;if(t.save(),t.fillStyle=n,t.strokeStyle=o,l){const{left:n,right:s}=a.calculateSetPath(e,i);t.beginPath(),t.moveTo(n,r/2),t.lineTo(s,r/2),t.stroke()}e.forEach((e,n)=>{const a=r/2,o=n*i+i/2;t.beginPath(),t.globalAlpha=e?1:s,t.arc(o,a,c,0,2*Math.PI),t.fill()}),t.restore()}}createCanvas(t,e){const r=a.createCanvasContext(t,e);return(i,n,a)=>{if(Object(s.a)(i,t,n,e.rowHeight(a)))return;const o=new Set(t.getCategories(n.v,n.dataIndex)),l=t.categories.map(t=>o.has(t)),c=e.rowHeight(a);r(i,l,c)}}createGroupCanvas(t,e){const r=a.createCanvasContext(t,e);return(i,n,s)=>{const o=a.union(t,s),l=e.groupHeight(n);r(i,o,l)}}}e.a=a},function(t,e,r){"use strict";var i=r(1),n=r(2),s=r(0),a=r(4),o=r(21);class l{constructor(){this.title="Proportional Symbol"}canRender(t,e){return Object(n.h)(t)&&!e&&!Object(n.i)(t)}createDOM(t,e,r){return{template:'<div style="background: radial-gradient(circle closest-side, red 100%, transparent 100%)" title="">\n              <div class="lu-hover-only"></div>\n          </div>',update:(e,i)=>{const n=t.getNumber(i.v,i.dataIndex),l=Math.round(100*n),c=Object(a.b)(e,t,i);Object(s.c)(e,{},{background:c?null:`radial-gradient(circle closest-side, ${Object(o.a)(t,i,r)} ${l}%, transparent ${l}%)`}),Object(s.r)(e.firstElementChild,t.getLabel(i.v,i.dataIndex))}}}createCanvas(t,e,r){return(n,l,c)=>{if(Object(a.a)(n,t,l,e.rowHeight(c)))return;const h=t.getNumber(l.v,l.dataIndex),d=e.rowHeight(c)/2,u=e.colWidth(t)/2;n.strokeStyle=n.fillStyle=Object(o.a)(t,l,r)||i.a.DEFAULT_COLOR,n.beginPath(),n.arc(u,d,e.rowHeight(c)/2*h,0,2*Math.PI),n.fill(),n.stroke(),(e.hovered(l.dataIndex)||e.selected(l.dataIndex))&&(n.fillStyle=e.option("style.text","black"),Object(s.d)(n,t.getLabel(l.v,l.dataIndex),1,0,e.colWidth(t)-1,e.textHints))}}}e.a=l},function(t,e,r){"use strict";function i(t,e,r,i,n){t.title=function(t){if(null===t)return"";const e=s.a.DEFAULT_FORMATTER;return`min = ${e(t.min)}\nq1 = ${e(t.q1)}\nmedian = ${e(t.median)}\nq3 = ${e(t.q3)}\nmax = ${e(t.max)}`}(r);const a=t.firstElementChild,o=a.firstElementChild,l=a.lastElementChild,c=Math.max(e.q1-1.5*(e.q3-e.q1),e.min),h=Math.min(e.q3+1.5*(e.q3-e.q1),e.max);a.style.left=`${Math.round(100*c)}%`;const d=h-c;if(a.style.width=`${Math.round(100*d)}%`,o.style.left=`${Math.round((e.q1-c)/d*100)}%`,o.style.width=`${Math.round((e.q3-e.q1)/d*100)}%`,o.style.backgroundColor=n,l.style.left=`${Math.round((e.median-c)/d*100)}%`,a.dataset.sort=i,!e.outlier||0===e.outlier.length)return void(t.children.length>1&&(t.innerHTML="",t.appendChild(a)));const u=Array.from(t.children).slice(1);u.slice(e.outlier.length).forEach(t=>t.remove());for(let r=u.length;r<e.outlier.length;++r){const e=t.ownerDocument.createElement("div");u.push(e),t.appendChild(e)}e.outlier.forEach((t,e)=>{u[e].style.left=`${Math.round(100*t)}%`})}function n(t,e,r,i,n,s,a){const o=i||a.option("style.boxplot.box","#e0e0e0"),l=a.option("style.boxplot.stroke","black"),c=a.option("style.boxplot.sortIndicator","#ffa500"),h=s+.1*(n-2*s),d=Math.max(e.q1-1.5*(e.q3-e.q1),e.min),u=Math.min(e.q3+1.5*(e.q3-e.q1),e.max);t.fillStyle=o,t.strokeStyle=l,t.beginPath(),t.rect(e.q1,h,e.q3-e.q1,n-2*h),t.fill(),t.stroke();const p=n-s,g=n/2;t.beginPath(),t.moveTo(d,g),t.lineTo(e.q1,g),t.moveTo(d,s),t.lineTo(d,p),t.moveTo(e.median,h),t.lineTo(e.median,n-h),t.moveTo(e.q3,g),t.lineTo(u,g),t.moveTo(u,s),t.lineTo(u,p),t.stroke(),t.fill(),""!==r&&(t.strokeStyle=c,t.beginPath(),t.moveTo(e[r],s),t.lineTo(e[r],n-s),t.stroke(),t.fill()),e.outlier&&e.outlier.forEach(e=>{t.fillRect(e-1,g-1,3,3)})}var s=r(26),a=r(2),o=r(4),l=r(12),c=r(8),h=r(21);class d{constructor(){this.title="Box Plot"}canRender(t,e){return Object(s.b)(t)&&!e||Object(l.isNumberColumn)(t)&&e}createDOM(t,e,r){const n=t.getSortMethod(),s=void 0!==t.isSortedByMe().asc;return{template:'<div title="">\n                    <div><div></div><div></div></div>\n                 </div>',update:(e,a)=>{const l=t.getBoxPlotData(a.v,a.dataIndex);if(!l||Object(o.b)(e,t,a))return;i(e,l,t.getRawBoxPlotData(a.v,a.dataIndex),s?n:"",Object(h.a)(t,a,r))}}}createCanvas(t,e,r){const i=t.getSortMethod(),s=e.option("rowBarPadding",1),a=void 0!==t.isSortedByMe().asc,l=e.colWidth(t);return(c,d,u)=>{const p=e.rowHeight(u);if(Object(o.a)(c,t,d,e.rowHeight(u)))return;const g=t.getBoxPlotData(d.v,d.dataIndex);if(!g)return;n(c,{min:g.min*l,median:g.median*l,q1:g.q1*l,q3:g.q3*l,max:g.max*l,outlier:g.outlier?g.outlier.map(t=>t*l):void 0},a?i:"",Object(h.a)(t,d,r),p,s,e)}}static createAggregatedBoxPlot(t,e){const r=[].concat(...e.map(e=>t.getNumbers(e.v,e.dataIndex)));return new a.c(r)}createGroupDOM(t,e,r){const n=t instanceof c.d&&void 0!==t.isGroupSortedByMe().asc?t.getSortMethod():"";return{template:'<div title="">\n                    <div><div></div><div></div></div>\n                 </div>',update:(e,s,o)=>{const l=Object(a.i)(t)?d.createAggregatedBoxPlot(t,o):new a.c(o.map(e=>t.getNumber(e.v,e.dataIndex)));i(e,l,l,n,Object(h.a)(t,null,r))}}}createGroupCanvas(t,e,r){const i=e.option("rowBarGroupPadding",1),s=e.colWidth(t),o=t instanceof c.d&&void 0!==t.isGroupSortedByMe().asc?t.getSortMethod():"";return(l,c,u)=>{const p=e.groupHeight(c),g=Object(a.i)(t)?d.createAggregatedBoxPlot(t,u):new a.c(u.map(e=>t.getNumber(e.v,e.dataIndex)));n(l,{min:g.min*s,median:g.median*s,q1:g.q1*s,q3:g.q3*s,max:g.max*s,outlier:g.outlier?g.outlier.map(t=>t*s):void 0},o,Object(h.a)(t,null,r),p,i,e)}}}e.a=d},function(t,e,r){"use strict";function i(t,e,r,i,s,a){Object(n.d)(t,"Loading…",10,0,a.colWidth(s)-10,a.textHints);const o=(e+45*r)*(Math.PI/180);t.save(),t.font="10pt FontAwesome",t.textAlign="center";const l=.5*(i-a.textHints.spinnerWidth);t.translate(2,l+.5*a.textHints.spinnerWidth),t.rotate(o),t.translate(0,.5*-a.textHints.spinnerWidth),t.fillText("",0,0),t.restore()}var n=r(0);class s{constructor(){this.title="Loading"}canRender(){return!1}createDOM(){return{template:"<div>Loading…</div>",update:()=>void 0}}createCanvas(t,e){const r=Date.now()%360;return(n,s,a)=>{i(n,r,a,e.rowHeight(a),t,e)}}createGroupDOM(){return this.createDOM()}createGroupCanvas(t,e){const r=Date.now()%360;return(n,s)=>{i(n,r,0,e.groupHeight(s),t,e)}}}e.a=s},function(t,e,r){"use strict";function i(t,e,r){let i=e.getNumber(t.v,t.dataIndex);isNaN(i)&&(i=1);const n=Object(o.hsl)(Object(c.a)(e,t,r)||s.a.DEFAULT_COLOR);return n.l=1-i,n.toString()}var n=r(2),s=r(1),a=r(0),o=r(3),l=(r.n(o),r(4)),c=r(21);class h{constructor(){this.title="Brightness"}canRender(t,e){return Object(n.h)(t)&&!e&&!Object(n.i)(t)}createDOM(t,e,r){return{template:`<div title="">\n        <div style="background-color: ${t.color}"></div><div> </div>\n      </div>`,update:(e,n)=>{const s=Object(l.b)(e,t,n);e.title=t.getLabel(n.v,n.dataIndex),e.firstElementChild.style.backgroundColor=s?null:i(n,t,r),Object(a.r)(e.lastElementChild,e.title)}}}createCanvas(t,e,r){const n=e.option("rowBarPadding",1);return(s,o,c)=>{if(Object(l.a)(s,t,o,e.rowHeight(c)))return;s.fillStyle=i(o,t,r);const h=Math.min(.3*e.colWidth(t),Math.max(e.rowHeight(c)-2*n,0));s.fillRect(0,0,h,h),s.fillStyle=e.option("style.text","black"),Object(a.d)(s,t.getLabel(o.v,o.dataIndex),h+2,0,e.colWidth(t)-h-2,e.textHints)}}}e.a=h},function(t,e,r){"use strict";class i{constructor(){this.title="Nothing"}canRender(){return!1}createDOM(t){return{template:'<div title=""></div>',update:(e,r)=>{e.title=t.getLabel(r.v,r.dataIndex)}}}createCanvas(){return()=>{}}createGroupDOM(){return{template:'<div title=""></div>',update:(t,e)=>{t.title=e.name}}}createGroupCanvas(){return()=>{}}}e.a=i},function(t,e,r){"use strict";var i=r(31),n=r(25),s=r(0);class a extends i.a{constructor(){super("rank","right"),this.title="String"}canRender(t){return t instanceof n.b}createGroupDOM(t){return{template:"<div><div></div><div></div></div>",update:(e,r,i)=>{const n=e.firstElementChild,s=e.lastElementChild;if(0===i.length)return n.textContent="",void(s.textContent="");n.textContent=t.getLabel(i[0].v,i[0].dataIndex),s.textContent=t.getLabel(i[i.length-1].v,i[i.length-1].dataIndex)}}}createGroupCanvas(t,e){return(r,i,n)=>{if(0===n.length)return;const a=t.getLabel(n[0].v,n[0].dataIndex),o=t.getLabel(n[n.length-1].v,n[n.length-1].dataIndex),l=r.textAlign;r.textAlign="right";const c=t.getWidth(),h=c;Object(s.d)(r,a,h,0,c,e.textHints),Object(s.d)(r,o,h,e.groupHeight(i)-e.textHints.spinnerWidth,c,e.textHints),r.textAlign=l}}}e.a=a},function(t,e,r){"use strict";function i(t,e,r,i){const n=i.colWidth(r),a=t.font,o=t.textAlign;t.textAlign="center",t.font="10pt FontAwesome",Object(s.d)(t,e,n/2,0,n,i.textHints),t.font=a,t.textAlign=o}var n=r(29),s=r(0);class a{constructor(){this.title="Default"}canRender(t){return t instanceof n.b}createDOM(t){return{template:'<div title="Collapse Group"></div>',update(e,r,i,n){e.onclick=function(e){e.preventDefault(),e.stopPropagation(),t.setAggregated(n,!0)}}}}createGroupDOM(t){return{template:'<div title="Expand Group"></div>',update(e,r){e.onclick=function(e){e.preventDefault(),e.stopPropagation(),t.setAggregated(r,!1)}}}}createCanvas(t,e){return(r,n,s)=>{0===s&&i(r,"",t,e)}}createGroupCanvas(t,e){return r=>{i(r,"",t,e)}}}e.a=a},function(t,e,r){"use strict";var i=r(2),n=r(38),s=r(0),a=r(5),o=r(4),l=r(21);class c{constructor(){this.title="Histogram"}canRender(t,e){return Object(i.h)(t)&&e||Object(i.i)(t)&&!e}static getHistDOMRenderer(t,e,r){const a=Object(n.c)(t);let o="";for(let t=0;t<a;++t)o+=`<div style="height: 0" title="Bin ${t}: 0"></div>`;return{template:`<div>${o}</div>`,render:(t,n,o)=>{const{bins:h,max:d,hist:u}=c.createHist(o,a,n,e);if(t.children.length!==h){let e="";for(let t=0;t<h;++t)e+=`<div style="height: 0" title="Bin ${t}: 0"></div>`;t.innerHTML=e}Object(s.m)(t,(t,n)=>{const{x:s,dx:a,y:o}=u[n];t.style.height=`${Math.round(100*o/d)}%`,t.title=`${Object(i.b)(s)} - ${Object(i.b)(s+a)} (${o})`,t.style.backgroundColor=Object(l.a)(e,null,r)})}}}createDOM(t,e,r){const{template:i,render:n}=c.getHistDOMRenderer(e.totalNumberOfRows,t,r);return{template:i,update:(e,r,i,s,a)=>{Object(o.b)(e,t,r)||n(e,[r],a)}}}createGroupDOM(t,e,r){const{template:i,render:n}=c.getHistDOMRenderer(e.totalNumberOfRows,t,r);return{template:i,update:(t,e,r,i)=>{n(t,r,i)}}}static getHistCanvasRenderer(t,e,r){const i=Object(n.c)(e.totalNumberOfRows),s=e.option("rowBarPadding",1);return(n,a,o,h)=>{const{max:d,bins:u,hist:p}=c.createHist(h,i,o,t),g=e.colWidth(t)/u,f=a-s;n.fillStyle=Object(l.a)(t,null,r)||e.option("style.histogram","lightgray"),p.forEach(({y:t},e)=>{const r=t/d*f;n.fillRect(e*g+s,f-r+s,g-2*s,r)})}}static createHist(t,e,r,s){const o=t?t.hist.length:e;let l;if(Object(i.i)(s)){const t=[].concat(...r.map(t=>s.getNumbers(t.v,t.dataIndex)));l=Object(n.b)(t,[],t=>t,a.b,[0,1],o)}else l=Object(n.b)(r,r.map(t=>t.dataIndex),t=>s.getNumber(t.v,t.dataIndex),t=>s.isMissing(t.v,t.dataIndex),[0,1],o);return{bins:o,max:Math.max(l.maxBin,t?t.maxBin:0),hist:l.hist}}createCanvas(t,e,r){const i=c.getHistCanvasRenderer(t,e,r);return(r,n,s,a,l,c,h)=>{if(!Object(o.a)(r,t,n,e.rowHeight(s)))return i(r,e.rowHeight(s),[n],h)}}createGroupCanvas(t,e,r){const i=c.getHistCanvasRenderer(t,e,r);return(t,r,n,s,a,o)=>i(t,e.groupHeight(r),n,o)}}e.a=c},function(t,e,r){"use strict";var i=r(10),n=r(0),s=r(57);class a{constructor(){this.title="Shifted Most Frequent Category"}canRender(t,e){return Object(i.b)(t)&&e}static total(t,e){let r=0,i=0,n=!1;return t.getGroups().forEach(t=>{t!==e&&t.name!==e.name||(n=!0),i+=t.order.length,n||(r+=t.order.length)}),{before:r,total:i}}createGroupDOM(t){return{template:"<div></div>",update:(e,r,i)=>{const{count:n,label:o,color:l}=s.a.choose(t,i),{total:c,before:h}=a.total(t.findMyRanker(),r);e.innerHTML=`<div style="background-color: ${l}; width: ${0===c?100:Math.round(100*n/c)}%; left: ${0===c?0:Math.round(100*h/c)}%"></div><span>${o} (${n})</span>`}}}createGroupCanvas(t,e){const r=e.colWidth(t);return(i,o,l)=>{const c=e.groupHeight(o),{count:h,label:d,color:u}=s.a.choose(t,l);i.fillStyle=u;const{total:p,before:g}=a.total(t.findMyRanker(),o);if(0===p)return;i.fillRect(0===p?0:r*g/p,0,0===p?r:r*h/p,c),i.fillStyle=e.option("style.text","black");const f=i.textAlign;i.textAlign="center",Object(n.d)(i,`${d} (${h})`,r/2,c/2,r,e.textHints),i.textAlign=f}}}e.a=a},function(t,e,r){"use strict";var i=r(0),n=r(39),s=r(28),a=r(4);class o extends n.a{constructor(){super(...arguments),this.imageCache=new Map,this.title="Image"}canRender(t){return t instanceof s.a}getImage(t,e,r){if(!t.isLink(e,r))return null;const i=t.getValue(e,r);if(!this.imageCache.has(i)){const t=new Image;t.src=i,this.imageCache.set(i,t)}return this.imageCache.get(i)}createDOM(t){return{template:"<div></div>",update:(e,r)=>{const i=Object(a.b)(e,t,r);e.title=t.getLabel(r.v,r.dataIndex),e.style.backgroundImage=i||!t.isLink(r.v,r.dataIndex)?null:`url('${t.getValue(r.v,r.dataIndex)}')`}}}createCanvas(t,e){return(r,n,s)=>{if(Object(a.a)(r,t,n,e.rowHeight(s)))return;if(!t.isLink(n.v,n.dataIndex))return void Object(i.d)(r,t.getLabel(n.v,n.dataIndex),0,0,e.colWidth(t),e.textHints);const o=this.getImage(t,n.v,n.dataIndex);if(!o)return;const l=o.width,c=o.height;if(0===l||0===c)return;const h=e.colWidth(t),d=e.rowHeight(s),u=Math.min(h/l,d/c),p=l*u,g=c*u;r.drawImage(o,(h-p)/2,(d-g)/2,p,g)}}}e.a=o},function(t,e,r){"use strict";var i=r(31),n=r(46);class s extends i.a{constructor(){super("boolean","center"),this.title="Default"}canRender(t){return t instanceof n.a}}e.a=s},function(t,e,r){"use strict";var i=r(4),n=r(15),s=r(40),a=r(0);class o{constructor(){this.title="Interleaved"}canRender(t){return t instanceof n.a}createDOM(t,e){const{cols:r}=Object(s.a)(t,e,!1);return{template:`<div>${r.map(t=>t.renderer.template).join("")}</div>`,update:(e,n,s,o,l)=>{Object(i.b)(e,t,n)||(Object(a.o)(e,r,"detail","html"),Array.from(e.children).forEach((t,e)=>{r[e].renderer.update(t,n,s,o,l)}))}}}createGroupDOM(t,e){const{cols:r}=Object(s.a)(t,e,!1);return{template:`<div>${r.map(t=>t.renderer.template).join("")}</div>`,update:(t,e,i,n)=>{Object(a.o)(t,r,"group","html"),Array.from(t.children).forEach((t,s)=>{r[s].groupRenderer.update(t,e,i,n)})}}}createCanvas(t,e){const r=t.children,n=r.map(t=>e.renderer(t));return(s,a,o,l,c,h,d)=>{if(Object(i.a)(s,t,a,e.rowHeight(o)))return;const u=e.rowHeight(o),p=u/r.length;s.save(),s.scale(1,1/r.length),n.forEach((t,e)=>{t(s,a,e,l,c+p*e,h,d),s.translate(0,u)}),s.restore()}}createGroupCanvas(t,e){const r=t.children,i=r.map(t=>e.groupRenderer(t));return(t,n,s,a,o,l)=>{const c=e.groupHeight(n),h=c/r.length;t.save(),t.scale(1,1/r.length),i.forEach((e,r)=>{e(t,n,s,a,o+h*r,l),t.translate(0,c)}),t.restore()}}}e.a=o},function(t,e,r){"use strict";var i=r(2),n=r(0),s=r(4),a=r(5),o=r(21);class l{constructor(){this.title="Dot(s)"}canRender(t){return Object(i.h)(t)}static getDOMRenderer(t){const e=Object(i.i)(t)?t.getDataLength():1;let r="";for(let i=0;i<e;++i)r+=`<div style='background-color: ${t.color}' title=''></div>`;return{template:`<div>${r}</div>`,render:(t,e,r,i)=>{if(t.children.length!==e.length){let n="";for(let t=0;t<e.length;++t)n+=`<div style='background-color: ${i[t]}' title='${r[t]}'></div>`;t.innerHTML=n}Object(n.m)(t,(t,s)=>{const o=e[s];Object(n.c)(t,{title:r[s]},{display:Object(a.b)(o)?"none":null,left:`${Math.round(100*o)}%`,top:e.length>1?`${Math.round(80*Math.random()+10)}%`:null,"background-color":i[s]})})}}}createDOM(t,e,r){const{template:n,render:c}=l.getDOMRenderer(t);return{template:n,update:(e,n)=>{if(Object(s.b)(e,t,n))return;const l=Object(o.a)(t,n,r),h=t.getValue(n.v,n.dataIndex);if(!Object(i.i)(t))return c(e,[h],[t.getLabel(n.v,n.dataIndex)],[l]);const d=h.filter(t=>!Object(a.b)(t));return c(e,d,d.map(i.b),d.map(t=>l))}}}createGroupDOM(t,e,r){const{template:n,render:s}=l.getDOMRenderer(t);return{template:n,update:(e,n,l)=>{const c=l.map(e=>t.getValue(e.v,e.dataIndex)),h=l.map(e=>Object(o.a)(t,e,r));if(!Object(i.i)(t))return s(e,c,l.map(e=>t.getLabel(e.v,e.dataIndex)),h);const d=[].concat(...c.filter(t=>!Object(a.b)(t)));return s(e,d,d.map(i.b),c.map((t,e)=>h[e]))}}}}e.a=l},function(t,e,r){"use strict";var i=r(6),n=r(8),s=r(2),a=r(26);class o extends i.a{constructor(t,e,r="Change Sort Criteria"){super(e,r),this.column=t}openDialog(){const t=this.column.getSortMethod(),e=Object.keys(this.column instanceof a.a?s.d:s.a),r=this.column instanceof n.d?this.column.isGroupSortedByMe().asc:this.column.isSortedByMe().asc,i=e.map(e=>`<label><input type="radio" name="multivaluesort" value="${e}"  ${t===e?"checked":""} > ${e.slice(0,1).toUpperCase()+e.slice(1)}</label><br>`).join("\n"),o=`\n        <label><input type="radio" name="sortorder" value="asc"  ${"asc"===r?"checked":""} > Ascending</label><br>\n        <label><input type="radio" name="sortorder" value="desc"  ${"desc"===r?"checked":""} > Decending</label><br>`,l=this.makeChoosePopup(`${i}<strong>Sort Order</strong><br>${o}`);Array.from(l.querySelectorAll("input[name=multivaluesort]")).forEach(t=>{t.addEventListener("change",()=>this.column.setSortMethod(t.value))}),Array.from(l.querySelectorAll("input[name=sortorder]")).forEach(t=>{t.addEventListener("change",()=>{this.column instanceof n.d?this.column.groupSortByMe("asc"===t.value):this.column.sortByMe("asc"===t.value)})})}}e.a=o},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";var i=r(6);class n extends i.a{constructor(t,e,r="Rename Column"){super(e,r),this.column=t}openDialog(){const t=this.makePopup(`\n      <input type="text" value="${this.column.label}" required autofocus placeholder="name">\n      <input type="color" value="${this.column.color}" required placeholder="color">\n      <textarea rows="5">${this.column.description}</textarea><br>`,!1);t.classList.add("lu-rename-dialog"),this.onButton(t,{cancel:()=>void 0,reset:()=>void 0,submit:()=>{const e=t.querySelector('input[type="text"]').value,r=t.querySelector('input[type="color"]').value,i=t.querySelector("textarea").value;return this.column.setMetaData({label:e,color:r,description:i}),!0}})}}e.a=n},function(t,e,r){"use strict";var i=r(6);class n extends i.a{constructor(t,e,r){super(e,"Visualization"),this.column=t,this.ctx=r}openDialog(){const t=this.column.getRendererType(),e=this.column.getGroupRenderer(),{item:r,group:i}=this.ctx.getPossibleRenderer(this.column);console.assert(r.length>1||i.length>1);let n="";n+=r.map(e=>`<label><input type="radio" name="renderertype" value=${e.type}  ${t===e.type?"checked":""}> ${e.label}</label><br>`).join("\n"),e.length>1&&(n+="<strong>Group Visualization</strong><br>",n+=i.map(t=>`<label><input type="radio" name="grouptype" value=${t.type}  ${e===t.type?"checked":""}> ${t.label}</label><br>`).join("\n"));const s=this.makeChoosePopup(n);Array.from(s.querySelectorAll('input[name="renderertype"]')).forEach(t=>{t.addEventListener("change",()=>this.column.setRendererType(t.value))}),Array.from(s.querySelectorAll('input[name="grouptype"]')).forEach(t=>{t.addEventListener("change",()=>this.column.setGroupRenderer(t.value))})}}e.a=n},function(t,e,r){"use strict";var i=r(6),n=r(27);class s extends i.a{constructor(t,e,r="Edit Script"){super(e,r),this.column=t}openDialog(){const t=this.column.getScript(),e=this.makePopup(`<div class="script-description">\n      <p>You can write any valid JavaScript code. It will be embedded in a function. Therefore the last statement has to return a value.\n      In case of a single line statement the code piece statement <code>return</code> will be automatically prefixed.</p>\n      <p>The function signature is: <br><code>(row: any, index: number, children: Column[], values: any[], raws: (number|null)[]) => number</code>\n      <dl>\n        <dt>param: <code>row</code></dt>\n        <dd>the row in the dataset to compute the value for</dd>\n        <dt>param: <code>index</code></dt>\n        <dd>the index of the row</dd>\n        <dt>param: <code>children</code></dt>\n        <dd>the list of LineUp columns that are part of this ScriptColumn</dd>\n        <dt>param: <code>values</code></dt>\n        <dd>the computed value of each column (see <code>children</code>) for the current row</dd>\n        <dt>param: <code>raws</code></dt>\n        <dd>similar to <code>values</code>. Numeric columns return by default the normalized value, this array gives access to the original "raw" values before mapping is applied</dd>\n        <dt>returns:</dt>\n        <dd>the computed number <strong>in the range [0, 1] or NaN</strong></dd>\n      </dl>\n      <p>In addition to the standard JavaScript functions and objects (Math, ...) a couple of utility functions are available: </p>\n      <dl>\n        <dt><code>max(arr: number[]) => number</code></dt>\n        <dd>computes the maximum of the given array of numbers</dd>\n        <dt><code>min(arr: number[]) => number</code></dt>\n        <dd>computes the minimum of the given array of numbers</dd>\n        <dt><code>extent(arr: number[]) => [number, number]</code></dt>\n        <dd>computes both minimum and maximum and returning an array with the first element the minimum and the second the maximum</dd>\n        <dt><code>clamp(v: number, min: number, max: number) => number</code></dt>\n        <dd>ensures that the given value is within the given min/max value</dd>\n        <dt><code>normalize(v: number, min: number, max: number) => number</code></dt>\n        <dd>normalizes the given value <code>(v - min) / (max - min)</code></dd>\n        <dt><code>denormalize(v: number, min: number, max: number) => number</code></dt>\n        <dd>inverts a normalized value <code>v * (max - min) + min</code></dd>\n        <dt><code>linear(v: number, input: [number, number], output: [number, number]) => number</code></dt>\n        <dd>performs a linear mapping from input domain to output domain both given as an array of [min, max] values. <code>denormalize(normalize(v, input[0], input[1]), output[0], output[1])</code></dd>\n      </dl>\n      </div><br>\n      <textarea autofocus="true" rows="5" autofocus="autofocus" style="width: 95%;">${this.column.getScript()}</textarea>\n      <br>`),r=t=>{this.column.setScript(t)};this.onButton(e,{cancel:()=>{e.querySelector("textarea").value=t,r(t)},reset:()=>{e.querySelector("textarea").value=n.b.DEFAULT_SCRIPT,r(n.b.DEFAULT_SCRIPT)},submit:()=>((()=>{const t=e.querySelector("textarea").value;r(t)})(),!0)})}}e.a=s},function(t,e,r){"use strict";var i=r(6);class n extends i.a{constructor(t,e,r,i=[],n="Edit Link ($ as Placeholder)"){super(e,n),this.column=t,this.idPrefix=r,this.templates=i}openDialog(){let t=`<input\n        type="text"\n        size="15"\n        value="${this.column.getLink()}"\n        required="required"\n        autofocus="autofocus"\n        placeholder="link pattern"\n        ${this.templates.length>0?`list="ui${this.idPrefix}lineupPatternList"`:""}\n      ><br>`;this.templates.length>0&&(t+=`<datalist id="ui${this.idPrefix}lineupPatternList">${this.templates.map(t=>`<option value="${t}">`)}</datalist>`);const e=this.makePopup(t);this.onButton(e,{cancel:()=>void 0,reset:()=>void 0,submit:()=>{const t=e.querySelector("input").value;return this.column.setLink(t),!0}})}}e.a=n},function(t,e,r){"use strict";var i=r(6);class n extends i.a{constructor(t,e,r="Edit Weights"){super(e,r),this.column=t}openDialog(){function t(){Array.from(s.querySelectorAll(".bar")).forEach((t,e)=>t.style.width=`${i(r[e].weight)}px`)}const e=this.column.getWeights(),r=this.column.children.map((t,r)=>({col:t,weight:100*e[r]})),i=t=>Math.round(t/100*120),n=this.makePopup("<table></table>"),s=n.querySelector("table");r.forEach(e=>{s.insertAdjacentHTML("beforeend",`<tr>\n        <td><input type="number" value="${e.weight}" min="0" max="100" size="5"></td>\n        <td><div class="${e.col.cssClass} bar" style="background-color: ${e.col.color}"></div></td>\n        <td>${e.col.label}</td>\n       </tr>`),n.lastElementChild.querySelector("input").addEventListener("input",function(){e.weight=+this.value,t()})}),t(),this.onButton(n,{cancel:()=>{this.column.setWeights(e)},reset:()=>{r.forEach((t,r)=>t.weight=100*e[r]),Array.from(s.querySelectorAll("input")).forEach((t,e)=>t.value=r[e].weight.toString()),t()},submit:()=>(this.column.setWeights(r.map(t=>t.weight)),!0)})}}e.a=n},function(t,e,r){"use strict";var i=r(37),n=r(6);class s extends n.a{constructor(t,e,r){super(e,"Edit Hierarchy Cutoff"),this.column=t,this.idPrefix=r}openDialog(){const t=this.column.getCutOff(),e=Object(i.b)(this.column.hierarchy),r=e.map(t=>t.path),n=`<input type="text" value="${t.node.label}"\n        required="required" autofocus="autofocus" list="ui${this.idPrefix}lineupHierarchyList" placeholder="cut off node"><br>\n        <input type="number" value="${isFinite(t.maxDepth)?t.maxDepth:""}" placeholder="max depth (&infin;)"><br>\n        <datalist id="ui${this.idPrefix}lineupHierarchyList">${e.map(t=>`<option value="${t.path}">${t.label}</option>`)}</datalist>`,s=this.makePopup(n,!1);s.querySelector('input[type="text"]').addEventListener("change",function(){const t=this.value;console.log("validate",t),r.indexOf(t)<0?this.setCustomValidity("invalid node"):this.setCustomValidity("")}),this.onButton(s,{cancel:()=>void 0,reset:()=>void 0,submit:()=>{if(!s.querySelector("form").checkValidity())return!1;const t=s.querySelector('input[type="text"]').value,i=r.indexOf(t),n=e[i],a=s.querySelector('input[type="number"]').value,o=""===a?1/0:parseInt(a,10);return this.column.setCutOff(n,o),!0}})}}e.a=s},function(t,e,r){"use strict";var i=r(6);class n extends i.a{constructor(t,e,r,i="Search"){super(e,i),this.column=t,this.provider=r}openDialog(){const t=this.makePopup('<input type="text" size="15" value="" required autofocus placeholder="search..."><br><label><input type="checkbox">RegExp</label><br>'),e=t.querySelector('input[type="text"]'),r=t.querySelector('input[type="checkbox"]');e.addEventListener("input",()=>{let t=e.value;if(t.length<3)return;r.checked&&(t=new RegExp(t)),this.provider.searchAndJump(t,this.column)});const n=()=>{let n=e.value;const s=r.checked;n.length>0&&(s&&(n=new RegExp(n)),this.provider.searchAndJump(n,this.column)),i.a.removePopup(t)};r.addEventListener("change",n),this.onButton(t,{cancel:()=>void 0,reset:()=>void 0,submit:()=>(n(),!0)})}}e.a=n},function(t,e,r){"use strict";function i(t,...e){const r=t.dataTransfer.types;return"function"==typeof r.indexOf?e.some(t=>r.indexOf(t)>=0):"function"==typeof r.includes?e.some(t=>r.includes(t)):"function"==typeof r.contains&&e.some(t=>r.contains(t))}function n(t){return a.size>0&&i(t,"text/plain")}function s(t){const e=t.dataTransfer;!function(t){const e=t.dataTransfer;return Boolean(t.ctrlKey&&e.effectAllowed.match(/copy/gi)||!e.effectAllowed.match(/move/gi))}(t)?e.dropEffect="move":e.dropEffect="copy"}e.a=function(t,e,r=!1){const i=++o;t.draggable=!0,t.addEventListener("dragstart",n=>{t.classList.add("lu-dragging");const s=e();if(n.dataTransfer.effectAllowed=s.effectAllowed,r&&n.stopPropagation(),Object.keys(s.data).every(t=>{try{return n.dataTransfer.setData(t,s.data[t]),!0}catch(t){return!1}}))return;const o=s.data["text/plain"]||"";n.dataTransfer.setData("text/plain",`${i}${o?`: ${o}`:""}`),a.set(i,s.data)}),t.addEventListener("dragend",e=>{t.classList.remove("lu-dragging"),r&&e.stopPropagation(),a.size>0&&a.delete(i)})},e.b=function(t,e,r,o=null,l=!1){t.addEventListener("dragenter",r=>{if(i(r,...e)||n(r))return t.classList.add("lu-dragover"),l&&r.stopPropagation(),!1;t.classList.remove("lu-dragover")}),t.addEventListener("dragover",r=>{if(i(r,...e)||n(r))return r.preventDefault(),s(r),t.classList.add("lu-dragover"),l&&r.stopPropagation(),o&&o(r),!1}),t.addEventListener("dragleave",t=>{t.target.classList.remove("lu-dragover")}),t.addEventListener("drop",o=>{o.preventDefault(),l&&o.stopPropagation(),s(o);const c=o.dataTransfer.dropEffect;if(t.classList.remove("lu-dragover"),n(o)){const t=o.dataTransfer.getData("text/plain"),e=parseInt(t.indexOf(":")>=0?t.substring(0,t.indexOf(":")):t,10);if(a.has(e)){const t=a.get(e);return a.delete(e),!r({effect:c,data:t},o)}}else if(i(o,...e)){const t={};return e.forEach(e=>{const r=o.dataTransfer.getData(e);""!==r&&(t[e]=r)}),!r({effect:c,data:t},o)}})};const a=new Map;let o=0},function(t,e,r){"use strict";var i=r(6);class n extends i.a{constructor(t,e){super(e,"Stratify by Threshold"),this.column=t}openDialog(){if(this.column.isGroupedBy()>=0)return void this.column.groupByMe();const t=this.column.getOriginalMapping().domain,e=this.column.getStratifyThresholds(),r=`<input\n        type="number"\n        size="15"\n        value="${e.length>0?e[0]:(t[1]-t[0])/2}"\n        required\n        autofocus\n        min="${t[0]}"\n        max="${t[1]}"\n        step="any"\n      ><br>`,i=this.makePopup(r);this.onButton(i,{cancel:()=>void 0,reset:()=>void 0,submit:()=>{const t=+i.querySelector('input[type="number"]').value;return this.column.setStratifyThresholds([t]),this.column.groupByMe(),!0}})}}e.a=n},function(t,e,r){"use strict";var i=r(6),n=r(18);class s extends i.a{constructor(t,e,r="More",i){super(e,r),this.column=t,this.ctx=i}openDialog(){const t=this.makeMenuPopup("");t.classList.add("lu-more-options"),Object(n.f)(Object(n.b)(t,this.column,!0),this.column,this.ctx)}}e.a=s},function(t,e,r){"use strict";e.a=function(t,e){const r=t.desc.type;if(void 0!==e[r])return e[r];const c=function(t){const e=["default"];return Object(i.b)(t)&&e.push("categoricalLike"),Object(n.h)(t)&&e.push("numberLike"),Object(s.b)(t)&&e.push("boxplotLike"),t instanceof a.a&&e.push("stringLike"),Object(o.b)(t)&&e.push("multiLevelLike"),t instanceof o.a&&e.push("compositeLike"),t instanceof l.a&&e.push("compositeNumberLike"),e.reverse()}(t).find(t=>void 0!==e[t]);return c?e[c]:void 0};var i=r(10),n=r(2),s=r(26),a=r(9),o=r(11),l=r(15)},function(t,e,r){"use strict";var i=r(6),n=r(18),s=r(0),a=r(1);class o extends i.a{constructor(t,e,r){super(e,""),this.column=t,this.ctx=r}openDialog(){const t=this.makePopup('<div class="lu-sub-nested"></div>'),e=t.querySelector(".lu-sub-nested");this.column.children.forEach(r=>{const i=Object(n.c)(r,t.ownerDocument,this.ctx,{mergeDropAble:!1,resizeable:!1});i.className=`lu-header ${r.cssClass?` ${r.cssClass}`:""}${r.headerCssClass}${r.isFiltered()?" lu-filtered":""}`,Object(n.j)(i,r,this.ctx),e.appendChild(i)});const r=`.dialog${Math.random().toString(36).slice(-8).substr(0,3)}`,i=()=>{this.column.on(Object(s.u)(r,a.a.EVENT_ADD_COLUMN,a.a.EVENT_REMOVE_COLUMN),null)};this.column.on(Object(s.u)(r,a.a.EVENT_ADD_COLUMN,a.a.EVENT_REMOVE_COLUMN),Object(s.f)(()=>{t.parentElement?(e.innerHTML="",this.column.children.forEach(r=>{const i=Object(n.c)(r,t.ownerDocument,this.ctx,{mergeDropAble:!1,resizeable:!1});i.className=`lu-header ${r.cssClass?` ${r.cssClass}`:""}${r.headerCssClass}${r.isFiltered()?" lu-filtered":""}`,Object(n.j)(i,r,this.ctx),e.appendChild(i)})):i()})),this.onButton(t,{cancel:()=>i(),reset:()=>void 0,submit:()=>(i(),!0)})}}e.a=o},function(t,e,r){"use strict";var i=r(59),n=r(116),s=r(117),a=r(118),o=r(120);const l={stringLike:i.a,boolean:n.a,categorical:s.a,number:a.a,ordinal:o.a,boxplot:a.a,numbers:a.a};e.a=l},function(t,e,r){"use strict";var i=r(16);class n extends i.a{constructor(t,e,r="Filter"){super(t,e,r)}openDialog(){function t(){const t=r.querySelector('input[type="radio"][value="true"]').checked,e=r.querySelector('input[type="radio"][value="false"]').checked;i(!!t||!e&&null)}const e=this.column.getFilter(),r=this.makePopup(`<label><input type="radio" name="boolean_check" value="null" ${null===e?'checked="checked"':""}>No Filter</label><br>\n     <label><input type="radio" name="boolean_check" value="true" ${!0===e?'checked="checked"':""}>True</label><br>\n     <label><input type="radio" name="boolean_check" value="false" ${!1===e?'checked="checked"':""}>False</label>\n    <br>`),i=t=>{this.markFiltered(null!==t),this.column.setFilter(t)},n=Array.from(r.querySelectorAll('input[type="radio"]'));n.forEach(e=>e.addEventListener("change",t)),this.onButton(r,{cancel:()=>i(e),reset:()=>{const t=null===e?"null":String(e);n.forEach(e=>e.checked=e.value===t),i(null)},submit:()=>(t(),!0)})}}e.a=n},function(t,e,r){"use strict";var i=r(16),n=r(6);class s extends i.a{constructor(t,e,r="Filter"){super(t,e,r)}openDialog(){function t(){d.forEach((t,e)=>{const r=c[e];t.querySelector(".checkmark").innerHTML=`<i class="fa fa-${r.isChecked?"check-":""}square-o"></i>`,t.querySelector(".datalabel").style.opacity=r.isChecked?"1.0":".8"})}const e=this.column.getFilter()||{filter:[],filterMissing:!1},r=e.filter||[],s=e.filterMissing,a=this.makePopup(`<div class="selectionTable"><table><thead><th class="selectAll"></th><th>Category</th></thead><tbody></tbody></table></div>\n        ${Object(i.b)(s)}<br>`),o=this.column.categoryColors,l=this.column.categoryLabels,c=this.column.categories.map(function(t,e){return{cat:t,label:l[e],isChecked:0===r.length||r.indexOf(t)>=0,color:o[e]}}).sort(Object(n.b)("label")),h=a.querySelector("table"),d=c.map(e=>{h.insertAdjacentHTML("beforeend",`<tr>\n          <td class="checkmark"></td>\n          <td class="datalabel">${e.label}</td>\n         </tr>`);const r=h.lastElementChild;return r.querySelector("td.checkmark").addEventListener("click",()=>{e.isChecked=!e.isChecked,t()}),r});t();let u=!0;a.querySelector("thead").addEventListener("click",()=>{u=!u,c.forEach(t=>t.isChecked=u),t(),a.querySelector(".selectAll").innerHTML=`<i class="fa fa-${u?"check-":""}square-o"></i>`});const p=(t,e)=>{const r=null===t&&!1===e;this.markFiltered(!r),this.column.setFilter(r?null:{filter:t,filterMissing:e})};this.onButton(a,{cancel:()=>p(r,s),reset:()=>{c.forEach(t=>t.isChecked=!0),t(),p(null,!1)},submit:()=>{let t=c.filter(t=>t.isChecked).map(t=>t.cat);t.length===c.length&&(t=null);const e=a.querySelector('input[type="checkbox"].lu_filter_missing').checked;return p(t,e),!0}})}}e.a=s},function(t,e,r){"use strict";var i=r(16),n=r(119),s=r(58),a=r(6),o=r(2);class l extends i.a{constructor(t,e,r="Change Mapping",i,n){super(t,e,r),this.data=i,this.idPrefix=n}openDialog(){const t=this.column.getOriginalMapping();let e=this.column.getFilter(),r=this.column.getMapping(),i=r.clone(),l=e;const c=this.attachment.ownerDocument.body;c.insertAdjacentHTML("beforeend",`<div class="lu-popup">${this.dialogForm('<div class="mappingArea"></div>')}</div>`);const h=c.lastElementChild,d=(r,n)=>{i=r,l=n,this.markFiltered(!r.eq(t)||e.min!==n.min||e.max!==n.min||e.filterMissing!==n.filterMissing),this.column.setMapping(r),this.column.setFilter(n)},u={idPrefix:this.idPrefix,callback:d,triggerCallback:"dragend",padding_ver:15},p=Promise.resolve(this.data.mappingSample(this.column));let g=new n.a(h.querySelector(".mappingArea"),i,t,l,p,u);this.onButton(h,{cancel:()=>{this.column.setMapping(r),this.markFiltered(!r.eq(t))},reset:()=>{i=(r=t).clone(),e=Object(o.l)(),d(i,l=e),h.querySelector(".mappingArea").innerHTML="",g=new n.a(h.querySelector(".mappingArea"),i,t,l,p,u)},submit:()=>(d(g.scale,g.filter),!0)});const f=new s.a(this.attachment,h,{placement:"bottom-start",removeOnDestroy:!0});a.a.registerPopup(h,f,!1),this.hidePopupOnClickOutside(h)}}e.a=l},function(t,e,r){"use strict";function i(t,e,r){return Math.max(Math.min(t,r),e)}var n=r(3),s=(r.n(n),r(8)),a=r(16);class o{constructor(t,e,r,i,s,a){this.scale=e,this.original=r,this.oldFilter=i,this.dataPromise=s,this.options={idPrefix:"",width:370,height:150,padding_hor:7,padding_ver:7,filter_height:20,radius:5,callback:()=>void 0,callbackThisArg:null,triggerCallback:"change"},Object.assign(this.options,a),this.scale=e.clone(),this._filter={min:this.oldFilter.min,max:this.oldFilter.max},this.build(Object(n.select)(t))}get filter(){return this.computeFilter()}build(t){function e(){v.attr({x1:t=>m(u.scale.apply(t)),x2:f}).style("visibility",t=>{const e=u.scale.domain;return t<e[0]||t>e[e.length-1]?"hidden":null})}function r(t){return n.behavior.drag().on("dragstart",function(){Object(n.select)(this).classed("dragging",!0).attr("r",1.1*d.radius),Object(n.select)(`#me${d.idPrefix}mapping-overlay`).classed("hide",!0)}).on("drag",t).on("dragend",function(){Object(n.select)(this).classed("dragging",!1).attr("r",d.radius),Object(n.select)(`#me${d.idPrefix}mapping-overlay`).classed("hide",!1),c(!0)})}function o(){function a(){y.sort((t,e)=>t.r-e.r);const t=u.scale;t.domain=y.map(t=>t.r),t.range=y.map(t=>t.n),e()}function l(t,e){if(document.querySelector(`#me${d.idPrefix}mapping-overlay`)){document.querySelector(`#me${d.idPrefix}${e}-input`).value=t.toFixed(2)}}if(!(u.scale instanceof s.a))return;{const t=u.scale,e=t.domain,r=t.range;y=e.map((t,e)=>({r:t,n:r[e]}))}t.on("click",function(){t.select(`#me${d.idPrefix}mapping-overlay`).remove()}),t.selectAll("rect.adder").on("click",()=>{!function(t){const e=i(t,0,p);y.push({n:m.invert(e),r:f.invert(e)}),a(),o()}(Object(n.mouse)(t.select("svg > g").node())[0])});const c=t.select("g.mappings").selectAll("g.mapping").data(y);c.on("click",function(e){t.select(`#me${d.idPrefix}mapping-overlay`).remove();const r=[{label:"Normalized Input",value:e.n,domain:b,type:"normalized"},{label:"Raw Input",value:e.r,domain:E,type:"raw"}],i=t.append("div");i.attr("id",`me${d.idPrefix}mapping-overlay`).attr("style",`left: ${n.event.layerX+d.padding_hor+50}px; top: ${n.event.layerY+d.padding_ver}px`).on("click",()=>n.event.stopPropagation());const s=i.selectAll("div").data(r).enter().append("div");s.append("label").attr("for",t=>`me${d.idPrefix}${t.type}-input`).text(t=>`${t.label}: `),s.append("input").attr("id",t=>`me${d.idPrefix}${t.type}-input`).attr("type","number").attr("min",t=>t.domain[0]).attr("max",t=>t.domain[1]).attr("step",.01).attr("data-type",t=>t.type).attr("value",t=>parseFloat(t.value.toFixed(2))).on("change",t=>{const r=n.event.target,i=t.type;let s=0;switch(i){case"normalized":e.n=parseFloat(r.value),s=m(parseFloat(r.value)),Object(n.select)(this).select("line").attr("x1",s);break;case"raw":e.r=parseFloat(r.value),s=f(parseFloat(r.value)),Object(n.select)(this).select("line").attr("x2",s)}Object(n.select)(this).select(`circle.${i}`).attr("cx",s),a(),d.callback.call(d.callbackThisArg,u.scale.clone(),u.filter)}),n.event.stopPropagation()});const h=c.enter().append("g").classed("mapping",!0).on("contextmenu",(t,e)=>{n.event.preventDefault(),n.event.stopPropagation(),function(t){y.length<=2||(y.splice(t,1),a(),o())}(e)});h.append("line").attr({y1:0,y2:g}).call(r(function(t){const e=n.event.dx,r=i(m(t.n)+e,0,p),s=i(f(t.r)+e,0,p);t.n=m.invert(r),t.r=f.invert(s),Object(n.select)(this).attr("x1",r).attr("x2",s),Object(n.select)(this.parentElement).select("circle.normalized").attr("cx",r),Object(n.select)(this.parentElement).select("circle.raw").attr("cx",s),l(t.r,"raw"),l(t.n,"normalized"),a()})),h.append("circle").classed("normalized",!0).attr("r",d.radius).call(r(function(t){const e=i(n.event.x,0,p);t.n=m.invert(e),Object(n.select)(this).attr("cx",e),Object(n.select)(this.parentElement).select("line").attr("x1",e),l(t.n,"normalized"),a()})),h.append("circle").classed("raw",!0).attr("r",d.radius).attr("cy",g).call(r(function(t){const e=i(n.event.x,0,p);t.r=f.invert(e),Object(n.select)(this).attr("cx",e),Object(n.select)(this.parentElement).select("line").attr("x2",e),l(t.r,"raw"),a()})),c.select("line").attr({x1:t=>m(t.n),x2:t=>f(t.r)}),c.select("circle.normalized").attr("cx",t=>m(t.n)),c.select("circle.raw").attr("cx",t=>f(t.r)),c.exit().remove()}function l(){if(!(u.scale instanceof s.b))return void t.select("div.script").style("display","none");t.select("div.script").style("display",null);const r=u.scale,i=t.select("textarea").text(r.code);t.select("div.script").select("button").on("click",()=>{r.code=i.property("value"),e(),c()})}function c(t=!1){t&&"dragend"!==d.triggerCallback||d.callback.call(d.callbackThisArg,u.scale.clone(),u.filter)}function h(){const r=f.domain();t.select("input.raw_min").property("value",r[0]),t.select("input.raw_max").property("value",r[1]),e(),o(),function(){const e=f.domain();t.select("g.left_filter").attr("transform",`translate(${f(isFinite(u._filter.min)?u._filter.min:e[0])}, 0)`),t.select("g.right_filter").attr("transform",`translate(${f(isFinite(u._filter.max)?u._filter.max:e[1])}, 0)`);const r=[(isFinite(u._filter.min)?u._filter.min:e[0]).toFixed(1),(isFinite(u._filter.max)?u._filter.max:e[1]).toFixed(1)];Object(n.selectAll)(`#me${d.idPrefix}filter_inputs div input`).data(r).property("value",String)}()}const d=this.options,u=this;t=t.append("div").classed("lu-mapping-editor",!0);const p=d.width-2*d.padding_hor,g=d.height-2*d.padding_ver-d.filter_height;t.node().innerHTML=`<form onsubmit="return false">\n      <div><label for="me${d.idPrefix}mapping_type"><span class="title">Mapping / Scaling Type: </span><select id="me${d.idPrefix}mapping_type">\n        <option value="linear">Linear</option>\n        <option value="linear_invert">Invert</option>\n        <option value="linear_abs">Absolute</option>\n        <option value="log">Log</option>\n        <option value="pow1.1">Pow 1.1</option>\n        <option value="pow2">Pow 2</option>\n        <option value="pow3">Pow 3</option>\n        <option value="sqrt">Sqrt</option>\n        <option value="script">Custom Script</option>\n      </select>\n      </label></div>\n      <div class="filter_part"><span class="title">Mapping:</span></div>\n      <div class="mapping_area">\n        <div>\n          <span>0</span>\n          <input type="text" class="raw_min" id="me${d.idPrefix}raw_min" value="0"><label for="me${d.idPrefix}raw_min">Min</label>\n        </div>\n        <svg width="${d.width}" height="${d.height+35}">\n          <text x="${p/2}" y="10">Normalized Input</text>\n          <text x="${p/2}" y="${d.height-d.filter_height+5}">Raw Input</text>\n          <line y1="${d.padding_ver}" y2="${d.padding_ver}" x1="${d.padding_hor}" x2="${p+d.padding_hor}" stroke="black"></line>\n          <rect class="adder" x="${d.padding_hor}" width="${p}" height="10"></rect>\n          <line y1="${d.height-d.filter_height-d.padding_ver}" y2="${d.height-d.filter_height-d.padding_ver}" x1="${d.padding_hor}" x2="${p+d.padding_hor}" stroke="black"></line>\n          <rect class="adder" x="${d.padding_hor}" width="${p}" height="10" y="${d.height-d.filter_height-10}"></rect>\n          <g transform="translate(${d.padding_hor},${d.padding_ver})">\n            <g class="samples"></g>\n            <g class="mappings"></g>\n            <g class="filter" transform="translate(0,${d.height-d.filter_height-d.padding_ver-10+35})">\n               <g class="left_filter" transform="translate(0,0)">\n                  <path d="M0,0L4,7L-4,7z"></path>\n                  <rect x="-4" y="7" width="40" height="13" rx="2" ry="2"></rect>\n                  <text y="14" x="15" text-anchor="middle">Min</text>\n                </g>\n              <g class="right_filter" transform="translate(${p},0)">\n                  <path d="M0,0L4,7L-4,7z"></path>\n                  <rect x="-36" y="7" width="40" height="13" rx="2" ry="2"></rect>\n                  <text y="14" x="-15" text-anchor="middle">Max</text>\n              </g>\n            </g>\n          </g>\n        </svg>\n        <div>\n          <span>1</span>\n          <input type="text" class="raw_max" id="me${d.idPrefix}raw_max" value="1"><label for="me${d.idPrefix}raw_max">Max</label>\n        </div>\n      </div>\n      <div class="filter_part2" style=""><span class="title">Filter:</span></div>\n\n      <div id="me${d.idPrefix}filter_inputs">\n        <div>\n          <label for="me${d.idPrefix}min_filter_input">Min Filter:</label>\n          <input id="me${d.idPrefix}min_filter_input" type="number" step="0.1">\n        </div>\n        <div>\n          <label for="me${d.idPrefix}max_filter_input">Max Filter:</label>\n          <input id="me${d.idPrefix}max_filter_input" type="number" step="0.1">\n        </div>\n      </div>\n      <div>\n         Extras: <label><input type="checkbox" id="me${d.idPrefix}filterMissing" ${this.oldFilter.filterMissing?'checked="checked"':""}>${a.d}</label>\n      </div>\n      <div class="script" style="/* display: none; */">\n        <label for="me${d.idPrefix}script_code">Custom Script</label><button>Apply</button>\n        <textarea id="me${d.idPrefix}script_code">\n        </textarea>\n      </div>\n    </form>`;const f=n.scale.linear().domain([Math.min(this.scale.domain[0],this.original.domain[0]),Math.max(this.scale.domain[this.scale.domain.length-1],this.original.domain[this.original.domain.length-1])]).range([0,p]),m=n.scale.linear().domain([0,1]).range([0,p]),E=f.domain(),b=m.domain();t.select("input.raw_min").property("value",f.domain()[0]).on("blur",function(){const t=f.domain();t[0]=parseFloat(this.value),f.domain(t);const e=u.scale.domain;e[0]=t[0],u.scale.domain=e,h(),c()}),t.select("input.raw_max").property("value",f.domain()[1]).on("blur",function(){const t=f.domain();t[1]=parseFloat(this.value),f.domain(t);const e=u.scale.domain;e[e.length-1]=t[1],u.scale.domain=e,h(),c()}),t.select('input[type="checkbox"]').on("change",()=>{c()});let v=t.select("g.samples").selectAll("line").data([]);this.dataPromise.then(t=>{t=function(t){return Array.from(new Set(t))}(t),(v=v.data(t)).enter().append("line").attr({x1:t=>m(u.scale.apply(t)),y1:0,x2:f,y2:g}).style("visibility",t=>{const e=u.scale.domain;return t<e[0]||t>e[e.length-1]?"hidden":null})});let y=[];o(),l();{const e=isFinite(this.oldFilter.min)?f(this.oldFilter.min):0,s=isFinite(this.oldFilter.max)?f(this.oldFilter.max):p,a=[(isFinite(this.oldFilter.min)?this.oldFilter.min:E[0]).toFixed(1),(isFinite(this.oldFilter.max)?this.oldFilter.max:E[1]).toFixed(1)];Object(n.selectAll)(`#me${d.idPrefix}filter_inputs div input`).attr("min",E[0]).attr("max",E[1]).data(a).attr("value",t=>t).on("change",function(e,r){const i=parseFloat(this.value),n=0===r?"min":"max";if(i>=E[0]&&i<=E[1]){const e="min"===n?"left":"right",r=f(i);u._filter[n]=i===E[0]?-1/0:i===E[1]?1/0:i,t.select(`g.${e}_filter`).attr("transform",`translate(${r}, 0)`)}c()}),t.selectAll("g.left_filter, g.right_filter").data([this.oldFilter.min,this.oldFilter.max]).attr("transform",(t,r)=>`translate(${0===r?e:s},0)`).call(r(function(t,e){const r=i(n.event.x,0,p),s=f.invert(r),a=0===e?"min":"max",o=r<=0&&"min"===a?-1/0:r>=p&&"max"===a?1/0:s;u._filter[a]=o,document.querySelector(`#me${d.idPrefix}filter_inputs #me${d.idPrefix}${a}_filter_input`).value=s.toFixed(1),Object(n.select)(this).datum(o).attr("transform",`translate(${r},0)`)}))}this.computeFilter=(()=>({min:this._filter.min,max:this._filter.max,filterMissing:t.select('input[type="checkbox"]').property("checked")})),h(),t.select("select").on("change",function(){const t=this.value;if("linear_invert"===t)u.scale=new s.a(f.domain(),"linear",[1,0]);else if("linear_abs"===t){const t=f.domain();u.scale=new s.a([t[0],(t[1]-t[0])/2,t[1]],"linear",[1,0,1])}else u.scale="script"===t?new s.b(f.domain()):new s.a(f.domain(),t);e(),o(),l(),c()}).property("selectedIndex",function(){let t="script";u.scale instanceof s.a&&(t=u.scale.scaleType);return["linear","linear_invert","linear_abs","log","pow1.1","pow2","pow3","sqrt","script"].indexOf(t)})}}e.a=o},function(t,e,r){"use strict";var i=r(16),n=r(3),s=(r.n(n),r(6));class a extends i.a{constructor(t,e,r="Edit Categorical Mapping"){super(t,e,r)}openDialog(){function t(){f.forEach((t,e)=>{const r=p[e];t.querySelector(".checkmark").innerHTML=`<i class="fa fa-${r.isChecked?"check-":""}square-o"></i>`,t.querySelector(".bar").style.width=`${l(r.range)}px`,t.querySelector(".datalabel").style.opacity=r.isChecked?"1.0":".8"})}function e(){c.querySelector(".selectAll").innerHTML=`<i class="fa fa-${m?"check-":""}square-o"></i>`}const r=this.column.getFilter()||{filter:[],filterMissing:!1},a=r.filter,o=r.filterMissing,l=n.scale.linear().domain([0,100]).range([0,120]),c=this.makePopup(`<div class="selectionTable"><table><thead><th class="selectAll"></th><th colspan="2">Scale</th><th>Category</th></thead><tbody></tbody></table></div>\n        ${Object(i.b)(o)}<br>`),h=this.column.getScale().range,d=this.column.categoryColors,u=this.column.categoryLabels,p=this.column.categories.map((t,e)=>({cat:t,label:u[e],isChecked:0===a.length||a.indexOf(t)>=0,range:100*h[e],color:d[e]})).sort(Object(s.b)("label")),g=c.querySelector("table"),f=p.map(e=>{g.insertAdjacentHTML("beforeend",`<tr>\n          <td class="checkmark"></td>\n          <td><input type="number" value="${e.range}" min="0" max="100" size="5"></td>\n          <td><div class="bar" style="background-color: ${e.color}"></div></td>\n          <td class="datalabel">${e.label}</td>\n         </tr>`);const r=g.lastElementChild;return r.querySelector("td.checkmark").addEventListener("click",()=>{e.isChecked=!e.isChecked,t()}),r.querySelector("input").addEventListener("input",function(){e.range=parseFloat(this.value),t()}),r});t();let m=!0;c.querySelector("thead").addEventListener("click",()=>{m=!m,p.forEach(t=>t.isChecked=m),t(),e()}),e();const E=(t,e)=>{const r=null===t&&!1===e;this.markFiltered(!r),this.column.setFilter(r?null:{filter:t,filterMissing:e})};this.onButton(c,{cancel:()=>{E(a,o),this.column.setMapping(h)},reset:()=>{p.forEach(t=>{t.isChecked=!0,t.range=50}),t(),E(null,!1),this.column.setMapping(p.map(()=>1))},submit:()=>{let t=p.filter(t=>t.isChecked).map(t=>t.cat);t.length===p.length&&(t=null);const e=c.querySelector('input[type="checkbox"].lu_filter_missing').checked;return E(t,e),this.column.setMapping(p.map(t=>t.range/100)),!0}})}}e.a=a},function(t,e,r){"use strict";var i=r(10),n=r(8),s=r(9),a=r(50),o=r(16),l=r(59),c=r(3),h=(r.n(c),r(0));const d={stringLike:function(t,e,r){const i=e.dataset.summary;if(e.dataset.summary="string",!r){const r=t.getFilter()||"";return void(e.textContent=r===s.a.FILTER_MISSING?"":String(r))}const n=Object(l.b)(t);"string"!==i?(e.innerHTML=n.template,n.init(e)):n.update(e)},categoricalLike:function(t,e,r,n){const s=n.statsOf(t),l=e.dataset.summary;if(!s||s.hist.length>50)return void(e.innerHTML="");const c=t.categories,h=t.categoryColors,d=t.categoryLabels;if(l&&l.endsWith("hist")){const t=Array.from(e.querySelectorAll("div[data-cat]"));for(let i=t.length;i<s.hist.length;++i){e.insertAdjacentHTML("beforeend",`<div style="background-color: ${h[i]}" data-cat="${s.hist[i].cat}" ${r?`data-title="${d[i]}"`:""}></div>`);const n=e.lastElementChild;0===t.length?e.insertBefore(e.firstElementChild,n):e.insertBefore(e.children[i],n),t.push(n)}s.hist.forEach(({y:e},r)=>{const i=t[r];i.style.height=`${Math.round(100*e/s.maxBin)}%`,i.title=`${d[r]}: ${e}`})}else s.hist.forEach(({cat:t,y:i})=>{const n=c.indexOf(t);e.insertAdjacentHTML("beforeend",`<div style="height: ${Math.round(100*i/s.maxBin)}%; background-color: ${h[n]}" title="${d[n]}: ${i}" data-cat="${t}" ${r?`data-title="${d[n]}"`:""}></div>`)});if(!(t instanceof i.a||t instanceof a.a))return void(e.dataset.summary="hist");e.dataset.summary=r?"interactive-filter-hist":"interactive-hist";const u=t,p=u.getFilter();let g=null;Array.from(e.children).slice(0,c.length).forEach((t,e)=>{const r=t.dataset.cat;t.dataset.filtered=i.a.filter(p,r)?"":"filtered",t.onclick=(i=>{i.preventDefault(),i.stopPropagation();const n=u.getFilter();if(null===n||!Array.isArray(n.filter)){const r=c.slice();return t.dataset.filtered="filtered",r.splice(e,1),void u.setFilter({filterMissing:!!g&&g.checked,filter:r})}const s=n.filter.slice(),a=s.indexOf(r);a>=0?(t.dataset.filtered="filtered",s.splice(a,1)):(t.dataset.filtered="",s.push(r)),u.setFilter({filterMissing:g?g.checked:n.filterMissing,filter:s})})}),r&&("interactive-filter-hist"!==l?(e.insertAdjacentHTML("beforeend",Object(o.c)(null!==p&&p.filterMissing,s.missing)),g=e.querySelector("input")):(g=e.querySelector("input")).checked=null!==p&&p.filterMissing,g.onchange=(()=>{const t=u.getFilter();null===t?u.setFilter({filterMissing:g.checked,filter:[]}):u.setFilter({filterMissing:g.checked,filter:t.filter})}))},numberLike:function(t,e,r,i){const s=i.statsOf(t),a=e.dataset.summary;if(!s)return void(e.innerHTML="");if(!(r&&t instanceof n.d)){if(e.dataset.summary="hist",e.innerHTML="",s.hist.forEach(({x:r,y:i},n)=>{e.insertAdjacentHTML("beforeend",`<div style="height: ${Math.round(100*i/s.maxBin)}%; background-color: ${t.getMetaData().color};" title="Bin ${n}: ${i}" data-x="${r}"></div>`)}),Object(n.e)(t)){const r=t.getRange();e.insertAdjacentHTML("beforeend",`<span>${r[0]}</span><span>${r[1]}</span>`)}return}const l=t,d=l.getFilter(),u=l.getMapping().domain,p=t=>100*(t-u[0])/(u[1]-u[0]),g=t=>t/100*(u[1]-u[0])+u[0],f=isFinite(d.min)?d.min:u[0],m=isFinite(d.max)?d.max:u[1];if("slider-hist"===a){const r=Array.from(e.querySelectorAll("div[data-x]"));for(let t=r.length;t<s.hist.length;++t)e.insertAdjacentHTML("afterbegin","<div></div>"),r.unshift(e.firstElementChild);s.hist.forEach(({x:e,y:i},n)=>{const a=r[n];a.style.height=`${Math.round(100*i/s.maxBin)}%`,a.style.backgroundColor=t.getMetaData().color,a.title=`Bin ${n}: ${i}`,a.dataset.x=String(e)})}else e.dataset.summary="slider-hist",s.hist.forEach(({x:t,y:r},i)=>{e.insertAdjacentHTML("beforeend",`<div style="height: ${Math.round(100*r/s.maxBin)}%" title="Bin ${i}: ${r}" data-x="${t}"></div>`)}),e.insertAdjacentHTML("beforeend",`\n      <div data-handle="min-hint" style="width: ${Math.round(p(f))}%"></div>\n      <div data-handle="max-hint" style="width: ${Math.round(100-p(m))}%"></div>\n      <div data-handle="min" data-value="${Object(h.q)(f,2)}" style="left: ${Math.round(p(f))}%"></div>\n      <div data-handle='max' data-value="${Object(h.q)(m,2)}" style="right: ${Math.round(100-p(m))}%"></div>\n      ${Object(o.c)(d.filterMissing,s.missing)}\n    `);const E=e.querySelector("[data-handle=min]"),b=e.querySelector("[data-handle=max]"),v=e.querySelector("[data-handle=min-hint]"),y=e.querySelector("[data-handle=max-hint]"),_=e.querySelector("input");if("slider-hist"===a)return v.style.width=`${Math.round(p(f))}%`,y.style.width=`${Math.round(100-p(m))}%`,E.dataset.value=Object(h.q)(f,2).toString(),b.dataset.value=Object(h.q)(m,2).toString(),E.style.left=`${Math.round(p(f))}%`,b.style.right=`${Math.round(100-p(m))}%`,void(_.checked=d.filterMissing);const T=()=>{const t=g(parseFloat(E.style.left)),e=g(100-parseFloat(b.style.right));l.setFilter({filterMissing:_.checked,min:Math.abs(t-u[0])<.001?NaN:t,max:Math.abs(e-u[1])<.001?NaN:e})};_.onchange=(()=>T()),Object(c.selectAll)([E,b]).call(c.behavior.drag().on("dragstart",function(){Object(c.select)(this).classed("lu-dragging",!0)}).on("drag",function(){const t=c.event,r=e.clientWidth,i=Math.max(0,Math.min(t.x,r)),n=Math.round(100*i/r);if(this.dataset.value=Object(h.q)(g(n),2).toString(),"min"===this.dataset.handle)return this.style.left=`${n}%`,void(v.style.width=`${n}%`);this.style.right=`${100-n}%`,y.style.width=`${100-n}%`}).on("dragend",function(){Object(c.select)(this).classed("lu-dragging",!1),T()}))},selection:function(t,e,r,i){const n=i.provider,s=e.dataset.summary;e.dataset.summary="selection","selection"!==s&&(e.innerHTML="<i class='fa fa-square-o' title='(Un)Select All'></i>");const a=e.firstElementChild;a.onclick=(e=>{e.stopPropagation(),a.classList.contains("fa-square-o")?n.selectAllOf(t.findMyRanker()):n.setSelection([]),a.classList.toggle("fa-square-o"),a.classList.toggle("fa-check-square-o")})},aggregate:function(t,e,r,i){const n=e.dataset.summary;if(e.dataset.summary="aggregation","aggregation"!==n){let r="down";const i=t.findMyRanker();i&&i.getGroups().every(e=>t.isAggregated(e))&&(r="right"),e.innerHTML=`<i class='fa fa-caret-${r}' title='(Un)Aggregate All'></i>`}const s=e.firstElementChild;s.onclick=(e=>{e.stopPropagation();const r=t.findMyRanker();if(!r)return;const n=s.classList.contains("fa-caret-down");s.classList.toggle("fa-caret-down"),s.classList.toggle("fa-caret-right"),i.provider.aggregateAllOf(r,n)})}};e.a=d},function(t,e,r){"use strict";var i=r(41),n=r(17),s=r(33);class a{constructor(t,e,r={}){this.node=t,this.tableId=0,this.sections=[],this.visible={first:0,forcedFirst:0,last:0,forcedLast:0},this.options={columnPadding:0},this.context=Object(n.d)(0,500),Object.assign(this.options,r),t.innerHTML="<header></header><main></main>",t.classList.add("lineup-engine","lineup-multi-engine"),this.style=new i.a(this.node,e);const s=this.main;let a=s.scrollLeft;s.addEventListener("scroll",()=>{const t=s.scrollLeft;if(t===a)return;const e=t>a;a=t,this.onScrolledHorizontally(t,s.clientWidth,e)})}update(){this.context=Object(n.b)(this.sections.map(t=>t.width),NaN,this.options.columnPadding),this.updateGrid(),this.onScrolledHorizontally(this.main.scrollLeft,this.main.clientWidth,!1)}updateGrid(){const t=i.a.gridColumn(this.sections,this.context.defaultRowHeight-this.context.padding(-1));this.style.updateRule("multiTableRule",`${this.style.id} > header, ${this.style.id} > main { ${t} }`)}onScrolledHorizontally(t,e,r){const{first:i,last:a}=Object(n.c)(t,e,this.context.defaultRowHeight,this.context.exceptions,this.context.numberOfRows),o=this.visible;o.forcedFirst=i,o.forcedLast=a;let l=0;return this.sections.forEach((n,s)=>{s>=i&&s<=a?n.show(Math.max(0,t-l),Math.min(t+e-l,n.width),r):n.hide(),l+=n.width}),o.first=i,o.last=a,s.a.PARTIAL}destroy(){this.sections.forEach(t=>t.destroy()),this.node.remove()}get doc(){return this.node.ownerDocument}get header(){return this.node.querySelector("header")}get main(){return this.node.querySelector("main")}pushTable(t,...e){const r=this.doc.createElement("article"),i=this.doc.createElement("article"),n=`T${this.tableId++}`,s=this.style.tableIds(n);r.id=s.header,i.id=s.body,this.header.appendChild(r),this.main.appendChild(i);const a=t(r,i,n,this.style,...e);return a.init(),this.sections.push(a),this.update(),a}pushSeparator(t,...e){const r=this.doc.createElement("section"),i=this.doc.createElement("section");this.header.appendChild(r),this.main.appendChild(i);const n=t(r,i,this.style,...e);return n.init(),this.sections.push(n),this.update(),n}remove(t){const e=this.sections.indexOf(t);return!(e<0)&&(this.sections.splice(e,1),t.destroy(),this.update(),!0)}widthChanged(){this.update()}}e.a=a},function(t,e,r){"use strict";var i=r(17),n=r(22);class s{constructor(t,e,r){this.left=t,this.right=e,this.dataIndex=r}get dataIndices(){return[this.dataIndex]}isSelected(t){return t.has(this.dataIndex)}update(t){t.setAttribute("class","lu-slope"),t.setAttribute("d",`M0,${this.left}L200,${this.right}`)}}class a{constructor(t,e,r){this.left=t,this.right=e,this.dataIndices=r}isSelected(t){return this.dataIndices.some(e=>t.has(e))}update(t){t.setAttribute("class","lu-group-slope"),t.setAttribute("d",`M0,${this.left[0]}L200,${this.right[0]}L200,${this.right[1]}L0,${this.left[1]}Z`)}}class o{constructor(t,e,r,i){this.header=t,this.body=e,this.id=r,this.ctx=i,this.leftSlopes=[],this.rightSlopes=[],this.pool=[],this.width=200,this.node=t.ownerDocument.createElementNS("http://www.w3.org/2000/svg","svg"),this.node.innerHTML='<g transform="translate(0,0)"></g>',t.classList.add("lu-slopegraph"),e.classList.add("lu-slopegraph"),this.body.style.height="1px",e.appendChild(this.node)}init(){this.hide();const t=this.body.parentElement;let e=t.scrollTop;this.scrollListener=(()=>{const r=t.scrollTop;e!==r&&(e=r,this.onScrolledVertically(r,t.clientHeight))}),t.addEventListener("scroll",this.scrollListener)}get hidden(){return this.header.classList.contains("loading")}set hidden(t){this.header.classList.toggle("loading",t),this.body.classList.toggle("loading",t)}hide(){this.hidden=!0}show(){const t=this.hidden;this.hidden=!1,t&&this.revalidate()}destroy(){this.node.remove(),this.body.parentElement.removeEventListener("scroll",this.scrollListener)}revalidate(){if(!this.leftContext||this.hidden)return;const t=this.body.parentElement;this.onScrolledVertically(t.scrollTop,t.clientHeight)}rebuild(t,e,r,i){this.leftContext=e,this.rightContext=i;const o=new Map;let l=0;this.rightSlopes=r.map((t,e)=>{const r=i.exceptionsLookup.get(e)||i.defaultRowHeight,s=r-i.padding(e);if(Object(n.a)(t)){const r={rows:t.rows.map(t=>t.dataIndex),start:l,heightPerRow:s/t.rows.length,offset:0,ref:e};t.rows.forEach(t=>o.set(t.dataIndex,r))}else{const r=t.dataIndex;o.set(r,{rows:[r],start:l,heightPerRow:s,offset:0,ref:e})}return l+=r,[]}),l=0,this.leftSlopes=t.map((t,r)=>{const c=e.exceptionsLookup.get(r)||i.defaultRowHeight,h=c-i.padding(r),d=[];if(Object(n.a)(t)){const e=new Set(t.rows.map(t=>t.dataIndex)),r=h/t.rows.length;let i=0;t.rows.forEach(t=>{if(!e.has(t.dataIndex))return;e.delete(t.dataIndex);const n=o.get(t.dataIndex);if(!n)return;const c=n.rows.filter(t=>e.delete(t));c.push(t.dataIndex);const h=c.length,u=1===h?new s(l+i+r/2,n.start+n.offset+n.heightPerRow/2,t.dataIndex):new a([l+i,l+i+r*c.length],[n.start+n.offset,n.start+n.offset+n.heightPerRow*h],c);d.push(u),this.rightSlopes[n.ref].push(u),n.offset+=h*n.heightPerRow,i+=h*r})}else{const e=t.dataIndex,r=o.get(e);if(r){const t=new s(l+h/2,r.start+r.offset+r.heightPerRow/2,e);d.push(t),this.rightSlopes[r.ref].push(t),r.offset+=r.heightPerRow}}return l+=c,d}),this.revalidate()}onScrolledVertically(t,e){if(!this.leftContext||!this.rightContext)return;const r=Object(i.c)(t,e,this.leftContext.defaultRowHeight,this.leftContext.exceptions,this.leftContext.numberOfRows),n=Object(i.c)(t,e,this.rightContext.defaultRowHeight,this.rightContext.exceptions,this.rightContext.numberOfRows),s=Math.min(r.firstRowPos,n.firstRowPos),a=Math.max(r.endPos,n.endPos);this.body.style.transform=`translate(0, ${s.toFixed(0)}px)`,this.body.style.height=`${(a-s).toFixed(0)}px`,this.node.firstElementChild.setAttribute("transform",`translate(0,-${s.toFixed(0)})`),this.choose(r.first,r.last,n.first,n.last)}choose(t,e,r,i){const n=new Set;for(let r=t;r<=e;++r)this.leftSlopes[r].forEach(t=>n.add(t));for(let t=r;t<=i;++t)this.rightSlopes[t].forEach(t=>n.add(t));this.render(n)}render(t){const e=this.node.firstElementChild,r=Array.from(e.children);for(let e=t.size;e<r.length;++e){const t=r[e];this.pool.push(t),t.remove()}for(let i=r.length;i<t.size;++i){const t=this.pool.pop();if(t)e.appendChild(t),r.push(t);else{const t=e.ownerDocument.createElementNS("http://www.w3.org/2000/svg","path");t.onclick=(e=>{const r=t.__data__,i=this.ctx.provider,n=r.dataIndices;if(e.ctrlKey)n.forEach(t=>i.toggleSelection(t,!0));else{const t=i.isSelected(n[0]);i.setSelection(t?[]:n)}}),e.appendChild(t),r.push(t)}}const i=this.ctx.provider,n={has:t=>i.isSelected(t)};let s=0;t.forEach(t=>{const i=r[s++];t.update(i),i.__data__=t;const a=t.isSelected(n);i.classList.toggle("lu-selected",a),a&&e.appendChild(i)})}updateSelection(t){const e=this.node.firstElementChild;Array.from(e.children).forEach(r=>{const i=r.__data__.isSelected(t);r.classList.toggle("lu-selected",i),i&&e.appendChild(r)})}}e.a=o},function(t,e,r){"use strict";var i=r(125),n=r(13),s=r(64),a=r(1),o=r(129),l=r(17),c=r(19),h=r(11),d=r(22),u=r(0),p=r(130),g=r(131),f=r(61),m=r(42);class E extends u.a{fire(t,...e){super.fire(t,...e)}createEventList(){return super.createEventList().concat([E.EVENT_WIDTH_CHANGED,E.EVENT_UPDATE_DATA])}}E.EVENT_WIDTH_CHANGED="widthChanged",E.EVENT_UPDATE_DATA="updateData";class b extends i.a{constructor(t,e,r,i,s,o,c={}){super(e,r,i,s,f.a),this.ranking=t,this.ctx=o,this.data=[],this.events=new E,this.on=this.events.on.bind(this.events),this.options={animation:!0,customRowUpdate:()=>void 0},Object.assign(this.options,c);const h=this;this.delayedUpdate=Object(u.f)(function(){this.type===n.a.EVENT_DIRTY_VALUES?this.primaryType!==a.a.EVENT_RENDERER_TYPE_CHANGED&&this.primaryType!==a.a.EVENT_GROUP_RENDERER_TYPE_CHANGED&&this.primaryType!==a.a.EVENT_LABEL_CHANGED&&h.updateBody():h.events.fire(b.EVENT_UPDATE_DATA)},50,(t,e)=>{return t.self.type===n.a.EVENT_ORDER_CHANGED?t:e}),t.on(`${n.a.EVENT_DIRTY_HEADER}.body`,Object(u.f)(()=>this.updateHeaders(),50)),t.on(`${n.a.EVENT_DIRTY_VALUES}.body`,this.delayedUpdate),t.on([`${n.a.EVENT_ADD_COLUMN}.body`,`${n.a.EVENT_REMOVE_COLUMN}.body`,`${n.a.EVENT_MOVE_COLUMN}.body`],Object(u.f)(()=>this.updateAll(),50)),t.on(`${n.a.EVENT_ORDER_CHANGED}.body`,this.delayedUpdate),this.selection=new p.a(this.ctx,r),this.selection.on(p.a.EVENT_SELECT_RANGE,(t,e,r)=>{this.selection.selectRange(this.data.slice(t,e+1),r)}),this.renderCtx=Object.assign({isGroup:t=>Object(d.a)(this.data[t]),getRow:t=>this.data[t],getGroup:t=>this.data[t]},o);const g=this.createColumns();this._context=Object.assign({columns:g,column:Object(l.b)(g.map(t=>t.width),100,this.ctx.columnPadding)},Object(l.d)(0,20))}get id(){return this.ranking.id}onVisibilityChanged(t){super.onVisibilityChanged(t),t&&this.delayedUpdate.call({type:n.a.EVENT_ORDER_CHANGED})}updateHeaders(){return super.updateHeaders()}get currentData(){return this.data}get context(){return this._context}createHeader(t,e){return e instanceof o.a&&e.updateWidthRule(this.style),e.createHeader(t,this.renderCtx)}updateHeader(t,e){return e instanceof o.a&&e.updateWidthRule(this.style),e.updateHeader(t,this.renderCtx)}createCell(t,e,r){return r.createCell(e,t,this.renderCtx)}updateCell(t,e,r){return r.updateCell(t,e,this.renderCtx)}updateAll(){const t=this.createColumns();this._context=Object.assign({},this._context,{columns:t,column:Object(l.b)(t.map(t=>t.width),100,this.ctx.columnPadding)}),super.recreate(),this.events.fire(b.EVENT_WIDTH_CHANGED)}updateBody(){this.hidden||this.forEachRow((t,e)=>this.updateRow(t,e))}updateHeaderOf(t){const e=this.header.children[t],r=this._context.columns[t];r instanceof o.a&&r.updateWidthRule(this.style),this.updateHeader(e,r)}createRow(t,e){super.createRow(t,e);const r=this.renderCtx.isGroup(e);if(this.options.customRowUpdate(t,e),r)return void(t.dataset.agg="group");const{dataIndex:i,meta:n}=this.renderCtx.getRow(e);t.dataset.dataIndex=i.toString(),t.dataset.agg="detail",t.dataset.meta=n||"",this.selection.updateState(t,i),this.selection.add(t)}updateRow(t,e){const r=this.renderCtx.isGroup(e),i="group"===t.dataset.agg;if(this.options.customRowUpdate(t,e),r!==i&&(t.innerHTML="",t.dataset.agg=r?"group":"detail",r?(t.dataset.dataIndex="",this.selection.remove(t)):this.selection.add(t)),!r){const{dataIndex:r,meta:i}=this.renderCtx.getRow(e);t.dataset.dataIndex=r.toString(),t.dataset.meta=i||"",this.selection.updateState(t,r)}super.updateRow(t,e)}updateSelection(t){this.forEachRow((e,r)=>{this.renderCtx.isGroup(r)?this.updateRow(e,r):this.selection.update(e,t)},!0)}updateColumnWidths(){this._context.column=Object(l.b)(this._context.columns.map(t=>t.width),100,this.ctx.columnPadding),super.updateColumnWidths();const{columns:t}=this.context;t.forEach(t=>{t instanceof o.a&&t.updateWidthRule(this.style)}),this.events.fire(b.EVENT_WIDTH_CHANGED)}updateColumn(t){const e=this.context.columns[t];this.forEachRow((r,i)=>{const n=r.children[t],s=this.updateCell(n,i,e);n!==s&&s&&(Object(m.b)(s,e),r.replaceChild(s,n))})}destroy(){super.destroy(),this.ranking.flatColumns.forEach(t=>this.disableListener(t))}disableListener(t){t.on(`${a.a.EVENT_WIDTH_CHANGED}.body`,null),t.on([`${a.a.EVENT_RENDERER_TYPE_CHANGED}.body`,`${a.a.EVENT_GROUP_RENDERER_TYPE_CHANGED}.body`,`${a.a.EVENT_LABEL_CHANGED}.body`],null),Object(h.b)(t)&&(t.on(`${c.b.EVENT_MULTI_LEVEL_CHANGED}.body`,null),t.on(`${c.b.EVENT_MULTI_LEVEL_CHANGED}.bodyUpdate`,null))}groupData(t){const e=this.ranking.getGroups(),r=this.ctx.provider,i=(t,e)=>1===e?"first last":0===t?"first":t===e-1?"last":void 0;if(1===e.length)return r.isAggregated(this.ranking,e[0])?[Object.assign({rows:t},e[0])]:t.map((r,n)=>Object.assign({group:e[0],relativeIndex:n,meta:i(n,t.length)},r));let n=0;const s=[];return e.forEach(e=>{const a=e.order.length,o=t.slice(n,n+a);n+=a,r.isAggregated(this.ranking,e)?s.push(Object.assign({rows:o},e)):s.push(...o.map((t,r)=>Object.assign({group:e,relativeIndex:r,meta:i(r,o.length)},t)))}),s}render(t,e){const r=this._context;r.columns.forEach(t=>this.disableListener(t.c));const i=this.data;this.data=t,this.renderCtx.totalNumberOfRows=t.length;const n=this.createColumns();return this._context=Object.assign({columns:n,column:Object(l.b)(n.map(t=>t.width),100,this.ctx.columnPadding)},e),super.recreate(this.options.animation?Object(g.a)(r,i,this.data):void 0)}fakeHover(t){const e=this.body.querySelector("[data-data-index].lu-hovered");e&&e.classList.remove("lu-hovered");const r=this.body.querySelector(`[data-data-index="${t}"]`);r&&r.classList.add("lu-hovered")}createColumns(){const t=[];this.ranking.flatten(t,0,1,0);return t.map(t=>t.col).map((t,e)=>this.createColumn(t,e))}createColumn(t,e){const r=this.ctx.createRenderer(t);if(t.on(`${a.a.EVENT_WIDTH_CHANGED}.body`,()=>{this.updateColumnWidths()}),t.on([`${a.a.EVENT_RENDERER_TYPE_CHANGED}.body`,`${a.a.EVENT_GROUP_RENDERER_TYPE_CHANGED}.body`,`${a.a.EVENT_LABEL_CHANGED}.body`],()=>{this._context.columns[e]=this.createColumn(t,e),this.updateColumn(e)}),Object(h.b)(t)&&!t.getCollapsed()){const i=new o.a(t,r,e,this.ctx.columnPadding);return t.on(`${c.b.EVENT_MULTI_LEVEL_CHANGED}.body`,()=>{i.updateWidthRule(this.style)}),t.on(`${c.b.EVENT_MULTI_LEVEL_CHANGED}.bodyUpdate`,Object(u.f)(()=>this.updateColumn(e),25)),i}return new s.a(t,r,e)}}e.a=b,b.EVENT_WIDTH_CHANGED=E.EVENT_WIDTH_CHANGED,b.EVENT_UPDATE_DATA=E.EVENT_UPDATE_DATA},function(t,e,r){"use strict";var i=r(126),n=r(128),s=r(33);class a extends i.a{constructor(t,e,r,i,...s){super(e,...s),this.header=t,this.tableId=r,this.style=i;const a=this;class o extends n.a{get context(){return a.context}createHeader(t,e){return a.createHeader(t,e)}updateHeader(t,e){return a.updateHeader(t,e)}createCell(t,e,r){return a.createCell(t,e,r)}updateCell(t,e,r){return a.updateCell(t,e,r)}forEachRow(t){return a.forEachRow(t)}}this.cell=new o(this.header,this.style,r,...s)}addColumnMixin(t,e){this.cell.addColumnMixin(t,e)}get width(){return this.context.column.totalHeight}get hidden(){return this.header.classList.contains("loading")}set hidden(t){this.hidden!==t&&(this.header.classList.toggle("loading",t),this.body.classList.toggle("loading",t),this.onVisibilityChanged(!t))}onVisibilityChanged(t){}hide(){this.hidden=!0}show(t,e,r){this.hidden=!1,this.cell.onScrolledHorizontally(t,e,r)}init(){this.hide(),this.cell.init(),super.init()}destroy(){super.destroy(),this.header.remove(),this.style.remove(this.tableId)}onScrolledVertically(t,e,r){return this.hidden?s.a.NONE:super.onScrolledVertically(t,e,r)}onScrolledHorizontally(t,e,r){return this.cell.onScrolledHorizontally(t,e,r)}updateHeaders(){this.cell.updateHeaders()}updateColumnWidths(){const t=this.context;this.style.update(t.defaultRowHeight-t.padding(-1),t.columns,t.column.defaultRowHeight-t.column.padding(-1),t.column.padding,this.tableId)}recreate(t){const e=this.bodyScroller,r=e.scrollLeft;this.cell.recreate(r,e.clientWidth),super.recreate(t),e.scrollLeft=r}clearPool(){super.clearPool(),this.cell.clearPool()}createRow(t,e){this.cell.createRow(t,e)}updateRow(t,e){this.cell.updateRow(t,e)}}e.a=a},function(t,e,r){"use strict";var i=r(17),n=r(127),s=r(33),a=r(62),o=r(63);class l{constructor(t,...e){this.body=t,this.pool=[],this.loadingPool=[],this.loading=new Map,this.visible={first:0,forcedFirst:0,last:-1,forcedLast:-1},this.visibleFirstRowPos=0,this.abortAnimation=(()=>void 0),this.adapter=this.createAdapter(),this.mixins=e.map(t=>new t(this.adapter)),this.fragment=t.ownerDocument.createDocumentFragment()}addMixin(t,e){this.mixins.push(new t(this.adapter,e))}createAdapter(){const t={visible:this.visible,addAtBeginning:this.addAtBeginning.bind(this),addAtBottom:this.addAtBottom.bind(this),removeFromBeginning:this.removeFromBeginning.bind(this),removeFromBottom:this.removeFromBottom.bind(this),updateOffset:this.updateOffset.bind(this),scroller:this.bodyScroller};return Object.defineProperties(t,{visibleFirstRowPos:{get:()=>this.visibleFirstRowPos,enumerable:!0},context:{get:()=>this.context,enumerable:!0}}),t}get bodyScroller(){return this.body.parentElement}init(){const t=this.bodyScroller;let e=t.scrollTop;this.scrollListener=(()=>{const r=t.scrollTop;if(e===r)return;const i=r>e;e=r,this.onScrolledVertically(r,t.clientHeight,i)}),t.addEventListener("scroll",this.scrollListener),this.recreate()}destroy(){this.bodyScroller.removeEventListener("scroll",this.scrollListener),this.body.remove()}static cleanUp(t){t.style.height&&(t.style.height=null)}select(t){let e,r;return this.pool.length>0?(e=this.pool.pop(),r=this.updateRow(e,t)):this.loadingPool.length>0?((e=this.loadingPool.pop()).classList.remove("loading"),r=this.createRow(e,t)):(e=this.body.ownerDocument.createElement("div"),r=this.createRow(e,t)),e.dataset.index=String(t),{item:e,result:r}}selectProxy(){let t;return this.loadingPool.length>0?t=this.loadingPool.pop():(t=this.body.ownerDocument.createElement("div")).classList.add("loading"),t}recycle(t){if(l.cleanUp(t),this.loading.has(t)){this.loading.get(t).abort()}else this.pool.push(t)}proxy(t,e){if(!Object(n.b)(e))return t;const r=e,i=t,s=this.selectProxy();return s.dataset.index=i.dataset.index,s.style.height=i.style.height,this.loading.set(s,r),r.then(t=>{t===n.a?(l.cleanUp(i),this.pool.push(i)):this.body.replaceChild(i,s),this.loading.delete(s),l.cleanUp(s),this.loadingPool.push(s)}),s}create(t){const{item:e,result:r}=this.select(t),{exceptionsLookup:i,padding:n}=this.context;return i.has(t)&&(e.style.height=`${i.get(t)-n(t)}px`),this.proxy(e,r)}removeAll(){const t=Array.from(this.body.children);this.body.innerHTML="",t.forEach(t=>{this.recycle(t)})}update(){const t=this.visible.first,e=this.fragment,r=Array.from(this.body.children);this.body.innerHTML="",r.forEach((r,i)=>{if(this.loading.has(r))return;const n=this.updateRow(r,i+t);e.appendChild(this.proxy(r,n))}),this.body.appendChild(e)}forEachRow(t,e=!1){const r=Array.from(this.body.children),i=this.fragment;e||(this.body.innerHTML=""),r.forEach((r,n)=>{r.classList.contains("loading")||"update_remove"===r.dataset.animation||"hide"===r.dataset.animation||t(r,n+this.visible.first),e||i.appendChild(r)}),e||this.body.appendChild(i)}removeFromBeginning(t,e){return this.remove(t,e,!0)}removeFromBottom(t,e){return this.remove(t,e,!1)}remove(t,e,r){for(let i=t;i<=e;++i){const t=r?this.body.firstChild:this.body.lastChild;t.remove(),this.recycle(t)}}addAtBeginning(t,e){if(t===e)return void this.body.insertBefore(this.create(t),this.body.firstChild);const r=this.fragment;for(let i=t;i<=e;++i)r.appendChild(this.create(i));this.body.insertBefore(r,this.body.firstChild)}addAtBottom(t,e){if(t===e)return void this.body.appendChild(this.create(t));const r=this.fragment;for(let i=t;i<=e;++i)r.appendChild(this.create(i));this.body.appendChild(r)}updateOffset(t){const{totalHeight:e}=this.context;this.visibleFirstRowPos=t,this.body.classList.toggle("odd",this.visible.first%2==1),this.body.style.transform=`translate(0, ${t.toFixed(0)}px)`,this.body.style.height=`${Math.max(1,e-t).toFixed(0)}px`}recreate(t){return this.abortAnimation(),t?this.recreateAnimated(t):this.recreatePure()}recreatePure(){const t=this.context,e=this.bodyScroller;this.updateOffset(0),this.removeAll(),this.clearPool();const{first:r,last:n,firstRowPos:s}=Object(i.c)(e.scrollTop,e.clientHeight,t.defaultRowHeight,t.exceptions,t.numberOfRows);this.visible.first=this.visible.forcedFirst=r,this.visible.last=this.visible.forcedLast=n,r<0?this.updateOffset(0):(this.addAtBottom(r,n),this.updateOffset(s))}recreateAnimated(t){const e=new Map,r=new a.a(t.previous,t.previousKey),n=new a.a(this.context,t.currentKey),s=Object(i.c)(this.bodyScroller.scrollTop,this.bodyScroller.clientHeight,n.context.defaultRowHeight,n.context.exceptions,n.context.numberOfRows);{const t=Array.from(this.body.children),i=Object.assign({},this.visible);r.positions(i.first,Math.min(i.last,i.first+t.length),this.visibleFirstRowPos,(r,i,n)=>{const s=t[r];s&&e.set(i,{n:s,pos:n,i:r})}),this.body.innerHTML=""}this.visible.first=this.visible.forcedFirst=s.first,this.visible.last=this.visible.forcedLast=s.last;const l=this.fragment,c=[];let h=s.firstRowPos;n.positions(s.first,s.last,s.firstRowPos,(t,i,s)=>{let a,d,u=o.a.UPDATE;if(e.has(i)){const n=e.get(i);e.delete(i),a=this.proxy(n.n,this.updateRow(n.n,t)),d={index:n.i,y:n.pos,height:r.exceptionHeightOf(n.i,!0)}}else{const e=r.posByKey(i);a=this.create(t),u=e.index<0?o.a.SHOW:o.a.UPDATE_CREATE,d={index:e.index,y:e.pos>=0?e.pos:s,height:e.index<0?n.exceptionHeightOf(t,!0):r.exceptionHeightOf(e.index,!0)}}c.push({node:a,key:i,mode:u,previous:d,nodeY:h,nodeYCurrentHeight:s,current:{index:t,y:s,height:n.exceptionHeightOf(t)}}),a.style.transform=`translate(0, ${h-s}px)`,h+=d.height+(d.index<0?n.padding(t):r.padding(d.index)),l.appendChild(a)});let d=s.endPos;e.forEach((t,e)=>{const i=n.posByKey(e),s=i.pos>=0?i.pos:t.pos,a=t.n;a.style.transform=`translate(0, ${t.pos-h}px)`,l.appendChild(a);const u=r.exceptionHeightOf(t.i,!0);c.push({node:t.n,key:e,mode:i.index<0?o.a.HIDE:o.a.UPDATE_REMOVE,previous:{index:t.i,y:t.pos,height:u},nodeY:h,nodeYCurrentHeight:d,current:{index:i.index,y:s,height:i.index<0?null:n.exceptionHeightOf(i.index)}}),d+=i.index<0?n.context.defaultRowHeight:n.exceptionHeightOf(i.index,!0)+n.padding(i.index),h+=u+r.padding(t.i)}),this.updateOffset(s.firstRowPos),this.animate(c,t.phases||o.b,r,n,l)}animate(t,e,r,i,n){if(t.length<=0)return void this.body.appendChild(n);let s=-1,a=0;const l=e=>{t.forEach(t=>e.apply(t,r,i))},c=()=>{if(console.assert(t[0].node.offsetTop>=0,"dummy log for forcing dom update"),l(e[a++]),a<e.length){const t=e[a];return void(s=setTimeout(c,t.delay))}const r=this.body.classList;Array.from(r).forEach(t=>{t.startsWith("le-")&&t.endsWith("-animation")&&r.remove(t)}),t.forEach(({node:t,mode:e})=>{e!==o.a.UPDATE_REMOVE&&e!==o.a.HIDE||(t.remove(),t.style.transform=null,this.recycle(t))}),this.abortAnimation=(()=>void 0),s=-1};for(this.abortAnimation=(()=>{s<=0||(clearTimeout(s),s=-1,a=e.length-1,c())});0===e[a].delay;)l(e[a++]);const h=this.body;this.body.appendChild(n),h.classList.add("le-row-animation"),new Set(t.map(t=>t.mode)).forEach(t=>{h.classList.add(`le-${o.a[t].toLowerCase().split("_")[0]}-animation`)}),s=setTimeout(c,e[a].delay)}clearPool(){this.pool.splice(0,this.pool.length)}revalidate(){const t=this.bodyScroller;this.onScrolledVertically(t.scrollTop,t.clientHeight,!0),this.updateOffset(this.visibleFirstRowPos)}onScrolledVertically(t,e,r){const i=this.onScrolledImpl(t,e);return this.mixins.forEach(t=>t.onScrolled(r,i)),i}onScrolledImpl(t,e){const r=this.context,{first:n,last:a,firstRowPos:o}=Object(i.c)(t,e,r.defaultRowHeight,r.exceptions,r.numberOfRows),l=this.visible;if(l.forcedFirst=n,l.forcedLast=a,n-l.first>=0&&a-l.last<=0)return s.a.NONE;let c=s.a.PARTIAL;return n>l.last||a<l.first?(this.removeAll(),this.addAtBottom(n,a),c=s.a.ALL):n<l.first?(this.removeFromBottom(a+1,l.last),this.addAtBeginning(n,l.first-1)):(this.removeFromBeginning(l.first,n-1),this.addAtBottom(l.last+1,a)),l.first=n,l.last=a,this.updateOffset(o),c}}e.a=l},function(t,e,r){"use strict";e.b=function(t){return void 0!==t&&null!==t&&t&&"function"==typeof t.then&&"function"==typeof t.abort};const i=Symbol("aborted");e.a=i},function(t,e,r){"use strict";function i(t,e,r){const i=Array.from(t.children);if(i.length<=1)return;const n=i.map(t=>r.find(e=>e.id===t.dataset.id));console.assert(n.every(t=>Boolean(t)),"all columns must exist",e),console.assert(n.every((t,e)=>0===e||t.index>=n[e-1].index),"all columns in ascending order",e),console.assert(new Set(n).size===n.length,"unique columns",n)}var n=r(17),s=r(33),a=r(42);class o{constructor(t,e,r,...i){this.header=t,this.style=e,this.tableId=r,this.cellPool=[],this.visibleColumns={frozen:[],first:0,forcedFirst:0,last:-1,forcedLast:-1},this.visibleFirstColumnPos=0,this.columnAdapter=this.createColumnAdapter(),this.columnMixins=i.map(t=>new t(this.columnAdapter)),this.columnFragment=t.ownerDocument.createDocumentFragment()}get headerScroller(){return this.header.parentElement}addColumnMixin(t,e){this.columnMixins.push(new t(this.columnAdapter,e))}createColumnAdapter(){const t={visible:this.visibleColumns,addAtBeginning:this.addColumnAtStart.bind(this),addAtBottom:this.addColumnAtEnd.bind(this),removeFromBeginning:this.removeColumnFromStart.bind(this),removeFromBottom:this.removeColumnFromEnd.bind(this),updateOffset:this.updateColumnOffset.bind(this),scroller:this.headerScroller,syncFrozen:this.syncFrozen.bind(this)};return Object.defineProperties(t,{visibleFirstRowPos:{get:()=>this.visibleFirstColumnPos,enumerable:!0},context:{get:()=>this.context.column,enumerable:!0}}),t}init(){const t=this.context;this.style.update(t.defaultRowHeight-t.padding(-1),t.columns,t.column.defaultRowHeight-t.column.padding(-1),t.column.padding,this.tableId),t.columns.forEach(()=>{this.cellPool.push([])})}onScrolledHorizontally(t,e,r){const i=this.onScrolledHorizontallyImpl(t,e);return this.columnMixins.forEach(t=>t.onScrolled(r,i)),i}removeColumnFromStart(t,e,r=this.visibleColumns.frozen.length){this.forEachRow(i=>{this.removeCellFromStart(i,t,e,r)})}removeCellFromStart(t,e,r,i){for(let n=e;n<=r;++n){const e=0===i?t.firstElementChild:t.children[i];e.remove(),this.recycleCell(e,n)}}removeColumnFromEnd(t,e){this.forEachRow(r=>{this.removeCellFromEnd(r,t,e)})}removeCellFromEnd(t,e,r){for(let i=r;i>=e;--i){const e=t.lastElementChild;e.remove(),this.recycleCell(e,i)}}removeFrozenCells(t,e,r){for(const i of e){const e=t.children[r];e.remove(),this.recycleCell(e,i)}}removeFrozenColumns(t,e){this.forEachRow(r=>{this.removeFrozenCells(r,t,e)})}removeAllColumns(t){this.forEachRow(e=>{this.removeAllCells(e,t)})}removeAllCells(t,e,r=this.visibleColumns.first){const i=Array.from(t.children),n=this.visibleColumns.frozen;if(t.innerHTML="",e||0===n.length)for(const t of n)this.recycleCell(i.shift(),t);else for(const e of n)t.appendChild(i.shift());i.forEach((t,e)=>{this.recycleCell(t,e+r)})}selectCell(t,e,r){const i=this.cellPool[e],n=r[e];if(i.length>0){const e=i.pop(),r=this.updateCell(e,t,n);return r&&r!==e&&Object(a.b)(r,n),r||e}const s=this.createCell(this.header.ownerDocument,t,n);return Object(a.b)(s,n),s}recycleCell(t,e){this.cellPool[e].push(t)}addColumnAtStart(t,e,r=this.visibleColumns.frozen.length){const{columns:i}=this.context;this.forEachRow((n,s)=>{this.addCellAtStart(n,s,t,e,r,i)})}addCellAtStart(t,e,r,i,n,s){for(let a=i;a>=r;--a){const r=this.selectCell(e,a,s);t.insertBefore(r,n>0?t.children[n]:t.firstChild)}}insertFrozenCells(t,e,r,i,n){const s=t.children[i];for(const i of r){const r=this.selectCell(e,i,n);s?t.insertBefore(r,s):t.appendChild(r)}}insertFrozenColumns(t,e){const{columns:r}=this.context;this.forEachRow((i,n)=>{this.insertFrozenCells(i,n,t,e,r)})}addColumnAtEnd(t,e){const{columns:r}=this.context;this.forEachRow((i,n)=>{this.addCellAtEnd(i,n,t,e,r)})}verifyRows(){const{columns:t}=this.context;this.forEachRow((e,r)=>i(e,r,t))}addCellAtEnd(t,e,r,i,n){for(let s=r;s<=i;++s){const r=this.selectCell(e,s,n);t.appendChild(r)}}updateHeaders(){const{columns:t}=this.context;Array.from(this.header.children).forEach((e,r)=>{this.updateHeader(e,t[r])})}recreate(t,e){const r=this.context;void 0===r.hasFrozenColumns&&(r.hasFrozenColumns=r.columns.some(t=>t.frozen)),this.style.update(r.defaultRowHeight-r.padding(-1),r.columns,r.column.defaultRowHeight-r.column.padding(-1),r.column.padding,this.tableId),this.clearPool();for(let t=this.cellPool.length;t<r.columns.length;++t)this.cellPool.push([]);{const t=this.columnFragment,e=t.ownerDocument;this.header.innerHTML="",r.columns.forEach(r=>{const i=this.createHeader(e,r);Object(a.b)(i,r),t.appendChild(i)}),this.header.appendChild(t)}const{first:i,last:s,firstRowPos:o}=Object(n.c)(t,e,r.column.defaultRowHeight,r.column.exceptions,r.column.numberOfRows);if(this.visibleColumns.first=this.visibleColumns.forcedFirst=i,this.visibleColumns.last=this.visibleColumns.forcedLast=s,r.hasFrozenColumns){const{target:t}=Object(n.e)([],r.columns,i);this.visibleColumns.frozen=t}this.updateColumnOffset(o)}clearPool(){this.cellPool.forEach(t=>t.splice(0,t.length))}updateColumnOffset(t){this.visibleFirstColumnPos=t}createRow(t,e){const{columns:r,hasFrozenColumns:i}=this.context,n=this.visibleColumns;if(i)for(const i of n.frozen){const n=this.selectCell(e,i,r);t.appendChild(n)}for(let i=n.first;i<=n.last;++i){const n=this.selectCell(e,i,r);t.appendChild(n)}}updateRow(t,e){const{columns:r,hasFrozenColumns:i}=this.context,s=this.visibleColumns,o=Array.from(t.children);switch(o.length){case 0:i&&this.insertFrozenCells(t,e,s.frozen,0,r),this.addCellAtEnd(t,e,s.first,s.last,r);break;case 1:const l=o[0],c=l.dataset.id,h=r.findIndex(t=>t.id===c);t.removeChild(l),this.recycleCell(l,h),i&&this.insertFrozenCells(t,e,s.frozen,0,r),this.addCellAtEnd(t,e,s.first,s.last,r);break;default:if(i){const i=[];for(const t of o){const e=t.dataset.id,n=r.findIndex(t=>t.id===e);if(!r[n].frozen)break;i.push(n)}const{common:l,removed:c,added:h}=Object(n.a)(i,s.frozen);o.slice(0,l).forEach((n,s)=>{const o=r[i[s]],l=this.updateCell(n,e,o);l&&l!==n&&(Object(a.b)(l,o),t.replaceChild(l,n))}),this.removeFrozenCells(t,c,l),this.insertFrozenCells(t,e,h,l,r),o.splice(0,i.length)}const d=o[0].dataset.id,u=o[o.length-1].dataset.id,p=r.findIndex(t=>t.id===d),g=r.findIndex(t=>t.id===u),f=s.frozen.length;p===s.first&&g===s.last?o.forEach((i,n)=>{const o=r[n+s.first],l=this.updateCell(i,e,o);l&&l!==i&&(Object(a.b)(l,o),t.replaceChild(l,i))}):s.last>p||s.first<g?(this.removeAllCells(t,!1,p),this.addCellAtStart(t,e,s.first,s.last,f,r)):s.first<p?(this.removeCellFromEnd(t,s.last+1,p),this.addCellAtStart(t,e,s.first,p-1,f,r)):(this.removeCellFromStart(t,p,s.first-1,f),this.addCellAtEnd(t,e,g+1,s.last,r))}}syncFrozen(t){const{columns:e,hasFrozenColumns:r}=this.context,i=this.visibleColumns;if(!r)return 0;if(0===t)return i.frozen.length>0&&(this.removeFrozenColumns(i.frozen,0),i.frozen=[]),0;const s=i.frozen.length,{target:a,added:o,removed:l}=Object(n.e)(i.frozen,e,t);return l.length>0&&this.removeFrozenColumns(l,s-l.length),o.length>0&&this.insertFrozenColumns(o,s-l.length),i.frozen=a,a.length}onScrolledHorizontallyImpl(t,e){const{column:r}=this.context,{first:i,last:a,firstRowPos:o}=Object(n.c)(t,e,r.defaultRowHeight,r.exceptions,r.numberOfRows),l=this.visibleColumns;if(l.forcedFirst=i,l.forcedLast=a,i-l.first>=0&&a-l.last<=0)return s.a.NONE;let c=s.a.PARTIAL;const h=this.syncFrozen(i);return i>l.last||a<l.first?(this.removeAllColumns(!1),this.addColumnAtEnd(i,a),c=s.a.ALL):i<l.first?(this.removeColumnFromEnd(a+1,l.last),this.addColumnAtStart(i,l.first-1,h)):(this.removeColumnFromStart(l.first,i-1,h),this.addColumnAtEnd(l.last+1,a)),l.first=i,l.last=a,this.updateColumnOffset(o),c}}e.a=o},function(t,e,r){"use strict";var i=r(18),n=r(64),s=r(0),a=r(41),o=r(40);class l extends n.a{constructor(t,e,r,i){super(t,e,r),this.columnPadding=i}get mc(){return this.c}get width(){return this.c.getWidth()+this.columnPadding*this.mc.length}createHeader(t,e){const r=super.createHeader(t,e),n=t.createElement("div");n.classList.add("lu-nested"),n.classList.add(Object(o.c)(this.c)),r.appendChild(n);const s=this.mc;return s.getCollapsed()?r:(s.children.forEach((r,s)=>{const o=Object(i.c)(r,t,e);o.style.marginLeft=s>0?`${2*this.columnPadding}px`:null,o.classList.add("lu-header"),a.b?o.style.msGridColumn=(s+1).toString():o.style.gridColumnStart=(s+1).toString(),n.appendChild(o)}),this.updateNested(n,e),r)}updateHeader(t,e){super.updateHeader(t,e);const r=t.querySelector(".lu-nested");r&&this.updateNested(r,e)}updateWidthRule(t){const e=this.mc,r=this.width,i=e.children.map(t=>`${Object(s.q)(100*t.getWidth()/r,2)}%`),n=Object(o.c)(this.c);return t.updateRule(`stacked-${this.c.id}`,`.lineup-engine .${n} {\n      display: ${a.b?"-ms-grid":"grid"};\n      ${a.b?"-ms-grid-columns":"grid-template-columns"}: ${i.join(" ")};\n    }`),n}updateNested(t,e){if(this.mc.getCollapsed())return;const r=this.mc.children,n=Array.from(t.children);r.forEach((t,r)=>{const s=n[r];s.className=`lu-header ${t.cssClass?` ${t.cssClass}`:""}${this.c.headerCssClass}${this.c.isFiltered()?" lu-filtered":""}`,Object(i.j)(s,t,e)})}}e.a=l},function(t,e,r){"use strict";var i=r(0),n=r(53),s=r(22);class a extends i.a{constructor(t,e){super(),this.ctx=t,this.body=e,this.start=null,this.startNode=null,this.endNode=null;const r=e.parentElement.parentElement;let i=r.querySelector("hr");i||(i=r.ownerDocument.createElement("hr"),r.appendChild(i)),this.hr=i,e.addEventListener("mousemove",t=>{this.start&&this.showHint(this.start,t)}),e.addEventListener("mousedown",t=>{const e=r.getBoundingClientRect();this.start={x:t.x,y:t.y,xShift:e.left,yShift:e.top}});const n=t=>{this.select(t.ctrlKey),this.start=this.startNode=this.endNode=null,this.body.classList.remove("lu-selection-active"),this.hr.classList.remove("lu-selection-active")};e.addEventListener("mouseup",n),e.addEventListener("mouseleave",n)}createEventList(){return super.createEventList().concat([a.EVENT_SELECT_RANGE])}select(t){if(!this.start||!this.startNode||!this.endNode)return;if(this.startNode===this.endNode)return;const e=parseInt(this.startNode.dataset.index,10),r=parseInt(this.endNode.dataset.index,10),i=Math.min(e,r),n=Math.max(e,r);i!==n&&this.fire(a.EVENT_SELECT_RANGE,i,n,t)}showHint(t,e){this.start=t;const r=t.y,i=e.y,n=Math.abs(r-i)>a.MIN_DISTANCE;this.body.classList.toggle("lu-selection-active",n),this.hr.classList.toggle("lu-selection-active",n),this.hr.style.transform=`translate(${t.x-t.xShift}px,${r-t.yShift}px)scale(1,${Math.abs(i-r)})rotate(${i>r?90:-90}deg)`}remove(t){t.onclick=t.onmousedown=t.onmouseup=void 0}add(t){t.onclick=(e=>{const r=parseInt(t.dataset.dataIndex,10);this.ctx.provider.toggleSelection(r,e.ctrlKey)}),t.onmousedown=(()=>{this.startNode=t}),t.onmouseup=(()=>{this.start&&(this.endNode=t)})}selectRange(t,e=!1){const r=new n.a(e?this.ctx.provider.getSelection():[]),i=t=>{r.has(t)?r.delete(t):r.add(t)};t.forEach(t=>{Object(s.a)(t)?t.rows.forEach(t=>i(t.dataIndex)):i(t.dataIndex)}),this.ctx.provider.setSelection(Array.from(r))}updateState(t,e){this.ctx.provider.isSelected(e)?t.classList.add("lu-selected"):t.classList.remove("lu-selected")}update(t,e){const r=parseInt(t.dataset.dataIndex,10);e.has(r)?t.classList.add("lu-selected"):t.classList.remove("lu-selected")}}e.a=a,a.EVENT_SELECT_RANGE="selectRange",a.MIN_DISTANCE=10},function(t,e,r){"use strict";function i(t){const e=new Map,r=new Map;return t.forEach((t,i)=>{Object(s.a)(t)?t.rows.forEach(t=>e.set(t.dataIndex,i)):t.group&&0===t.relativeIndex&&r.set(t.group.name,i)}),{item2groupIndex:e,group2firstItemIndex:r}}function n(t){return Object(s.a)(t)?t.name:t.dataIndex.toString()}e.a=function(t,e,r){const o=t=>n(e[t]),l=t=>n(r[t]);if(e.reduce((t,e)=>t+(Object(s.a)(e)?1:0),0)===r.reduce((t,e)=>t+(Object(s.a)(e)?1:0),0))return{currentKey:l,previous:t,previousKey:o};let c,h;const d=[Object.assign({},a.b[0],{apply(t,n){a.b[0].apply(t),t.mode===a.a.SHOW&&(t.node.style.transform=`translate(0, ${((t,n,a)=>{c||(c=i(e));const l=r[t],h=Object(s.a)(l)?c.group2firstItemIndex.get(l.name):c.item2groupIndex.get(l.dataIndex);if(void 0===h)return a;const d=n.posByKey(o(h));return d.pos>=0?d.pos:a})(t.current.index,n,t.previous.y)-t.nodeY}px)`)}}),Object.assign({},a.b[1],{apply(t,n,o){a.b[1].apply(t),t.mode===a.a.HIDE&&(t.node.style.transform=`translate(0, ${((t,n,a)=>{h||(h=i(r));const o=e[t],c=Object(s.a)(o)?h.group2firstItemIndex.get(o.name):h.item2groupIndex.get(o.dataIndex);if(void 0===c)return a;const d=n.posByKey(l(c));return d.pos>=0?d.pos:a})(t.previous.index,o,t.current.y)-t.nodeY}px)`)}}),a.b[a.b.length-1]];return{previous:t,previousKey:o,currentKey:l,phases:d}};var s=r(22),a=r(63)},function(t,e,r){"use strict";var i=r(0),n=r(133),s=r(134),a=r(32),o=r(65);class l extends i.a{constructor(t,e,r,l){super(),this.config=r,this.header=new o.a(t,e,Object(i.p)({},this.config.header,{idPrefix:this.config.idPrefix,manipulative:this.config.manipulative,summary:this.config.renderingOptions.summary,freezeCols:this.config.body.freezeCols})),e.insertAdjacentHTML("beforeend",'<div class="lu-body-wrapper"></div>');const c=e.lastElementChild;{const e=Object(i.p)({},this.config.body,{meanLine:this.config.renderingOptions.meanLine,animation:this.config.renderingOptions.animation,stacked:this.config.renderingOptions.stacked,idPrefix:this.config.idPrefix,renderers:this.config.renderers});this.body="canvas"===l?new s.a(t,c,this.slice.bind(this),e):new n.a(t,c,this.slice.bind(this),e)}this.body.histCache=this.header.sharedHistCache,this.forward(this.body,a.a.EVENT_HOVER_CHANGED),this.forward(this.body,a.a.EVENT_RENDER_FINISHED),this.config.body.visibleRowsOnly&&(this.contentScroller=new i.b(c,this.body.node,{pageSize:this.config.body.backupScrollRows*this.config.body.rowHeight,backupRows:this.config.body.backupScrollRows,rowHeight:this.config.body.rowHeight}),this.contentScroller.on(i.b.EVENT_SCROLL,(t,e)=>{this.header.$node.style("margin-left",`${-e}px`),this.config.body.freezeCols>0&&(this.header.updateFreeze(e),this.body.updateFreeze(e))}),this.contentScroller.on(i.b.EVENT_REDRAW,t=>this.body.scrolled(t)))}createEventList(){return[a.a.EVENT_RENDER_FINISHED,a.a.EVENT_HOVER_CHANGED]}slice(t,e,r){return this.contentScroller?this.contentScroller.select(t,e,r):{from:t,to:e}}destroy(){this.contentScroller&&this.contentScroller.destroy()}changeDataStorage(t){this.header.changeDataStorage(t),this.body.changeDataStorage(t)}scrollIntoView(t,e){if(this.contentScroller)this.contentScroller.scrollIntoView(0,t,e,t=>t*this.config.body.rowHeight);else{this.body.node.parentElement.scrollTop=e*this.config.body.rowHeight}}fakeHover(t){this.body.fakeHover(t)}update(){this.header.update(),this.body.update()}setBodyOption(t,e){this.body.setOption(t,e),this.body.update()}}e.a=l},function(t,e,r){"use strict";var i=r(3),n=(r.n(i),r(0)),s=r(23),a=r(32);class o extends a.a{constructor(t,e,r,i={}){super(t,e,r,"div",i),this.currentFreezeLeft=0}animated(t){return this.options.animationDuration>0&&this.options.animation?t.transition().duration(this.options.animationDuration):t}renderRankings(t,e,r){const s=this,a=t.selectAll("div.ranking").data(e,t=>t.id);a.enter().append("div").attr("class","ranking").style("left",t=>`${t.shift}px`),this.animated(a).style("left",t=>`${t.shift}px`);const o=[],l=a.selectAll("div.group").data(t=>t.groups,t=>t.group.name),c=l.enter().append("div").attr("class","group"),h=c.append("div").attr("class","aggregate").attr("data-agg","group");h.append("div").attr("class","cols"),h.append("div").attr("class","frozen").style("transform",`translate${this.currentFreezeLeft}px,0)`),c.append("div").attr("class","rows").attr("data-agg","detail"),c.append("div").attr("class","meanlines"),c.style("top",t=>`${t.y}px`);const d=(t,a,c)=>{t.selectAll("div.aggregate .cols > *, div.aggregate .frozen > *").remove(),t.select("div.aggregate").style("height",null);const h=t.select("div.rows").selectAll("div.row").data(c.order,String),d=h.enter().append("div").attr("class","row");d.style("top",(t,e)=>`${r.cellPrevY(e)}px`),d.on("mouseenter",t=>this.mouseOver(t,!0)).on("mouseleave",t=>this.mouseOver(t,!1)).on("click",t=>this.select(t,i.event.ctrlKey));const u=(t,e)=>{Object(n.o)(t,e,"detail")};d.append("div").attr("class","frozen").style("transform",`translate${this.currentFreezeLeft}px,0)`).each(function(){u(this,a.frozen)}),d.append("div").attr("class","cols").each(function(){u(this,a.columns)}),h.each(function(t,e){const r=s.data.isSelected(t);Object(n.c)(this,{class:`row${e%2==0?" even":""}${r?" selected":""}`,"data-data-index":t})}),this.animated(h).style("top",(t,e)=>`${r.cellY(e)}px`).style("height",`${this.options.rowHeight}px`);const p=(t,e,r,i)=>{const s=e=>{Object(n.o)(t,i,"detail"),i.forEach((n,s)=>{const a=t.childNodes[s];a.style.width=`${s<i.length-2?i[s+1].shift-n.shift:n.column.getWidth()}px`,n.renderer.update(a,e,r,c.group)})},a=e.data[r];return a instanceof Promise?a.then(s):s(a)},g=0===e.length||0===e[0].frozen.length?0:i.max(e[0].frozen,t=>t.shift+t.column.getWidth())+s.options.columnPadding;h.select("div.cols").each(function(t,e){this.style.marginLeft=`${g}px`,o.push(p(this,c,e,a.columns))}),h.select("div.frozen").each(function(t,e){this.style.width=`${g}px`,o.push(p(this,c,e,a.frozen))}),h.exit().remove();{const t=l.select("div.meanlines").selectAll("div.meanline").data(a.columns.filter(t=>this.showMeanLine(t.column)));t.enter().append("div").attr("class","meanline"),t.each(function(t){const e=s.histCache.get(t.column.id),r=i.select(this);if(!e)return;const n=e=>{const i=t.shift+t.column.getWidth()*e.mean;r.style("left",`${isNaN(i)?0:i}px`).style("height",`${c.height}px`)};e instanceof Promise?e.then(n):n(e)}),t.exit().remove()}},u=(t,r,s)=>{t.selectAll("div.rows > *, div.meanlines > *").remove();const a=t.select("div.aggregate").style("height",`${s.height}px`),l=(t,e,r)=>(Object(n.o)(t,r,"group"),Promise.all(e.data).then(i=>Promise.all(r.map((n,s)=>Promise.resolve(this.histCache.get(n.column.id)).then(a=>{const o=t.childNodes[s];o.style.width=`${s<r.length-2?r[s+1].shift-n.shift:n.column.getWidth()}px`,n.groupRenderer.update(o,e.group,i,a)}))))),c=0===e.length||0===e[0].frozen.length?0:i.max(e[0].frozen,t=>t.shift+t.column.getWidth());a.select("div.cols").each(function(){this.style.marginLeft=`${c}px`,o.push(l(this,s,r.columns))}),a.select("div.frozen").each(function(){this.style.width=`${c}px`,o.push(l(this,s,r.frozen))})};return l.each(function(t,r,n){(t.aggregate?u:d)(i.select(this),e[n],t)}),this.animated(l).style("top",t=>`${t.y}px`),l.exit().remove(),a.exit().remove(),Promise.all(o)}select(t,e=!1){const r=super.select(t,e);return this.$node.selectAll(`[data-data-index="${t}"]`).classed("selected",r),r}drawSelection(){const t=this.data.getSelection();if(Object(n.l)(this.node,".selected",t=>t.classList.remove("selected")),0===t.length)return;const e=t.map(t=>`[data-data-index='${t}']`).join(",");Object(n.l)(this.node,e,t=>t.classList.add("selected"))}mouseOver(t,e=!0){function r(t){t.classList.add("hover")}super.mouseOver(t,e),Object(n.l)(this.node,".hover",t=>t.classList.remove("hover")),e&&Object(n.l)(this.node,`[data-data-index='${t}']`,r)}renderSlopeGraphs(t,e,r,i){const n=e.slice(1).map((t,r)=>({left:e[r].groups[0].order,left_i:r,right:t.groups[0].order,right_i:r+1})),s=t.selectAll("svg.slopegraph").data(n);s.enter().append("svg").attr("class","slopegraph"),s.attr("width",this.options.slopeWidth).attr("height",i).style("left",(t,r)=>`${e[r+1].shift-this.options.slopeWidth}px`);const a=s.selectAll("line.slope").data(t=>{const e=new Map;return t.right.forEach((t,r)=>e.set(t,r)),t.left.map((t,r)=>({dataIndex:t,lpos:r,rpos:e.get(t)})).filter(t=>null!=t.rpos)});a.enter().append("line").attr({class:"slope",x2:this.options.slopeWidth}).on("mouseenter",t=>this.mouseOver(t.dataIndex,!0)).on("mouseleave",t=>this.mouseOver(t.dataIndex,!1)),a.attr("data-data-index",t=>t.dataIndex);const o=t=>{const e=r.cellY(t);return e+.5*(r.cellY(t+1)-e)};a.attr({y1:t=>o(t.lpos),y2:t=>o(t.rpos)}),a.exit().remove(),s.exit().remove()}updateFreeze(t){Object(n.l)(this.node,"div.row .frozen",e=>{e.style.transform=`translate(${t}px,0px)`}),this.currentFreezeLeft=t}createContextImpl(t,e){return this.createContext(t,e,s.createDOM,s.createDOMGroup)}updateImpl(t,e,r,i){this.node.style.width=`${Math.max(0,r)}px`,this.node.style.height=`${Math.max(0,i)}px`;let n=this.$node.select("div.body");return n.empty()&&(n=this.$node.append("div").classed("body",!0)),this.renderSlopeGraphs(n,t,e,i),this.renderRankings(n,t,e)}}e.a=o},function(t,e,r){"use strict";var i=r(3),n=(r.n(i),r(0)),s=r(20),a=r(23),o=r(32);class l extends o.a{constructor(t,e,r,i={}){super(t,e,r,"div",Object(n.p)({},l.CUSTOM_OPTIONS,i)),this.currentFreezeLeft=0,this.currentHover=-1,this.lastShifts=[],this.$node.append("canvas"),this.initInteraction()}columnUnderMouse(t){for(const e of this.lastShifts)if(e.shift<=t&&t<e.shift+e.column.getWidth())return e.column;return null}rowUnderMouse(t){const e=this.options.rowHeight;return Math.floor((t+1)/e)}itemUnderMouse(t){const e=this.rowUnderMouse(t[1]);if(e<0)return null;const r=this.columnUnderMouse(t[0]);if(null===r)return null;return{dataIndex:r.findMyRanker().getOrder()[e],column:r}}initInteraction(){this.$node.on("selectstart",()=>i.event.preventDefault()),this.$node.on("mousemove",()=>{const t=Object(i.mouse)(this.node),e=this.itemUnderMouse(t);this.mouseOver(e?e.dataIndex:-1)}),this.$node.on("mouseenter",()=>{this.mouseOver(-1,!1)}),this.$node.on("mouseleave",()=>{this.mouseOver(-1,!1)}),this.$node.on("click",()=>{const t=Object(i.mouse)(this.node),e=this.itemUnderMouse(t);e&&this.select(e.dataIndex,i.event.ctrlKey||e.column instanceof s.b)})}style(t){return(this.options.style||{})[t]}select(t,e=!1){const r=super.select(t,e);return this.update(),r}drawSelection(){this.update()}updateFreeze(t){this.currentFreezeLeft=t,this.update()}mouseOver(t,e=!0){e!==(this.currentHover===t)&&(this.currentHover=t,super.mouseOver(t,t>=0),(!e||t<0)&&Object(n.n)(this.$node.node()),this.update())}isHovered(t){return this.currentHover===t}renderRow(t,e,r,i,n,s){const a=i.dataIndex;let o=r.shift;const l=e.cellY(n)+s.y;t.translate(o,l),n%2==0&&(t.fillStyle=this.style("bg"),t.fillRect(0,0,r.width,e.rowHeight(n)),t.fillStyle=this.style("text"));this.data.isSelected(a)?(t.strokeStyle=this.style("selection"),t.strokeRect(0,0,r.width,e.rowHeight(n))):this.isHovered(a)&&(t.strokeStyle=this.style("hover"),t.strokeRect(0,0,r.width,e.rowHeight(n))),t.save();const c=this.currentFreezeLeft<r.shift?0:Math.min(this.currentFreezeLeft-r.shift,r.width-r.frozenWidth);r.frozenWidth>0&&c>0&&(t.rect(o+c+r.frozenWidth,0,r.width,e.rowHeight(n)),t.clip()),r.columns.forEach(e=>{t.save(),t.translate(e.shift,0),e.renderer(t,i,n,o+e.shift,l,s.group),t.restore()}),t.restore(),t.translate(c,0),o+=c,r.frozen.forEach(e=>{t.save(),t.translate(e.shift,0),e.renderer(t,i,n,o+e.shift,l,s),t.restore()}),t.translate(-o,-l)}renderMeanlines(t,e,r,i){const n=e.columns.filter(t=>this.showMeanLine(t.column));return Promise.all(n.map(n=>{const s=this.histCache.get(n.column.id);if(s)return Promise.resolve(s).then(s=>{const a=e.shift+n.shift+n.column.getWidth()*s.mean;isNaN(a)||(t.strokeStyle=this.style("meanLine"),t.beginPath(),t.moveTo(a,r),t.lineTo(a,r+i),t.stroke())})}))}renderGroup(t,e,r,i,n){let s=e.shift;const a=r.y;t.translate(s,a),t.save();const o=this.currentFreezeLeft<e.shift?0:Math.min(this.currentFreezeLeft-e.shift,e.width-e.frozenWidth);e.frozenWidth>0&&o>0&&(t.rect(s+o+e.frozenWidth,0,e.width,r.height),t.clip()),e.columns.forEach(e=>{t.save(),t.translate(e.shift,0),e.groupRenderer(t,r.group,i,s+e.shift,a,n.get(e.column.id)),t.restore()}),t.restore(),t.translate(o,0),s+=o,e.frozen.forEach(e=>{t.save(),t.translate(e.shift,0),e.groupRenderer(t,r.group,i,s+e.shift,a,n.get(e.column.id)),t.restore()}),t.translate(-s,-a)}renderRankings(t,e,r){const i=this.renderRow.bind(this,t,r),n=this.renderGroup.bind(this,t),s=Promise.all.bind(Promise);return s(e.map(e=>{let r;return s(e.groups.map(a=>{if(a.aggregate)return null==r&&(r=this.resolveHistMap(e)),Promise.all([s(a.data),r]).then(t=>{const r=t[0],i=t[1];return n(e,a,r,i)});const o=a.data;return s(o.map((t,r)=>Promise.resolve(t).then(t=>i(e,t,r,a)))).then(()=>this.renderMeanlines(t,e,a.y,a.height))}))}))}renderSlopeGraphs(t,e,r){const i=e.slice(1).map((t,r)=>({left:e[r].groups[0].order,left_i:r,right:t.groups[0].order,right_i:r+1}));t.save(),t.strokeStyle=this.style("slope"),i.forEach((i,n)=>{t.save(),t.translate(e[n+1].shift-this.options.slopeWidth,0);const s=new Map;i.right.forEach((t,e)=>{s.set(t,e)});i.left.map((t,e)=>({dataIndex:t,lpos:e,rpos:s.get(t)})).filter(t=>null!=t.rpos).forEach(e=>{const i=this.data.isSelected(e.dataIndex),n=this.isHovered(e.dataIndex);i?t.strokeStyle=this.style("selection"):n&&(t.strokeStyle=this.style("hover")),t.beginPath(),t.moveTo(0,.5*r.rowHeight(e.lpos)+r.cellY(e.lpos)),t.lineTo(this.options.slopeWidth,.5*r.rowHeight(e.rpos)+r.cellY(e.rpos)),t.stroke(),(i||n)&&(t.strokeStyle=this.style("slope"))}),t.restore()}),t.restore()}createContextImpl(t,e){const r=this.createContext(t,e,a.createCanvas,a.createCanvasGroup);return r.hovered=this.isHovered.bind(this),r.groupHovered=(()=>!1),r.selected=(t=>this.data.isSelected(t)),r.bodyDOMElement=this.$node.node(),r.rowHeight=(()=>this.options.rowHeight),r.groupHeight=(()=>this.options.groupHeight),r.colWidth=(t=>t.getWidth()),r}computeShifts(t){const e=[];return t.forEach(t=>{const r=t.shift;e.push(...t.frozen.map(t=>({column:t.column,shift:t.shift+r+this.currentFreezeLeft}))),e.push(...t.columns.map(t=>({column:t.column,shift:t.shift+r})))}),e}updateImpl(t,e,r,i){const s=this.$node.select("canvas"),a=Math.max(e.cellY(0)-20,0),o=Math.min(Math.max(...t.map(t=>t.height))+20,i);this.$node.style({width:`${Math.max(0,r)}px`,height:`${i}px`}),s.attr({width:Math.max(0,r),height:o-a}).style("margin-top",`${a}px`),this.lastShifts=this.computeShifts(t);const l=s.node().getContext("2d");return l.save(),l.font=this.style("font"),l.textBaseline="top",l.fillStyle=this.style("text"),l.clearRect(0,0,l.canvas.width,l.canvas.height),e.textHints=Object(n.e)(l,this.style("font")),l.translate(0,-a),this.renderSlopeGraphs(l,t,e),this.renderRankings(l,t,e).then(()=>{l.restore()})}}e.a=l,l.CUSTOM_OPTIONS={style:{text:"black",font:'10pt "Helvetica Neue", Helvetica, Arial, sans-serif',slope:"darkgray",link:"blue",selection:"#ffa500",hover:"#e5e5e5",bg:"#f7f7f7",meanLine:"darkgray",histogram:"lightgray",boxplot:{box:"#e0e0e0",stroke:"black",sortIndicator:"#ffa500"},upset:{circle:"black",inactiveOpacity:.1,stroke:"black"}}}},function(t,e,r){"use strict";function i(t,e){return Object(n.a)(t)?Object(s.b)(e):Object(s.c)(e)}var n=r(22),s=r(136);const a=18,o=1,l=a,c=40,h=a+5,d={name:"NotSpacefillingNotProportional",apply:()=>({item:a,group:c}),levelOfDetail:i};e.a=d;const u={name:"SpacefillingNotProportional",apply:(t,e,r)=>{const{violation:i,height:d}=function(t,e,r){const i=e-h,d=t.filter(t=>!Object(n.a)(t)),u=t.length-d.length,p=d.reduce((t,e)=>t+("last"===e.meta||"first last"===e.meta?1:0),0),g=d.reduce((t,e)=>t+(r.has(e.dataIndex)?1:0),0),f=d.length-g,m=u+p;if(f<=0)return{height:a,violation:""};const E=(i-u*c-m*s.a-g*a)/f;return E<o?{height:o,violation:"Not possible to fit all rows on the screen. Set filters or aggregate groups to make it fit again."}:E>l?{height:l,violation:""}:{height:E,violation:""}}(t,e,r);return{item:t=>r.has(t.dataIndex)?a:d,group:c,violation:i}},levelOfDetail:i};e.b=u},function(t,e,r){"use strict";e.b=function(t){return t>=35?"high":t>=15?"medium":"low"},e.c=function(t){return t>=18?"high":t>=10?"medium":"low"};e.a=5},,,,function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLocalStorage=function(t,e,r={}){return new s.LocalDataProvider(t,e,r)},e.createLineUp=function(t,e,r={}){return new a.a(e,t,r)},e.createTaggle=function(t,e,r={}){return new o.a(e,t,r)};var i=r(141),n=(r.n(i),r(12)),s=r(52),a=r(69),o=r(142),l=r(0);r.d(e,"deriveColors",function(){return l.g}),r.d(e,"deriveColumnDescriptions",function(){return s.deriveColumnDescriptions});const c=n;e.model=c},function(t,e){},function(t,e,r){"use strict";var i=r(143);r.d(e,"a",function(){return i.a})},function(t,e,r){"use strict";var i=r(135),n=r(44),s=r(144),a=r(14),o=r(0),l=r(148);class c extends o.a{constructor(t,e,r={}){super(),this.node=t,this.data=e,this.node.classList.add("lu-taggle"),this.node.innerHTML='<aside class="panel">\n        <div class="lu-rule-button-chooser">\n          <span>Overview</span>\n          <div></div>\n        </div>\n    </aside>',this.spaceFilling=this.node.querySelector(".lu-rule-button-chooser"),this.spaceFilling.addEventListener("click",()=>{const t=this.spaceFilling.classList.toggle("chosen");this.renderer.switchRule(t?i.b:i.a)}),this.renderer=new l.a(this.node,e,Object.assign({violationChanged:(t,e)=>this.setViolation(e)},r)),this.panel=new s.a(this.renderer.ctx,this.node.ownerDocument,{formatItem:t=>`<span data-type="${t.desc?t.desc.type:t.text}"><span>${t.text}</span></span>`}),this.renderer.pushUpdateAble(t=>this.panel.update(t)),this.node.firstElementChild.appendChild(this.panel.node),this.forward(this.data,`${a.a.EVENT_SELECTION_CHANGED}.main`),this.forward(this.renderer,`${n.a}.main`)}createEventList(){return super.createEventList().concat([c.EVENT_HOVER_CHANGED,c.EVENT_SELECTION_CHANGED])}setViolation(t){t=t||"",this.spaceFilling.classList.toggle("violated",Boolean(t)),this.spaceFilling.lastElementChild.innerHTML=t.replace(/\n/g,"<br>")}destroy(){this.renderer.destroy(),this.node.remove()}dump(){return this.data.dump()}update(){this.renderer.update()}changeDataStorage(t,e){this.data&&this.unforward(this.data,`${a.a.EVENT_SELECTION_CHANGED}.taggle`),this.data=t,e&&this.data.restore(e),this.forward(this.data,`${a.a.EVENT_SELECTION_CHANGED}.taggle`),this.renderer.changeDataStorage(t),this.update(),this.panel.update(this.renderer.ctx)}}e.a=c,c.EVENT_HOVER_CHANGED=n.a,c.EVENT_SELECTION_CHANGED=a.a.EVENT_SELECTION_CHANGED},function(t,e,r){"use strict";var i=r(0),n=r(3),s=(r.n(n),r(13)),a=r(145),o=r(14),l=r(147),c=r(12);class h{constructor(t,e,r={}){this.ctx=t,this.options={additionalDescs:[Object(c.createStackDesc)("Weighted Sum"),Object(c.createScriptDesc)("Scripted Formula"),Object(c.createNestedDesc)("Nested"),Object(c.createMaxDesc)(),Object(c.createMinDesc)(),Object(c.createMeanDesc)(),Object(c.createImpositionDesc)()],chooser:!0,placeholder:"Add Column..."},this.descs=new Map,Object.assign(this.options,r),this.node=e.createElement("aside"),this.node.classList.add("lu-side-panel"),this.search=new l.a(this.options),this.data=t.provider,this.init(),this.update(t)}init(){this.node.innerHTML="\n      <div><main></main></div>\n    ",this.initChooser(),this.changeDataStorage(null,this.data)}initChooser(){this.options.chooser&&(this.node.insertAdjacentHTML("afterbegin","<header>\n        <form></form>\n      </header>"),this.node.querySelector("form").appendChild(this.search.node),this.search.on(l.a.EVENT_SELECT,t=>{const e=this.data.create(t.desc);e&&this.data.getLastRanking().push(e)}))}changeDataStorage(t,e){const r=this;t&&t.on(Object(i.u)(".panel",o.a.EVENT_ADD_RANKING,o.a.EVENT_REMOVE_RANKING,o.a.EVENT_ADD_DESC,o.a.EVENT_CLEAR_DESC),null),this.data=e,this.descs.forEach(t=>t.destroyVis()),this.descs.clear(),e.getColumns().concat(this.options.additionalDescs).forEach(t=>{this.descs.set(t,new a.a(t))});const n=(t,n)=>{const a=n?1:-1;t.flatColumns.forEach(t=>{this.descs.has(t.desc)&&(this.descs.get(t.desc).used+=a)}),n?(t.on(Object(i.u)(".panel",s.a.EVENT_GROUP_CRITERIA_CHANGED,s.a.EVENT_SORT_CRITERIAS_CHANGED),()=>{t===e.getRankings()[0]&&this.updateList()}),t.on(Object(i.u)(".panel",o.a.EVENT_ADD_COLUMN,o.a.EVENT_REMOVE_COLUMN),function(t){const e=t.desc,i="addColumn"===this.type;if(!r.descs.has(e))return;r.descs.get(e).used+=i?1:-1,r.updateList()})):t.on(Object(i.u)(".panel",s.a.EVENT_GROUP_CRITERIA_CHANGED,s.a.EVENT_SORT_CRITERIAS_CHANGED,s.a.EVENT_ADD_COLUMN,s.a.EVENT_REMOVE_COLUMN),null)};e.getRankings().forEach(t=>n(t,!0)),e.on(`${o.a.EVENT_ADD_DESC}.panel`,t=>{const e=new a.a(t);r.descs.set(t,e),this.updateChooser()}),e.on(`${o.a.EVENT_CLEAR_DESC}.panel`,()=>{r.descs.clear(),this.updateChooser()}),e.on(Object(i.u)(".panel",o.a.EVENT_ADD_RANKING,o.a.EVENT_REMOVE_RANKING),function(t){n(t,"addRanking"===this.type),r.updateList()})}update(t){const e=this.data;this.ctx=t,t.provider!==e&&this.changeDataStorage(e,t.provider),this.updateChooser(),this.updateList()}remove(){this.node.remove(),this.data&&(this.data.getRankings().forEach(t=>{t.on(Object(i.u)(".panel",s.a.EVENT_GROUP_CRITERIA_CHANGED,s.a.EVENT_SORT_CRITERIAS_CHANGED,s.a.EVENT_ADD_COLUMN,s.a.EVENT_REMOVE_COLUMN),null)}),this.data.on(Object(i.u)(".panel",o.a.EVENT_ADD_RANKING,o.a.EVENT_REMOVE_RANKING,o.a.EVENT_ADD_DESC),null))}columnOrder(){const t=this.data.getRankings()[0];if(!t)return[];const e=t.getGroupCriteria(),r=new Set(e);return t.getSortCriterias().forEach(({col:t})=>{r.has(t)||(e.push(t),r.add(t))}),t.flatColumns.forEach(t=>{r.has(t)||(e.push(t),r.add(t))}),e}prepareListData(){const t=this.columnOrder(),e=new Map;t.forEach(t=>e.set(t.desc,t)),this.data.getRankings().forEach(t=>{t.flatColumns.forEach(t=>{const r=t.desc;e.has(r)||Object(s.b)(r)||e.set(r,t)})});const r=Array.from(e.values());return r.sort((e,r)=>{const i=t.indexOf(e),n=t.indexOf(r);return i<0?n<0?0:1:n<0?-1:i-n}),r}updateList(){const t=this.node.querySelector("main"),e=this.prepareListData();if(0===e.length)return t.innerHTML="",void this.descs.forEach(t=>t.destroyVis());t.innerHTML="",e.forEach(e=>{const r=this.descs.get(e.desc);r&&(r.visColumn!==e?(r.destroyVis(),t.appendChild(r.createVis(e,this.ctx,t.ownerDocument))):t.appendChild(r.updateVis(this.ctx)))})}static groupByType(t){const e=["label","categorical","numerical","matrix","combined","others"];return Object(n.nest)().key(t=>{switch(t.desc.type){case"string":return e[0];case"ordinal":case"categorical":return e[1];case"number":return e[2];case"numbers":case"booleans":case"boxplot":return e[3];case"stack":case"min":case"max":case"mean":case"script":case"nested":case"imposition":return e[4];default:return e[5]}}).sortKeys((t,r)=>e.indexOf(t)-e.indexOf(r)).sortValues((t,e)=>t.text.localeCompare(e.text)).entries(t)}updateChooser(){if(!this.options.chooser)return;const t=h.groupByType(Array.from(this.descs.values()));this.search.data=t.map(t=>({text:t.key,children:t.values}))}}e.a=h},function(t,e,r){"use strict";var i=r(146);class n{constructor(t){this.desc=t,this.used=0,this.vis=null}get text(){return this.desc.label}get id(){return`${this.desc.type}@${this.desc.label}`}destroyVis(){this.vis&&this.vis.destroy()}get visColumn(){return this.vis?this.vis.column:null}updateVis(t){return this.vis?(this.vis.update(t),this.vis.node):null}createVis(t,e,r){return this.vis=new i.a(t,e,r),this.vis.node}}e.a=n},function(t,e,r){"use strict";var i=r(1),n=r(18);class s{constructor(t,e,r){this.column=t,this.ctx=e,this.node=r.createElement("article"),this.node.dataset.type=t.desc.type,this.column.on([`${i.a.EVENT_FILTER_CHANGED}.panel`,`${i.a.EVENT_DIRTY_HEADER}.panel`],()=>{this.update()}),this.init(),this.update()}init(){this.node.innerHTML='\n      <header><div class="lu-label"></div><div class="lu-toolbar"></div></header>\n      <main class="lu-summary"></main>',Object(n.e)(this.node.querySelector(".lu-toolbar"),this.column,this.ctx),this.node.querySelector(".lu-label").addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),this.column.toggleMySorting()}),Object(n.g)(this.node.querySelector("header"),this.column,this.ctx),Object(n.h)(this.node,this.column,this.ctx,"before",!0)}update(t=this.ctx){this.ctx=t,Object(n.j)(this.node,this.column,this.ctx,!0)}destroy(){this.column.on([`${i.a.EVENT_FILTER_CHANGED}.panel`,`${i.a.EVENT_DIRTY_HEADER}.panel`],null),this.node.remove()}}e.a=s},function(t,e,r){"use strict";var i=r(0);class n extends i.a{constructor(t={}){super(),this.options={formatItem:t=>t.text,doc:document,placeholder:"Select..."},this.values=[],Object.assign(this.options,t),this.node=this.options.doc.createElement("div"),this.node.classList.add("lu-search"),this.node.innerHTML=`<input type="search" placeholder="${this.options.placeholder}"><ul></ul>`,this.search=this.node.querySelector("input"),this.body=this.node.querySelector("ul"),this.search.onfocus=(()=>this.focus()),this.search.onblur=(()=>this.blur()),this.search.oninput=(()=>this.filter()),this.search.onkeydown=(t=>this.handleKey(t))}get data(){return this.values}set data(t){this.values=t,this.body.innerHTML="",this.buildDialog(this.body,this.values)}buildDialog(t,e){e.forEach(e=>{if(function(t){return void 0!==t.id}(e)){t.insertAdjacentHTML("beforeend",'<li class="lu-search-item"><span></span></li>');const r=t.lastElementChild;r.onmousedown=(t=>{t.preventDefault()}),r.onclick=(()=>this.select(e)),r.onmouseenter=(()=>this.highlighted=r),r.onmouseleave=(()=>this.highlighted=null)}else{t.insertAdjacentHTML("beforeend",'<li class="lu-search-group"><span></span><ul></ul></li>');const r=t.lastElementChild.lastElementChild;this.buildDialog(r,e.children)}const r=t.lastElementChild.firstElementChild;r.innerHTML=this.options.formatItem(e,r)})}handleKey(t){const e=27,r=13,i=38,n=40;switch(t.which){case e:this.search.blur();break;case r:const s=this.highlighted;s&&s.click();break;case i:this.highlightPrevious();break;case n:this.highlightNext()}}select(t){this.search.value="",this.search.blur(),this.filterResults(this.body,""),this.fire(n.EVENT_SELECT,t)}focus(){this.body.style.width=`${this.search.offsetWidth}px`,this.highlighted=this.body.firstElementChild||null,this.node.classList.add("lu-search-open")}get highlighted(){return this.body.querySelector(".lu-search-highlighted")||null}set highlighted(t){const e=this.highlighted;e!==t&&(e&&e.classList.remove("lu-search-highlighted"),t&&t.classList.add("lu-search-highlighted"))}highlightNext(){const t=this.highlighted;if(!t||t.classList.contains("hidden"))return void(this.highlighted=this.body.querySelector(".lu-search-item:not(.hidden)")||null);const e=Array.from(this.body.querySelectorAll(".lu-search-item:not(.hidden)")),r=e.indexOf(t);this.highlighted=e[r+1]||null}highlightPrevious(){const t=this.highlighted,e=Array.from(this.body.querySelectorAll(".lu-search-item:not(.hidden)"));if(!t||t.classList.contains("hidden"))return void(this.highlighted=e[e.length-1]||null);const r=e.indexOf(t);this.highlighted=e[r-1]||null}blur(){this.search.value="",this.node.classList.remove("lu-search-open")}filter(){const t=this.filterResults(this.body,this.search.value.toLowerCase());this.body.classList.toggle("lu-search-empty",t)}filterResults(t,e){if(""===e)return Array.from(t.querySelectorAll(".hidden")).forEach(t=>t.classList.remove("hidden")),!1;const r=Array.from(t.children);return r.forEach(t=>{let r=!t.firstElementChild.innerHTML.toLowerCase().includes(e);if(t.classList.contains("lu-search-group")){const i=t.lastElementChild,n=this.filterResults(i,e);r=r&&n}t.classList.toggle("hidden",r)}),r.every(t=>t.classList.contains("hidden"))}createEventList(){return super.createEventList().concat([n.EVENT_SELECT])}}e.a=n,n.EVENT_SELECT="select"},function(t,e,r){"use strict";var i=r(22),n=r(68),s=r(135),a=r(34),o=r(44),l=r(136),c=r(14),h=r(0);class d extends h.a{constructor(t,e,r={}){super(),this.data=e,this.isDynamicLeafHeight=!0,this.rule=s.a,this.resizeListener=(()=>this.update()),this.options={violationChanged:()=>void 0},this.options=Object.assign(this.options,r);const i=this.createConfig(r);this.renderer=new n.a(e,t,i),this.data.on(`${c.a.EVENT_SELECTION_CHANGED}.rule`,()=>{this.isDynamicLeafHeight&&this.update()}),this.forward(this.renderer,`${o.a}.main`),window.addEventListener("resize",this.resizeListener)}get ctx(){return this.renderer.ctx}pushUpdateAble(t){this.renderer.pushUpdateAble(t)}createConfig(t){return Object(h.p)(Object(a.a)(),t,{header:{summary:!0},body:{animation:!0,rowPadding:0,groupPadding:l.a,dynamicHeight:this.dynamicHeight.bind(this),customRowUpdate:this.customRowUpdate.bind(this)}})}customRowUpdate(t,e){this.levelOfDetail&&this.levelOfDetail(t,e)}dynamicHeight(t){const e=this.renderer?this.renderer.node.querySelector("main").clientHeight:100,r=this.rule.apply(t,e,new Set(this.data.getSelection()));this.isDynamicLeafHeight="function"==typeof r.item,this.options.violationChanged(this.rule,r.violation||"");const n=t=>Object(i.a)(t)?"number"==typeof r.group?r.group:r.group(t):"number"==typeof r.item?r.item:r.item(t);return this.levelOfDetail=((e,r)=>{const i=t[r];e.dataset.lod=this.rule.levelOfDetail(i,n(i))}),{defaultHeight:"number"==typeof r.item?r.item:NaN,height:n}}createEventList(){return super.createEventList().concat([d.EVENT_HOVER_CHANGED])}zoomOut(){this.renderer.zoomOut()}zoomIn(){this.renderer.zoomIn()}switchRule(t){this.rule=t,this.update()}destroy(){this.renderer.destroy(),window.removeEventListener("resize",this.resizeListener)}update(){this.renderer.update()}changeDataStorage(t){this.data&&this.data.on(`${c.a.EVENT_SELECTION_CHANGED}.rule`,null),this.data=t,this.data.on(`${c.a.EVENT_SELECTION_CHANGED}.rule`,()=>{this.isDynamicLeafHeight&&this.update()}),this.renderer.changeDataStorage(t),this.update()}}e.a=d,d.EVENT_HOVER_CHANGED=o.a}])});