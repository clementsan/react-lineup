!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.LineUpJS=e():t.LineUpJS=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=146)}([function(t,e,n){"use strict";function r(...t){let e=null;for(const n of t){const t=Object.keys(n);if(null!==e)for(const i of t){const t=n[i];Object.prototype.toString.call(t)===h&&Object.getPrototypeOf(t)===Object.prototype?(void 0===e[i]&&(e[i]={}),e[i]=r(e[i],t)):Array.isArray(t)?(void 0===e[i]&&(e[i]=[]),e[i]=t.concat(e[i])):e[i]=t}else e=n}return e}function i(t){const e=t.getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:e.width,height:e.height}}function a(t,e){const n=t.dataTransfer.types;return"function"==typeof n.indexOf?e.some(t=>n.indexOf(t)>=0):"function"==typeof n.includes?e.some(t=>n.includes(t)):"function"==typeof n.contains&&e.some(t=>n.contains(t))}function o(t){return f.size>0&&a(t,["text/plain"])}function s(t){const e=t.dataTransfer;return t.ctrlKey&&null!=e.effectAllowed.match(/copy/gi)||null==e.effectAllowed.match(/move/gi)}function l(t,e){return void 0===e?t:(t.textContent!==e&&(t.textContent=e),t)}function u(t,e,n){Array.from(t.querySelectorAll(e)).forEach(n)}e.q=function(t,e=0){if(0===e)return Math.round(t);const n=Math.pow(10,e);return Math.round(t*n)/n},e.k=function(t){return(e,n)=>{if(e in t)return t[e];if(e.indexOf(".")>0){const n=e.substring(0,e.indexOf("."));if(e=e.substring(e.indexOf(".")+1),n in t&&e in t[n])return t[n][e]}return n}},e.t=function(t,e,n=.5){return t===e||Math.abs(t-e)<n},e.f=function(t,e=100,n){let r=-1,i=null;return function(...a){r>=0&&(clearTimeout(r),r=-1);const o={self:this,args:a};i=i&&n?n(i,o):o,r=setTimeout(()=>{console.assert(null!=i),t.call(i.self,...i.args),i=null},e)}},e.u=function(t,...e){return e.map(e=>`${e}${t}`)},e.p=r,e.h=function(t){return e=>{e.on("dragstart",e=>{const n=c.event,r=t(e);if(n.dataTransfer.effectAllowed=r.effectAllowed,Object.keys(r.data).every(t=>{try{return n.dataTransfer.setData(t,r.data[t]),!0}catch(t){return!1}}))return;const i=r.data["text/plain"]||"";n.dataTransfer.setData("text/plain",`${e.id}${i?`: ${i}`:""}`),f.set(e.id,r.data)}).on("dragend",t=>{f.size>0&&f.delete(t.id)})}},e.i=function(t,e){return n=>{n.on("dragenter",function(){const e=c.event;if(a(e,t)||o(e))return Object(c.select)(this).classed("drag_over",!0),!1;Object(c.select)(this).classed("drag_over",!1)}).on("dragover",function(){const e=c.event;if(a(e,t)||o(e))return e.preventDefault(),function(t){const e=t.dataTransfer;s(t)?e.dropEffect="copy":e.dropEffect="move"}(e),Object(c.select)(this).classed("drag_over",!0),!1}).on("dragleave",function(){Object(c.select)(this).classed("drag_over",!1)}).on("drop",function(n){const r=c.event;if(r.preventDefault(),Object(c.select)(this).classed("drag_over",!1),o(r)){const t=r.dataTransfer.getData("text/plain"),i=t.indexOf(":")>=0?t.substring(0,t.indexOf(":")):t;if(f.has(i)){const t=f.get(i);return f.delete(i),e(t,n,s(r))}}if(a(r,t)){const i={};return t.forEach(t=>{const e=r.dataTransfer.getData(t);""!==e&&(i[t]=e)}),e(i,n,s(r))}})}},e.c=function(t,e={},n={},r){return Object.keys(e).forEach(n=>{const r=String(e[n]);t.getAttribute(n)!==r&&t.setAttribute(n,r)}),Object.keys(n).forEach(e=>{const r=n[e];t.style.getPropertyValue(e)!==r&&t.style.setProperty(e,r)}),l(t,r)},e.r=l,e.l=u,e.m=function(t,e){Array.from(t.children).forEach(e)},e.e=function(t,e){const n=t.font,r=function(t){return t.font="10pt FontAwesome",t.measureText("").width}(t);t.font=e;const i="abcdefghijklmnopqrstuvwxyz",a=`${i}${i.toUpperCase()}0123456789`,o={maxLetterWidth:t.measureText("M").width,avgLetterWidth:t.measureText(a).width/a.length,ellipsisWidth:t.measureText(g).width,spinnerWidth:r};return t.font=n,o},e.d=function(t,e,n,r,i,a){const o=e=>t.fillText(e,n,r,i);if(a.maxLetterWidth*e.length<=i||i<=a.ellipsisWidth||0===e.length)return o(e);if(t.measureText(e).width<=i)return o(e);const s=i-a.ellipsisWidth;let l=0,u=e.length-1,c=Math.min(u,Math.floor(i/a.avgLetterWidth));for(;l<u;){const n=s-t.measureText(e.substring(0,c+1)).width;if(n<0)u=c-1;else{if(!(n>0))break;l=c+1}c=Math.floor((u+l)/2)}return o(e.substring(0,l+1)+g)},e.s=function(t,e,n,r){let i=t.querySelector(`div.lu-overlay#O${e}`);return i||((i=t.ownerDocument.createElement("div")).classList.add("lu-overlay"),i.id=`O${e}`,t.appendChild(i)),i.style.display="block",i.style.left=`${n}px`,i.style.top=`${r}px`,i},e.n=function(t){u(t,"div.lu-overlay",t=>t.style.display=null)},e.o=function(t,e,n,r="svg"){const i="detail"===n?t=>t.column.getRendererType():t=>t.column.getGroupRenderer();if(0===t.childElementCount)return t.innerHTML=e.map(t=>("detail"===n?t.renderer:t.groupRenderer).template).join(""),void e.forEach((e,n)=>{const r=t.childNodes[n];r.setAttribute("data-column-id",e.column.id),r.setAttribute("data-renderer",i(e))});if(e.every(function(e,n){const r=t.childElementCount<=n?null:t.childNodes[n];return null!=r&&r.getAttribute("data-column-id")===e.column.id&&r.getAttribute("data-renderer")===i(e)}))return;const a=new Set(e.map(t=>`${t.column.id}@${i(t)}`));Array.from(t.childNodes).forEach(e=>{const n=`${e.getAttribute("data-column-id")}@${e.getAttribute("data-renderer")}`;a.has(n)||t.removeChild(e)});const o="svg"===r?document.createElementNS("http://www.w3.org/2000/svg","g"):document.createElement("div");e.forEach(e=>{let r=t.querySelector(`[data-column-id="${e.column.id}"]`);r||(o.innerHTML=("detail"===n?e.renderer:e.groupRenderer).template,(r=o.childNodes[0]).setAttribute("data-column-id",e.column.id),r.setAttribute("data-renderer",i(e))),t.appendChild(r)})},e.j=function(t,e){return t.length===e.length&&t.every((t,n)=>t===e[n])},e.g=function(t){const e=c.scale.category10().range().slice();return t.forEach(t=>{switch(t.type){case"number":t.color=e.shift()}}),t};var c=n(3);n.n(c);class d{constructor(){this.listeners=Object(c.dispatch)(...this.createEventList());const t=this;this.forwarder=function(...e){t.fireImpl(this.type,this.primaryType,this.origin,...e)}}on(t,e){return void 0!==e?(Array.isArray(t)?t.forEach(t=>this.listeners.on(t,e)):this.listeners.on(t,e),this):this.listeners.on(t)}createEventList(){return[]}fire(t,...e){const n=Array.isArray(t)?t[0]:t;this.fireImpl(t,n,this,...e)}fireImpl(t,e,n,...r){const i=t=>{const i={source:this,origin:n,type:t,primaryType:e,args:r};this.listeners[t].apply(i,r)};Array.isArray(t)?t.forEach(i.bind(this)):i(t)}forward(t,...e){t.on(e,this.forwarder)}unforward(t,...e){t.on(e,null)}}e.a=d;const h="[object Object]";class p extends d{constructor(t,e,n={}){super(),this.container=t,this.options={pageSize:100,rowHeight:20,backupRows:5},this.prevScrollTop=0,this.shift=0,r(this.options,n),Object(c.select)(t).on("scroll.scroller",()=>this.onScroll()),this.prevScrollTop=t.scrollTop,this.shift=i(e).top-i(t).top}createEventList(){return super.createEventList().concat([p.EVENT_REDRAW,p.EVENT_SCROLL])}scrollIntoView(t,e,n,r){const i=this.selectImpl(t,e,r,0);if(i.from<=n&&n<=i.to)return;const a=r(n)-10,o=this.container.scrollHeight-this.container.clientHeight;this.container.scrollTop=Math.max(0,Math.min(o,a))}select(t,e,n){return this.selectImpl(t,e,n,this.options.backupRows)}selectImpl(t,e,n,r){const i=this.container.scrollTop-this.shift,a=i+this.container.clientHeight;let o,s=0;if(i>0){for(s=Math.round(i/this.options.rowHeight);s>=t&&n(s+1)>i;)s--;s-=r}for(o=Math.round(a/this.options.rowHeight);o<=e&&n(o-1)<a;)o++;return o+=r,{from:Math.max(s,t),to:Math.min(o,e)}}onScroll(){const t=this.container.scrollTop,e=this.container.scrollLeft;if(this.fire(p.EVENT_SCROLL,t,e),Math.abs(this.prevScrollTop-t)<this.options.pageSize)return;const n=this.prevScrollTop-t;this.prevScrollTop=t,this.fire(p.EVENT_REDRAW,n)}destroy(){Object(c.select)(this.container).on("scroll.scroller",null)}}e.b=p,p.EVENT_SCROLL="scroll",p.EVENT_REDRAW="redraw";const f=new Map,g="…"},function(t,e,n){"use strict";function r(t){return t.replace(/[\s!#$%&'()*+,.\/:;<=>?@\[\\\]\^`{|}~]/g,"_")}e.b=r;var i=n(0),a=n(24),o=n(5);class s extends i.a{constructor(t,e){super(),this.desc=e,this.width=100,this.parent=null,this.uid=r(t),this.rendererInfo={renderer:this.desc.rendererType||this.desc.type,groupRenderer:this.desc.groupRenderer||this.desc.type},this.cssClass=e.cssClass||"",this.metadata={label:e.label||this.id,description:e.description||"",color:e.color||(""!==this.cssClass?null:s.DEFAULT_COLOR)}}get id(){return this.uid}assignNewId(t){this.uid=r(t())}get label(){return this.metadata.label}get description(){return this.metadata.description}get color(){return this.metadata.color}get headerCssClass(){return this.desc.type}get fqid(){return this.parent?`${this.parent.fqid}_${this.id}`:this.id}get fqpath(){return this.parent?`${this.parent.fqpath}@${this.parent.indexOf(this)}`:""}createEventList(){return super.createEventList().concat([s.EVENT_WIDTH_CHANGED,s.EVENT_FILTER_CHANGED,s.EVENT_LABEL_CHANGED,s.EVENT_METADATA_CHANGED,s.EVENT_ADD_COLUMN,s.EVENT_REMOVE_COLUMN,s.EVENT_RENDERER_TYPE_CHANGED,s.EVENT_GROUP_RENDERER_TYPE_CHANGED,s.EVENT_SORTMETHOD_CHANGED,s.EVENT_MOVE_COLUMN,s.EVENT_DIRTY,s.EVENT_DIRTY_HEADER,s.EVENT_DIRTY_VALUES,s.EVENT_GROUPING_CHANGED])}getWidth(){return this.width}isHidden(){return this.width<=0}hide(){return this.setWidth(0)}flatten(t,e,n=0,r=0){const i=this.getWidth();return t.push({col:this,offset:e,width:i}),i}setWidth(t){Object(i.t)(this.width,t,.5)||this.fire([s.EVENT_WIDTH_CHANGED,s.EVENT_DIRTY_HEADER,s.EVENT_DIRTY_VALUES,s.EVENT_DIRTY],this.width,this.width=t)}setWidthImpl(t){this.width=t}setMetaData(t){if(t.label===this.label&&this.color===t.color&&this.description===t.description)return;const e=this.color===t.color?[s.EVENT_LABEL_CHANGED,s.EVENT_METADATA_CHANGED,s.EVENT_DIRTY_HEADER,s.EVENT_DIRTY]:[s.EVENT_LABEL_CHANGED,s.EVENT_METADATA_CHANGED,s.EVENT_DIRTY_HEADER,s.EVENT_DIRTY_VALUES,s.EVENT_DIRTY],n=this.getMetaData();this.metadata={label:t.label,color:t.color,description:t.description},this.fire(e,n,this.getMetaData())}getMetaData(){return{label:this.label,color:this.color,description:this.description}}sortByMe(t=!1){const e=this.findMyRanker();return!!e&&e.sortBy(this,t)}groupByMe(){const t=this.findMyRanker();return!!t&&t.toggleGrouping(this)}isGroupedBy(){const t=this.findMyRanker();return t?t.getGroupCriteria().indexOf(this):-1}toggleMySorting(){const t=this.findMyRanker();return!!t&&t.toggleSorting(this)}isSortedByMeImpl(t){const e=this.findMyRanker();if(!e)return{asc:void 0,priority:void 0};const n=t(e),r=n.findIndex(t=>t.col===this);return r<0?{asc:void 0,priority:void 0}:{asc:n[r].asc?"asc":"desc",priority:r.toString()}}isSortedByMe(){return this.isSortedByMeImpl(t=>t.getSortCriterias())}groupSortByMe(t=!1){const e=this.findMyRanker();return!!e&&e.groupSortBy(this,t)}toggleMyGroupSorting(){const t=this.findMyRanker();return!!t&&t.toggleGroupSorting(this)}isGroupSortedByMe(){return this.isSortedByMeImpl(t=>t.getGroupSortCriteria())}removeMe(){return!!this.parent&&this.parent.remove(this)}insertAfterMe(t){return!!this.parent&&null!=this.parent.insertAfter(t,this)}findMyRanker(){return this.parent?this.parent.findMyRanker():null}dump(t){const e={id:this.id,desc:t(this.desc),width:this.width};return this.label!==(this.desc.label||this.id)&&(e.label=this.label),this.color!==(this.desc.color||s.DEFAULT_COLOR)&&this.color&&(e.color=this.color),this.getRendererType()!==this.desc.type&&(e.rendererType=this.getRendererType()),e}restore(t,e){this.width=t.width||this.width,this.metadata={label:t.label||this.label,color:t.color||this.color,description:this.description},t.rendererType&&(this.rendererInfo.renderer=t.rendererType),t.groupRenderer&&(this.rendererInfo.groupRenderer=t.groupRenderer)}getLabel(t,e){return String(this.getValue(t,e))}getValue(t,e){return""}isMissing(t,e){return Object(o.b)(this.getValue(t,e))}compare(t,e,n,r){return 0}group(t,e){return a.a}groupCompare(t,e){return t.name.toLowerCase().localeCompare(e.name.toLowerCase())}isFiltered(){return!1}filter(t,e){return null!==t}getRendererType(){return this.rendererInfo.renderer}getGroupRenderer(){return this.rendererInfo.groupRenderer}setRendererType(t){t!==this.rendererInfo.renderer&&this.fire([s.EVENT_RENDERER_TYPE_CHANGED,s.EVENT_DIRTY_VALUES,s.EVENT_DIRTY],this.rendererInfo.renderer,this.rendererInfo.renderer=t)}setDefaultRenderer(t){if(this.rendererInfo.renderer===this.desc.type)return this.setRendererType(t)}setGroupRenderer(t){t!==this.rendererInfo.groupRenderer&&this.fire([s.EVENT_GROUP_RENDERER_TYPE_CHANGED,s.EVENT_DIRTY_VALUES,s.EVENT_DIRTY],this.rendererInfo.groupRenderer,this.rendererInfo.groupRenderer=t)}setDefaultGroupRenderer(t){if(this.rendererInfo.groupRenderer===this.desc.type)return this.setGroupRenderer(t)}toSortingDesc(t){return t(this.desc)}}e.a=s,s.DEFAULT_COLOR="#C1C1C1",s.FLAT_ALL_COLUMNS=-1,s.EVENT_WIDTH_CHANGED="widthChanged",s.EVENT_FILTER_CHANGED="filterChanged",s.EVENT_LABEL_CHANGED="labelChanged",s.EVENT_METADATA_CHANGED="metaDataChanged",s.EVENT_ADD_COLUMN="addColumn",s.EVENT_MOVE_COLUMN="moveColumn",s.EVENT_REMOVE_COLUMN="removeColumn",s.EVENT_DIRTY="dirty",s.EVENT_DIRTY_HEADER="dirtyHeader",s.EVENT_DIRTY_VALUES="dirtyValues",s.EVENT_RENDERER_TYPE_CHANGED="rendererTypeChanged",s.EVENT_GROUP_RENDERER_TYPE_CHANGED="groupRendererChanged",s.EVENT_SORTMETHOD_CHANGED="sortMethodChanged",s.EVENT_GROUPING_CHANGED="groupingChanged"},function(t,e,n){"use strict";function r(t){return t instanceof o.a&&"function"==typeof t.getNumber||!(t instanceof o.a)&&null!=t.type.match(/(number|stack|ordinal)/)}function i(t,e,n=!1,r=!1){return n=n||null===t||isNaN(t),r=r||null===e||isNaN(e),n?r?0:a.a:r?-1*a.a:t-e}e.h=r,e.e=function(t,e,n,r,o){const s=t.getBoxPlotData(e,r),l=t.getBoxPlotData(n,o);if(null===s)return null===l?0:a.a;if(null===l)return-1*a.a;const u=t.getSortMethod();return i(s[u],l[u])},e.f=function(t,e,n,r){const i="normalized"===r?t.getBoxPlotData(e,n):t.getRawBoxPlotData(e,n);return null===i?NaN:i[t.getSortMethod()]},e.i=function(t){return void 0!==t.getNumbers&&r(t)},e.m=i,e.k=function(t,e){const n=t.map((t,n)=>({i:n,v:e.getNumber(t.v,t.dataIndex),m:e.isMissing(t.v,t.dataIndex)})).filter(t=>!t.m).sort((t,e)=>i(t.v,e.v)),r=n[Math.floor(n.length/2)];return void 0===r?0:r.i},e.g=function(t,e,n,r){const a=new h(t.map(t=>n.getNumber(t.v,t.dataIndex))),o=new h(e.map(t=>n.getNumber(t.v,t.dataIndex)));return i(a[r],o[r])},e.l=function(){return{min:-1/0,max:1/0,filterMissing:!1}},e.j=function(t,e){return Object(l.t)(t.min,e.min,.001)&&Object(l.t)(t.max,e.max,.001)&&t.filterMissing===e.filterMissing},e.n=function(t){return{min:null!==t.min&&isFinite(t.min)?t.min:-1/0,max:null!==t.max&&isFinite(t.max)?t.max:1/0,filterMissing:t.filterMissing}};var a=n(5),o=n(1),s=n(3),l=(n.n(s),n(0));const u=Object(s.format)(".3n");e.b=u;const c={min:"min",max:"max",median:"median",q1:"q1",q3:"q3"};e.d=c;const d=Object.assign({mean:"mean"},c);e.a=d;class h{constructor(t,e){this.scale=e,this._sorted=null,this._outlier=null,this.values=t.filter(t=>!Object(a.b)(t))}get sorted(){return null===this._sorted&&(this._sorted=this.values.slice().sort(s.ascending)),this._sorted}map(t){return this.scale?this.scale.apply(t):t}get min(){return this.map(Math.min(...this.values))}get max(){return this.map(Math.max(...this.values))}get median(){return this.map(Object(s.median)(this.sorted))}get q1(){return this.map(Object(s.quantile)(this.sorted,.25))}get q3(){return this.map(Object(s.quantile)(this.sorted,.75))}get mean(){return this.map(Object(s.mean)(this.values))}get outlier(){if(this._outlier)return this._outlier;const t=Object(s.quantile)(this.sorted,.25),e=Object(s.quantile)(this.sorted,.75),n=e-t,r=t-1.5*n,i=e+1.5*n;return this._outlier=this.sorted.filter(t=>(t<r||t>i)&&!Object(a.b)(t)),this.scale&&(this._outlier=this._outlier.map(t=>this.scale.apply(t))),this._outlier}}e.c=h},function(t,e,n){var r,i;!function(){function a(t){return t&&(t.ownerDocument||t.document||t).documentElement}function o(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function s(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function l(t){return null===t?NaN:+t}function u(t){return!isNaN(t)}function c(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}function d(t){return t.length}function h(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function p(){this._=Object.create(null)}function f(t){return(t+="")===ca||t[0]===da?da+t:t}function g(t){return(t+="")[0]===da?t.slice(1):t}function m(t){return f(t)in this._}function v(t){return(t=f(t))in this._&&delete this._[t]}function b(){var t=[];for(var e in this._)t.push(g(e));return t}function y(){var t=0;for(var e in this._)++t;return t}function E(){for(var t in this._)return!1;return!0}function x(){this._=Object.create(null)}function _(t){return t}function N(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=ha.length;n<r;++n){var i=ha[n]+e;if(i in t)return i}}function C(){}function M(){}function T(t){function e(){for(var e,r=n,i=-1,a=r.length;++i<a;)(e=r[i].on)&&e.apply(this,arguments);return t}var n=[],r=new p;return e.on=function(e,i){var a,o=r.get(e);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function w(){Qi.event.preventDefault()}function S(){for(var t,e=Qi.event;t=e.sourceEvent;)e=t;return e}function O(t){for(var e=new M,n=0,r=arguments.length;++n<r;)e[arguments[n]]=T(e);return e.of=function(n,r){return function(i){try{var a=i.sourceEvent=Qi.event;i.target=t,Qi.event=i,e[i.type].apply(n,r)}finally{Qi.event=a}}},e}function R(t){return fa(t,ba),t}function D(t){return"function"==typeof t?t:function(){return ga(t,this)}}function A(t){return"function"==typeof t?t:function(){return ma(t,this)}}function L(t,e){return t=Qi.ns.qualify(t),null==e?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof e?t.local?function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}:function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}:t.local?function(){this.setAttributeNS(t.space,t.local,e)}:function(){this.setAttribute(t,e)}}function I(t){return t.trim().replace(/\s+/g," ")}function k(t){return new RegExp("(?:^|\\s+)"+Qi.requote(t)+"(?:\\s+|$)","g")}function V(t){return(t+"").trim().split(/^|\s+/)}function j(t,e){var n=(t=V(t).map(H)).length;return"function"==typeof e?function(){for(var r=-1,i=e.apply(this,arguments);++r<n;)t[r](this,i)}:function(){for(var r=-1;++r<n;)t[r](this,e)}}function H(t){var e=k(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",I(i+" "+t))):n.setAttribute("class",I(i.replace(e," ")))}}function $(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}:function(){this.style.setProperty(t,e,n)}}function P(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function G(t){return"function"==typeof t?t:(t=Qi.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ya&&e.documentElement.namespaceURI===ya?e.createElement(t):e.createElementNS(n,t)}}function F(){var t=this.parentNode;t&&t.removeChild(this)}function z(t){return{__data__:t}}function U(t){return function(){return va(this,t)}}function W(t,e){for(var n=0,r=t.length;n<r;n++)for(var i,a=t[n],o=0,s=a.length;o<s;o++)(i=a[o])&&e(i,o,n);return t}function Y(t){return fa(t,xa),t}function B(t,e,n){function r(){var e=this[i];e&&(this.removeEventListener(t,e,e.$),delete this[i])}var i="__on"+t,a=t.indexOf("."),o=q;a>0&&(t=t.slice(0,a));var s=_a.get(t);return s&&(t=s,o=Z),a?e?function(){var a=o(e,ea(arguments));r.call(this),this.addEventListener(t,this[i]=a,a.$=n),a._=e}:r:e?C:function(){var e,n=new RegExp("^__on([^.]+)"+Qi.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}}function q(t,e){return function(n){var r=Qi.event;Qi.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{Qi.event=r}}}function Z(t,e){var n=q(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function J(t){var e=".dragsuppress-"+ ++Ca,n="click"+e,r=Qi.select(o(t)).on("touchmove"+e,w).on("dragstart"+e,w).on("selectstart"+e,w);if(null==Na&&(Na=!("onselectstart"in t)&&N(t.style,"userSelect")),Na){var i=a(t).style,s=i[Na];i[Na]="none"}return function(t){if(r.on(e,null),Na&&(i[Na]=s),t){var a=function(){r.on(n,null)};r.on(n,function(){w(),a()},!0),setTimeout(a,0)}}}function X(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(Ma<0){var i=o(t);if(i.scrollX||i.scrollY){var a=(n=Qi.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Ma=!(a.f||a.e),n.remove()}}return Ma?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function K(){return Qi.event.changedTouches[0].identifier}function Q(t){return t>0?1:t<0?-1:0}function tt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function et(t){return t>1?0:t<-1?Sa:Math.acos(t)}function nt(t){return t>1?Da:t<-1?-Da:Math.asin(t)}function rt(t){return((t=Math.exp(t))+1/t)/2}function it(t){return(t=Math.sin(t/2))*t}function at(){}function ot(t,e,n){return this instanceof ot?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof ot?new ot(t.h,t.s,t.l):Et(""+t,xt,ot):new ot(t,e,n)}function st(t,e,n){function r(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?i+(a-i)*t/60:t<180?a:t<240?i+(a-i)*(240-t)/60:i}(t))}var i,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,n=n<0?0:n>1?1:n,a=n<=.5?n*(1+e):n+e-n*e,i=2*n-a,new mt(r(t+120),r(t),r(t-120))}function lt(t,e,n){return this instanceof lt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof lt?new lt(t.h,t.c,t.l):t instanceof ct?ht(t.l,t.a,t.b):ht((t=_t((t=Qi.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new lt(t,e,n)}function ut(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new ct(n,Math.cos(t*=Aa)*e,Math.sin(t)*e)}function ct(t,e,n){return this instanceof ct?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof ct?new ct(t.l,t.a,t.b):t instanceof lt?ut(t.h,t.c,t.l):_t((t=mt(t)).r,t.g,t.b):new ct(t,e,n)}function dt(t,e,n){var r=(t+16)/116,i=r+e/500,a=r-n/200;return i=pt(i)*Ga,r=pt(r)*Fa,a=pt(a)*za,new mt(gt(3.2404542*i-1.5371385*r-.4985314*a),gt(-.969266*i+1.8760108*r+.041556*a),gt(.0556434*i-.2040259*r+1.0572252*a))}function ht(t,e,n){return t>0?new lt(Math.atan2(n,e)*La,Math.sqrt(e*e+n*n),t):new lt(NaN,NaN,t)}function pt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ft(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function gt(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function mt(t,e,n){return this instanceof mt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof mt?new mt(t.r,t.g,t.b):Et(""+t,mt,st):new mt(t,e,n)}function vt(t){return new mt(t>>16,t>>8&255,255&t)}function bt(t){return vt(t)+""}function yt(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function Et(t,e,n){var r,i,a,o=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(Ct(i[0]),Ct(i[1]),Ct(i[2]))}return(a=Ya.get(t))?e(a.r,a.g,a.b):(null==t||"#"!==t.charAt(0)||isNaN(a=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,l=15&a,l|=l<<4):7===t.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,l=255&a)),e(o,s,l))}function xt(t,e,n){var r,i,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),s=o-a,l=(o+a)/2;return s?(i=l<.5?s/(o+a):s/(2-o-a),r=t==o?(e-n)/s+(e<n?6:0):e==o?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=l>0&&l<1?0:r),new ot(r,i,l)}function _t(t,e,n){var r=ft((.4124564*(t=Nt(t))+.3575761*(e=Nt(e))+.1804375*(n=Nt(n)))/Ga),i=ft((.2126729*t+.7151522*e+.072175*n)/Fa);return ct(116*i-16,500*(r-i),200*(i-ft((.0193339*t+.119192*e+.9503041*n)/za)))}function Nt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ct(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Mt(t){return"function"==typeof t?t:function(){return t}}function Tt(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),wt(e,n,t,r)}}function wt(t,e,n,r){function i(){var t,e=l.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(l)||e>=200&&e<300||304===e){try{t=n.call(a,l)}catch(t){return void o.error.call(a,t)}o.load.call(a,t)}else o.error.call(a,l)}var a={},o=Qi.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(t){var e=Qi.event;Qi.event=t;try{o.progress.call(a,l)}finally{Qi.event=e}},a.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",a)},a.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",a):e},a.responseType=function(t){return arguments.length?(u=t,a):u},a.response=function(t){return n=t,a},["get","post"].forEach(function(t){a[t]=function(){return a.send.apply(a,[t].concat(ea(arguments)))}}),a.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),l.setRequestHeader)for(var c in s)l.setRequestHeader(c,s[c]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=u&&(l.responseType=u),null!=i&&a.on("error",i).on("load",function(t){i(null,t)}),o.beforesend.call(a,l),l.send(null==r?null:r),a},a.abort=function(){return l.abort(),a},Qi.rebind(a,o,"on"),null==r?a:a.get(function(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}(r))}function St(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var i={c:t,t:n+e,n:null};return qa?qa.n=i:Ba=i,qa=i,Za||(Ja=clearTimeout(Ja),Za=1,Xa(Ot)),i}function Ot(){var t=Rt(),e=Dt()-t;e>24?(isFinite(e)&&(clearTimeout(Ja),Ja=setTimeout(Ot,e)),Za=0):(Za=1,Xa(Ot))}function Rt(){for(var t=Date.now(),e=Ba;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Dt(){for(var t,e=Ba,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:Ba=e.n;return qa=t,n}function At(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Lt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function It(t,e,n){function r(e){var n=t(e),r=a(n,1);return e-n<r-e?n:r}function i(n){return e(n=t(new no(n-1)),1),n}function a(t,n){return e(t=new no(+t),n),t}function o(t,r,a){var o=i(t),s=[];if(a>1)for(;o<r;)n(o)%a||s.push(new Date(+o)),e(o,1);else for(;o<r;)s.push(new Date(+o)),e(o,1);return s}t.floor=t,t.round=r,t.ceil=i,t.offset=a,t.range=o;var s=t.utc=kt(t);return s.floor=s,s.round=kt(r),s.ceil=kt(i),s.offset=kt(a),s.range=function(t,e,n){try{no=Lt;var r=new Lt;return r._=t,o(r,e,n)}finally{no=Date}},t}function kt(t){return function(e,n){try{no=Lt;var r=new Lt;return r._=e,t(r,n)._}finally{no=Date}}}function Vt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function jt(t){return new RegExp("^(?:"+t.map(Qi.requote).join("|")+")","i")}function Ht(t){for(var e=new p,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function $t(t,e,n){ao.lastIndex=0;var r=ao.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Pt(t,e,n){ao.lastIndex=0;var r=ao.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Gt(t,e,n){ao.lastIndex=0;var r=ao.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Ft(t,e,n){ao.lastIndex=0;var r=ao.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function zt(t,e,n){ao.lastIndex=0;var r=ao.exec(e.slice(n,n+2));return r?(t.y=function(t){return t+(t>68?1900:2e3)}(+r[0]),n+r[0].length):-1}function Ut(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Wt(t,e,n){ao.lastIndex=0;var r=ao.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Yt(t,e,n){ao.lastIndex=0;var r=ao.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Bt(t,e,n){ao.lastIndex=0;var r=ao.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function qt(t,e,n){ao.lastIndex=0;var r=ao.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Zt(t,e,n){ao.lastIndex=0;var r=ao.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Jt(t,e,n){ao.lastIndex=0;var r=ao.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Xt(t,e,n){ao.lastIndex=0;var r=ao.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Kt(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=ua(e)/60|0,i=ua(e)%60;return n+Vt(r,"0",2)+Vt(i,"0",2)}function Qt(t,e,n){oo.lastIndex=0;var r=oo.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function te(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function ee(){}function ne(t,e,n){var r=n.s=t+e,i=r-t,a=r-i;n.t=t-a+(e-i)}function re(t,e){t&&co.hasOwnProperty(t.type)&&co[t.type](t,e)}function ie(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function ae(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)ie(t[n],e,1);e.polygonEnd()}function oe(){function t(t,e){e=e*Aa/2+Sa/4;var n=(t*=Aa)-r,o=n>=0?1:-1,s=o*n,l=Math.cos(e),u=Math.sin(e),c=a*u,d=i*l+c*Math.cos(s),h=c*o*Math.sin(s);po.add(Math.atan2(h,d)),r=t,i=l,a=u}var e,n,r,i,a;fo.point=function(o,s){fo.point=t,r=(e=o)*Aa,i=Math.cos(s=(n=s)*Aa/2+Sa/4),a=Math.sin(s)},fo.lineEnd=function(){t(e,n)}}function se(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function le(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ue(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ce(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function de(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function he(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function pe(t){return[Math.atan2(t[1],t[0]),nt(t[2])]}function fe(t,e){return ua(t[0]-e[0])<Ta&&ua(t[1]-e[1])<Ta}function ge(t,e){t*=Aa;var n=Math.cos(e*=Aa);me(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function me(t,e,n){vo+=(t-vo)/++go,bo+=(e-bo)/go,yo+=(n-yo)/go}function ve(){function t(t,i){t*=Aa;var a=Math.cos(i*=Aa),o=a*Math.cos(t),s=a*Math.sin(t),l=Math.sin(i),u=Math.atan2(Math.sqrt((u=n*l-r*s)*u+(u=r*o-e*l)*u+(u=e*s-n*o)*u),e*o+n*s+r*l);mo+=u,Eo+=u*(e+(e=o)),xo+=u*(n+(n=s)),_o+=u*(r+(r=l)),me(e,n,r)}var e,n,r;To.point=function(i,a){i*=Aa;var o=Math.cos(a*=Aa);e=o*Math.cos(i),n=o*Math.sin(i),r=Math.sin(a),To.point=t,me(e,n,r)}}function be(){To.point=ge}function ye(){function t(t,e){t*=Aa;var n=Math.cos(e*=Aa),o=n*Math.cos(t),s=n*Math.sin(t),l=Math.sin(e),u=i*l-a*s,c=a*o-r*l,d=r*s-i*o,h=Math.sqrt(u*u+c*c+d*d),p=r*o+i*s+a*l,f=h&&-et(p)/h,g=Math.atan2(h,p);No+=f*u,Co+=f*c,Mo+=f*d,mo+=g,Eo+=g*(r+(r=o)),xo+=g*(i+(i=s)),_o+=g*(a+(a=l)),me(r,i,a)}var e,n,r,i,a;To.point=function(o,s){e=o,n=s,To.point=t,o*=Aa;var l=Math.cos(s*=Aa);r=l*Math.cos(o),i=l*Math.sin(o),a=Math.sin(s),me(r,i,a)},To.lineEnd=function(){t(e,n),To.lineEnd=be,To.point=ge}}function Ee(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function xe(){return!0}function _e(t,e,n,r,i){var a=[],o=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(fe(n,r)){i.lineStart();for(var s=0;s<e;++s)i.point((n=t[s])[0],n[1]);i.lineEnd()}else{var l=new Ce(n,t,null,!0),u=new Ce(n,null,l,!1);l.o=u,a.push(l),o.push(u),u=new Ce(r,null,l=new Ce(r,t,null,!1),!0),l.o=u,a.push(l),o.push(u)}}}),o.sort(e),Ne(a),Ne(o),a.length){for(var s=0,l=n,u=o.length;s<u;++s)o[s].e=l=!l;for(var c,d,h=a[0];;){for(var p=h,f=!0;p.v;)if((p=p.n)===h)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(var s=0,u=c.length;s<u;++s)i.point((d=c[s])[0],d[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(f)for(s=(c=p.p.z).length-1;s>=0;--s)i.point((d=c[s])[0],d[1]);else r(p.x,p.p.x,-1,i);p=p.p}c=(p=p.o).z,f=!f}while(!p.v);i.lineEnd()}}}function Ne(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Ce(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Me(t,e,n,r){return function(i,a){function o(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&a.point(e,n)}function s(t,e){var n=i(t,e);m.point(n[0],n[1])}function l(){b.point=s,m.lineStart()}function u(){b.point=o,m.lineEnd()}function c(t,e){g.push([t,e]);var n=i(t,e);E.point(n[0],n[1])}function d(){E.lineStart(),g=[]}function h(){c(g[0][0],g[0][1]),E.lineEnd();var t,e=E.clean(),n=y.buffer(),r=n.length;if(g.pop(),f.push(g),g=null,r)if(1&e){var i,o=-1;if((r=(t=n[0]).length-1)>0){for(x||(a.polygonStart(),x=!0),a.lineStart();++o<r;)a.point((i=t[o])[0],i[1]);a.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),p.push(n.filter(Te))}var p,f,g,m=e(a),v=i.invert(r[0],r[1]),b={point:o,lineStart:l,lineEnd:u,polygonStart:function(){b.point=c,b.lineStart=d,b.lineEnd=h,p=[],f=[]},polygonEnd:function(){b.point=o,b.lineStart=l,b.lineEnd=u,p=Qi.merge(p);var t=function(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;po.reset();for(var s=0,l=e.length;s<l;++s){var u=e[s],c=u.length;if(c)for(var d=u[0],h=d[0],p=d[1]/2+Sa/4,f=Math.sin(p),g=Math.cos(p),m=1;;){m===c&&(m=0);var v=(t=u[m])[0],b=t[1]/2+Sa/4,y=Math.sin(b),E=Math.cos(b),x=v-h,_=x>=0?1:-1,N=_*x,C=N>Sa,M=f*y;if(po.add(Math.atan2(M*_*Math.sin(N),g*E+M*Math.cos(N))),a+=C?x+_*Oa:x,C^h>=n^v>=n){var T=ue(se(d),se(t));he(T);var w=ue(i,T);he(w);var S=(C^x>=0?-1:1)*nt(w[2]);(r>S||r===S&&(T[0]||T[1]))&&(o+=C^x>=0?1:-1)}if(!m++)break;h=v,f=y,g=E,d=t}}return(a<-Ta||a<Ta&&po<-Ta)^1&o}(v,f);p.length?(x||(a.polygonStart(),x=!0),_e(p,Se,t,n,a)):t&&(x||(a.polygonStart(),x=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),x&&(a.polygonEnd(),x=!1),p=f=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}},y=we(),E=e(y),x=!1;return b}}function Te(t){return t.length>1}function we(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:C,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Se(t,e){return((t=t.x)[0]<0?t[1]-Da-Ta:Da-t[1])-((e=e.x)[0]<0?e[1]-Da-Ta:Da-e[1])}function Oe(t,e,n,r){return function(i){var a,o=i.a,s=i.b,l=o.x,u=o.y,c=0,d=1,h=s.x-l,p=s.y-u;if(a=t-l,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<d&&(d=a)}else if(h>0){if(a>d)return;a>c&&(c=a)}if(a=n-l,h||!(a<0)){if(a/=h,h<0){if(a>d)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<d&&(d=a)}if(a=e-u,p||!(a>0)){if(a/=p,p<0){if(a<c)return;a<d&&(d=a)}else if(p>0){if(a>d)return;a>c&&(c=a)}if(a=r-u,p||!(a<0)){if(a/=p,p<0){if(a>d)return;a>c&&(c=a)}else if(p>0){if(a<c)return;a<d&&(d=a)}return c>0&&(i.a={x:l+c*h,y:u+c*p}),d<1&&(i.b={x:l+d*h,y:u+d*p}),i}}}}}}function Re(t,e,n,r){function i(r,i){return ua(r[0]-t)<Ta?i>0?0:3:ua(r[0]-n)<Ta?i>0?2:1:ua(r[1]-e)<Ta?i>0?1:0:i>0?3:2}function a(t,e){return o(t.x,e.x)}function o(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function l(a,s,l,u){var c=0,d=0;if(null==a||(c=i(a,l))!==(d=i(s,l))||o(a,s)<0^l>0)do{u.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+l+4)%4)!==d);else u.point(s[0],s[1])}function u(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function c(t,e){u(t,e)&&s.point(t,e)}function d(t,e){var n=u(t=Math.max(-So,Math.min(So,t)),e=Math.max(-So,Math.min(So,e)));if(p&&f.push([t,e]),x)g=t,m=e,v=n,x=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&E)s.point(t,e);else{var r={a:{x:b,y},b:{x:t,y:e}};M(r)?(E||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),_=!1):n&&(s.lineStart(),s.point(t,e),_=!1)}b=t,y=e,E=n}var h,p,f,g,m,v,b,y,E,x,_,N=s,C=we(),M=Oe(t,e,n,r),T={point:c,lineStart:function(){T.point=d,p&&p.push(f=[]),x=!0,E=!1,b=y=NaN},lineEnd:function(){h&&(d(g,m),v&&E&&C.rejoin(),h.push(C.buffer())),T.point=c,E&&s.lineEnd()},polygonStart:function(){s=C,h=[],p=[],_=!0},polygonEnd:function(){s=N,h=Qi.merge(h);var e=function(t){for(var e=0,n=p.length,r=t[1],i=0;i<n;++i)for(var a,o=1,s=p[i],l=s.length,u=s[0];o<l;++o)a=s[o],u[1]<=r?a[1]>r&&tt(u,a,t)>0&&++e:a[1]<=r&&tt(u,a,t)<0&&--e,u=a;return 0!==e}([t,r]),n=_&&e,i=h.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),l(null,null,1,s),s.lineEnd()),i&&_e(h,a,e,l,s),s.polygonEnd()),h=p=f=null}};return T}}function De(t){var e=0,n=Sa/3,r=ze(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Sa/180,n=t[1]*Sa/180):[e/Sa*180,n/Sa*180]},i}function Ae(t,e){function n(t,e){var n=Math.sqrt(a-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),o-n*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(e))/2,a=1+r*(2*i-r),o=Math.sqrt(a)/i;return n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,nt((a-(t*t+n*n)*i*i)/(2*i))]},n}function Le(){function t(t,e){Ro+=i*t-r*e,r=t,i=e}var e,n,r,i;ko.point=function(a,o){ko.point=t,e=r=a,n=i=o},ko.lineEnd=function(){t(e,n)}}function Ie(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function ke(t,e){vo+=t,bo+=e,++yo}function Ve(){function t(t,r){var i=t-e,a=r-n,o=Math.sqrt(i*i+a*a);Eo+=o*(e+t)/2,xo+=o*(n+r)/2,_o+=o,ke(e=t,n=r)}var e,n;jo.point=function(r,i){jo.point=t,ke(e=r,n=i)}}function je(){jo.point=ke}function He(){function t(t,e){var n=t-r,a=e-i,o=Math.sqrt(n*n+a*a);Eo+=o*(r+t)/2,xo+=o*(i+e)/2,_o+=o,No+=(o=i*t-r*e)*(r+t),Co+=o*(i+e),Mo+=3*o,ke(r=t,i=e)}var e,n,r,i;jo.point=function(a,o){jo.point=t,ke(e=r=a,n=i=o)},jo.lineEnd=function(){t(e,n)}}function $e(t){function e(e){return(a?function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){y=NaN,C.point=o,e.lineStart()}function o(r,i){var o=se([r,i]),s=t(r,i);n(y,E,b,x,_,N,y=s[0],E=s[1],b=r,x=o[0],_=o[1],N=o[2],a,e),e.point(y,E)}function s(){C.point=r,e.lineEnd()}function l(){i(),C.point=u,C.lineEnd=c}function u(t,e){o(d=t,h=e),p=y,f=E,g=x,m=_,v=N,C.point=o}function c(){n(y,E,b,x,_,N,p,f,d,g,m,v,a,e),C.lineEnd=s,s()}var d,h,p,f,g,m,v,b,y,E,x,_,N,C={point:r,lineStart:i,lineEnd:s,polygonStart:function(){e.polygonStart(),C.lineStart=l},polygonEnd:function(){e.polygonEnd(),C.lineStart=i}};return C}:function(e){return Ge(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})})(e)}function n(e,a,o,s,l,u,c,d,h,p,f,g,m,v){var b=c-e,y=d-a,E=b*b+y*y;if(E>4*r&&m--){var x=s+p,_=l+f,N=u+g,C=Math.sqrt(x*x+_*_+N*N),M=Math.asin(N/=C),T=ua(ua(N)-1)<Ta||ua(o-h)<Ta?(o+h)/2:Math.atan2(_,x),w=t(T,M),S=w[0],O=w[1],R=S-e,D=O-a,A=y*R-b*D;(A*A/E>r||ua((b*R+y*D)/E-.5)>.3||s*p+l*f+u*g<i)&&(n(e,a,o,s,l,u,S,O,T,x/=C,_/=C,N,m,v),v.point(S,O),n(S,O,T,x,_,N,c,d,h,p,f,g,m,v))}}var r=.5,i=Math.cos(30*Aa),a=16;return e.precision=function(t){return arguments.length?(a=(r=t*t)>0&&16,e):Math.sqrt(r)},e}function Pe(t){this.stream=t}function Ge(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Fe(t){return ze(function(){return t})()}function ze(t){function e(t){return t=o(t[0]*Aa,t[1]*Aa),[t[0]*d+s,l-t[1]*d]}function n(){o=Ee(a=Be(m,v,b),i);var t=i(f,g);return s=h-t[0]*d,l=p+t[1]*d,r()}function r(){return u&&(u.valid=!1,u=null),e}var i,a,o,s,l,u,c=$e(function(t,e){return t=i(t,e),[t[0]*d+s,l-t[1]*d]}),d=150,h=480,p=250,f=0,g=0,m=0,v=0,b=0,y=wo,E=_,x=null,N=null;return e.stream=function(t){return u&&(u.valid=!1),u=Ue(y(a,c(E(t)))),u.valid=!0,u},e.clipAngle=function(t){return arguments.length?(y=null==t?(x=t,wo):function(t){function e(t,e){return Math.cos(t)*Math.cos(e)>i}function n(t,e,n){var r=[1,0,0],a=ue(se(t),se(e)),o=le(a,a),s=a[0],l=o-s*s;if(!l)return!n&&t;var u=i*o/l,c=-i*s/l,d=ue(r,a),h=de(r,u);ce(h,de(a,c));var p=d,f=le(h,p),g=le(p,p),m=f*f-g*(le(h,h)-1);if(!(m<0)){var v=Math.sqrt(m),b=de(p,(-f-v)/g);if(ce(b,h),b=pe(b),!n)return b;var y,E=t[0],x=e[0],_=t[1],N=e[1];x<E&&(y=E,E=x,x=y);var C=x-E,M=ua(C-Sa)<Ta;if(!M&&N<_&&(y=_,_=N,N=y),M||C<Ta?M?_+N>0^b[1]<(ua(b[0]-E)<Ta?_:N):_<=b[1]&&b[1]<=N:C>Sa^(E<=b[0]&&b[0]<=x)){var T=de(p,(-f+v)/g);return ce(T,h),[b,pe(T)]}}}function r(e,n){var r=a?t:Sa-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var i=Math.cos(t),a=i>0,o=ua(i)>Ta;return Me(e,function(t){var i,s,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(d,h){var p,f=[d,h],g=e(d,h),m=a?g?0:r(d,h):g?r(d+(d<0?Sa:-Sa),h):0;if(!i&&(u=l=g)&&t.lineStart(),g!==l&&(p=n(i,f),(fe(i,p)||fe(f,p))&&(f[0]+=Ta,f[1]+=Ta,g=e(f[0],f[1]))),g!==l)c=0,g?(t.lineStart(),p=n(f,i),t.point(p[0],p[1])):(p=n(i,f),t.point(p[0],p[1]),t.lineEnd()),i=p;else if(o&&i&&a^g){var v;m&s||!(v=n(f,i,!0))||(c=0,a?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||i&&fe(i,f)||t.point(f[0],f[1]),i=f,l=g,s=m},lineEnd:function(){l&&t.lineEnd(),i=null},clean:function(){return c|(u&&l)<<1}}},Xe(t,6*Aa),a?[0,-t]:[-Sa,t-Sa])}((x=+t)*Aa),r()):x},e.clipExtent=function(t){return arguments.length?(N=t,E=t?Re(t[0][0],t[0][1],t[1][0],t[1][1]):_,r()):N},e.scale=function(t){return arguments.length?(d=+t,n()):d},e.translate=function(t){return arguments.length?(h=+t[0],p=+t[1],n()):[h,p]},e.center=function(t){return arguments.length?(f=t[0]%360*Aa,g=t[1]%360*Aa,n()):[f*La,g*La]},e.rotate=function(t){return arguments.length?(m=t[0]%360*Aa,v=t[1]%360*Aa,b=t.length>2?t[2]%360*Aa:0,n()):[m*La,v*La,b*La]},Qi.rebind(e,c,"precision"),function(){return i=t.apply(this,arguments),e.invert=i.invert&&function(t){return(t=o.invert((t[0]-s)/d,(l-t[1])/d))&&[t[0]*La,t[1]*La]},n()}}function Ue(t){return Ge(t,function(e,n){t.point(e*Aa,n*Aa)})}function We(t,e){return[t,e]}function Ye(t,e){return[t>Sa?t-Oa:t<-Sa?t+Oa:t,e]}function Be(t,e,n){return t?e||n?Ee(Ze(t),Je(e,n)):Ze(t):e||n?Je(e,n):Ye}function qe(t){return function(e,n){return e+=t,[e>Sa?e-Oa:e<-Sa?e+Oa:e,n]}}function Ze(t){var e=qe(t);return e.invert=qe(-t),e}function Je(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*r+s*i;return[Math.atan2(l*a-c*o,s*r-u*i),nt(c*a+l*o)]}var r=Math.cos(t),i=Math.sin(t),a=Math.cos(e),o=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*a-l*o;return[Math.atan2(l*a+u*o,s*r+c*i),nt(c*r-s*i)]},n}function Xe(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,a,o,s){var l=o*e;null!=i?(i=Ke(n,i),a=Ke(n,a),(o>0?i<a:i>a)&&(i+=o*Oa)):(i=t+o*Oa,a=t-.5*l);for(var u,c=i;o>0?c>a:c<a;c-=l)s.point((u=pe([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],u[1])}}function Ke(t,e){var n=se(e);n[0]-=t,he(n);var r=et(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Ta)%(2*Math.PI)}function Qe(t,e,n){var r=Qi.range(t,e-Ta,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function tn(t,e,n){var r=Qi.range(t,e-Ta,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function en(t){return t.source}function nn(t){return t.target}function rn(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),a=t(r*i);return[a*i*Math.sin(e),a*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(t*a,r*o),Math.asin(r&&n*a/r)]},n}function an(t,e){function n(t,e){o>0?e<-Da+Ta&&(e=-Da+Ta):e>Da-Ta&&(e=Da-Ta);var n=o/Math.pow(i(e),a);return[n*Math.sin(a*t),o-n*Math.cos(a*t)]}var r=Math.cos(t),i=function(t){return Math.tan(Sa/4+t/2)},a=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(i(e)/i(t)),o=r*Math.pow(i(t),a)/a;return a?(n.invert=function(t,e){var n=o-e,r=Q(a)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/a,2*Math.atan(Math.pow(o/r,1/a))-Da]},n):sn}function on(t,e){function n(t,e){var n=a-e;return[n*Math.sin(i*t),a-n*Math.cos(i*t)]}var r=Math.cos(t),i=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),a=r/i+t;return ua(i)<Ta?We:(n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/i,a-Q(i)*Math.sqrt(t*t+n*n)]},n)}function sn(t,e){return[t,Math.log(Math.tan(Sa/4+e/2))]}function ln(t){var e,n=Fe(t),r=n.scale,i=n.translate,a=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var o=a.apply(n,arguments);if(o===n){if(e=null==t){var s=Sa*r(),l=i();a([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(o=null);return o},n.clipExtent(null)}function un(t,e){return[Math.log(Math.tan(Sa/4+e/2)),-t]}function cn(t){return t[0]}function dn(t){return t[1]}function hn(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;i++){for(;r>1&&tt(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function pn(t,e){return t[0]-e[0]||t[1]-e[1]}function fn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function gn(t,e,n,r){var i=t[0],a=n[0],o=e[0]-i,s=r[0]-a,l=t[1],u=n[1],c=e[1]-l,d=r[1]-u,h=(s*(l-u)-d*(i-a))/(d*o-s*c);return[i+h*o,l+h*c]}function mn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function vn(t){var e=Xo.pop()||new function(){An(this),this.edge=this.site=this.circle=null};return e.site=t,e}function bn(t){Tn(t),qo.remove(t),Xo.push(t),An(t)}function yn(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},a=t.P,o=t.N,s=[t];bn(t);for(var l=a;l.circle&&ua(n-l.circle.x)<Ta&&ua(r-l.circle.cy)<Ta;)a=l.P,s.unshift(l),bn(l),l=a;s.unshift(l),Tn(l);for(var u=o;u.circle&&ua(n-u.circle.x)<Ta&&ua(r-u.circle.cy)<Ta;)o=u.N,s.push(u),bn(u),u=o;s.push(u),Tn(u);var c,d=s.length;for(c=1;c<d;++c)u=s[c],l=s[c-1],On(u.edge,l.site,u.site,i);l=s[0],(u=s[d-1]).edge=Sn(l.site,u.site,null,i),Mn(l),Mn(u)}function En(t){for(var e,n,r,i,a=t.x,o=t.y,s=qo._;s;)if((r=xn(s,o)-a)>Ta)s=s.L;else{if(!((i=a-function(t,e){var n=t.N;if(n)return xn(n,e);var r=t.site;return r.y===e?r.x:1/0}(s,o))>Ta)){r>-Ta?(e=s.P,n=s):i>-Ta?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=vn(t);if(qo.insert(e,l),e||n){if(e===n)return Tn(e),n=vn(e.site),qo.insert(l,n),l.edge=n.edge=Sn(e.site,l.site),Mn(e),void Mn(n);if(n){Tn(e),Tn(n);var u=e.site,c=u.x,d=u.y,h=t.x-c,p=t.y-d,f=n.site,g=f.x-c,m=f.y-d,v=2*(h*m-p*g),b=h*h+p*p,y=g*g+m*m,E={x:(m*b-p*y)/v+c,y:(h*y-g*b)/v+d};On(n.edge,u,f,E),l.edge=Sn(u,t,null,E),n.edge=Sn(t,f,null,E),Mn(e),Mn(n)}else l.edge=Sn(e.site,l.site)}}function xn(t,e){var n=t.site,r=n.x,i=n.y,a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;var s=(n=o.site).x,l=n.y,u=l-e;if(!u)return s;var c=s-r,d=1/a-1/u,h=c/u;return d?(-h+Math.sqrt(h*h-2*d*(c*c/(-2*u)-l+u/2+i-a/2)))/d+r:(r+s)/2}function _n(t){this.site=t,this.edges=[]}function Nn(t){for(var e,n,r,i,a,o,s,l,u,c,d=t[0][0],h=t[1][0],p=t[0][1],f=t[1][1],g=Bo,m=g.length;m--;)if((a=g[m])&&a.prepare())for(l=(s=a.edges).length,o=0;o<l;)r=(c=s[o].end()).x,i=c.y,e=(u=s[++o%l].start()).x,n=u.y,(ua(r-e)>Ta||ua(i-n)>Ta)&&(s.splice(o,0,new Rn(function(t,e,n){var r=new wn(t,null);return r.a=e,r.b=n,Yo.push(r),r}(a.site,c,ua(r-d)<Ta&&f-i>Ta?{x:d,y:ua(e-d)<Ta?n:f}:ua(i-f)<Ta&&h-r>Ta?{x:ua(n-f)<Ta?e:h,y:f}:ua(r-h)<Ta&&i-p>Ta?{x:h,y:ua(e-h)<Ta?n:p}:ua(i-p)<Ta&&r-d>Ta?{x:ua(n-p)<Ta?e:d,y:p}:null),a.site,null)),++l)}function Cn(t,e){return e.angle-t.angle}function Mn(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i.x,s=i.y,l=r.x-o,u=r.y-s,c=a.x-o,d=2*(l*(m=a.y-s)-u*c);if(!(d>=-wa)){var h=l*l+u*u,p=c*c+m*m,f=(m*h-u*p)/d,g=(l*p-c*h)/d,m=g+s,v=Ko.pop()||new function(){An(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=t,v.site=i,v.x=f+o,v.y=m+Math.sqrt(f*f+g*g),v.cy=m,t.circle=v;for(var b=null,y=Jo._;y;)if(v.y<y.y||v.y===y.y&&v.x<=y.x){if(!y.L){b=y.P;break}y=y.L}else{if(!y.R){b=y;break}y=y.R}Jo.insert(b,v),b||(Zo=v)}}}}function Tn(t){var e=t.circle;e&&(e.P||(Zo=e.N),Jo.remove(e),Ko.push(e),An(e),t.circle=null)}function wn(t,e){this.l=t,this.r=e,this.a=this.b=null}function Sn(t,e,n,r){var i=new wn(t,e);return Yo.push(i),n&&On(i,t,e,n),r&&On(i,e,t,r),Bo[t.i].edges.push(new Rn(i,t,e)),Bo[e.i].edges.push(new Rn(i,e,t)),i}function On(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function Rn(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Dn(){this._=null}function An(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Ln(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function In(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function kn(t){for(;t.L;)t=t.L;return t}function Vn(t,e){var n,r,i,a=t.sort(jn).pop();for(Yo=[],Bo=new Array(t.length),qo=new Dn,Jo=new Dn;;)if(i=Zo,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))a.x===n&&a.y===r||(Bo[a.i]=new _n(a),En(a),n=a.x,r=a.y),a=t.pop();else{if(!i)break;yn(i.arc)}e&&(function(t){for(var e,n=Yo,r=Oe(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)(!function(t,e){var n=t.b;if(n)return!0;var r,i,a=t.a,o=e[0][0],s=e[1][0],l=e[0][1],u=e[1][1],c=t.l,d=t.r,h=c.x,p=c.y,f=d.x,g=d.y,m=(h+f)/2,v=(p+g)/2;if(g===p){if(m<o||m>=s)return;if(h>f){if(a){if(a.y>=u)return}else a={x:m,y:l};n={x:m,y:u}}else{if(a){if(a.y<l)return}else a={x:m,y:u};n={x:m,y:l}}}else if(r=(h-f)/(g-p),i=v-r*m,r<-1||r>1)if(h>f){if(a){if(a.y>=u)return}else a={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else{if(a){if(a.y<l)return}else a={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else if(p<g){if(a){if(a.x>=s)return}else a={x:o,y:r*o+i};n={x:s,y:r*s+i}}else{if(a){if(a.x<o)return}else a={x:s,y:r*s+i};n={x:o,y:r*o+i}}return t.a=a,t.b=n,!0}(e=n[i],t)||!r(e)||ua(e.a.x-e.b.x)<Ta&&ua(e.a.y-e.b.y)<Ta)&&(e.a=e.b=null,n.splice(i,1))}(e),Nn(e));var o={cells:Bo,edges:Yo};return qo=Jo=Yo=Bo=null,o}function jn(t,e){return e.y-t.y||e.x-t.x}function Hn(t){return t.x}function $n(t){return t.y}function Pn(t,e,n,r,i,a){if(!t(e,n,r,i,a)){var o=.5*(n+i),s=.5*(r+a),l=e.nodes;l[0]&&Pn(t,l[0],n,r,o,s),l[1]&&Pn(t,l[1],o,r,i,s),l[2]&&Pn(t,l[2],n,s,o,a),l[3]&&Pn(t,l[3],o,s,i,a)}}function Gn(t,e){t=Qi.rgb(t),e=Qi.rgb(e);var n=t.r,r=t.g,i=t.b,a=e.r-n,o=e.g-r,s=e.b-i;return function(t){return"#"+yt(Math.round(n+a*t))+yt(Math.round(r+o*t))+yt(Math.round(i+s*t))}}function Fn(t,e){var n,r={},i={};for(n in t)n in e?r[n]=Wn(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function zn(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Un(t,e){var n,r,i,a=ts.lastIndex=es.lastIndex=0,o=-1,s=[],l=[];for(t+="",e+="";(n=ts.exec(t))&&(r=es.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:zn(n,r)})),a=es.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function Wn(t,e){for(var n,r=Qi.interpolators.length;--r>=0&&!(n=Qi.interpolators[r](t,e)););return n}function Yn(t,e){var n,r=[],i=[],a=t.length,o=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)r.push(Wn(t[n],e[n]));for(;n<a;++n)i[n]=t[n];for(;n<o;++n)i[n]=e[n];return function(t){for(n=0;n<s;++n)i[n]=r[n](t);return i}}function Bn(t){return function(e){return 1-t(1-e)}}function qn(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function Zn(t){return t*t}function Jn(t){return t*t*t}function Xn(t){return 1-Math.cos(t*Da)}function Kn(t){return Math.pow(2,10*(t-1))}function Qn(t){return 1-Math.sqrt(1-t*t)}function tr(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function er(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function nr(t){var e=[t.a,t.b],n=[t.c,t.d],r=ir(e),i=rr(e,n),a=ir(function(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*La,this.translate=[t.e,t.f],this.scale=[r,a],this.skew=a?Math.atan2(i,a)*La:0}function rr(t,e){return t[0]*e[0]+t[1]*e[1]}function ir(t){var e=Math.sqrt(rr(t,t));return e&&(t[0]/=e,t[1]/=e),e}function ar(t){return t.length?t.pop()+",":""}function or(t,e){var n=[],r=[];return t=Qi.transform(t),e=Qi.transform(e),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:zn(t[0],e[0])},{i:i-2,x:zn(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(t.translate,e.translate,n,r),function(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(ar(n)+"rotate(",null,")")-2,x:zn(t,e)})):e&&n.push(ar(n)+"rotate("+e+")")}(t.rotate,e.rotate,n,r),function(t,e,n,r){t!==e?r.push({i:n.push(ar(n)+"skewX(",null,")")-2,x:zn(t,e)}):e&&n.push(ar(n)+"skewX("+e+")")}(t.skew,e.skew,n,r),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(ar(n)+"scale(",null,",",null,")");r.push({i:i-4,x:zn(t[0],e[0])},{i:i-2,x:zn(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(ar(n)+"scale("+e+")")}(t.scale,e.scale,n,r),t=e=null,function(t){for(var e,i=-1,a=r.length;++i<a;)n[(e=r[i]).i]=e.x(t);return n.join("")}}function sr(t){for(var e=t.source,n=t.target,r=function(t,e){if(t===e)return t;var n=lr(t),r=lr(e),i=n.pop(),a=r.pop(),o=null;for(;i===a;)o=i,i=n.pop(),a=r.pop();return o}(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function lr(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function ur(t){t.fixed|=2}function cr(t){t.fixed&=-7}function dr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function hr(t){t.fixed&=-5}function pr(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var a,o=t.nodes,s=o.length,l=-1;++l<s;)null!=(a=o[l])&&(pr(a,e,n),t.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,r+=u*t.point.x,i+=u*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function fr(t,e){return Qi.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=Er,t}function gr(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function mr(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(a=t.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(t=r.pop());)e(t)}function vr(t){return t.children}function br(t){return t.value}function yr(t,e){return e.value-t.value}function Er(t){return Qi.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function xr(t){return t.x}function _r(t){return t.y}function Nr(t,e,n){t.y0=e,t.y=n}function Cr(t){return Qi.range(t.length)}function Mr(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function Tr(t){for(var e,n=1,r=0,i=t[0][1],a=t.length;n<a;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function wr(t){return t.reduce(Sr,0)}function Sr(t,e){return t+e[1]}function Or(t,e){return Rr(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Rr(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,a=[];++n<=e;)a[n]=i*n+r;return a}function Dr(t){return[Qi.min(t),Qi.max(t)]}function Ar(t,e){return t.value-e.value}function Lr(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Ir(t,e){t._pack_next=e,e._pack_prev=t}function kr(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function Vr(t){function e(t){c=Math.min(t.x-t.r,c),d=Math.max(t.x+t.r,d),h=Math.min(t.y-t.r,h),p=Math.max(t.y+t.r,p)}if((n=t.children)&&(u=n.length)){var n,r,i,a,o,s,l,u,c=1/0,d=-1/0,h=1/0,p=-1/0;if(n.forEach(jr),r=n[0],r.x=-r.r,r.y=0,e(r),u>1&&(i=n[1],i.x=i.r,i.y=0,e(i),u>2))for(Pr(r,i,a=n[2]),e(a),Lr(r,a),r._pack_prev=a,Lr(a,i),i=r._pack_next,o=3;o<u;o++){Pr(r,i,a=n[o]);var f=0,g=1,m=1;for(s=i._pack_next;s!==i;s=s._pack_next,g++)if(kr(s,a)){f=1;break}if(1==f)for(l=r._pack_prev;l!==s._pack_prev&&!kr(l,a);l=l._pack_prev,m++);f?(g<m||g==m&&i.r<r.r?Ir(r,i=s):Ir(r=l,i),o--):(Lr(r,a),i=a,e(a))}var v=(c+d)/2,b=(h+p)/2,y=0;for(o=0;o<u;o++)(a=n[o]).x-=v,a.y-=b,y=Math.max(y,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=y,n.forEach(Hr)}}function jr(t){t._pack_next=t._pack_prev=t}function Hr(t){delete t._pack_next,delete t._pack_prev}function $r(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var a=-1,o=i.length;++a<o;)$r(i[a],e,n,r)}function Pr(t,e,n){var r=t.r+n.r,i=e.x-t.x,a=e.y-t.y;if(r&&(i||a)){var o=e.r+n.r,s=i*i+a*a,l=.5+((r*=r)-(o*=o))/(2*s),u=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=t.x+l*i+u*a,n.y=t.y+l*a-u*i}else n.x=t.x+r,n.y=t.y}function Gr(t,e){return t.parent==e.parent?1:2}function Fr(t){var e=t.children;return e.length?e[0]:t.t}function zr(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Ur(t){var e=t.children;return e&&e.length?Ur(e[0]):t}function Wr(t){var e,n=t.children;return n&&(e=n.length)?Wr(n[e-1]):t}function Yr(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Br(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return i<0&&(n+=i/2,i=0),a<0&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function qr(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function Zr(t){return t.rangeExtent?t.rangeExtent():qr(t.range())}function Jr(t,e){var n,r=0,i=t.length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}function Xr(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:hs}function Kr(t,e,n,r){function i(){var i=Math.min(t.length,e.length)>2?function(t,e,n,r){var i=[],a=[],o=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<=s;)i.push(n(t[o-1],t[o])),a.push(r(e[o-1],e[o]));return function(e){var n=Qi.bisect(t,e,1,s)-1;return a[n](i[n](e))}}:function(t,e,n,r){var i=n(t[0],t[1]),a=r(e[0],e[1]);return function(t){return a(i(t))}},l=r?function(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}:function(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}};return o=i(t,e,l,n),s=i(e,t,l,Wn),a}function a(t){return o(t)}var o,s;return a.invert=function(t){return s(t)},a.domain=function(e){return arguments.length?(t=e.map(Number),i()):t},a.range=function(t){return arguments.length?(e=t,i()):e},a.rangeRound=function(t){return a.range(t).interpolate(er)},a.clamp=function(t){return arguments.length?(r=t,i()):r},a.interpolate=function(t){return arguments.length?(n=t,i()):n},a.ticks=function(e){return ni(t,e)},a.tickFormat=function(e,n){return ri(t,e,n)},a.nice=function(e){return ti(t,e),i()},a.copy=function(){return Kr(t,e,n,r)},i()}function Qr(t,e){return Qi.rebind(t,e,"range","rangeRound","interpolate","clamp")}function ti(t,e){return Jr(t,Xr(ei(t,e)[2])),Jr(t,Xr(ei(t,e)[2])),t}function ei(t,e){null==e&&(e=10);var n=qr(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),a=e/r*i;return a<=.15?i*=10:a<=.35?i*=5:a<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function ni(t,e){return Qi.range.apply(Qi,ei(t,e))}function ri(t,e,n){var r=ei(t,e);if(n){var i=Qa.exec(n);if(i.shift(),"s"===i[8]){var a=Qi.formatPrefix(Math.max(ua(r[0]),ua(r[1])));return i[7]||(i[7]="."+ii(a.scale(r[2]))),i[8]="f",n=Qi.format(i.join("")),function(t){return n(a.scale(t))+a.symbol}}i[7]||(i[7]="."+function(t,e){var n=ii(e[2]);return t in ps?Math.abs(n-ii(Math.max(ua(e[0]),ua(e[1]))))+ +("e"!==t):n-2*("%"===t)}(i[8],r)),n=i.join("")}else n=",."+ii(r[2])+"f";return Qi.format(n)}function ii(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function ai(t,e,n,r){function i(t){return(n?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function a(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function o(e){return t(i(e))}return o.invert=function(e){return a(t.invert(e))},o.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(i)),o):r},o.base=function(n){return arguments.length?(e=+n,t.domain(r.map(i)),o):e},o.nice=function(){var e=Jr(r.map(i),n?Math:gs);return t.domain(e),r=e.map(a),o},o.ticks=function(){var t=qr(r),o=[],s=t[0],l=t[1],u=Math.floor(i(s)),c=Math.ceil(i(l)),d=e%1?2:e;if(isFinite(c-u)){if(n){for(;u<c;u++)for(h=1;h<d;h++)o.push(a(u)*h);o.push(a(u))}else for(o.push(a(u));u++<c;)for(var h=d-1;h>0;h--)o.push(a(u)*h);for(u=0;o[u]<s;u++);for(c=o.length;o[c-1]>l;c--);o=o.slice(u,c)}return o},o.tickFormat=function(t,n){if(!arguments.length)return fs;arguments.length<2?n=fs:"function"!=typeof n&&(n=Qi.format(n));var r=Math.max(1,e*t/o.ticks().length);return function(t){var o=t/a(Math.round(i(t)));return o*e<e-.5&&(o*=e),o<=r?n(t):""}},o.copy=function(){return ai(t.copy(),e,n,r)},Qr(o,t)}function oi(t,e,n){function r(e){return t(i(e))}var i=si(e),a=si(1/e);return r.invert=function(e){return a(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(i)),r):n},r.ticks=function(t){return ni(n,t)},r.tickFormat=function(t,e){return ri(n,t,e)},r.nice=function(t){return r.domain(ti(n,t))},r.exponent=function(o){return arguments.length?(i=si(e=o),a=si(1/e),t.domain(n.map(i)),r):e},r.copy=function(){return oi(t.copy(),e,n)},Qr(r,t)}function si(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function li(t,e){function n(n){return a[((i.get(n)||("range"===e.t?i.set(n,t.push(n)):NaN))-1)%a.length]}function r(e,n){return Qi.range(t.length).map(function(t){return e+n*t})}var i,a,o;return n.domain=function(r){if(!arguments.length)return t;t=[],i=new p;for(var a,o=-1,s=r.length;++o<s;)i.has(a=r[o])||i.set(a,t.push(a));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(a=t,o=0,e={t:"range",a:arguments},n):a},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],c=t.length<2?(l=(l+u)/2,0):(u-l)/(t.length-1+s);return a=r(l+c*s/2,c),o=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],c=t.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(t.length-1+s)|0;return a=r(l+Math.round(c*s/2+(u-l-(t.length-1+s)*c)/2),c),o=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],c=i[u-0],d=(i[1-u]-c)/(t.length-s+2*l);return a=r(c+d*l,d),u&&a.reverse(),o=d*(1-s),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],c=i[u-0],d=i[1-u],h=Math.floor((d-c)/(t.length-s+2*l));return a=r(c+Math.round((d-c-(t.length-s)*h)/2),h),u&&a.reverse(),o=Math.round(h*(1-s)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return qr(e.a[0])},n.copy=function(){return li(t,e)},n.domain(t)}function ui(t,e){function n(){var n=0,a=e.length;for(i=[];++n<a;)i[n-1]=Qi.quantile(t,n/a);return r}function r(t){if(!isNaN(t=+t))return e[Qi.bisect(i,t)]}var i;return r.domain=function(e){return arguments.length?(t=e.map(l).filter(u).sort(s),n()):t},r.range=function(t){return arguments.length?(e=t,n()):e},r.quantiles=function(){return i},r.invertExtent=function(n){return(n=e.indexOf(n))<0?[NaN,NaN]:[n>0?i[n-1]:t[0],n<i.length?i[n]:t[t.length-1]]},r.copy=function(){return ui(t,e)},n()}function ci(t,e,n){function r(e){return n[Math.max(0,Math.min(o,Math.floor(a*(e-t))))]}function i(){return a=n.length/(e-t),o=n.length-1,r}var a,o;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],i()):[t,e]},r.range=function(t){return arguments.length?(n=t,i()):n},r.invertExtent=function(e){return e=n.indexOf(e),e=e<0?NaN:e/a+t,[e,e+1/a]},r.copy=function(){return ci(t,e,n)},i()}function di(t,e){function n(n){if(n<=n)return e[Qi.bisect(t,n)]}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return di(t,e)},n}function hi(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return ni(t,e)},e.tickFormat=function(e,n){return ri(t,e,n)},e.copy=function(){return hi(t)},e}function pi(){return 0}function fi(t){return t.innerRadius}function gi(t){return t.outerRadius}function mi(t){return t.startAngle}function vi(t){return t.endAngle}function bi(t){return t&&t.padAngle}function yi(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function Ei(t,e,n,r,i){var a=t[0]-e[0],o=t[1]-e[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),l=s*o,u=-s*a,c=t[0]+l,d=t[1]+u,h=e[0]+l,p=e[1]+u,f=(c+h)/2,g=(d+p)/2,m=h-c,v=p-d,b=m*m+v*v,y=n-r,E=c*p-h*d,x=(v<0?-1:1)*Math.sqrt(Math.max(0,y*y*b-E*E)),_=(E*v-m*x)/b,N=(-E*m-v*x)/b,C=(E*v+m*x)/b,M=(-E*m+v*x)/b,T=_-f,w=N-g,S=C-f,O=M-g;return T*T+w*w>S*S+O*O&&(_=C,N=M),[[_-l,N-u],[_*n/y,N*n/y]]}function xi(t){function e(e){function o(){u.push("M",a(t(c),s))}for(var l,u=[],c=[],d=-1,h=e.length,p=Mt(n),f=Mt(r);++d<h;)i.call(this,l=e[d],d)?c.push([+p.call(this,l,d),+f.call(this,l,d)]):c.length&&(o(),c=[]);return c.length&&o(),u.length?u.join(""):null}var n=cn,r=dn,i=xe,a=_i,o=a.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(o="function"==typeof t?a=t:(a=xs.get(t)||_i).key,e):o},e.tension=function(t){return arguments.length?(s=t,e):s},e}function _i(t){return t.length>1?t.join("L"):t+"Z"}function Ni(t){return t.join("L")+"Z"}function Ci(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function Mi(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function Ti(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return _i(t);var n=t.length!=e.length,r="",i=t[0],a=t[1],o=e[0],s=o,l=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=t[1],l=2),e.length>1){s=e[1],a=t[l],l++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var u=2;u<e.length;u++,l++)a=t[l],s=e[u],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var c=t[l];r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function wi(t,e){for(var n,r=[],i=(1-e)/2,a=t[0],o=t[1],s=1,l=t.length;++s<l;)n=a,a=o,o=t[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function Si(t){if(t.length<3)return _i(t);var e=1,n=t.length,r=t[0],i=r[0],a=r[1],o=[i,i,i,(r=t[1])[0]],s=[a,a,a,r[1]],l=[i,",",a,"L",Oi(Cs,o),",",Oi(Cs,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),Ri(l,o,s);return t.pop(),l.push("L",r),l.join("")}function Oi(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Ri(t,e,n){t.push("C",Oi(_s,e),",",Oi(_s,n),",",Oi(Ns,e),",",Oi(Ns,n),",",Oi(Cs,e),",",Oi(Cs,n))}function Di(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Ai(t){for(var e,n,r,i,a=[],o=function(t){for(var e=0,n=t.length-1,r=[],i=t[0],a=t[1],o=r[0]=Di(i,a);++e<n;)r[e]=(o+(o=Di(i=a,a=t[e+1])))/2;return r[e]=o,r}(t),s=-1,l=t.length-1;++s<l;)e=Di(t[s],t[s+1]),ua(e)<Ta?o[s]=o[s+1]=0:(i=(n=o[s]/e)*n+(r=o[s+1]/e)*r)>9&&(i=3*e/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r);for(s=-1;++s<=l;)i=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}function Li(t){for(var e,n,r,i=-1,a=t.length;++i<a;)n=(e=t[i])[0],r=e[1]-Da,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function Ii(t){function e(e){function l(){g.push("M",s(t(v),d),c,u(t(m.reverse()),d),"Z")}for(var h,p,f,g=[],m=[],v=[],b=-1,y=e.length,E=Mt(n),x=Mt(i),_=n===r?function(){return p}:Mt(r),N=i===a?function(){return f}:Mt(a);++b<y;)o.call(this,h=e[b],b)?(m.push([p=+E.call(this,h,b),f=+x.call(this,h,b)]),v.push([+_.call(this,h,b),+N.call(this,h,b)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var n=cn,r=cn,i=0,a=dn,o=xe,s=_i,l=s.key,u=s,c="L",d=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(i=a=t,e):a},e.y0=function(t){return arguments.length?(i=t,e):i},e.y1=function(t){return arguments.length?(a=t,e):a},e.defined=function(t){return arguments.length?(o=t,e):o},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?s=t:(s=xs.get(t)||_i).key,u=s.reverse||s,c=s.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(d=t,e):d},e}function ki(t){return t.radius}function Vi(t){return[t.x,t.y]}function ji(){return 64}function Hi(){return"circle"}function $i(t){var e=Math.sqrt(t/Sa);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Pi(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Gi(t,e,n){return fa(t,Ds),t.namespace=e,t.id=n,t}function Fi(t,e,n,r){var i=t.id,a=t.namespace;return W(t,"function"==typeof n?function(t,o,s){t[a][i].tween.set(e,r(n.call(t,t.__data__,o,s)))}:(n=r(n),function(t){t[a][i].tween.set(e,n)}))}function zi(t){return null==t&&(t=""),function(){this.textContent=t}}function Ui(t){return null==t?"__transition__":"__transition_"+t+"__"}function Wi(t,e,n,r,i){function a(t){var e=g.delay;if(u.t=e+l,e<=t)return o(t-e);u.c=o}function o(n){var i=f.active,a=f[i];a&&(a.timer.c=null,a.timer.t=NaN,--f.count,delete f[i],a.event&&a.event.interrupt.call(t,t.__data__,a.index));for(var o in f)if(+o<r){var p=f[o];p.timer.c=null,p.timer.t=NaN,--f.count,delete f[o]}u.c=s,St(function(){return u.c&&s(n||1)&&(u.c=null,u.t=NaN),1},0,l),f.active=r,g.event&&g.event.start.call(t,t.__data__,e),h=[],g.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&h.push(r)}),d=g.ease,c=g.duration}function s(i){for(var a=i/c,o=d(a),s=h.length;s>0;)h[--s].call(t,o);if(a>=1)return g.event&&g.event.end.call(t,t.__data__,e),--f.count?delete f[r]:delete t[n],1}var l,u,c,d,h,f=t[n]||(t[n]={active:0,count:0}),g=f[r];g||(l=i.time,u=St(a,0,l),g=f[r]={tween:new p,time:l,timer:u,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++f.count)}function Yi(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function Bi(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}function qi(t){return t.toISOString()}function Zi(t,e,n){function r(e){return t(e)}function i(t,n){var r=(t[1]-t[0])/n,i=Qi.bisect(Ps,r);return i==Ps.length?[e.year,ei(t.map(function(t){return t/31536e6}),n)[2]]:i?e[r/Ps[i-1]<Ps[i]/r?i-1:i]:[zs,ei(t,n)[2]]}return r.invert=function(e){return Ji(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(Ji)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,Ji(+n+1),e).length}var a=r.domain(),o=qr(a),s=null==t?i(o,10):"number"==typeof t&&i(o,t);return s&&(t=s[0],e=s[1]),r.domain(Jr(a,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=Ji(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=Ji(+e+1);return e}}:t))},r.ticks=function(t,e){var n=qr(r.domain()),a=null==t?i(n,10):"number"==typeof t?i(n,t):!t.range&&[{range:t},e];return a&&(t=a[0],e=a[1]),t.range(n[0],Ji(+n[1]+1),e<1?1:e)},r.tickFormat=function(){return n},r.copy=function(){return Zi(t.copy(),e,n)},Qr(r,t)}function Ji(t){return new Date(t)}function Xi(t){return JSON.parse(t.responseText)}function Ki(t){var e=na.createRange();return e.selectNode(na.body),e.createContextualFragment(t.responseText)}var Qi={version:"3.5.17"},ta=[].slice,ea=function(t){return ta.call(t)},na=this.document;if(na)try{ea(na.documentElement.childNodes)[0].nodeType}catch(t){ea=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),na)try{na.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var ra=this.Element.prototype,ia=ra.setAttribute,aa=ra.setAttributeNS,oa=this.CSSStyleDeclaration.prototype,sa=oa.setProperty;ra.setAttribute=function(t,e){ia.call(this,t,e+"")},ra.setAttributeNS=function(t,e,n){aa.call(this,t,e,n+"")},oa.setProperty=function(t,e,n){sa.call(this,t,e+"",n)}}Qi.ascending=s,Qi.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},Qi.min=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},Qi.max=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},Qi.extent=function(t,e){var n,r,i,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=t[a])&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=t[a])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++a<o;)if(null!=(r=e.call(t,t[a],a))&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=e.call(t,t[a],a))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},Qi.sum=function(t,e){var n,r=0,i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)u(n=+t[a])&&(r+=n);else for(;++a<i;)u(n=+e.call(t,t[a],a))&&(r+=n);return r},Qi.mean=function(t,e){var n,r=0,i=t.length,a=-1,o=i;if(1===arguments.length)for(;++a<i;)u(n=l(t[a]))?r+=n:--o;else for(;++a<i;)u(n=l(e.call(t,t[a],a)))?r+=n:--o;if(o)return r/o},Qi.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],a=n-r;return a?i+a*(t[r]-i):i},Qi.median=function(t,e){var n,r=[],i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)u(n=l(t[a]))&&r.push(n);else for(;++a<i;)u(n=l(e.call(t,t[a],a)))&&r.push(n);if(r.length)return Qi.quantile(r.sort(s),.5)},Qi.variance=function(t,e){var n,r,i=t.length,a=0,o=0,s=-1,c=0;if(1===arguments.length)for(;++s<i;)u(n=l(t[s]))&&(o+=(r=n-a)*(n-(a+=r/++c)));else for(;++s<i;)u(n=l(e.call(t,t[s],s)))&&(o+=(r=n-a)*(n-(a+=r/++c)));if(c>1)return o/(c-1)},Qi.deviation=function(){var t=Qi.variance.apply(this,arguments);return t?Math.sqrt(t):t};var la=c(s);Qi.bisectLeft=la.left,Qi.bisect=Qi.bisectRight=la.right,Qi.bisector=function(t){return c(1===t.length?function(e,n){return s(t(e),n)}:t)},Qi.shuffle=function(t,e,n){(a=arguments.length)<3&&(n=t.length,a<2&&(e=0));for(var r,i,a=n-e;a;)i=Math.random()*a--|0,r=t[a+e],t[a+e]=t[i+e],t[i+e]=r;return t},Qi.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},Qi.pairs=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i},Qi.transpose=function(t){if(!(i=t.length))return[];for(var e=-1,n=Qi.min(t,d),r=new Array(n);++e<n;)for(var i,a=-1,o=r[e]=new Array(i);++a<i;)o[a]=t[a][e];return r},Qi.zip=function(){return Qi.transpose(arguments)},Qi.keys=function(t){var e=[];for(var n in t)e.push(n);return e},Qi.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},Qi.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},Qi.merge=function(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=new Array(o);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--o]=r[e];return n};var ua=Math.abs;Qi.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var r,i=[],a=function(t){for(var e=1;t*e%1;)e*=10;return e}(ua(n)),o=-1;if(t*=a,e*=a,(n*=a)<0)for(;(r=t+n*++o)>e;)i.push(r/a);else for(;(r=t+n*++o)<e;)i.push(r/a);return i},Qi.map=function(t,e){var n=new p;if(t instanceof p)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,a=t.length;if(1===arguments.length)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e.call(t,r=t[i],i),r)}else for(var o in t)n.set(o,t[o]);return n};var ca="__proto__",da="\0";h(p,{has:m,get:function(t){return this._[f(t)]},set:function(t,e){return this._[f(t)]=e},remove:v,keys:b,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:g(e),value:this._[e]});return t},size:y,empty:E,forEach:function(t){for(var e in this._)t.call(this,g(e),this._[e])}}),Qi.nest=function(){function t(e,o,s){if(s>=a.length)return r?r.call(i,o):n?o.sort(n):o;for(var l,u,c,d,h=-1,f=o.length,g=a[s++],m=new p;++h<f;)(d=m.get(l=g(u=o[h])))?d.push(u):m.set(l,[u]);return e?(u=e(),c=function(n,r){u.set(n,t(e,r,s))}):(u={},c=function(n,r){u[n]=t(e,r,s)}),m.forEach(c),u}function e(t,n){if(n>=a.length)return t;var r=[],i=o[n++];return t.forEach(function(t,i){r.push({key:t,values:e(i,n)})}),i?r.sort(function(t,e){return i(t.key,e.key)}):r}var n,r,i={},a=[],o=[];return i.map=function(e,n){return t(n,e,0)},i.entries=function(n){return e(t(Qi.map,n,0),0)},i.key=function(t){return a.push(t),i},i.sortKeys=function(t){return o[a.length-1]=t,i},i.sortValues=function(t){return n=t,i},i.rollup=function(t){return r=t,i},i},Qi.set=function(t){var e=new x;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},h(x,{has:m,add:function(t){return this._[f(t+="")]=!0,t},remove:v,values:b,size:y,empty:E,forEach:function(t){for(var e in this._)t.call(this,g(e))}}),Qi.behavior={},Qi.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=function(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}(t,e,e[n]);return t};var ha=["webkit","ms","moz","Moz","o","O"];Qi.dispatch=function(){for(var t=new M,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=T(t);return t},M.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},Qi.event=null,Qi.requote=function(t){return t.replace(pa,"\\$&")};var pa=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,fa={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},ga=function(t,e){return e.querySelector(t)},ma=function(t,e){return e.querySelectorAll(t)},va=function(t,e){var n=t.matches||t[N(t,"matchesSelector")];return(va=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(ga=function(t,e){return Sizzle(t,e)[0]||null},ma=Sizzle,va=Sizzle.matchesSelector),Qi.selection=function(){return Qi.select(na.documentElement)};var ba=Qi.selection.prototype=[];ba.select=function(t){var e,n,r,i,a=[];t=D(t);for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(r=this[o]).parentNode;for(var l=-1,u=r.length;++l<u;)(i=r[l])?(e.push(n=t.call(i,i.__data__,l,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return R(a)},ba.selectAll=function(t){var e,n,r=[];t=A(t);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],s=-1,l=o.length;++s<l;)(n=o[s])&&(r.push(e=ea(t.call(n,n.__data__,s,i))),e.parentNode=n);return R(r)};var ya="http://www.w3.org/1999/xhtml",Ea={svg:"http://www.w3.org/2000/svg",xhtml:ya,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Qi.ns={prefix:Ea,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Ea.hasOwnProperty(n)?{space:Ea[n],local:t}:t}},ba.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return(t=Qi.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(L(e,t[e]));return this}return this.each(L(t,e))},ba.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=V(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!k(t[i]).test(e))return!1;return!0}for(e in t)this.each(j(e,t[e]));return this}return this.each(j(t,e))},ba.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){r<2&&(e="");for(n in t)this.each($(n,t[n],e));return this}if(r<2){var i=this.node();return o(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each($(t,e,n))},ba.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(P(e,t[e]));return this}return this.each(P(t,e))},ba.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},ba.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},ba.append=function(t){return t=G(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},ba.insert=function(t,e){return t=G(t),e=D(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},ba.remove=function(){return this.each(F)},ba.data=function(t,e){function n(t,n){var r,i,a,o=t.length,c=n.length,d=Math.min(o,c),h=new Array(c),f=new Array(c),g=new Array(o);if(e){var m,v=new p,b=new Array(o);for(r=-1;++r<o;)(i=t[r])&&(v.has(m=e.call(i,i.__data__,r))?g[r]=i:v.set(m,i),b[r]=m);for(r=-1;++r<c;)(i=v.get(m=e.call(n,a=n[r],r)))?!0!==i&&(h[r]=i,i.__data__=a):f[r]=z(a),v.set(m,!0);for(r=-1;++r<o;)r in b&&!0!==v.get(b[r])&&(g[r]=t[r])}else{for(r=-1;++r<d;)i=t[r],a=n[r],i?(i.__data__=a,h[r]=i):f[r]=z(a);for(;r<c;++r)f[r]=z(n[r]);for(;r<o;++r)g[r]=t[r]}f.update=h,f.parentNode=h.parentNode=g.parentNode=t.parentNode,s.push(f),l.push(h),u.push(g)}var r,i,a=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(r=this[0]).length);++a<o;)(i=r[a])&&(t[a]=i.__data__);return t}var s=Y([]),l=R([]),u=R([]);if("function"==typeof t)for(;++a<o;)n(r=this[a],t.call(r,r.parentNode.__data__,a));else for(;++a<o;)n(r=this[a],t);return l.enter=function(){return s},l.exit=function(){return u},l},ba.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},ba.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=U(t));for(var a=0,o=this.length;a<o;a++){i.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&t.call(r,r.__data__,s,a)&&e.push(r)}return R(i)},ba.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},ba.sort=function(t){t=function(t){return arguments.length||(t=s),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},ba.each=function(t){return W(this,function(e,n,r){t.call(e,e.__data__,n,r)})},ba.call=function(t){var e=ea(arguments);return t.apply(e[0]=this,e),this},ba.empty=function(){return!this.node()},ba.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var a=n[r];if(a)return a}return null},ba.size=function(){var t=0;return W(this,function(){++t}),t};var xa=[];Qi.selection.enter=Y,Qi.selection.enter.prototype=xa,xa.append=ba.append,xa.empty=ba.empty,xa.node=ba.node,xa.call=ba.call,xa.size=ba.size,xa.select=function(t){for(var e,n,r,i,a,o=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,o.push(e=[]),e.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;)(a=i[u])?(e.push(r[u]=n=t.call(i.parentNode,a.__data__,u,s)),n.__data__=a.__data__):e.push(null)}return R(o)},xa.insert=function(t,e){return arguments.length<2&&(e=function(t){var e,n;return function(r,i,a){var o,s=t[a].update,l=s.length;for(a!=n&&(n=a,e=0),i>=e&&(e=i+1);!(o=s[e])&&++e<l;);return o}}(this)),ba.insert.call(this,t,e)},Qi.select=function(t){var e;return"string"==typeof t?(e=[ga(t,na)]).parentNode=na.documentElement:(e=[t]).parentNode=a(t),R([e])},Qi.selectAll=function(t){var e;return"string"==typeof t?(e=ea(ma(t,na))).parentNode=na.documentElement:(e=ea(t)).parentNode=null,R([e])},ba.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){r<2&&(e=!1);for(n in t)this.each(B(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(B(t,e,n))};var _a=Qi.map({mouseenter:"mouseover",mouseleave:"mouseout"});na&&_a.forEach(function(t){"on"+t in na&&_a.remove(t)});var Na,Ca=0;Qi.mouse=function(t){return X(t,S())};var Ma=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;Qi.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=S().changedTouches),e)for(var r,i=0,a=e.length;i<a;++i)if((r=e[i]).identifier===n)return X(t,r)},Qi.behavior.drag=function(){function t(){this.on("mousedown.drag",i).on("touchstart.drag",a)}function e(t,e,i,a,o){return function(){var s,l=this,u=Qi.event.target.correspondingElement||Qi.event.target,c=l.parentNode,d=n.of(l,arguments),h=0,p=t(),f=".drag"+(null==p?"":"-"+p),g=Qi.select(i(u)).on(a+f,function(){var t,n,r=e(c,p);r&&(t=r[0]-v[0],n=r[1]-v[1],h|=t|n,v=r,d({type:"drag",x:r[0]+s[0],y:r[1]+s[1],dx:t,dy:n}))}).on(o+f,function(){e(c,p)&&(g.on(a+f,null).on(o+f,null),m(h),d({type:"dragend"}))}),m=J(u),v=e(c,p);s=r?[(s=r.apply(l,arguments)).x-v[0],s.y-v[1]]:[0,0],d({type:"dragstart"})}}var n=O(t,"drag","dragstart","dragend"),r=null,i=e(C,Qi.mouse,o,"mousemove","mouseup"),a=e(K,Qi.touch,_,"touchmove","touchend");return t.origin=function(e){return arguments.length?(r=e,t):r},Qi.rebind(t,n,"on")},Qi.touches=function(t,e){return arguments.length<2&&(e=S().touches),e?ea(e).map(function(e){var n=X(t,e);return n.identifier=e.identifier,n}):[]};var Ta=1e-6,wa=Ta*Ta,Sa=Math.PI,Oa=2*Sa,Ra=Oa-Ta,Da=Sa/2,Aa=Sa/180,La=180/Sa,Ia=Math.SQRT2;Qi.interpolateZoom=function(t,e){var n,r,i=t[0],a=t[1],o=t[2],s=e[0],l=e[1],u=e[2],c=s-i,d=l-a,h=c*c+d*d;if(h<wa)r=Math.log(u/o)/Ia,n=function(t){return[i+t*c,a+t*d,o*Math.exp(Ia*t*r)]};else{var p=Math.sqrt(h),f=(u*u-o*o+4*h)/(2*o*2*p),g=(u*u-o*o-4*h)/(2*u*2*p),m=Math.log(Math.sqrt(f*f+1)-f),v=Math.log(Math.sqrt(g*g+1)-g);r=(v-m)/Ia,n=function(t){var e=t*r,n=rt(m),s=o/(2*p)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(Ia*e+m)-function(t){return((t=Math.exp(t))-1/t)/2}(m));return[i+s*c,a+s*d,o*n/rt(Ia*e+m)]}}return n.duration=1e3*r,n},Qi.behavior.zoom=function(){function t(t){t.on(R,c).on(Va+".zoom",h).on("dblclick.zoom",p).on(L,d)}function e(t){return[(t[0]-N.x)/N.k,(t[1]-N.y)/N.k]}function n(t){N.k=Math.max(M[0],Math.min(M[1],t))}function r(t,e){e=function(t){return[t[0]*N.k+N.x,t[1]*N.k+N.y]}(e),N.x+=t[0]-e[0],N.y+=t[1]-e[1]}function i(e,i,a,o){e.__chart__={x:N.x,y:N.y,k:N.k},n(Math.pow(2,o)),r(g=i,a),e=Qi.select(e),T>0&&(e=e.transition().duration(T)),e.call(t.event)}function a(){E&&E.domain(y.range().map(function(t){return(t-N.x)/N.k}).map(y.invert)),_&&_.domain(x.range().map(function(t){return(t-N.y)/N.k}).map(x.invert))}function s(t){S++||t({type:"zoomstart"})}function l(t){a(),t({type:"zoom",scale:N.k,translate:[N.x,N.y]})}function u(t){--S||(t({type:"zoomend"}),g=null)}function c(){var t=this,n=I.of(t,arguments),i=0,a=Qi.select(o(t)).on(D,function(){i=1,r(Qi.mouse(t),c),l(n)}).on(A,function(){a.on(D,null).on(A,null),d(i),u(n)}),c=e(Qi.mouse(t)),d=J(t);Rs.call(t),s(n)}function d(){function t(){var t=Qi.touches(f);return p=N.k,t.forEach(function(t){t.identifier in m&&(m[t.identifier]=e(t))}),t}function a(){var e=Qi.event.target;Qi.select(e).on(E,o).on(x,h),_.push(e);for(var n=Qi.event.changedTouches,r=0,a=n.length;r<a;++r)m[n[r].identifier]=null;var s=t(),l=Date.now();if(1===s.length){if(l-b<500){u=s[0];i(f,u,m[u.identifier],Math.floor(Math.log(N.k)/Math.LN2)+1),w()}b=l}else if(s.length>1){var u=s[0],c=s[1],d=u[0]-c[0],p=u[1]-c[1];v=d*d+p*p}}function o(){var t,e,i,a,o=Qi.touches(f);Rs.call(f);for(var s=0,u=o.length;s<u;++s,a=null)if(i=o[s],a=m[i.identifier]){if(e)break;t=i,e=a}if(a){var c=(c=i[0]-t[0])*c+(c=i[1]-t[1])*c,d=v&&Math.sqrt(c/v);t=[(t[0]+i[0])/2,(t[1]+i[1])/2],e=[(e[0]+a[0])/2,(e[1]+a[1])/2],n(d*p)}b=null,r(t,e),l(g)}function h(){if(Qi.event.touches.length){for(var e=Qi.event.changedTouches,n=0,r=e.length;n<r;++n)delete m[e[n].identifier];for(var i in m)return void t()}Qi.selectAll(_).on(y,null),C.on(R,c).on(L,d),M(),u(g)}var p,f=this,g=I.of(f,arguments),m={},v=0,y=".zoom-"+Qi.event.changedTouches[0].identifier,E="touchmove"+y,x="touchend"+y,_=[],C=Qi.select(f),M=J(f);a(),s(g),C.on(R,null).on(L,a)}function h(){var t=I.of(this,arguments);v?clearTimeout(v):(Rs.call(this),f=e(g=m||Qi.mouse(this)),s(t)),v=setTimeout(function(){v=null,u(t)},50),w(),n(Math.pow(2,.002*ka())*N.k),r(g,f),l(t)}function p(){var t=Qi.mouse(this),n=Math.log(N.k)/Math.LN2;i(this,t,e(t),Qi.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var f,g,m,v,b,y,E,x,_,N={x:0,y:0,k:1},C=[960,500],M=ja,T=250,S=0,R="mousedown.zoom",D="mousemove.zoom",A="mouseup.zoom",L="touchstart.zoom",I=O(t,"zoomstart","zoom","zoomend");return Va||(Va="onwheel"in na?(ka=function(){return-Qi.event.deltaY*(Qi.event.deltaMode?120:1)},"wheel"):"onmousewheel"in na?(ka=function(){return Qi.event.wheelDelta},"mousewheel"):(ka=function(){return-Qi.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=I.of(this,arguments),e=N;Ss?Qi.select(this).transition().each("start.zoom",function(){N=this.__chart__||{x:0,y:0,k:1},s(t)}).tween("zoom:zoom",function(){var n=C[0],r=C[1],i=g?g[0]:n/2,a=g?g[1]:r/2,o=Qi.interpolateZoom([(i-N.x)/N.k,(a-N.y)/N.k,n/N.k],[(i-e.x)/e.k,(a-e.y)/e.k,n/e.k]);return function(e){var r=o(e),s=n/r[2];this.__chart__=N={x:i-r[0]*s,y:a-r[1]*s,k:s},l(t)}}).each("interrupt.zoom",function(){u(t)}).each("end.zoom",function(){u(t)}):(this.__chart__=N,s(t),l(t),u(t))})},t.translate=function(e){return arguments.length?(N={x:+e[0],y:+e[1],k:N.k},a(),t):[N.x,N.y]},t.scale=function(e){return arguments.length?(N={x:N.x,y:N.y,k:null},n(+e),a(),t):N.k},t.scaleExtent=function(e){return arguments.length?(M=null==e?ja:[+e[0],+e[1]],t):M},t.center=function(e){return arguments.length?(m=e&&[+e[0],+e[1]],t):m},t.size=function(e){return arguments.length?(C=e&&[+e[0],+e[1]],t):C},t.duration=function(e){return arguments.length?(T=+e,t):T},t.x=function(e){return arguments.length?(E=e,y=e.copy(),N={x:0,y:0,k:1},t):E},t.y=function(e){return arguments.length?(_=e,x=e.copy(),N={x:0,y:0,k:1},t):_},Qi.rebind(t,I,"on")};var ka,Va,ja=[0,1/0];Qi.color=at,at.prototype.toString=function(){return this.rgb()+""},Qi.hsl=ot;var Ha=ot.prototype=new at;Ha.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new ot(this.h,this.s,this.l/t)},Ha.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ot(this.h,this.s,t*this.l)},Ha.rgb=function(){return st(this.h,this.s,this.l)},Qi.hcl=lt;var $a=lt.prototype=new at;$a.brighter=function(t){return new lt(this.h,this.c,Math.min(100,this.l+Pa*(arguments.length?t:1)))},$a.darker=function(t){return new lt(this.h,this.c,Math.max(0,this.l-Pa*(arguments.length?t:1)))},$a.rgb=function(){return ut(this.h,this.c,this.l).rgb()},Qi.lab=ct;var Pa=18,Ga=.95047,Fa=1,za=1.08883,Ua=ct.prototype=new at;Ua.brighter=function(t){return new ct(Math.min(100,this.l+Pa*(arguments.length?t:1)),this.a,this.b)},Ua.darker=function(t){return new ct(Math.max(0,this.l-Pa*(arguments.length?t:1)),this.a,this.b)},Ua.rgb=function(){return dt(this.l,this.a,this.b)},Qi.rgb=mt;var Wa=mt.prototype=new at;Wa.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b;return e||n||r?(e&&e<30&&(e=30),n&&n<30&&(n=30),r&&r<30&&(r=30),new mt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new mt(30,30,30)},Wa.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new mt(t*this.r,t*this.g,t*this.b)},Wa.hsl=function(){return xt(this.r,this.g,this.b)},Wa.toString=function(){return"#"+yt(this.r)+yt(this.g)+yt(this.b)};var Ya=Qi.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ya.forEach(function(t,e){Ya.set(t,vt(e))}),Qi.functor=Mt,Qi.xhr=Tt(_),Qi.dsv=function(t,e){function n(t,n,a){arguments.length<3&&(a=n,n=null);var o=wt(t,e,null==n?r:i(n),a);return o.row=function(t){return arguments.length?o.response(null==(n=t)?r:i(t)):n},o}function r(t){return n.parse(t.responseText)}function i(t){return function(e){return n.parse(e.responseText,t)}}function a(e){return e.map(o).join(t)}function o(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,function(t,n){if(r)return r(t,n-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,n){return e(i(t),n)}:i})},n.parseRows=function(t,e){function n(){if(c>=u)return o;if(i)return i=!1,a;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<u;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;return 13===(r=t.charCodeAt(n+1))?(i=!0,10===t.charCodeAt(n+2)&&++c):10===r&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;c<u;){var r=t.charCodeAt(c++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===t.charCodeAt(c)&&(++c,++s);else if(r!==l)continue;return t.slice(e,c-s)}return t.slice(e)}for(var r,i,a={},o={},s=[],u=t.length,c=0,d=0;(r=n())!==o;){for(var h=[];r!==a&&r!==o;)h.push(r),r=n();e&&null==(h=e(h,d++))||s.push(h)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new x,i=[];return e.forEach(function(t){for(var e in t)r.has(e)||i.push(r.add(e))}),[i.map(o).join(t)].concat(e.map(function(e){return i.map(function(t){return o(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(a).join("\n")},n},Qi.csv=Qi.dsv(",","text/csv"),Qi.tsv=Qi.dsv("\t","text/tab-separated-values");var Ba,qa,Za,Ja,Xa=this[N(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};Qi.timer=function(){St.apply(this,arguments)},Qi.timer.flush=function(){Rt(),Dt()},Qi.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Ka=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*ua(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}});Qi.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=Qi.round(t,At(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Ka[8+n/3]};var Qa=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,to=Qi.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=Qi.round(t,At(t,e))).toFixed(Math.max(0,Math.min(20,At(t*(1+1e-15),e))))}}),eo=Qi.time={},no=Date;Lt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ro.setUTCDate.apply(this._,arguments)},setDay:function(){ro.setUTCDay.apply(this._,arguments)},setFullYear:function(){ro.setUTCFullYear.apply(this._,arguments)},setHours:function(){ro.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ro.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ro.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ro.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ro.setUTCSeconds.apply(this._,arguments)},setTime:function(){ro.setTime.apply(this._,arguments)}};var ro=Date.prototype;eo.year=It(function(t){return(t=eo.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),eo.years=eo.year.range,eo.years.utc=eo.year.utc.range,eo.day=It(function(t){var e=new no(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),eo.days=eo.day.range,eo.days.utc=eo.day.utc.range,eo.dayOfYear=function(t){var e=eo.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=eo[t]=It(function(t){return(t=eo.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=eo.year(t).getDay();return Math.floor((eo.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});eo[t+"s"]=n.range,eo[t+"s"].utc=n.utc.range,eo[t+"OfYear"]=function(t){var n=eo.year(t).getDay();return Math.floor((eo.dayOfYear(t)+(n+e)%7)/7)}}),eo.week=eo.sunday,eo.weeks=eo.sunday.range,eo.weeks.utc=eo.sunday.utc.range,eo.weekOfYear=eo.sundayOfYear;var io={"-":"",_:" ",0:"0"},ao=/^\s*\d+/,oo=/^%/;Qi.locale=function(t){return{numberFormat:function(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,a=r&&n?function(t,e){for(var i=t.length,a=[],o=0,s=r[0],l=0;i>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),a.push(t.substring(i-=s,i+s)),!((l+=s+1)>e));)s=r[o=(o+1)%r.length];return a.reverse().join(n)}:_;return function(t){var n=Qa.exec(t),r=n[1]||" ",o=n[2]||">",s=n[3]||"-",l=n[4]||"",u=n[5],c=+n[6],d=n[7],h=n[8],p=n[9],f=1,g="",m="",v=!1,b=!0;switch(h&&(h=+h.substring(1)),(u||"0"===r&&"="===o)&&(u=r="0",o="="),p){case"n":d=!0,p="g";break;case"%":f=100,m="%",p="f";break;case"p":f=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+p.toLowerCase());case"c":b=!1;case"d":v=!0,h=0;break;case"s":f=-1,p="r"}"$"===l&&(g=i[0],m=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):"e"!=p&&"f"!=p||(h=Math.max(0,Math.min(20,h)))),p=to.get(p)||function(t){return t+""};var y=u&&d;return function(t){var n=m;if(v&&t%1)return"";var i=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===s?"":s;if(f<0){var l=Qi.formatPrefix(t,h);t=l.scale(t),n=l.symbol+m}else t*=f;var E,x,_=(t=p(t,h)).lastIndexOf(".");if(_<0){var N=b?t.lastIndexOf("e"):-1;N<0?(E=t,x=""):(E=t.substring(0,N),x=t.substring(N))}else E=t.substring(0,_),x=e+t.substring(_+1);!u&&d&&(E=a(E,1/0));var C=g.length+E.length+x.length+(y?0:i.length),M=C<c?new Array(C=c-C+1).join(r):"";return y&&(E=a(M+E,M.length?c-x.length:1/0)),i+=g,t=E+x,("<"===o?i+t+M:">"===o?M+i+t:"^"===o?M.substring(0,C>>=1)+i+t+M.substring(C):i+(y?t:M+t))+n}}}(t),timeFormat:function(t){function e(t){function e(e){for(var n,i,a,o=[],s=-1,l=0;++s<r;)37===t.charCodeAt(s)&&(o.push(t.slice(l,s)),null!=(i=io[n=t.charAt(++s)])&&(n=t.charAt(++s)),(a=E[n])&&(n=a(e,null==i?"e"===n?" ":"0":i)),o.push(n),l=s+1);return o.push(t.slice(l,s)),o.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(n(r,t,e,0)!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&no!==Lt,a=new(i?Lt:no);return"j"in r?a.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?a._:a},e.toString=function(){return t},e}function n(t,e,n,r){for(var i,a,o,s=0,l=e.length,u=n.length;s<l;){if(r>=u)return-1;if(37===(i=e.charCodeAt(s++))){if(o=e.charAt(s++),!(a=x[o in io?e.charAt(s++):o])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}var r=t.dateTime,i=t.date,a=t.time,o=t.periods,s=t.days,l=t.shortDays,u=t.months,c=t.shortMonths;e.multi=(e.utc=function(t){function n(t){try{var e=new(no=Lt);return e._=t,r(e)}finally{no=Date}}var r=e(t);return n.parse=function(t){try{no=Lt;var e=r.parse(t);return e&&e._}finally{no=Date}},n.toString=r.toString,n}).multi=te;var d=Qi.map(),h=jt(s),p=Ht(s),f=jt(l),g=Ht(l),m=jt(u),v=Ht(u),b=jt(c),y=Ht(c);o.forEach(function(t,e){d.set(t.toLowerCase(),e)});var E={a:function(t){return l[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:e(r),d:function(t,e){return Vt(t.getDate(),e,2)},e:function(t,e){return Vt(t.getDate(),e,2)},H:function(t,e){return Vt(t.getHours(),e,2)},I:function(t,e){return Vt(t.getHours()%12||12,e,2)},j:function(t,e){return Vt(1+eo.dayOfYear(t),e,3)},L:function(t,e){return Vt(t.getMilliseconds(),e,3)},m:function(t,e){return Vt(t.getMonth()+1,e,2)},M:function(t,e){return Vt(t.getMinutes(),e,2)},p:function(t){return o[+(t.getHours()>=12)]},S:function(t,e){return Vt(t.getSeconds(),e,2)},U:function(t,e){return Vt(eo.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Vt(eo.mondayOfYear(t),e,2)},x:e(i),X:e(a),y:function(t,e){return Vt(t.getFullYear()%100,e,2)},Y:function(t,e){return Vt(t.getFullYear()%1e4,e,4)},Z:Kt,"%":function(){return"%"}},x={a:function(t,e,n){f.lastIndex=0;var r=f.exec(e.slice(n));return r?(t.w=g.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){h.lastIndex=0;var r=h.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){b.lastIndex=0;var r=b.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){m.lastIndex=0;var r=m.exec(e.slice(n));return r?(t.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,e,r){return n(t,E.c.toString(),e,r)},d:Yt,e:Yt,H:qt,I:qt,j:Bt,L:Xt,m:Wt,M:Zt,p:function(t,e,n){var r=d.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)},S:Jt,U:Pt,w:$t,W:Gt,x:function(t,e,r){return n(t,E.x.toString(),e,r)},X:function(t,e,r){return n(t,E.X.toString(),e,r)},y:zt,Y:Ft,Z:Ut,"%":Qt};return e}(t)}};var so=Qi.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Qi.format=so.numberFormat,Qi.geo={},ee.prototype={s:0,t:0,add:function(t){ne(t,this.t,lo),ne(lo.s,this.s,this),this.s?this.t+=lo.t:this.s=lo.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var lo=new ee;Qi.geo.stream=function(t,e){t&&uo.hasOwnProperty(t.type)?uo[t.type](t,e):re(t,e)};var uo={Feature:function(t,e){re(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)re(n[r].geometry,e)}},co={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){ie(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ie(n[r],e,0)},Polygon:function(t,e){ae(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)ae(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)re(n[r],e)}};Qi.geo.area=function(t){return ho=0,Qi.geo.stream(t,fo),ho};var ho,po=new ee,fo={sphere:function(){ho+=4*Sa},point:C,lineStart:C,lineEnd:C,polygonStart:function(){po.reset(),fo.lineStart=oe},polygonEnd:function(){var t=2*po;ho+=t<0?4*Sa+t:t,fo.lineStart=fo.lineEnd=fo.point=C}};Qi.geo.bounds=function(){function t(t,e){y.push(E=[c=t,h=t]),e<d&&(d=e),e>p&&(p=e)}function e(e,n){var r=se([e*Aa,n*Aa]);if(v){var i=ue(v,r),a=ue([i[1],-i[0],0],i);he(a),a=pe(a);var o=e-f,l=o>0?1:-1,u=a[0]*La*l,g=ua(o)>180;if(g^(l*f<u&&u<l*e)){(m=a[1]*La)>p&&(p=m)}else if(u=(u+360)%360-180,g^(l*f<u&&u<l*e)){var m=-a[1]*La;m<d&&(d=m)}else n<d&&(d=n),n>p&&(p=n);g?e<f?s(c,e)>s(c,h)&&(h=e):s(e,h)>s(c,h)&&(c=e):h>=c?(e<c&&(c=e),e>h&&(h=e)):e>f?s(c,e)>s(c,h)&&(h=e):s(e,h)>s(c,h)&&(c=e)}else t(e,n);v=r,f=e}function n(){x.point=e}function r(){E[0]=c,E[1]=h,x.point=t,v=null}function i(t,n){if(v){var r=t-f;b+=ua(r)>180?r+(r>0?360:-360):r}else g=t,m=n;fo.point(t,n),e(t,n)}function a(){fo.lineStart()}function o(){i(g,m),fo.lineEnd(),ua(b)>Ta&&(c=-(h=180)),E[0]=c,E[1]=h,v=null}function s(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function u(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,d,h,p,f,g,m,v,b,y,E,x={point:t,lineStart:n,lineEnd:r,polygonStart:function(){x.point=i,x.lineStart=a,x.lineEnd=o,b=0,fo.polygonStart()},polygonEnd:function(){fo.polygonEnd(),x.point=t,x.lineStart=n,x.lineEnd=r,po<0?(c=-(h=180),d=-(p=90)):b>Ta?p=90:b<-Ta&&(d=-90),E[0]=c,E[1]=h}};return function(t){p=h=-(c=d=1/0),y=[],Qi.geo.stream(t,x);i=y.length;if(i){y.sort(l);for(var e=1,n=[f=y[0]];e<i;++e)u((a=y[e])[0],f)||u(a[1],f)?(s(f[0],a[1])>s(f[0],f[1])&&(f[1]=a[1]),s(a[0],f[1])>s(f[0],f[1])&&(f[0]=a[0])):n.push(f=a);for(var r,i,a,o=-1/0,e=0,f=n[i=n.length-1];e<=i;f=a,++e)a=n[e],(r=s(f[1],a[0]))>o&&(o=r,c=a[0],h=f[1])}return y=E=null,c===1/0||d===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,d],[h,p]]}}(),Qi.geo.centroid=function(t){go=mo=vo=bo=yo=Eo=xo=_o=No=Co=Mo=0,Qi.geo.stream(t,To);var e=No,n=Co,r=Mo,i=e*e+n*n+r*r;return i<wa&&(e=Eo,n=xo,r=_o,mo<Ta&&(e=vo,n=bo,r=yo),(i=e*e+n*n+r*r)<wa)?[NaN,NaN]:[Math.atan2(n,e)*La,nt(r/Math.sqrt(i))*La]};var go,mo,vo,bo,yo,Eo,xo,_o,No,Co,Mo,To={sphere:C,point:ge,lineStart:ve,lineEnd:be,polygonStart:function(){To.lineStart=ye},polygonEnd:function(){To.lineStart=ve}},wo=Me(xe,function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?Sa:-Sa,l=ua(a-n);ua(l-Sa)<Ta?(t.point(n,r=(r+o)/2>0?Da:-Da),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&l>=Sa&&(ua(n-i)<Ta&&(n-=i*Ta),ua(a-s)<Ta&&(a-=s*Ta),r=function(t,e,n,r){var i,a,o=Math.sin(t-n);return ua(o)>Ta?Math.atan((Math.sin(e)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*a*o)):(e+r)/2}(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*Da,r.point(-Sa,i),r.point(0,i),r.point(Sa,i),r.point(Sa,0),r.point(Sa,-i),r.point(0,-i),r.point(-Sa,-i),r.point(-Sa,0),r.point(-Sa,i);else if(ua(t[0]-e[0])>Ta){var a=t[0]<e[0]?Sa:-Sa;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])},[-Sa,-Sa/2]),So=1e9;Qi.geo.clipExtent=function(){var t,e,n,r,i,a,o={stream:function(t){return i&&(i.valid=!1),i=a(t),i.valid=!0,i},extent:function(s){return arguments.length?(a=Re(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),o):[[t,e],[n,r]]}};return o.extent([[0,0],[960,500]])},(Qi.geo.conicEqualArea=function(){return De(Ae)}).raw=Ae,Qi.geo.albers=function(){return Qi.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Qi.geo.albersUsa=function(){function t(t){var a=t[0],o=t[1];return e=null,n(a,o),e||(r(a,o),e)||i(a,o),e}var e,n,r,i,a=Qi.geo.albers(),o=Qi.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=Qi.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?o:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:a).invert(t)},t.stream=function(t){var e=a.stream(t),n=o.stream(t),r=s.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},t.precision=function(e){return arguments.length?(a.precision(e),o.precision(e),s.precision(e),t):a.precision()},t.scale=function(e){return arguments.length?(a.scale(e),o.scale(.35*e),s.scale(e),t.translate(a.translate())):a.scale()},t.translate=function(e){if(!arguments.length)return a.translate();var u=a.scale(),c=+e[0],d=+e[1];return n=a.translate(e).clipExtent([[c-.455*u,d-.238*u],[c+.455*u,d+.238*u]]).stream(l).point,r=o.translate([c-.307*u,d+.201*u]).clipExtent([[c-.425*u+Ta,d+.12*u+Ta],[c-.214*u-Ta,d+.234*u-Ta]]).stream(l).point,i=s.translate([c-.205*u,d+.212*u]).clipExtent([[c-.214*u+Ta,d+.166*u+Ta],[c-.115*u-Ta,d+.234*u-Ta]]).stream(l).point,t},t.scale(1070)};var Oo,Ro,Do,Ao,Lo,Io,ko={point:C,lineStart:C,lineEnd:C,polygonStart:function(){Ro=0,ko.lineStart=Le},polygonEnd:function(){ko.lineStart=ko.lineEnd=ko.point=C,Oo+=ua(Ro/2)}},Vo={point:function(t,e){t<Do&&(Do=t),t>Lo&&(Lo=t),e<Ao&&(Ao=e),e>Io&&(Io=e)},lineStart:C,lineEnd:C,polygonStart:C,polygonEnd:C},jo={point:ke,lineStart:Ve,lineEnd:je,polygonStart:function(){jo.lineStart=He},polygonEnd:function(){jo.point=ke,jo.lineStart=Ve,jo.lineEnd=je}};Qi.geo.path=function(){function t(t){return t&&("function"==typeof s&&a.pointRadius(+s.apply(this,arguments)),o&&o.valid||(o=i(a)),Qi.geo.stream(t,o)),a.result()}function e(){return o=null,t}var n,r,i,a,o,s=4.5;return t.area=function(t){return Oo=0,Qi.geo.stream(t,i(ko)),Oo},t.centroid=function(t){return vo=bo=yo=Eo=xo=_o=No=Co=Mo=0,Qi.geo.stream(t,i(jo)),Mo?[No/Mo,Co/Mo]:_o?[Eo/_o,xo/_o]:yo?[vo/yo,bo/yo]:[NaN,NaN]},t.bounds=function(t){return Lo=Io=-(Do=Ao=1/0),Qi.geo.stream(t,i(Vo)),[[Do,Ao],[Lo,Io]]},t.projection=function(t){return arguments.length?(i=(n=t)?t.stream||function(t){var e=$e(function(e,n){return t([e*La,n*La])});return function(t){return Ue(e(t))}}(t):_,e()):n},t.context=function(t){return arguments.length?(a=null==(r=t)?new function(){function t(t,e){o.push("M",t,",",e,a)}function e(t,e){o.push("M",t,",",e),s.point=n}function n(t,e){o.push("L",t,",",e)}function r(){s.point=t}function i(){o.push("Z")}var a=Ie(4.5),o=[],s={point:t,lineStart:function(){s.point=e},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(t){return a=Ie(t),s},result:function(){if(o.length){var t=o.join("");return o=[],t}}};return s}:new function(t){function e(e,n){t.moveTo(e+o,n),t.arc(e,n,o,0,Oa)}function n(e,n){t.moveTo(e,n),s.point=r}function r(e,n){t.lineTo(e,n)}function i(){s.point=e}function a(){t.closePath()}var o=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(t){return o=t,s},result:C};return s}(t),"function"!=typeof s&&a.pointRadius(s),e()):r},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(a.pointRadius(+e),+e),t):s},t.projection(Qi.geo.albersUsa()).context(null)},Qi.geo.transform=function(t){return{stream:function(e){var n=new Pe(e);for(var r in t)n[r]=t[r];return n}}},Pe.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Qi.geo.projection=Fe,Qi.geo.projectionMutator=ze,(Qi.geo.equirectangular=function(){return Fe(We)}).raw=We.invert=We,Qi.geo.rotation=function(t){function e(e){return e=t(e[0]*Aa,e[1]*Aa),e[0]*=La,e[1]*=La,e}return t=Be(t[0]%360*Aa,t[1]*Aa,t.length>2?t[2]*Aa:0),e.invert=function(e){return e=t.invert(e[0]*Aa,e[1]*Aa),e[0]*=La,e[1]*=La,e},e},Ye.invert=We,Qi.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=Be(-t[0]*Aa,-t[1]*Aa,0).invert,i=[];return n(null,null,1,{point:function(t,n){i.push(t=e(t,n)),t[0]*=La,t[1]*=La}}),{type:"Polygon",coordinates:[i]}}var e,n,r=[0,0],i=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=Xe((e=+r)*Aa,i*Aa),t):e},t.precision=function(r){return arguments.length?(n=Xe(e*Aa,(i=+r)*Aa),t):i},t.angle(90)},Qi.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Aa,i=t[1]*Aa,a=e[1]*Aa,o=Math.sin(r),s=Math.cos(r),l=Math.sin(i),u=Math.cos(i),c=Math.sin(a),d=Math.cos(a);return Math.atan2(Math.sqrt((n=d*o)*n+(n=u*c-l*d*s)*n),l*c+u*d*s)},Qi.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return Qi.range(Math.ceil(a/m)*m,i,m).map(h).concat(Qi.range(Math.ceil(u/v)*v,l,v).map(p)).concat(Qi.range(Math.ceil(r/f)*f,n,f).filter(function(t){return ua(t%m)>Ta}).map(c)).concat(Qi.range(Math.ceil(s/g)*g,o,g).filter(function(t){return ua(t%v)>Ta}).map(d))}var n,r,i,a,o,s,l,u,c,d,h,p,f=10,g=f,m=90,v=360,b=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(a).concat(p(l).slice(1),h(i).reverse().slice(1),p(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(a=+e[0][0],i=+e[1][0],u=+e[0][1],l=+e[1][1],a>i&&(e=a,a=i,i=e),u>l&&(e=u,u=l,l=e),t.precision(b)):[[a,u],[i,l]]},t.minorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],o=+e[1][1],r>n&&(e=r,r=n,n=e),s>o&&(e=s,s=o,o=e),t.precision(b)):[[r,s],[n,o]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(m=+e[0],v=+e[1],t):[m,v]},t.minorStep=function(e){return arguments.length?(f=+e[0],g=+e[1],t):[f,g]},t.precision=function(e){return arguments.length?(b=+e,c=Qe(s,o,90),d=tn(r,n,b),h=Qe(u,l,90),p=tn(a,i,b),t):b},t.majorExtent([[-180,-90+Ta],[180,90-Ta]]).minorExtent([[-180,-80-Ta],[180,80+Ta]])},Qi.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}var e,n,r=en,i=nn;return t.distance=function(){return Qi.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},t.source=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.target=function(e){return arguments.length?(i=e,n="function"==typeof e?null:e,t):i},t.precision=function(){return arguments.length?t:0},t},Qi.geo.interpolate=function(t,e){return function(t,e,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(r),s=Math.sin(r),l=i*Math.cos(t),u=i*Math.sin(t),c=o*Math.cos(n),d=o*Math.sin(n),h=2*Math.asin(Math.sqrt(it(r-e)+i*o*it(n-t))),p=1/Math.sin(h),f=h?function(t){var e=Math.sin(t*=h)*p,n=Math.sin(h-t)*p,r=n*l+e*c,i=n*u+e*d,o=n*a+e*s;return[Math.atan2(i,r)*La,Math.atan2(o,Math.sqrt(r*r+i*i))*La]}:function(){return[t*La,e*La]};return f.distance=h,f}(t[0]*Aa,t[1]*Aa,e[0]*Aa,e[1]*Aa)},Qi.geo.length=function(t){return Ho=0,Qi.geo.stream(t,$o),Ho};var Ho,$o={sphere:C,point:C,lineStart:function(){function t(t,i){var a=Math.sin(i*=Aa),o=Math.cos(i),s=ua((t*=Aa)-e),l=Math.cos(s);Ho+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=r*a-n*o*l)*s),n*a+r*o*l),e=t,n=a,r=o}var e,n,r;$o.point=function(i,a){e=i*Aa,n=Math.sin(a*=Aa),r=Math.cos(a),$o.point=t},$o.lineEnd=function(){$o.point=$o.lineEnd=C}},lineEnd:C,polygonStart:C,polygonEnd:C},Po=rn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(Qi.geo.azimuthalEqualArea=function(){return Fe(Po)}).raw=Po;var Go=rn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},_);(Qi.geo.azimuthalEquidistant=function(){return Fe(Go)}).raw=Go,(Qi.geo.conicConformal=function(){return De(an)}).raw=an,(Qi.geo.conicEquidistant=function(){return De(on)}).raw=on;var Fo=rn(function(t){return 1/t},Math.atan);(Qi.geo.gnomonic=function(){return Fe(Fo)}).raw=Fo,sn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Da]},(Qi.geo.mercator=function(){return ln(sn)}).raw=sn;var zo=rn(function(){return 1},Math.asin);(Qi.geo.orthographic=function(){return Fe(zo)}).raw=zo;var Uo=rn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(Qi.geo.stereographic=function(){return Fe(Uo)}).raw=Uo,un.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Da]},(Qi.geo.transverseMercator=function(){var t=ln(un),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=un,Qi.geom={},Qi.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,i=Mt(n),a=Mt(r),o=t.length,s=[],l=[];for(e=0;e<o;e++)s.push([+i.call(this,t[e],e),+a.call(this,t[e],e),e]);for(s.sort(pn),e=0;e<o;e++)l.push([s[e][0],-s[e][1]]);var u=hn(s),c=hn(l),d=c[0]===u[0],h=c[c.length-1]===u[u.length-1],p=[];for(e=u.length-1;e>=0;--e)p.push(t[s[u[e]][2]]);for(e=+d;e<c.length-h;++e)p.push(t[s[c[e]][2]]);return p}var n=cn,r=dn;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},Qi.geom.polygon=function(t){return fa(t,Wo),t};var Wo=Qi.geom.polygon.prototype=[];Wo.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},Wo.centroid=function(t){var e,n,r=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=s,s=this[r],n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a*t,o*t]},Wo.clip=function(t){for(var e,n,r,i,a,o,s=mn(t),l=-1,u=this.length-mn(this),c=this[u-1];++l<u;){for(e=t.slice(),t.length=0,i=this[l],a=e[(r=e.length-s)-1],n=-1;++n<r;)fn(o=e[n],c,i)?(fn(a,c,i)||t.push(gn(a,o,c,i)),t.push(o)):fn(a,c,i)&&t.push(gn(a,o,c,i)),a=o;s&&t.push(t[0]),c=i}return t};var Yo,Bo,qo,Zo,Jo,Xo=[],Ko=[];_n.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Cn),e.length},Rn.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Dn.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=kn(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Ln(this,n),n=(t=n).U),n.C=!1,r.C=!0,In(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(In(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ln(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?kn(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Ln(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,In(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Ln(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,In(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Ln(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,In(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},Qi.geom.voronoi=function(t){function e(t){var e=new Array(t.length),r=s[0][0],i=s[0][1],a=s[1][0],o=s[1][1];return Vn(n(t),s).cells.forEach(function(n,s){var l=n.edges,u=n.site;(e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):u.x>=r&&u.x<=a&&u.y>=i&&u.y<=o?[[r,o],[a,o],[a,i],[r,i]]:[]).point=t[s]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(a(t,e)/Ta)*Ta,y:Math.round(o(t,e)/Ta)*Ta,i:e}})}var r=cn,i=dn,a=r,o=i,s=Qo;return t?e(t):(e.links=function(t){return Vn(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return Vn(n(t)).cells.forEach(function(n,r){for(var i,a=n.site,o=n.edges.sort(Cn),s=-1,l=o.length,u=o[l-1].edge,c=u.l===a?u.r:u.l;++s<l;)u,i=c,c=(u=o[s].edge).l===a?u.r:u.l,r<i.i&&r<c.i&&function(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}(a,i,c)<0&&e.push([t[r],t[i.i],t[c.i]])}),e},e.x=function(t){return arguments.length?(a=Mt(r=t),e):r},e.y=function(t){return arguments.length?(o=Mt(i=t),e):i},e.clipExtent=function(t){return arguments.length?(s=null==t?Qo:t,e):s===Qo?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===Qo?null:s&&s[1]},e)};var Qo=[[-1e6,-1e6],[1e6,1e6]];Qi.geom.delaunay=function(t){return Qi.geom.voronoi().triangles(t)},Qi.geom.quadtree=function(t,e,n,r,i){function a(t){function a(t,e,n,r,i,a,o,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(ua(l-n)+ua(c-r)<.01)u(t,e,n,r,i,a,o,s);else{var d=t.point;t.x=t.y=t.point=null,u(t,d,l,c,i,a,o,s),u(t,e,n,r,i,a,o,s)}else t.x=n,t.y=r,t.point=e}else u(t,e,n,r,i,a,o,s)}function u(t,e,n,r,i,o,s,l){var u=.5*(i+s),c=.5*(o+l),d=n>=u,h=r>=c,p=h<<1|d;t.leaf=!1,t=t.nodes[p]||(t.nodes[p]={leaf:!0,nodes:[],point:null,x:null,y:null}),d?i=u:s=u,h?o=c:l=c,a(t,e,n,r,i,o,s,l)}var c,d,h,p,f,g,m,v,b,y=Mt(s),E=Mt(l);if(null!=e)g=e,m=n,v=r,b=i;else if(v=b=-(g=m=1/0),d=[],h=[],f=t.length,o)for(p=0;p<f;++p)(c=t[p]).x<g&&(g=c.x),c.y<m&&(m=c.y),c.x>v&&(v=c.x),c.y>b&&(b=c.y),d.push(c.x),h.push(c.y);else for(p=0;p<f;++p){var x=+y(c=t[p],p),_=+E(c,p);x<g&&(g=x),_<m&&(m=_),x>v&&(v=x),_>b&&(b=_),d.push(x),h.push(_)}var N=v-g,C=b-m;N>C?b=m+N:v=g+C;var M={leaf:!0,nodes:[],point:null,x:null,y:null};if(M.add=function(t){a(M,t,+y(t,++p),+E(t,p),g,m,v,b)},M.visit=function(t){Pn(t,M,g,m,v,b)},M.find=function(t){return function(t,e,n,r,i,a,o){var s,l=1/0;return function t(u,c,d,h,p){if(!(c>a||d>o||h<r||p<i)){if(f=u.point){var f,g=e-u.x,m=n-u.y,v=g*g+m*m;if(v<l){var b=Math.sqrt(l=v);r=e-b,i=n-b,a=e+b,o=n+b,s=f}}for(var y=u.nodes,E=.5*(c+h),x=.5*(d+p),_=(n>=x)<<1|e>=E,N=_+4;_<N;++_)if(u=y[3&_])switch(3&_){case 0:t(u,c,d,E,x);break;case 1:t(u,E,d,h,x);break;case 2:t(u,c,x,E,p);break;case 3:t(u,E,x,h,p)}}}(t,r,i,a,o),s}(M,t[0],t[1],g,m,v,b)},p=-1,null==e){for(;++p<f;)a(M,t[p],d[p],h[p],g,m,v,b);--p}else t.forEach(M.add);return d=h=t=c=null,M}var o,s=cn,l=dn;return(o=arguments.length)?(s=Hn,l=$n,3===o&&(i=n,r=e,n=e=0),a(t)):(a.x=function(t){return arguments.length?(s=t,a):s},a.y=function(t){return arguments.length?(l=t,a):l},a.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),a):null==e?null:[[e,n],[r,i]]},a.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),a):null==e?null:[r-e,i-n]},a)},Qi.interpolateRgb=Gn,Qi.interpolateObject=Fn,Qi.interpolateNumber=zn,Qi.interpolateString=Un;var ts=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,es=new RegExp(ts.source,"g");Qi.interpolate=Wn,Qi.interpolators=[function(t,e){var n=typeof e;return("string"===n?Ya.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Gn:Un:e instanceof at?Gn:Array.isArray(e)?Yn:"object"===n&&isNaN(e)?Fn:zn)(t,e)}],Qi.interpolateArray=Yn;var ns=function(){return _},rs=Qi.map({linear:ns,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return Zn},cubic:function(){return Jn},sin:function(){return Xn},exp:function(){return Kn},circle:function(){return Qn},elastic:function(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Oa*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Oa/e)}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},bounce:function(){return tr}}),is=Qi.map({in:_,out:Bn,"in-out":qn,"out-in":function(t){return qn(Bn(t))}});Qi.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=rs.get(n)||ns,r=is.get(r)||_,function(t){return function(e){return e<=0?0:e>=1?1:t(e)}}(r(n.apply(null,ta.call(arguments,1))))},Qi.interpolateHcl=function(t,e){t=Qi.hcl(t),e=Qi.hcl(e);var n=t.h,r=t.c,i=t.l,a=e.h-n,o=e.c-r,s=e.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?e.c:r),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:a<-180&&(a+=360),function(t){return ut(n+a*t,r+o*t,i+s*t)+""}},Qi.interpolateHsl=function(t,e){t=Qi.hsl(t),e=Qi.hsl(e);var n=t.h,r=t.s,i=t.l,a=e.h-n,o=e.s-r,s=e.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?e.s:r),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:a<-180&&(a+=360),function(t){return st(n+a*t,r+o*t,i+s*t)+""}},Qi.interpolateLab=function(t,e){t=Qi.lab(t),e=Qi.lab(e);var n=t.l,r=t.a,i=t.b,a=e.l-n,o=e.a-r,s=e.b-i;return function(t){return dt(n+a*t,r+o*t,i+s*t)+""}},Qi.interpolateRound=er,Qi.transform=function(t){var e=na.createElementNS(Qi.ns.prefix.svg,"g");return(Qi.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new nr(n?n.matrix:as)})(t)},nr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var as={a:1,b:0,c:0,d:1,e:0,f:0};Qi.interpolateTransform=or,Qi.layout={},Qi.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(sr(t[n]));return e}},Qi.layout.chord=function(){function t(){var t,u,d,h,p,f={},g=[],m=Qi.range(a),v=[];for(n=[],r=[],t=0,h=-1;++h<a;){for(u=0,p=-1;++p<a;)u+=i[h][p];g.push(u),v.push(Qi.range(a)),t+=u}for(o&&m.sort(function(t,e){return o(g[t],g[e])}),s&&v.forEach(function(t,e){t.sort(function(t,n){return s(i[e][t],i[e][n])})}),t=(Oa-c*a)/t,u=0,h=-1;++h<a;){for(d=u,p=-1;++p<a;){var b=m[h],y=v[b][p],E=i[b][y],x=u,_=u+=E*t;f[b+"-"+y]={index:b,subindex:y,startAngle:x,endAngle:_,value:E}}r[b]={index:b,startAngle:d,endAngle:u,value:g[b]},u+=c}for(h=-1;++h<a;)for(p=h-1;++p<a;){var N=f[h+"-"+p],C=f[p+"-"+h];(N.value||C.value)&&n.push(N.value<C.value?{source:C,target:N}:{source:N,target:C})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,i,a,o,s,l,u={},c=0;return u.matrix=function(t){return arguments.length?(a=(i=t)&&i.length,n=r=null,u):i},u.padding=function(t){return arguments.length?(c=t,n=r=null,u):c},u.sortGroups=function(t){return arguments.length?(o=t,n=r=null,u):o},u.sortSubgroups=function(t){return arguments.length?(s=t,n=null,u):s},u.sortChords=function(t){return arguments.length?(l=t,n&&e(),u):l},u.chords=function(){return n||t(),n},u.groups=function(){return r||t(),r},u},Qi.layout.force=function(){function t(t){return function(e,n,r,i){if(e.point!==t){var a=e.cx-t.x,o=e.cy-t.y,s=i-n,l=a*a+o*o;if(s*s/v<l){if(l<g){u=e.charge/l;t.px-=a*u,t.py-=o*u}return!0}if(e.point&&l&&l<g){var u=e.pointCharge/l;t.px-=a*u,t.py-=o*u}}return!e.charge}}function e(t){t.px=Qi.event.x,t.py=Qi.event.y,l.resume()}var n,r,i,a,o,s,l={},u=Qi.dispatch("start","tick","end"),c=[1,1],d=.9,h=os,p=ss,f=-30,g=ls,m=.1,v=.64,b=[],y=[];return l.tick=function(){if((i*=.99)<.005)return n=null,u.end({type:"end",alpha:i=0}),!0;var e,r,l,h,p,g,v,E,x,_=b.length,N=y.length;for(r=0;r<N;++r)h=(l=y[r]).source,(g=(E=(p=l.target).x-h.x)*E+(x=p.y-h.y)*x)&&(E*=g=i*o[r]*((g=Math.sqrt(g))-a[r])/g,x*=g,p.x-=E*(v=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=x*v,h.x+=E*(v=1-v),h.y+=x*v);if((v=i*m)&&(E=c[0]/2,x=c[1]/2,r=-1,v))for(;++r<_;)(l=b[r]).x+=(E-l.x)*v,l.y+=(x-l.y)*v;if(f)for(pr(e=Qi.geom.quadtree(b),i,s),r=-1;++r<_;)(l=b[r]).fixed||e.visit(t(l));for(r=-1;++r<_;)(l=b[r]).fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*d,l.y-=(l.py-(l.py=l.y))*d);u.tick({type:"tick",alpha:i})},l.nodes=function(t){return arguments.length?(b=t,l):b},l.links=function(t){return arguments.length?(y=t,l):y},l.size=function(t){return arguments.length?(c=t,l):c},l.linkDistance=function(t){return arguments.length?(h="function"==typeof t?t:+t,l):h},l.distance=l.linkDistance,l.linkStrength=function(t){return arguments.length?(p="function"==typeof t?t:+t,l):p},l.friction=function(t){return arguments.length?(d=+t,l):d},l.charge=function(t){return arguments.length?(f="function"==typeof t?t:+t,l):f},l.chargeDistance=function(t){return arguments.length?(g=t*t,l):Math.sqrt(g)},l.gravity=function(t){return arguments.length?(m=+t,l):m},l.theta=function(t){return arguments.length?(v=t*t,l):Math.sqrt(v)},l.alpha=function(t){return arguments.length?(t=+t,i?t>0?i=t:(n.c=null,n.t=NaN,n=null,u.end({type:"end",alpha:i=0})):t>0&&(u.start({type:"start",alpha:i=t}),n=St(l.tick)),l):i},l.start=function(){function t(t,r){if(!n){for(n=new Array(i),l=0;l<i;++l)n[l]=[];for(l=0;l<u;++l){var a=y[l];n[a.source.index].push(a.target),n[a.target.index].push(a.source)}}for(var o,s=n[e],l=-1,c=s.length;++l<c;)if(!isNaN(o=s[l][t]))return o;return Math.random()*r}var e,n,r,i=b.length,u=y.length,d=c[0],g=c[1];for(e=0;e<i;++e)(r=b[e]).index=e,r.weight=0;for(e=0;e<u;++e)"number"==typeof(r=y[e]).source&&(r.source=b[r.source]),"number"==typeof r.target&&(r.target=b[r.target]),++r.source.weight,++r.target.weight;for(e=0;e<i;++e)r=b[e],isNaN(r.x)&&(r.x=t("x",d)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(a=[],"function"==typeof h)for(e=0;e<u;++e)a[e]=+h.call(this,y[e],e);else for(e=0;e<u;++e)a[e]=h;if(o=[],"function"==typeof p)for(e=0;e<u;++e)o[e]=+p.call(this,y[e],e);else for(e=0;e<u;++e)o[e]=p;if(s=[],"function"==typeof f)for(e=0;e<i;++e)s[e]=+f.call(this,b[e],e);else for(e=0;e<i;++e)s[e]=f;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){if(r||(r=Qi.behavior.drag().origin(_).on("dragstart.force",ur).on("drag.force",e).on("dragend.force",cr)),!arguments.length)return r;this.on("mouseover.force",dr).on("mouseout.force",hr).call(r)},Qi.rebind(l,u,"on")};var os=20,ss=1,ls=1/0;Qi.layout.hierarchy=function(){function t(i){var a,o=[i],s=[];for(i.depth=0;null!=(a=o.pop());)if(s.push(a),(u=n.call(t,a,a.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)o.push(c=u[l]),c.parent=a,c.depth=a.depth+1;r&&(a.value=0),a.children=u}else r&&(a.value=+r.call(t,a,a.depth)||0),delete a.children;return mr(i,function(t){var n,i;e&&(n=t.children)&&n.sort(e),r&&(i=t.parent)&&(i.value+=t.value)}),s}var e=yr,n=vr,r=br;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return r&&(gr(e,function(t){t.children&&(t.value=0)}),mr(e,function(e){var n;e.children||(e.value=+r.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},Qi.layout.partition=function(){function t(e,n,r,i){var a=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,a&&(o=a.length)){var o,s,l,u=-1;for(r=e.value?r/e.value:0;++u<o;)t(s=a[u],n,l=s.value*r,i),n+=l}}function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,e(n[a]));return 1+r}function n(n,a){var o=r.call(this,n,a);return t(o[0],0,i[0],i[1]/e(o[0])),o}var r=Qi.layout.hierarchy(),i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},fr(n,r)},Qi.layout.pie=function(){function t(o){var s,l=o.length,u=o.map(function(n,r){return+e.call(t,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),d=("function"==typeof i?i.apply(this,arguments):i)-c,h=Math.min(Math.abs(d)/l,+("function"==typeof a?a.apply(this,arguments):a)),p=h*(d<0?-1:1),f=Qi.sum(u),g=f?(d-l*p)/f:0,m=Qi.range(l),v=[];return null!=n&&m.sort(n===us?function(t,e){return u[e]-u[t]}:function(t,e){return n(o[t],o[e])}),m.forEach(function(t){v[t]={data:o[t],value:s=u[t],startAngle:c,endAngle:c+=s*g+p,padAngle:h}}),v}var e=Number,n=us,r=0,i=Oa,a=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(i=e,t):i},t.padAngle=function(e){return arguments.length?(a=e,t):a},t};var us={};Qi.layout.stack=function(){function t(s,l){if(!(h=s.length))return s;var u=s.map(function(n,r){return e.call(t,n,r)}),c=u.map(function(e){return e.map(function(e,n){return[a.call(t,e,n),o.call(t,e,n)]})}),d=n.call(t,c,l);u=Qi.permute(u,d),c=Qi.permute(c,d);var h,p,f,g,m=r.call(t,c,l),v=u[0].length;for(f=0;f<v;++f)for(i.call(t,u[0][f],g=m[f],c[0][f][1]),p=1;p<h;++p)i.call(t,u[p][f],g+=c[p-1][f][1],c[p][f][1]);return s}var e=_,n=Cr,r=Mr,i=Nr,a=xr,o=_r;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:cs.get(e)||Cr,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:ds.get(e)||Mr,t):r},t.x=function(e){return arguments.length?(a=e,t):a},t.y=function(e){return arguments.length?(o=e,t):o},t.out=function(e){return arguments.length?(i=e,t):i},t};var cs=Qi.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(Tr),a=t.map(wr),o=Qi.range(r).sort(function(t,e){return i[t]-i[e]}),s=0,l=0,u=[],c=[];for(e=0;e<r;++e)n=o[e],s<l?(s+=a[n],u.push(n)):(l+=a[n],c.push(n));return c.reverse().concat(u)},reverse:function(t){return Qi.range(t.length).reverse()},default:Cr}),ds=Qi.map({silhouette:function(t){var e,n,r,i=t.length,a=t[0].length,o=[],s=0,l=[];for(n=0;n<a;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];r>s&&(s=r),o.push(r)}for(n=0;n<a;++n)l[n]=(s-o[n])/2;return l},wiggle:function(t){var e,n,r,i,a,o,s,l,u,c=t.length,d=t[0],h=d.length,p=[];for(p[0]=l=u=0,n=1;n<h;++n){for(e=0,i=0;e<c;++e)i+=t[e][n][1];for(e=0,a=0,s=d[n][0]-d[n-1][0];e<c;++e){for(r=0,o=(t[e][n][1]-t[e][n-1][1])/(2*s);r<e;++r)o+=(t[r][n][1]-t[r][n-1][1])/s;a+=o*t[e][n][1]}p[n]=l-=i?a/i*s:0,l<u&&(u=l)}for(n=0;n<h;++n)p[n]-=u;return p},expand:function(t){var e,n,r,i=t.length,a=t[0].length,o=1/i,s=[];for(n=0;n<a;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=o}for(n=0;n<a;++n)s[n]=0;return s},zero:Mr});Qi.layout.histogram=function(){function t(t,a){for(var o,s,l=[],u=t.map(n,this),c=r.call(this,u,a),d=i.call(this,c,u,a),a=-1,h=u.length,p=d.length-1,f=e?1:1/h;++a<p;)(o=l[a]=[]).dx=d[a+1]-(o.x=d[a]),o.y=0;if(p>0)for(a=-1;++a<h;)(s=u[a])>=c[0]&&s<=c[1]&&((o=l[Qi.bisect(d,s,1,p)-1]).y+=f,o.push(t[a]));return l}var e=!0,n=Number,r=Dr,i=Or;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=Mt(e),t):r},t.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return Rr(t,e)}:Mt(e),t):i},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},Qi.layout.pack=function(){function t(t,a){var o=n.call(this,t,a),s=o[0],l=i[0],u=i[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,mr(s,function(t){t.r=+c(t.value)}),mr(s,Vr),r){var d=r*(e?1:Math.max(2*s.r/l,2*s.r/u))/2;mr(s,function(t){t.r+=d}),mr(s,Vr),mr(s,function(t){t.r-=d})}return $r(s,l/2,u/2,e?1:1/Math.max(2*s.r/l,2*s.r/u)),o}var e,n=Qi.layout.hierarchy().sort(Ar),r=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(r=+e,t):r},fr(t,n)},Qi.layout.tree=function(){function t(t,l){var u=i.call(this,t,l),c=u[0],d=function(t){var e,n={A:null,children:[t]},r=[n];for(;null!=(e=r.pop());)for(var i,a=e.children,o=0,s=a.length;o<s;++o)r.push((a[o]=i={_:a[o],parent:e,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}(c);if(mr(d,e),d.parent.m=-d.z,gr(d,n),s)gr(c,r);else{var h=c,p=c,f=c;gr(c,function(t){t.x<h.x&&(h=t),t.x>p.x&&(p=t),t.depth>f.depth&&(f=t)});var g=a(h,p)/2-h.x,m=o[0]/(p.x+a(p,h)/2+g),v=o[1]/(f.depth||1);gr(c,function(t){t.x=(t.x+g)*m,t.y=t.depth*v})}return u}function e(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){!function(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(t);var i=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+a(t._,r._),t.m=t.z-i):t.z=i}else r&&(t.z=r.z+a(t._,r._));t.parent.A=function(t,e,n){if(e){for(var r,i=t,o=t,s=e,l=i.parent.children[0],u=i.m,c=o.m,d=s.m,h=l.m;s=zr(s),i=Fr(i),s&&i;)l=Fr(l),(o=zr(o)).a=t,(r=s.z+d-i.z-u+a(s._,i._))>0&&(!function(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}(function(t,e,n){return t.a.parent===e.parent?t.a:n}(s,t,n),t,r),u+=r,c+=r),d+=s.m,u+=i.m,h+=l.m,c+=o.m;s&&!zr(o)&&(o.t=s,o.m+=d-c),i&&!Fr(l)&&(l.t=i,l.m+=u-h,n=t)}return n}(t,r,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t){t.x*=o[0],t.y=t.depth*o[1]}var i=Qi.layout.hierarchy().sort(null).value(null),a=Gr,o=[1,1],s=null;return t.separation=function(e){return arguments.length?(a=e,t):a},t.size=function(e){return arguments.length?(s=null==(o=e)?r:null,t):s?null:o},t.nodeSize=function(e){return arguments.length?(s=null==(o=e)?null:r,t):s?o:null},fr(t,i)},Qi.layout.cluster=function(){function t(t,a){var o,s=e.call(this,t,a),l=s[0],u=0;mr(l,function(t){var e=t.children;e&&e.length?(t.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(e),t.y=function(t){return 1+Qi.max(t,function(t){return t.y})}(e)):(t.x=o?u+=n(t,o):0,t.y=0,o=t)});var c=Ur(l),d=Wr(l),h=c.x-n(c,d)/2,p=d.x+n(d,c)/2;return mr(l,i?function(t){t.x=(t.x-l.x)*r[0],t.y=(l.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(p-h)*r[0],t.y=(1-(l.y?t.y/l.y:1))*r[1]}),s}var e=Qi.layout.hierarchy().sort(null).value(null),n=Gr,r=[1,1],i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=null==(r=e),t):i?null:r},t.nodeSize=function(e){return arguments.length?(i=null!=(r=e),t):i?r:null},fr(t,e)},Qi.layout.treemap=function(){function t(t,e){for(var n,r,i=-1,a=t.length;++i<a;)r=(n=t[i]).value*(e<0?0:e),n.area=isNaN(r)||r<=0?0:r}function e(n){var i=n.children;if(i&&i.length){var a,o,s,l=c(n),u=[],d=i.slice(),f=1/0,g="slice"===h?l.dx:"dice"===h?l.dy:"slice-dice"===h?1&n.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(t(d,l.dx*l.dy/n.value),u.area=0;(s=d.length)>0;)u.push(a=d[s-1]),u.area+=a.area,"squarify"!==h||(o=function(t,e){var n,r=t.area,i=0,a=1/0,o=-1,s=t.length;for(;++o<s;)(n=t[o].area)&&(n<a&&(a=n),n>i&&(i=n));return r*=r,e*=e,r?Math.max(e*i*p/r,r/(e*a*p)):1/0}(u,g))<=f?(d.pop(),f=o):(u.area-=u.pop().area,r(u,g,l,!1),g=Math.min(l.dx,l.dy),u.length=u.area=0,f=1/0);u.length&&(r(u,g,l,!0),u.length=u.area=0),i.forEach(e)}}function n(e){var i=e.children;if(i&&i.length){var a,o=c(e),s=i.slice(),l=[];for(t(s,o.dx*o.dy/e.value),l.area=0;a=s.pop();)l.push(a),l.area+=a.area,null!=a.z&&(r(l,a.z?o.dx:o.dy,o,!s.length),l.length=l.area=0);i.forEach(n)}}function r(t,e,n,r){var i,a=-1,o=t.length,l=n.x,u=n.y,c=e?s(t.area/e):0;if(e==n.dx){for((r||c>n.dy)&&(c=n.dy);++a<o;)(i=t[a]).x=l,i.y=u,i.dy=c,l+=i.dx=Math.min(n.x+n.dx-l,c?s(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-l,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++a<o;)(i=t[a]).x=l,i.y=u,i.dx=c,u+=i.dy=Math.min(n.y+n.dy-u,c?s(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function i(r){var i=a||o(r),s=i[0];return s.x=s.y=0,s.value?(s.dx=l[0],s.dy=l[1]):s.dx=s.dy=0,a&&o.revalue(s),t([s],s.dx*s.dy/s.value),(a?n:e)(s),d&&(a=i),i}var a,o=Qi.layout.hierarchy(),s=Math.round,l=[1,1],u=null,c=Yr,d=!1,h="squarify",p=.5*(1+Math.sqrt(5));return i.size=function(t){return arguments.length?(l=t,i):l},i.padding=function(t){function e(e){return Br(e,t)}if(!arguments.length)return u;var n;return c=null==(u=t)?Yr:"function"==(n=typeof t)?function(e){var n=t.call(i,e,e.depth);return null==n?Yr(e):Br(e,"number"==typeof n?[n,n,n,n]:n)}:"number"===n?(t=[t,t,t,t],e):e,i},i.round=function(t){return arguments.length?(s=t?Math.round:Number,i):s!=Number},i.sticky=function(t){return arguments.length?(d=t,a=null,i):d},i.ratio=function(t){return arguments.length?(p=t,i):p},i.mode=function(t){return arguments.length?(h=t+"",i):h},fr(i,o)},Qi.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=Qi.random.normal.apply(Qi,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=Qi.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},Qi.scale={};var hs={floor:_,ceil:_};Qi.scale.linear=function(){return Kr([0,1],[0,1],Wn,!1)};var ps={s:1,g:1,p:1,r:1,e:1};Qi.scale.log=function(){return ai(Qi.scale.linear().domain([0,1]),10,!0,[1,10])};var fs=Qi.format(".0e"),gs={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};Qi.scale.pow=function(){return oi(Qi.scale.linear(),1,[0,1])},Qi.scale.sqrt=function(){return Qi.scale.pow().exponent(.5)},Qi.scale.ordinal=function(){return li([],{t:"range",a:[[]]})},Qi.scale.category10=function(){return Qi.scale.ordinal().range(ms)},Qi.scale.category20=function(){return Qi.scale.ordinal().range(vs)},Qi.scale.category20b=function(){return Qi.scale.ordinal().range(bs)},Qi.scale.category20c=function(){return Qi.scale.ordinal().range(ys)};var ms=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(bt),vs=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(bt),bs=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(bt),ys=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(bt);Qi.scale.quantile=function(){return ui([],[])},Qi.scale.quantize=function(){return ci(0,1,[0,1])},Qi.scale.threshold=function(){return di([.5],[0,1])},Qi.scale.identity=function(){return hi([0,1])},Qi.svg={},Qi.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+r.apply(this,arguments)),c=o.apply(this,arguments)-Da,d=s.apply(this,arguments)-Da,h=Math.abs(d-c),p=c>d?0:1;if(u<t&&(f=u,u=t,t=f),h>=Ra)return e(u,p)+(t?e(t,1-p):"")+"Z";var f,g,m,v,b,y,E,x,_,N,C,M,T=0,w=0,S=[];if((v=(+l.apply(this,arguments)||0)/2)&&(m=a===Es?Math.sqrt(t*t+u*u):+a.apply(this,arguments),p||(w*=-1),u&&(w=nt(m/u*Math.sin(v))),t&&(T=nt(m/t*Math.sin(v)))),u){b=u*Math.cos(c+w),y=u*Math.sin(c+w),E=u*Math.cos(d-w),x=u*Math.sin(d-w);var O=Math.abs(d-c-2*w)<=Sa?0:1;if(w&&yi(b,y,E,x)===p^O){var R=(c+d)/2;b=u*Math.cos(R),y=u*Math.sin(R),E=x=null}}else b=y=0;if(t){_=t*Math.cos(d-T),N=t*Math.sin(d-T),C=t*Math.cos(c+T),M=t*Math.sin(c+T);var D=Math.abs(c-d+2*T)<=Sa?0:1;if(T&&yi(_,N,C,M)===1-p^D){var A=(c+d)/2;_=t*Math.cos(A),N=t*Math.sin(A),C=M=null}}else _=N=0;if(h>Ta&&(f=Math.min(Math.abs(u-t)/2,+i.apply(this,arguments)))>.001){g=t<u^p?0:1;var L=f,I=f;if(h<Sa){var k=null==C?[_,N]:null==E?[b,y]:gn([b,y],[C,M],[E,x],[_,N]),V=b-k[0],j=y-k[1],H=E-k[0],$=x-k[1],P=1/Math.sin(Math.acos((V*H+j*$)/(Math.sqrt(V*V+j*j)*Math.sqrt(H*H+$*$)))/2),G=Math.sqrt(k[0]*k[0]+k[1]*k[1]);I=Math.min(f,(t-G)/(P-1)),L=Math.min(f,(u-G)/(P+1))}if(null!=E){var F=Ei(null==C?[_,N]:[C,M],[b,y],u,L,p),z=Ei([E,x],[_,N],u,L,p);f===L?S.push("M",F[0],"A",L,",",L," 0 0,",g," ",F[1],"A",u,",",u," 0 ",1-p^yi(F[1][0],F[1][1],z[1][0],z[1][1]),",",p," ",z[1],"A",L,",",L," 0 0,",g," ",z[0]):S.push("M",F[0],"A",L,",",L," 0 1,",g," ",z[0])}else S.push("M",b,",",y);if(null!=C){var U=Ei([b,y],[C,M],t,-I,p),W=Ei([_,N],null==E?[b,y]:[E,x],t,-I,p);f===I?S.push("L",W[0],"A",I,",",I," 0 0,",g," ",W[1],"A",t,",",t," 0 ",p^yi(W[1][0],W[1][1],U[1][0],U[1][1]),",",1-p," ",U[1],"A",I,",",I," 0 0,",g," ",U[0]):S.push("L",W[0],"A",I,",",I," 0 0,",g," ",U[0])}else S.push("L",_,",",N)}else S.push("M",b,",",y),null!=E&&S.push("A",u,",",u," 0 ",O,",",p," ",E,",",x),S.push("L",_,",",N),null!=C&&S.push("A",t,",",t," 0 ",D,",",1-p," ",C,",",M);return S.push("Z"),S.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=fi,r=gi,i=pi,a=Es,o=mi,s=vi,l=bi;return t.innerRadius=function(e){return arguments.length?(n=Mt(e),t):n},t.outerRadius=function(e){return arguments.length?(r=Mt(e),t):r},t.cornerRadius=function(e){return arguments.length?(i=Mt(e),t):i},t.padRadius=function(e){return arguments.length?(a=e==Es?Es:Mt(e),t):a},t.startAngle=function(e){return arguments.length?(o=Mt(e),t):o},t.endAngle=function(e){return arguments.length?(s=Mt(e),t):s},t.padAngle=function(e){return arguments.length?(l=Mt(e),t):l},t.centroid=function(){var t=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,e=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-Da;return[Math.cos(e)*t,Math.sin(e)*t]},t};var Es="auto";Qi.svg.line=function(){return xi(_)};var xs=Qi.map({linear:_i,"linear-closed":Ni,step:function(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")},"step-before":Ci,"step-after":Mi,basis:Si,"basis-open":function(t){if(t.length<4)return _i(t);for(var e,n=[],r=-1,i=t.length,a=[0],o=[0];++r<3;)e=t[r],a.push(e[0]),o.push(e[1]);for(n.push(Oi(Cs,a)+","+Oi(Cs,o)),--r;++r<i;)e=t[r],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),Ri(n,a,o);return n.join("")},"basis-closed":function(t){for(var e,n,r=-1,i=t.length,a=i+4,o=[],s=[];++r<4;)n=t[r%i],o.push(n[0]),s.push(n[1]);for(e=[Oi(Cs,o),",",Oi(Cs,s)],--r;++r<a;)n=t[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Ri(e,o,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var r,i,a=t[0][0],o=t[0][1],s=t[n][0]-a,l=t[n][1]-o,u=-1;++u<=n;)i=u/n,(r=t[u])[0]=e*r[0]+(1-e)*(a+i*s),r[1]=e*r[1]+(1-e)*(o+i*l);return Si(t)},cardinal:function(t,e){return t.length<3?_i(t):t[0]+Ti(t,wi(t,e))},"cardinal-open":function(t,e){return t.length<4?_i(t):t[1]+Ti(t.slice(1,-1),wi(t,e))},"cardinal-closed":function(t,e){return t.length<3?Ni(t):t[0]+Ti((t.push(t[0]),t),wi([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?_i(t):t[0]+Ti(t,Ai(t))}});xs.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var _s=[0,2/3,1/3,0],Ns=[0,1/3,2/3,0],Cs=[0,1/6,2/3,1/6];Qi.svg.line.radial=function(){var t=xi(Li);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Ci.reverse=Mi,Mi.reverse=Ci,Qi.svg.area=function(){return Ii(_)},Qi.svg.area.radial=function(){var t=Ii(Li);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},Qi.svg.chord=function(){function t(t,o){var s=e(this,i,t,o),l=e(this,a,t,o);return"M"+s.p0+n(s.r,s.p1,s.a1-s.a0)+(function(t,e){return t.a0==e.a0&&t.a1==e.a1}(s,l)?r(s.r,s.p1,s.r,s.p0):r(s.r,s.p1,l.r,l.p0)+n(l.r,l.p1,l.a1-l.a0)+r(l.r,l.p1,s.r,s.p0))+"Z"}function e(t,e,n,r){var i=e.call(t,n,r),a=o.call(t,i,r),u=s.call(t,i,r)-Da,c=l.call(t,i,r)-Da;return{r:a,a0:u,a1:c,p0:[a*Math.cos(u),a*Math.sin(u)],p1:[a*Math.cos(c),a*Math.sin(c)]}}function n(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Sa)+",1 "+e}function r(t,e,n,r){return"Q 0,0 "+r}var i=en,a=nn,o=ki,s=mi,l=vi;return t.radius=function(e){return arguments.length?(o=Mt(e),t):o},t.source=function(e){return arguments.length?(i=Mt(e),t):i},t.target=function(e){return arguments.length?(a=Mt(e),t):a},t.startAngle=function(e){return arguments.length?(s=Mt(e),t):s},t.endAngle=function(e){return arguments.length?(l=Mt(e),t):l},t},Qi.svg.diagonal=function(){function t(t,i){var a=e.call(this,t,i),o=n.call(this,t,i),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return"M"+(l=l.map(r))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=en,n=nn,r=Vi;return t.source=function(n){return arguments.length?(e=Mt(n),t):e},t.target=function(e){return arguments.length?(n=Mt(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},Qi.svg.diagonal.radial=function(){var t=Qi.svg.diagonal(),e=Vi,n=t.projection;return t.projection=function(t){return arguments.length?n(function(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Da;return[n*Math.cos(r),n*Math.sin(r)]}}(e=t)):e},t},Qi.svg.symbol=function(){function t(t,r){return(Ms.get(e.call(this,t,r))||$i)(n.call(this,t,r))}var e=Hi,n=ji;return t.type=function(n){return arguments.length?(e=Mt(n),t):e},t.size=function(e){return arguments.length?(n=Mt(e),t):n},t};var Ms=Qi.map({circle:$i,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*ws)),n=e*ws;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Ts),n=e*Ts/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Ts),n=e*Ts/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});Qi.svg.symbolTypes=Ms.keys();var Ts=Math.sqrt(3),ws=Math.tan(30*Aa);ba.transition=function(t){for(var e,n,r=Ss||++As,i=Ui(t),a=[],o=Os||{time:Date.now(),ease:function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(e=[]);for(var u=this[s],c=-1,d=u.length;++c<d;)(n=u[c])&&Wi(n,c,i,r,o),e.push(n)}return Gi(a,i,r)},ba.interrupt=function(t){return this.each(null==t?Rs:Pi(Ui(t)))};var Ss,Os,Rs=Pi(Ui()),Ds=[],As=0;Ds.call=ba.call,Ds.empty=ba.empty,Ds.node=ba.node,Ds.size=ba.size,Qi.transition=function(t,e){return t&&t.transition?Ss?t.transition(e):t:Qi.selection().transition(t)},Qi.transition.prototype=Ds,Ds.select=function(t){var e,n,r,i=this.id,a=this.namespace,o=[];t=D(t);for(var s=-1,l=this.length;++s<l;){o.push(e=[]);for(var u=this[s],c=-1,d=u.length;++c<d;)(r=u[c])&&(n=t.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Wi(n,c,a,i,r[a][i]),e.push(n)):e.push(null)}return Gi(o,a,i)},Ds.selectAll=function(t){var e,n,r,i,a,o=this.id,s=this.namespace,l=[];t=A(t);for(var u=-1,c=this.length;++u<c;)for(var d=this[u],h=-1,p=d.length;++h<p;)if(r=d[h]){a=r[s][o],n=t.call(r,r.__data__,h,u),l.push(e=[]);for(var f=-1,g=n.length;++f<g;)(i=n[f])&&Wi(i,f,s,o,a),e.push(i)}return Gi(l,s,o)},Ds.filter=function(t){var e,n,r=[];"function"!=typeof t&&(t=U(t));for(var i=0,a=this.length;i<a;i++){r.push(e=[]);for(var o,s=0,l=(o=this[i]).length;s<l;s++)(n=o[s])&&t.call(n,n.__data__,s,i)&&e.push(n)}return Gi(r,this.namespace,this.id)},Ds.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):W(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},Ds.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var n="transform"==t?or:Wn,r=Qi.ns.qualify(t);return Fi(this,"attr."+t,e,r.local?function(t){return null==t?function(){this.removeAttributeNS(r.space,r.local)}:(t+="",function(){var e,i=this.getAttributeNS(r.space,r.local);return i!==t&&(e=n(i,t),function(t){this.setAttributeNS(r.space,r.local,e(t))})})}:function(t){return null==t?function(){this.removeAttribute(r)}:(t+="",function(){var e,i=this.getAttribute(r);return i!==t&&(e=n(i,t),function(t){this.setAttribute(r,e(t))})})})},Ds.attrTween=function(t,e){var n=Qi.ns.qualify(t);return this.tween("attr."+t,n.local?function(t,r){var i=e.call(this,t,r,this.getAttributeNS(n.space,n.local));return i&&function(t){this.setAttributeNS(n.space,n.local,i(t))}}:function(t,r){var i=e.call(this,t,r,this.getAttribute(n));return i&&function(t){this.setAttribute(n,i(t))}})},Ds.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){r<2&&(e="");for(n in t)this.style(n,t[n],e);return this}n=""}return Fi(this,"style."+t,e,function(e){return null==e?function(){this.style.removeProperty(t)}:(e+="",function(){var r,i=o(this).getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=Wn(i,e),function(e){this.style.setProperty(t,r(e),n)})})})},Ds.styleTween=function(t,e,n){return arguments.length<3&&(n=""),this.tween("style."+t,function(r,i){var a=e.call(this,r,i,o(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),n)}})},Ds.text=function(t){return Fi(this,"text",t,zi)},Ds.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Ds.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=Qi.ease.apply(Qi,arguments)),W(this,function(r){r[n][e].ease=t}))},Ds.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:W(this,"function"==typeof t?function(r,i,a){r[n][e].delay=+t.call(r,r.__data__,i,a)}:(t=+t,function(r){r[n][e].delay=t}))},Ds.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:W(this,"function"==typeof t?function(r,i,a){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,a))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},Ds.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Os,a=Ss;try{Ss=n,W(this,function(e,i,a){Os=e[r][n],t.call(e,e.__data__,i,a)})}finally{Os=i,Ss=a}}else W(this,function(i){var a=i[r][n];(a.event||(a.event=Qi.dispatch("start","end","interrupt"))).on(t,e)});return this},Ds.transition=function(){for(var t,e,n,r=this.id,i=++As,a=this.namespace,o=[],s=0,l=this.length;s<l;s++){o.push(t=[]);for(var u,c=0,d=(u=this[s]).length;c<d;c++)(e=u[c])&&Wi(e,c,a,i,{time:(n=e[a][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return Gi(o,a,i)},Qi.svg.axis=function(){function t(t){t.each(function(){var t,u=Qi.select(this),c=this.__chart__||n,d=this.__chart__=n.copy(),h=null==l?d.ticks?d.ticks.apply(d,s):d.domain():l,p=null==e?d.tickFormat?d.tickFormat.apply(d,s):_:e,f=u.selectAll(".tick").data(h,d),g=f.enter().insert("g",".domain").attr("class","tick").style("opacity",Ta),m=Qi.transition(f.exit()).style("opacity",Ta).remove(),v=Qi.transition(f.order()).style("opacity",1),b=Math.max(i,0)+o,y=Zr(d),E=u.selectAll(".domain").data([0]),x=(E.enter().append("path").attr("class","domain"),Qi.transition(E));g.append("line"),g.append("text");var N,C,M,T,w=g.select("line"),S=v.select("line"),O=f.select("text").text(p),R=g.select("text"),D=v.select("text"),A="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=Yi,N="x",M="y",C="x2",T="y2",O.attr("dy",A<0?"0em":".71em").style("text-anchor","middle"),x.attr("d","M"+y[0]+","+A*a+"V0H"+y[1]+"V"+A*a)):(t=Bi,N="y",M="x",C="y2",T="x2",O.attr("dy",".32em").style("text-anchor",A<0?"end":"start"),x.attr("d","M"+A*a+","+y[0]+"H0V"+y[1]+"H"+A*a)),w.attr(T,A*i),R.attr(M,A*b),S.attr(C,0).attr(T,A*i),D.attr(N,0).attr(M,A*b),d.rangeBand){var L=d,I=L.rangeBand()/2;c=d=function(t){return L(t)+I}}else c.rangeBand?c=d:m.call(t,d,c);g.call(t,c,d),v.call(t,d,d)})}var e,n=Qi.scale.linear(),r=Ls,i=6,a=6,o=3,s=[10],l=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in Is?e+"":Ls,t):r},t.ticks=function(){return arguments.length?(s=ea(arguments),t):s},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(i=+e,a=+arguments[n-1],t):i},t.innerTickSize=function(e){return arguments.length?(i=+e,t):i},t.outerTickSize=function(e){return arguments.length?(a=+e,t):a},t.tickPadding=function(e){return arguments.length?(o=+e,t):o},t.tickSubdivide=function(){return arguments.length&&t},t};var Ls="bottom",Is={top:1,right:1,bottom:1,left:1};Qi.svg.brush=function(){function t(a){a.each(function(){var a=Qi.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),o=a.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),a.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=a.selectAll(".resize").data(g,_);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return ks[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var l,d=Qi.transition(a),h=Qi.transition(o);u&&(l=Zr(u),h.attr("x",l[0]).attr("width",l[1]-l[0]),n(d)),c&&(l=Zr(c),h.attr("y",l[0]).attr("height",l[1]-l[0]),r(d)),e(d)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+d[+/e$/.test(t)]+","+h[+/^s/.test(t)]+")"})}function n(t){t.select(".extent").attr("x",d[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",d[1]-d[0])}function r(t){t.select(".extent").attr("y",h[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function i(){function i(){var t=Qi.mouse(y),i=!1;b&&(t[0]+=b[0],t[1]+=b[1]),T||(Qi.event.altKey?(v||(v=[(d[0]+d[1])/2,(h[0]+h[1])/2]),O[0]=d[+(t[0]<v[0])],O[1]=h[+(t[1]<v[1])]):v=null),C&&g(t,u,0)&&(n(_),i=!0),M&&g(t,c,1)&&(r(_),i=!0),i&&(e(_),x({type:"brush",mode:T?"move":"resize"}))}function g(t,e,n){var r,i,o=Zr(e),l=o[0],u=o[1],c=O[n],g=n?h:d,m=g[1]-g[0];if(T&&(l-=c,u-=m+c),r=(n?f:p)?Math.max(l,Math.min(u,t[n])):t[n],T?i=(r+=c)+m:(v&&(c=Math.max(l,Math.min(u,2*v[n]-r))),c<r?(i=r,r=c):i=c),g[0]!=r||g[1]!=i)return n?s=null:a=null,g[0]=r,g[1]=i,!0}function m(){i(),_.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),Qi.select("body").style("cursor",null),R.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),S(),x({type:"brushend"})}var v,b,y=this,E=Qi.select(Qi.event.target),x=l.of(y,arguments),_=Qi.select(y),N=E.datum(),C=!/^(n|s)$/.test(N)&&u,M=!/^(e|w)$/.test(N)&&c,T=E.classed("extent"),S=J(y),O=Qi.mouse(y),R=Qi.select(o(y)).on("keydown.brush",function(){32==Qi.event.keyCode&&(T||(v=null,O[0]-=d[1],O[1]-=h[1],T=2),w())}).on("keyup.brush",function(){32==Qi.event.keyCode&&2==T&&(O[0]+=d[1],O[1]+=h[1],T=0,w())});if(Qi.event.changedTouches?R.on("touchmove.brush",i).on("touchend.brush",m):R.on("mousemove.brush",i).on("mouseup.brush",m),_.interrupt().selectAll("*").interrupt(),T)O[0]=d[0]-O[0],O[1]=h[0]-O[1];else if(N){var D=+/w$/.test(N),A=+/^n/.test(N);b=[d[1-D]-O[0],h[1-A]-O[1]],O[0]=d[D],O[1]=h[A]}else Qi.event.altKey&&(v=O.slice());_.style("pointer-events","none").selectAll(".resize").style("display",null),Qi.select("body").style("cursor",E.style("cursor")),x({type:"brushstart"}),i()}var a,s,l=O(t,"brushstart","brush","brushend"),u=null,c=null,d=[0,0],h=[0,0],p=!0,f=!0,g=Vs[0];return t.event=function(t){t.each(function(){var t=l.of(this,arguments),e={x:d,y:h,i:a,j:s},n=this.__chart__||e;this.__chart__=e,Ss?Qi.select(this).transition().each("start.brush",function(){a=n.i,s=n.j,d=n.x,h=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=Yn(d,e.x),r=Yn(h,e.y);return a=s=null,function(i){d=e.x=n(i),h=e.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=e.i,s=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(u=e,g=Vs[!u<<1|!c],t):u},t.y=function(e){return arguments.length?(c=e,g=Vs[!u<<1|!c],t):c},t.clamp=function(e){return arguments.length?(u&&c?(p=!!e[0],f=!!e[1]):u?p=!!e:c&&(f=!!e),t):u&&c?[p,f]:u?p:c?f:null},t.extent=function(e){var n,r,i,o,l;return arguments.length?(u&&(n=e[0],r=e[1],c&&(n=n[0],r=r[0]),a=[n,r],u.invert&&(n=u(n),r=u(r)),r<n&&(l=n,n=r,r=l),n==d[0]&&r==d[1]||(d=[n,r])),c&&(i=e[0],o=e[1],u&&(i=i[1],o=o[1]),s=[i,o],c.invert&&(i=c(i),o=c(o)),o<i&&(l=i,i=o,o=l),i==h[0]&&o==h[1]||(h=[i,o])),t):(u&&(a?(n=a[0],r=a[1]):(n=d[0],r=d[1],u.invert&&(n=u.invert(n),r=u.invert(r)),r<n&&(l=n,n=r,r=l))),c&&(s?(i=s[0],o=s[1]):(i=h[0],o=h[1],c.invert&&(i=c.invert(i),o=c.invert(o)),o<i&&(l=i,i=o,o=l))),u&&c?[[n,i],[r,o]]:u?[n,r]:c&&[i,o])},t.clear=function(){return t.empty()||(d=[0,0],h=[0,0],a=s=null),t},t.empty=function(){return!!u&&d[0]==d[1]||!!c&&h[0]==h[1]},Qi.rebind(t,l,"on")};var ks={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Vs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],js=eo.format=so.timeFormat,Hs=js.utc,$s=Hs("%Y-%m-%dT%H:%M:%S.%LZ");js.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?qi:$s,qi.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},qi.toString=$s.toString,eo.second=It(function(t){return new no(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),eo.seconds=eo.second.range,eo.seconds.utc=eo.second.utc.range,eo.minute=It(function(t){return new no(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),eo.minutes=eo.minute.range,eo.minutes.utc=eo.minute.utc.range,eo.hour=It(function(t){var e=t.getTimezoneOffset()/60;return new no(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),eo.hours=eo.hour.range,eo.hours.utc=eo.hour.utc.range,eo.month=It(function(t){return(t=eo.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),eo.months=eo.month.range,eo.months.utc=eo.month.utc.range;var Ps=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Gs=[[eo.second,1],[eo.second,5],[eo.second,15],[eo.second,30],[eo.minute,1],[eo.minute,5],[eo.minute,15],[eo.minute,30],[eo.hour,1],[eo.hour,3],[eo.hour,6],[eo.hour,12],[eo.day,1],[eo.day,2],[eo.week,1],[eo.month,1],[eo.month,3],[eo.year,1]],Fs=js.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",xe]]),zs={range:function(t,e,n){return Qi.range(Math.ceil(t/n)*n,+e,n).map(Ji)},floor:_,ceil:_};Gs.year=eo.year,eo.scale=function(){return Zi(Qi.scale.linear(),Gs,Fs)};var Us=Gs.map(function(t){return[t[0].utc,t[1]]}),Ws=Hs.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",xe]]);Us.year=eo.year.utc,eo.scale.utc=function(){return Zi(Qi.scale.linear(),Us,Ws)},Qi.text=Tt(function(t){return t.responseText}),Qi.json=function(t,e){return wt(t,"application/json",Xi,e)},Qi.html=function(t,e){return wt(t,"text/html",Ki,e)},Qi.xml=Tt(function(t){return t.responseXML}),this.d3=Qi,void 0!==(i="function"==typeof(r=Qi)?r.call(e,n,e,t):r)&&(t.exports=i)}()},function(t,e,n){"use strict";function r(t,e,n,r=0,i=0){const a=(e-r-10)/2,o=(n-i-3)/2;t.fillStyle="#c1c1c1",t.fillRect(a,o,10,3)}e.c=r,e.b=function(t,e,n){const r=e.isMissing(n.v,n.dataIndex);return t.classList.toggle("lu-missing",r),r},e.a=function(t,e,n,i,a=0,o=0){const s=e.isMissing(n.v,n.dataIndex);return s&&r(t,e.getWidth(),i,a,o),s}},function(t,e,n){"use strict";function r(t){return void 0===t||null==t||"number"==typeof t&&isNaN(t)||""===t||"NA"===t||"string"==typeof t&&"na"===t.toLowerCase()||t instanceof Array&&t.every(t=>r(t))}e.b=r,e.c=function(t){return null===t||void 0===t||isNaN(t)};e.a=-1},function(t,e,n){"use strict";function r(t){if(27===t.which&&a.visiblePopups.length>0){const t=a.visiblePopups[a.visiblePopups.length-1];a.removePopup(t)}}e.b=function(t){return(e,n)=>{const r=e[t],i=n[t];return r.toLowerCase().localeCompare(i.toLowerCase())}};var i=n(59);class a{constructor(t,e){this.attachment=t,this.title=e}static removePopup(t){const e=a.visiblePopups.indexOf(t);e>-1&&t&&(a.visiblePopups.splice(e,1),t.remove()),0===a.visiblePopups.length&&t.ownerDocument.removeEventListener("keyup",r)}static removeAllPopups(){0!==a.visiblePopups.length&&a.visiblePopups.splice(0,a.visiblePopups.length).forEach(t=>{t.ownerDocument.removeEventListener("keyup",r),t.remove()})}static registerPopup(t,e,n,i=!0){n&&a.removeAllPopups(),0===a.visiblePopups.length&&t.ownerDocument.addEventListener("keyup",r);const o=()=>{a.visiblePopups[a.visiblePopups.length-1]===t&&(t.removeEventListener("mouseleave",o),e.destroy(),a.removePopup(t))};i&&t.addEventListener("mouseleave",o),a.visiblePopups.push(t)}makeMenuPopup(t){const e=this.attachment.ownerDocument.body;e.insertAdjacentHTML("beforeend",`<div class="lu-popup2 lu-popup-menu">${t}</div>`);const n=e.lastElementChild,r=new i.a(this.attachment,n,{placement:"bottom-start",removeOnDestroy:!0});return a.registerPopup(n,r,!0),this.hidePopupOnClickOutside(n),n}makePopup(t,e=!0){const n=this.attachment.ownerDocument.body;n.insertAdjacentHTML("beforeend",`<div class="lu-popup2">${this.dialogForm(t)}</div>`);const r=n.lastElementChild,o=r.querySelector("input[autofocus]");o&&o.focus();const s=new i.a(this.attachment,r,{placement:"bottom-start",removeOnDestroy:!0});return a.registerPopup(r,s,!1,e),this.hidePopupOnClickOutside(r),r}makeChoosePopup(t){const e=this.attachment.ownerDocument.body;e.insertAdjacentHTML("beforeend",`<div class="lu-popup2 chooser">${this.basicDialog(t)}</div>`);const n=e.lastElementChild,r=new i.a(this.attachment,n,{placement:"bottom-start",removeOnDestroy:!0});return a.registerPopup(n,r,!1),this.hidePopupOnClickOutside(n),n}dialogForm(t,e=!0){return`<span style="font-weight: bold" class="lu-popup-title">${this.title}</span>\n            <form onsubmit="return false">\n                ${t}\n                ${e?'<button type = "submit" class="ok fa fa-check" title="ok"></button><button type = "reset" class="cancel fa fa-times" title="cancel"></button><button type = "button" class="reset fa fa-undo" title="reset"></button></form>':""}\n            </form>`}onButton(t,e){t.querySelector(".cancel").addEventListener("click",n=>{e.cancel(),a.removePopup(t),n.stopPropagation(),n.preventDefault()}),t.querySelector(".reset").addEventListener("click",t=>{e.reset(),t.stopPropagation(),t.preventDefault()}),t.querySelector(".ok").addEventListener("click",t=>{e.submit()&&a.removeAllPopups(),t.stopPropagation(),t.preventDefault()})}basicDialog(t){return`<span style="font-weight: bold" class="lu-popup-title">${this.title}</span>\n            <form onsubmit="return false">\n                ${t}\n            </form>`}hidePopupOnClickOutside(t){const e=this.attachment.ownerDocument.body;t.addEventListener("click",t=>{t.stopPropagation()});const n=()=>{a.removeAllPopups(),e.removeEventListener("click",n)};e.addEventListener("click",n)}}a.visiblePopups=[],e.a=a},function(t,e,n){"use strict";var r=n(1);class i extends r.a{constructor(t,e){super(t,e),this.accessor=e.accessor||(()=>null),this.loaded=!0!==e.lazyLoaded}getLabel(t,e){return this.isLoaded()?String(this.getValue(t,e)):""}getRaw(t,e){return this.isLoaded()?this.accessor(t,e,this.id,this.desc,this.findMyRanker()):null}getValue(t,e){return this.getRaw(t,e)}isLoaded(){return this.loaded}setLoaded(t){this.loaded!==t&&this.fire([r.a.EVENT_DIRTY_HEADER,r.a.EVENT_DIRTY_VALUES,r.a.EVENT_DIRTY],this.loaded,this.loaded=t)}getRendererType(){return this.isLoaded()?super.getRendererType():i.RENDERER_LOADING}dump(t){const e=super.dump(t);return e.loaded=this.loaded,this.loaded||e.rendererType!==i.RENDERER_LOADING||delete e.rendererType,e}restore(t,e){void 0!==t.loaded&&(this.loaded=t.loaded),super.restore(t,e)}}e.a=i,i.RENDERER_LOADING="loading"},function(t,e,n){"use strict";function r(t="linear"){switch(t){case"log":return s.scale.log().clamp(!0);case"sqrt":return s.scale.sqrt().clamp(!0);case"pow1.1":return s.scale.pow().exponent(1.1).clamp(!0);case"pow2":return s.scale.pow().exponent(2).clamp(!0);case"pow3":return s.scale.pow().exponent(3).clamp(!0);default:return s.scale.linear().clamp(!0)}}function i(t,e){return t.length===e.length&&t.every((t,n)=>Object(c.t)(t,e[n],1e-4))}function a(t,e){return"log"===e&&0===t[0]&&(t[0]=1e-7),t}function o(t){if("script"===t.type){const e=new f;return e.restore(t),e}const e=new p;return e.restore(t),e}e.c=o,e.e=function(t){return"function"==typeof t.getMapping};var s=n(3),l=(n.n(s),n(1)),u=n(7),c=n(0),d=n(5),h=n(2);class p{constructor(t=[0,1],e="linear",n=[0,1]){this.type=e,this.s=r(e).domain(a(t,this.type)).range(n)}get domain(){return this.s.domain()}set domain(t){this.s.domain(a(t,this.type))}get range(){return this.s.range()}set range(t){this.s.range(t)}getRange(t){return[t(this.invert(0)),t(this.invert(1))]}apply(t){return this.s(t)}invert(t){return this.s.invert(t)}get scaleType(){return this.type}dump(){return{type:this.type,domain:this.domain,range:this.range}}eq(t){if(!(t instanceof p))return!1;const e=t;return e.type===this.type&&i(this.domain,e.domain)&&i(this.range,e.range)}restore(t){this.type=t.type,this.s=r(t.type).domain(t.domain).range(t.range)}clone(){return new p(this.domain,this.type,this.range)}}e.a=p;class f{constructor(t=[0,1],e="return this.linear(value,this.value_min,this.value_max);"){this.domain=t,this._code=e,this.f=new Function("value",e)}get code(){return this._code}set code(t){this._code!==t&&(this._code=t,this.f=new Function("value",t))}getRange(){return["?","?"]}apply(t){const e=this.domain[0],n=this.domain[this.domain.length-1],r=this.f.call({value_min:e,value_max:n,value_range:n-e,value_domain:this.domain.slice(),linear:(t,e,n)=>(t-e)/(n-e)},t);return"number"==typeof r?Math.max(Math.min(r,1),0):NaN}dump(){return{type:"script",code:this.code}}eq(t){if(!(t instanceof f))return!1;return t.code===this.code}restore(t){this.code=t.code}clone(){return new f(this.domain,this.code)}}e.b=f;class g extends u.a{constructor(t,e){super(t,e),this.missingValue=NaN,this.currentFilter=Object(h.l)(),this.numberFormat=Object(s.format)(".2f"),this.currentStratifyThresholds=[],this.groupSortMethod=h.a.median,e.map?this.mapping=o(e.map):e.domain&&(this.mapping=new p(e.domain,"linear",e.range||[0,1])),this.original=this.mapping.clone(),e.numberFormat&&(this.numberFormat=Object(s.format)(e.numberFormat)),void 0!==e.missingValue&&(this.missingValue=e.missingValue),this.setGroupRenderer("boxplot")}dump(t){const e=super.dump(t);return e.map=this.mapping.dump(),e.filter=Object(h.j)(this.currentFilter,Object(h.l)())?null:this.currentFilter,e.missingValue=this.missingValue,e.groupSortMethod=this.groupSortMethod,this.currentStratifyThresholds&&(e.stratifyThreshholds=this.currentStratifyThresholds),e}restore(t,e){super.restore(t,e),t.map?this.mapping=o(t.map):t.domain&&(this.mapping=new p(t.domain,"linear",t.range||[0,1])),t.groupSortMethod&&(this.groupSortMethod=t.groupSortMethod),t.filter&&(this.currentFilter=Object(h.n)(t.filter)),t.stratifyThreshholds&&(this.currentStratifyThresholds=t.stratifyThresholds),void 0!==t.missingValue&&(this.missingValue=t.missingValue),t.numberFormat&&(this.numberFormat=Object(s.format)(t.numberFormat))}createEventList(){return super.createEventList().concat([g.EVENT_MAPPING_CHANGED])}getLabel(t,e){if(this.desc.numberFormat){const n=this.getRawValue(t,e);return isNaN(n)?"NaN":isFinite(n)?this.numberFormat(n):n.toString()}const n=super.getValue(t,e);return"number"==typeof n?this.numberFormat(+n):String(n)}getRange(){return this.mapping.getRange(this.numberFormat)}getRawValue(t,e,n=this.missingValue){const r=super.getValue(t,e);return Object(d.b)(r)?n:+r}isMissing(t,e){return Object(d.b)(super.getValue(t,e))}getValue(t,e){const n=this.getRawValue(t,e);return isNaN(n)?n:this.mapping.apply(n)}getNumber(t,e){return this.getValue(t,e)}getRawNumber(t,e,n=this.missingValue){return this.getRawValue(t,e,n)}compare(t,e,n,r){return Object(h.m)(this.getNumber(t,n),this.getNumber(e,r),this.isMissing(t,n),this.isMissing(e,r))}groupCompare(t,e){return Object(h.g)(t.rows,e.rows,this,this.groupSortMethod)}getOriginalMapping(){return this.original.clone()}getMapping(){return this.mapping.clone()}setMapping(t){this.mapping.eq(t)||this.fire([g.EVENT_MAPPING_CHANGED,l.a.EVENT_DIRTY_VALUES,l.a.EVENT_DIRTY],this.mapping.clone(),this.mapping=t)}isFiltered(){return this.currentFilter.filterMissing||isFinite(this.currentFilter.min)||isFinite(this.currentFilter.max)}get filterMin(){return this.currentFilter.min}get filterMax(){return this.currentFilter.max}get filterMissing(){return this.currentFilter.filterMissing}getFilter(){return{min:this.currentFilter.min,max:this.currentFilter.max,filterMissing:this.currentFilter.filterMissing}}set filterMin(t){const e=this.getFilter();this.currentFilter.min=Object(d.c)(t)?-1/0:t,this.fire([l.a.EVENT_FILTER_CHANGED,l.a.EVENT_DIRTY_VALUES,l.a.EVENT_DIRTY],e,this.getFilter())}set filterMax(t){const e=this.getFilter();this.currentFilter.max=Object(d.c)(t)?1/0:t,this.fire([l.a.EVENT_FILTER_CHANGED,l.a.EVENT_DIRTY_VALUES,l.a.EVENT_DIRTY],e,this.getFilter())}set filterMissing(t){const e=this.getFilter();this.currentFilter.filterMissing=t,this.fire([l.a.EVENT_FILTER_CHANGED,l.a.EVENT_DIRTY_VALUES,l.a.EVENT_DIRTY],e,this.getFilter())}setFilter(t={min:-1/0,max:1/0,filterMissing:!1}){if(Object(h.j)(t,this.currentFilter))return;const e=this.getFilter();this.currentFilter.min=Object(d.c)(t.min)?-1/0:t.min,this.currentFilter.max=Object(d.c)(t.max)?1/0:t.max,this.currentFilter.filterMissing=t.filterMissing,this.fire([l.a.EVENT_FILTER_CHANGED,l.a.EVENT_DIRTY_VALUES,l.a.EVENT_DIRTY],e,this.getFilter())}filter(t,e){if(!this.isFiltered())return!0;const n=this.getRawNumber(t,e,NaN);if(isNaN(n))return!this.filterMissing;const r=+n;return!(isFinite(this.currentFilter.min)&&r<this.currentFilter.min||isFinite(this.currentFilter.max)&&r>this.currentFilter.max)}getStratifyThresholds(){return this.currentStratifyThresholds.slice()}setStratifyThresholds(t){if(Object(c.j)(this.currentStratifyThresholds,t))return;const e=this.getStratifyThresholds();this.currentStratifyThresholds=t.slice(),this.fire([l.a.EVENT_GROUPING_CHANGED,l.a.EVENT_DIRTY_VALUES,l.a.EVENT_DIRTY],e,t)}group(t,e){if(0===this.currentStratifyThresholds.length)return super.group(t,e);const n=this.getRawNumber(t,e);switch(this.currentStratifyThresholds.findIndex(t=>t<=n)){case-1:return{name:`${this.label} > ${this.currentStratifyThresholds[this.currentStratifyThresholds.length-1]}`,color:"gray"};case 0:return{name:`${this.label} <= ${this.currentStratifyThresholds[0]}`,color:"gray"};default:return{name:`${this.currentStratifyThresholds[e-1]} <= ${this.label} <= ${this.currentStratifyThresholds[e]}`,color:"gray"}}}getSortMethod(){return this.groupSortMethod}setSortMethod(t){this.groupSortMethod!==t&&(this.fire([l.a.EVENT_SORTMETHOD_CHANGED],this.groupSortMethod,this.groupSortMethod=t),this.isGroupSortedByMe().asc||this.toggleMyGroupSorting())}}e.d=g,g.EVENT_MAPPING_CHANGED="mappingChanged"},function(t,e,n){"use strict";var r=n(1),i=n(7);class a extends i.a{constructor(t,e){super(t,e),this.currentFilter=null,this._alignment="left",this.setWidthImpl(200),this._alignment=e.alignment||"left"}get alignment(){return this._alignment}getValue(t,e){const n=super.getValue(t,e);return void 0===n||null==n?"":String(n)}dump(t){const e=super.dump(t);return this.currentFilter instanceof RegExp?e.filter=`REGEX:${this.currentFilter.source}`:e.filter=this.currentFilter,e.alignment=this.alignment,e}restore(t,e){super.restore(t,e),t.filter&&"REGEX:"===t.filter.slice(0,6)?this.currentFilter=new RegExp(t.filter.slice(6)):this.currentFilter=t.filter||null,this._alignment=t.alignment||this._alignment}isFiltered(){return null!=this.currentFilter}filter(t,e){if(!this.isFiltered())return!0;const n=this.getLabel(t,e),r=this.currentFilter;return r===a.FILTER_MISSING?null!=n&&""!==n.trim():"string"==typeof r&&r.length>0?""!==n&&n.toLowerCase().indexOf(r.toLowerCase())>=0:!(r instanceof RegExp)||""!==n&&r.test(n)}getFilter(){return this.currentFilter}setFilter(t){""===t&&(t=null),this.currentFilter!==t&&this.fire([r.a.EVENT_FILTER_CHANGED,r.a.EVENT_DIRTY_VALUES,r.a.EVENT_DIRTY],this.currentFilter,this.currentFilter=t)}compare(t,e,n,r){const i=this.getValue(t,n),a=this.getValue(e,r);return""===i?""===a?0:1:""===a?-1:i.toLowerCase().localeCompare(a.toLowerCase())}}e.a=a,a.FILTER_MISSING="__FILTER_MISSING"},function(t,e,n){"use strict";e.b=function(t){return t instanceof i.a&&"function"==typeof t.getCategories||!(t instanceof i.a)&&null!=t.type.match(/(categorical|ordinal|hierarchy)/)};var r=n(3),i=(n.n(r),n(1)),a=n(7),o=n(9),s=n(5);class l extends a.a{constructor(t,e){super(t,e),this.colors=r.scale.category10(),this.catLabels=new Map,this.currentFilter=null,this.separator=";",this.separator=e.separator||this.separator,this.initCategories(e)}initCategories(t){if(!t.categories)return;const e=[],n=this.colors.range().slice(),r=new Map;t.categories.forEach((t,i)=>{"string"!=typeof t?(e.push(t.name||t.value),t.label&&r.set(t.name,t.label),t.color&&(n[i]=t.color)):e.push(t)}),this.catLabels=r,this.colors.domain(e).range(n)}get categories(){return this.colors.domain()}get categoryColors(){return this.colors.range()}get categoryLabels(){return null===this.catLabels||0===this.catLabels.size?this.categories:this.categories.map(t=>this.catLabels.has(t)?this.catLabels.get(t):t)}getLabel(t,e){return null===this.catLabels||0===this.catLabels.size?o.a.prototype.getValue.call(this,t,e):this.getLabels(t,e).join(this.separator)}getFirstLabel(t,e){const n=this.getLabels(t,e);return n.length>0?n[0]:null}getLabels(t,e){const n=o.a.prototype.getValue.call(this,t,e);return(t=>null===this.catLabels||0===this.catLabels.size?t:t.map(t=>this.catLabels.has(t)?this.catLabels.get(t):t))(n?n.split(this.separator):[])}getValue(t,e){const n=this.getValues(t,e);return n.length>0?n[0]:null}getValues(t,e){const n=o.a.prototype.getValue.call(this,t,e);return n?n.split(this.separator):[]}isMissing(t,e){const n=this.getValues(t,e);return!n||0===n.length}getCategories(t,e){return this.getValues(t,e)}getColor(t,e){const n=this.getValue(t,e);return null===n||""===n?null:this.colors(n)}getColors(t,e){return this.getCategories(t,e).map(this.colors)}dump(t){const e=super.dump(t);return e.filter=this.currentFilter,e.colors={domain:this.colors.domain(),range:this.colors.range(),separator:this.separator},null!==this.catLabels&&0!==this.catLabels.size&&(e.labels=Array.from(this.catLabels.entries())),e}restore(t,e){if(super.restore(t,e),"filter"in t){const e=t.filter;"string"==typeof e||Array.isArray(e)?this.currentFilter={filter:e,filterMissing:!1}:this.currentFilter=e}else this.currentFilter=null;t.colors&&this.colors.domain(t.colors.domain).range(t.colors.range),Array.isArray(t.labels)&&(this.catLabels=new Map,t.labels.forEach(t=>this.catLabels.set(t.key,t.value))),this.separator=t.separator||this.separator}isFiltered(){return null!=this.currentFilter}static filter(t,e){if(!t)return!0;if(null==e&&t.filterMissing)return!1;const n=t.filter;return Array.isArray(n)?n.indexOf(e)>=0:"string"==typeof n&&n.length>0?null!=e&&e.toLowerCase().indexOf(n.toLowerCase())>=0:!(n instanceof RegExp)||null!=e&&n.test(e)}filter(t,e){if(!this.isFiltered())return!0;const n=this.getCategories(t,e);return(!this.currentFilter.filterMissing||0!==n.length)&&n.every(t=>l.filter(this.currentFilter,t))}getFilter(){return this.currentFilter}setFilter(t){(function(t,e){return t===e||null!==t&&null!==e&&t.filterMissing===e.filterMissing&&typeof t.filter==typeof e.filter&&(Array.isArray(t.filter)?function(t,e){const n=null!=t?t.length:0,r=null!=e?e.length:0;return n===r&&(0===n||t.every((t,n)=>t===e[n]))}(t.filter,e.filter):String(t.filter)===String(e.filter))})(this.currentFilter,t)||this.fire([i.a.EVENT_FILTER_CHANGED,i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY],this.currentFilter,this.currentFilter=t)}compare(t,e,n,r){const i=this.getValues(t,n),a=this.getValues(e,r);if(0===i.length)return 0===a.length?0:s.a;if(0===a.length)return-1*s.a;for(let t=0;t<Math.min(i.length,a.length);++t){const e=i[t].localeCompare(a[t]);if(0!==e)return e}return i.length-a.length}group(t,e){const n=this.getValue(t,e);if(!n)return super.group(t,e);return{name:n,color:this.getColor(t,e)}}getGroupRenderer(){const t=super.getGroupRenderer();return t===this.desc.type&&this.isGroupedBy()>=0?"catcolorshifted":t}}e.a=l},function(t,e,n){"use strict";e.b=function(t){return"function"==typeof t.getCollapsed};var r=n(1),i=n(2),a=n(7),o=n(0);class s extends r.a{constructor(t,e){super(t,e),this._children=[]}assignNewId(t){super.assignNewId(t),this._children.forEach(e=>e.assignNewId(t))}get children(){return this._children.slice()}get length(){return this._children.length}flatten(t,e,n=0,i=0){let a=0;return(0===n||n<=r.a.FLAT_ALL_COLUMNS)&&(a=this.getWidth(),t.push({col:this,offset:e,width:a}),0===n)?a:(this._children.forEach(a=>{(!a.isHidden()||n<=r.a.FLAT_ALL_COLUMNS)&&a.flatten(t,e,n-1,i)}),a)}dump(t){const e=super.dump(t);return e.children=this._children.map(e=>e.dump(t)),e}restore(t,e){t.children.map(t=>{const n=e(t);n&&this.push(n)}),super.restore(t,e)}insert(t,e){return!Object(i.h)(t)&&this.canJustAddNumbers?null:(this._children.splice(e,0,t),this.insertImpl(t,e))}move(t,e){if(t.parent!==this)return null;const n=this._children.indexOf(t);return e===n?t:(this._children.splice(n,1),this._children.splice(n<e?e-1:e,0,t),this.moveImpl(t,e,n))}insertImpl(t,e){return t.parent=this,this.forward(t,...Object(o.u)(".combine",r.a.EVENT_DIRTY_HEADER,r.a.EVENT_DIRTY_VALUES,r.a.EVENT_DIRTY,r.a.EVENT_FILTER_CHANGED)),this.fire([r.a.EVENT_ADD_COLUMN,r.a.EVENT_DIRTY_HEADER,r.a.EVENT_DIRTY_VALUES,r.a.EVENT_DIRTY],t,e),t}moveImpl(t,e,n){return this.fire([r.a.EVENT_MOVE_COLUMN,r.a.EVENT_DIRTY_HEADER,r.a.EVENT_DIRTY_VALUES,r.a.EVENT_DIRTY],t,e,n),t}push(t){return this.insert(t,this._children.length)}at(t){return this._children[t]}indexOf(t){return this._children.indexOf(t)}insertAfter(t,e){const n=this.indexOf(e);return n<0?null:this.insert(t,n+1)}moveAfter(t,e){const n=this.indexOf(e);return n<0?null:this.move(t,n+1)}remove(t){const e=this._children.indexOf(t);return!(e<0)&&(this._children.splice(e,1),this.removeImpl(t))}removeImpl(t){return t.parent=null,this.unforward(t,...Object(o.u)(".combine",r.a.EVENT_DIRTY_HEADER,r.a.EVENT_DIRTY_VALUES,r.a.EVENT_DIRTY,r.a.EVENT_FILTER_CHANGED)),this.fire([r.a.EVENT_REMOVE_COLUMN,r.a.EVENT_DIRTY_HEADER,r.a.EVENT_DIRTY_VALUES,r.a.EVENT_DIRTY],t),!0}getColor(t,e){return this.color}isFiltered(){return this._children.some(t=>t.isFiltered())}filter(t,e){return this._children.every(n=>n.filter(t,e))}isLoaded(){return this._children.every(t=>!(t instanceof a.a||t instanceof s)||t.isLoaded())}toSortingDesc(t){return this._children.map(e=>e.toSortingDesc(t))}get canJustAddNumbers(){return!1}}e.a=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defineColumn=function(t,e={}){class n extends r.a{constructor(t,e){super(t,e),"function"==typeof this.init&&this.init.apply(this,[].slice.apply(arguments))}init(){}}return n.prototype.toString=(()=>t),n.prototype=Object.assign(n.prototype,e),n},e.models=function(){return{number:i.d,date:M.a,image:y.a,numbers:x.a,string:a.a,link:y.a,stack:o.b,rank:p.b,boolean:l.a,booleans:E.a,categorical:u.a,ordinal:m.a,actions:b.b,annotate:s.a,selection:f.b,max:d.b,min:c.b,mean:h.b,script:g.b,nested:v.b,boxplot:_.a,aggregate:N.b,hierarchy:C.a,imposition:T.b}};var r=n(7),i=n(8),a=n(9),o=n(19),s=n(46),l=n(47),u=n(10),c=n(48),d=n(49),h=n(50),p=n(25),f=n(20),g=n(27),m=n(51),v=n(35),b=n(36),y=n(28),E=n(76),x=n(52),_=n(26),N=n(29),C=n(37),M=n(77),T=n(30),w=n(1);n.d(e,"Column",function(){return w.a});var S=n(11);n.d(e,"CompositeColumn",function(){return S.a}),n.d(e,"createMappingFunction",function(){return i.c}),n.d(e,"ScaleMappingFunction",function(){return i.a}),n.d(e,"ScriptMappingFunction",function(){return i.b});var O=n(2);n.d(e,"isNumberColumn",function(){return O.h}),n.d(e,"isCategoricalColumn",function(){return u.b});var R=n(13);n.d(e,"Ranking",function(){return R.a}),n.d(e,"isSupportType",function(){return R.b}),n.d(e,"createMinDesc",function(){return c.a}),n.d(e,"createMaxDesc",function(){return d.a}),n.d(e,"createMeanDesc",function(){return h.a}),n.d(e,"createRankDesc",function(){return p.a}),n.d(e,"createSelectionDesc",function(){return f.a}),n.d(e,"createScriptDesc",function(){return g.a}),n.d(e,"createNestedDesc",function(){return v.a}),n.d(e,"createStackDesc",function(){return o.a}),n.d(e,"createActionDesc",function(){return b.a}),n.d(e,"createAggregateDesc",function(){return N.a}),n.d(e,"createImpositionDesc",function(){return T.a})},function(t,e,n){"use strict";function r(t){return["rank","selection","actions","aggregate"].indexOf(t.type)>=0}e.b=r;var i=n(1),a=n(9),o=n(24),s=n(0);class l extends s.a{constructor(t,e=1,n=1){super(),this.id=t,this.maxSortCriteria=e,this.maxGroupColumns=n,this.sortCriteria=[],this.groupSortCriteria=[],this.groupColumns=[],this.columns=[],this.comparator=((t,e,n,r)=>{if(0===this.sortCriteria.length)return 0;for(const i of this.sortCriteria){const a=i.col.compare(t,e,n,r);if(0!==a)return i.asc?a:-a}return n-r}),this.groupComparator=((t,e)=>{if(0===this.groupSortCriteria.length)return t.name.toLowerCase().localeCompare(e.name.toLowerCase());for(const n of this.groupSortCriteria){const r=n.col.groupCompare(t,e);if(0!==r)return n.asc?r:-r}return t.name.localeCompare(e.name)}),this.grouper=((t,e)=>{const n=this.groupColumns;switch(n.length){case 0:return o.a;case 1:return n[0].group(t,e);default:const r=n.map(n=>n.group(t,e));return Object(o.b)(r)}}),this.dirtyOrder=(()=>{this.fire([l.EVENT_DIRTY_ORDER,l.EVENT_DIRTY_VALUES,l.EVENT_DIRTY],this.getSortCriteria())}),this.groups=[Object.assign({order:[]},o.a)],this.id=Object(i.b)(t)}createEventList(){return super.createEventList().concat([l.EVENT_WIDTH_CHANGED,l.EVENT_FILTER_CHANGED,l.EVENT_LABEL_CHANGED,l.EVENT_GROUPS_CHANGED,l.EVENT_ADD_COLUMN,l.EVENT_REMOVE_COLUMN,l.EVENT_GROUP_CRITERIA_CHANGED,l.EVENT_MOVE_COLUMN,l.EVENT_DIRTY,l.EVENT_DIRTY_HEADER,l.EVENT_DIRTY_VALUES,l.EVENT_GROUP_SORT_CRITERIA_CHANGED,l.EVENT_SORT_CRITERIA_CHANGED,l.EVENT_SORT_CRITERIAS_CHANGED,l.EVENT_DIRTY_ORDER,l.EVENT_ORDER_CHANGED])}assignNewId(t){this.id=Object(i.b)(t()),this.columns.forEach(e=>e.assignNewId(t))}setOrder(t){this.setGroups([Object.assign({order:t},o.a)])}setGroups(t){const e=this.getOrder(),n=this.groups;this.groups=t,this.fire([l.EVENT_ORDER_CHANGED,l.EVENT_GROUPS_CHANGED,l.EVENT_DIRTY_VALUES,l.EVENT_DIRTY],e,this.getOrder(),n,t)}getOrder(){switch(this.groups.length){case 0:return[];case 1:return this.groups[0].order;default:return[].concat(...this.groups.map(t=>t.order))}}getGroups(){return this.groups.slice()}dump(t){const e={};return e.columns=this.columns.map(e=>e.dump(t)),e.sortCriterias=this.sortCriteria.map(t=>({asc:t.asc,sortBy:t.col.id})),e.groupColumns=this.groupColumns.map(t=>t.id),e}restore(t,e){if(this.clear(),t.columns.map(t=>{const n=e(t);n&&this.push(n)}),t.sortColumn&&t.sortColumn.sortBy){const e=this.columns.filter(e=>e.id===t.sortColumn.sortBy);this.sortBy(0===e.length?null:e[0],t.sortColumn.asc)}if(t.groupColumns){const e=t.groupColumns.map(t=>this.columns.find(e=>e.id===t));this.groupBy(e)}const n=t=>t.map(t=>({asc:t.asc,col:this.columns.find(e=>e.id===t.sortBy)||null})).filter(t=>t.col);t.sortCriterias&&this.setSortCriteria(n(t.sortCriterias)),t.groupSortCriterias&&this.setGroupSortCriteria(n(t.groupSortCriterias))}flatten(t,e,n=0,r=0){let a=e;return(n>0||n<=i.a.FLAT_ALL_COLUMNS)&&this.columns.forEach(e=>{(!e.isHidden()||n<=i.a.FLAT_ALL_COLUMNS)&&(a+=e.flatten(t,a,n-1,r)+r)}),a-e}get primarySortCriteria(){return 0===this.sortCriteria.length?null:this.sortCriteria[0]}getSortCriteria(){const t=this.primarySortCriteria;return null===t?null:Object.assign({},t)}getSortCriterias(){return this.sortCriteria.map(t=>Object.assign({},t))}getGroupSortCriteria(){return this.groupSortCriteria.map(t=>Object.assign({},t))}toggleSorting(t){const e=this.primarySortCriteria;return e&&e.col===t?this.sortBy(t,!e.asc):this.sortBy(t)}toggleGrouping(t){const e=this.groupColumns.indexOf(t);if(e>=0){const t=this.groupColumns.slice();return t.splice(e,1),this.groupBy(t)}return this.groupBy([t].concat(this.groupColumns))}getGroupCriteria(){return this.groupColumns.slice()}setGroupCriteria(t){return this.groupBy(t)}sortBy(t,e=!1){if(null!==t&&t.findMyRanker()!==this)return!1;const n=this.primarySortCriteria;if(null===t&&null===n||n&&n.col===t&&n.asc===e)return!0;const r=this.getSortCriteria();if(t){const e=this.sortCriteria.findIndex(e=>e.col===t);if(e>=0)this.sortCriteria.splice(e,1);else if(this.sortCriteria.length===this.maxSortCriteria){const t=this.sortCriteria.pop();t.col.on(`${i.a.EVENT_DIRTY_VALUES}.order`,null),t.col.on(`${i.a.EVENT_SORTMETHOD_CHANGED}.order`,null)}}else this.sortCriteria.forEach(t=>{t.col.on(`${i.a.EVENT_DIRTY_VALUES}.order`,null),t.col.on(`${i.a.EVENT_SORTMETHOD_CHANGED}.order`,null)}),this.sortCriteria.splice(0,this.sortCriteria.length);return t&&(this.sortCriteria.unshift({col:t,asc:e}),t.on(`${i.a.EVENT_DIRTY_VALUES}.order`,this.dirtyOrder),t.on(`${i.a.EVENT_SORTMETHOD_CHANGED}.order`,this.dirtyOrder)),this.triggerResort(r),!0}groupBy(t){let e=Array.isArray(t)?t:t instanceof i.a?[t]:[];if(e.length>this.maxGroupColumns&&(e=e.slice(0,this.maxGroupColumns)),Object(s.j)(this.groupColumns,e))return!0;this.groupColumns.forEach(t=>{t.on(Object(s.u)(".group",i.a.EVENT_DIRTY_VALUES,i.a.EVENT_SORTMETHOD_CHANGED,i.a.EVENT_GROUPING_CHANGED),null)});const n=this.groupColumns.slice();return this.groupColumns.splice(0,this.groupColumns.length,...e),this.groupColumns.forEach(t=>{t.on(Object(s.u)(".group",i.a.EVENT_DIRTY_VALUES,i.a.EVENT_SORTMETHOD_CHANGED,i.a.EVENT_GROUPING_CHANGED),this.dirtyOrder)}),this.fire([l.EVENT_GROUP_CRITERIA_CHANGED,l.EVENT_DIRTY_ORDER,l.EVENT_DIRTY_HEADER,l.EVENT_DIRTY_VALUES,l.EVENT_DIRTY],n,this.getGroupCriteria()),!0}setSortCriteria(t){let e=Array.isArray(t)?t:[t];if(e.length>this.maxSortCriteria&&(e=e.slice(0,this.maxSortCriteria)),0===e.length)return this.sortBy(null);if(1===e.length)return this.sortBy(e[0].col,e[0].asc);const n=this.sortCriteria.slice();return n.forEach(t=>{t.col.on(`${i.a.EVENT_DIRTY_VALUES}.order`,null),t.col.on(`${i.a.EVENT_SORTMETHOD_CHANGED}.order`,null)}),e.forEach(t=>{t.col.on(`${i.a.EVENT_DIRTY_VALUES}.order`,this.dirtyOrder),t.col.on(`${i.a.EVENT_SORTMETHOD_CHANGED}.order`,this.dirtyOrder)}),this.sortCriteria.splice(0,this.sortCriteria.length,...e.slice()),this.triggerResort(n),!0}toggleGroupSorting(t){const e=this.groupSortCriteria[0],n=e&&e.col===t&&!e.asc;return this.setGroupSortCriteria({col:t,asc:n})}groupSortBy(t,e){return this.setGroupSortCriteria({col:t,asc:e})}setMaxSortCriteria(t){const e=this.maxSortCriteria;e!==t&&(this.maxSortCriteria=t,e<t||this.sortCriteria.length<t||this.setSortCriteria(this.sortCriteria.slice(0,t)))}getMaxSortCriteria(){return this.maxSortCriteria}setMaxGroupColumns(t){const e=this.maxGroupColumns;e!==t&&(this.maxGroupColumns=t,e<t||this.groupColumns.length<t||this.setGroupCriteria(this.groupColumns.slice(0,t)))}getMaxGroupColumns(){return this.maxGroupColumns}setGroupSortCriteria(t){let e=Array.isArray(t)?t:[t];return e.length>this.maxSortCriteria&&(e=e.slice(0,this.maxSortCriteria)),this.groupSortCriteria.forEach(t=>{t.col.on(`${i.a.EVENT_SORTMETHOD_CHANGED}.groupOrder`,null)}),e.forEach(t=>{t.col.on(`${i.a.EVENT_SORTMETHOD_CHANGED}.groupOrder`,this.dirtyOrder)}),this.groupSortCriteria.splice(0,this.groupSortCriteria.length,...e.slice()),this.triggerResort(this.sortCriteria.slice()),!0}triggerResort(t){const e=this.getSortCriterias(),n=Array.isArray(t)?t[0]:t,r=Array.isArray(t)?t:e;this.fire([l.EVENT_SORT_CRITERIA_CHANGED,l.EVENT_DIRTY_ORDER,l.EVENT_DIRTY_HEADER,l.EVENT_DIRTY_VALUES,l.EVENT_DIRTY],n,e[0]),this.fire(l.EVENT_SORT_CRITERIAS_CHANGED,r,e)}get children(){return this.columns.slice()}get length(){return this.columns.length}insert(t,e=this.columns.length){return this.columns.splice(e,0,t),t.parent=this,this.forward(t,...Object(s.u)(".ranking",i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY_HEADER,i.a.EVENT_DIRTY,i.a.EVENT_FILTER_CHANGED)),t.on(`${l.EVENT_FILTER_CHANGED}.order`,this.dirtyOrder),this.fire([l.EVENT_ADD_COLUMN,l.EVENT_DIRTY_HEADER,l.EVENT_DIRTY_VALUES,l.EVENT_DIRTY],t,e),0!==this.sortCriteria.length||r(t.desc)||this.sortBy(t,t instanceof a.a),t}move(t,e=this.columns.length){if(t.parent!==this)return console.error("invalid move operation: ",t),null;const n=this.columns.indexOf(t);return e===n?t:(this.columns.splice(n,1),this.columns.splice(n<e?e-1:e,0,t),this.fire([l.EVENT_MOVE_COLUMN,l.EVENT_DIRTY_HEADER,l.EVENT_DIRTY_VALUES,l.EVENT_DIRTY],t,e,n),t)}moveAfter(t,e){const n=this.columns.indexOf(e);return n<0?null:this.move(t,n+1)}get fqpath(){return""}findByPath(t){let e=this;const n=t.split("@").map(Number).slice(1);for(;n.length>0;){const t=n.shift();e=e.at(t)}return e}indexOf(t){return this.columns.indexOf(t)}at(t){return this.columns[t]}insertAfter(t,e){const n=this.columns.indexOf(e);return n<0?null:this.insert(t,n+1)}push(t){return this.insert(t)}remove(t){const e=this.columns.indexOf(t);if(e<0)return!1;this.unforward(t,...Object(s.u)(".ranking",i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY_HEADER,i.a.EVENT_DIRTY,i.a.EVENT_FILTER_CHANGED));const n=this.sortCriteria.findIndex(e=>e.col===t);if(0===n)if(this.sortCriteria.shift(),this.sortCriteria.length>0)this.sortBy(this.sortCriteria[0].col);else{const e=this.columns.filter(e=>e!==t&&!r(e.desc))[0];this.sortBy(e||null)}else n>0&&(this.sortCriteria.splice(n,1),this.triggerResort(null));const a=this.groupColumns.indexOf(t);if(a>=0){const t=this.groupColumns.slice();t.splice(a,1),this.groupBy(t)}return t.parent=null,this.columns.splice(e,1),this.fire([l.EVENT_REMOVE_COLUMN,l.EVENT_DIRTY_HEADER,l.EVENT_DIRTY_VALUES,l.EVENT_DIRTY],t,e),!0}clear(){0!==this.columns.length&&(this.sortCriteria.splice(0,this.sortCriteria.length),this.groupColumns.forEach(t=>{t.on(`${i.a.EVENT_DIRTY_VALUES}.group`,null),t.on(`${i.a.EVENT_SORTMETHOD_CHANGED}.group`,null)}),this.groupColumns.splice(0,this.groupColumns.length),this.columns.forEach(t=>{this.unforward(t,...Object(s.u)(".ranking",i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY_HEADER,i.a.EVENT_DIRTY,i.a.EVENT_FILTER_CHANGED)),t.parent=null}),this.columns.length=0,this.fire([l.EVENT_REMOVE_COLUMN,l.EVENT_DIRTY_HEADER,l.EVENT_DIRTY_VALUES,l.EVENT_DIRTY],null))}get flatColumns(){const t=[];return this.flatten(t,0,i.a.FLAT_ALL_COLUMNS),t.map(t=>t.col)}find(t){const e="string"==typeof t?e=>e.id===t:t,n=this.flatColumns;for(const t of n)if(e(t))return t;return null}toSortingDesc(t){const e=this.primarySortCriteria;if(null===e)return null;const n=(e=>null===e?null:e.toSortingDesc(t))(e.col);return null===n?null:{id:n,asc:e.asc}}isFiltered(){return this.columns.some(t=>t.isFiltered())}filter(t,e){return this.columns.every(n=>n.filter(t,e))}findMyRanker(){return this}get fqid(){return this.id}}e.a=l,l.EVENT_WIDTH_CHANGED=i.a.EVENT_WIDTH_CHANGED,l.EVENT_FILTER_CHANGED=i.a.EVENT_FILTER_CHANGED,l.EVENT_LABEL_CHANGED=i.a.EVENT_LABEL_CHANGED,l.EVENT_ADD_COLUMN=i.a.EVENT_ADD_COLUMN,l.EVENT_MOVE_COLUMN=i.a.EVENT_MOVE_COLUMN,l.EVENT_REMOVE_COLUMN=i.a.EVENT_REMOVE_COLUMN,l.EVENT_DIRTY=i.a.EVENT_DIRTY,l.EVENT_DIRTY_HEADER=i.a.EVENT_DIRTY_HEADER,l.EVENT_DIRTY_VALUES=i.a.EVENT_DIRTY_VALUES,l.EVENT_SORT_CRITERIA_CHANGED="sortCriteriaChanged",l.EVENT_GROUP_CRITERIA_CHANGED="groupCriteriaChanged",l.EVENT_GROUP_SORT_CRITERIA_CHANGED="groupSortCriteriaChanged",l.EVENT_SORT_CRITERIAS_CHANGED="sortCriteriasChanged",l.EVENT_DIRTY_ORDER="dirtyOrder",l.EVENT_ORDER_CHANGED="orderChanged",l.EVENT_GROUPS_CHANGED="groupsChanged"},function(t,e,n){"use strict";var r=n(12),i=n(13),a=n(25),o=n(0),s=n(24),l=n(29),u=n(54),c=n(55);class d extends o.a{constructor(t={}){super(),this.rankings=[],this.selection=new u.a,this.aggregations=new Set,this.uid=0,this.createHelper=(t=>{const e=this.fromDescRef(t.desc);let n=null;if(e&&e.type){this.fixDesc(t.desc);(n=new(0,this.columnTypes[e.type])(t.id,e)).restore(t,this.createHelper)}return n}),this.columnTypes=Object.assign(Object(r.models)(),t.columnTypes||{}),this.multiSelections=!1!==t.multiSelection,this.groupings=!0===t.grouping}createEventList(){return super.createEventList().concat([d.EVENT_ADD_COLUMN,d.EVENT_REMOVE_COLUMN,d.EVENT_ADD_RANKING,d.EVENT_REMOVE_RANKING,d.EVENT_DIRTY,d.EVENT_DIRTY_HEADER,d.EVENT_DIRTY_VALUES,d.EVENT_ORDER_CHANGED,d.EVENT_SELECTION_CHANGED,d.EVENT_ADD_DESC,d.EVENT_CLEAR_DESC,d.EVENT_JUMP_TO_NEAREST,d.EVENT_GROUP_AGGREGATION_CHANGED])}pushRanking(t){const e=this.cloneRanking(t);return this.groupings||e.setMaxGroupColumns(0),this.insertRanking(e),e}takeSnapshot(t){const e=this.cloneRanking();return e.push(this.clone(t)),this.insertRanking(e),e}insertRanking(t,e=this.rankings.length){this.rankings.splice(e,0,t),this.forward(t,...Object(o.u)(".provider",i.a.EVENT_ADD_COLUMN,i.a.EVENT_REMOVE_COLUMN,i.a.EVENT_DIRTY,i.a.EVENT_DIRTY_HEADER,i.a.EVENT_ORDER_CHANGED,i.a.EVENT_DIRTY_VALUES));const n=this;t.on(`${i.a.EVENT_DIRTY_ORDER}.provider`,Object(o.f)(function(){n.triggerReorder(this.source)},100)),this.fire([d.EVENT_ADD_RANKING,d.EVENT_DIRTY_HEADER,d.EVENT_DIRTY_VALUES,d.EVENT_DIRTY],t,e),this.triggerReorder(t)}triggerReorder(t){Promise.resolve(this.sort(t)).then(e=>{Object(s.d)(e),t.setGroups(e)})}removeRanking(t){const e=this.rankings.indexOf(t);return!(e<0)&&(this.unforward(t,...Object(o.u)(".provider",i.a.EVENT_ADD_COLUMN,i.a.EVENT_REMOVE_COLUMN,i.a.EVENT_DIRTY,i.a.EVENT_DIRTY_HEADER,i.a.EVENT_ORDER_CHANGED,i.a.EVENT_DIRTY_VALUES)),this.rankings.splice(e,1),t.on(`${i.a.EVENT_DIRTY_ORDER}.provider`,null),this.cleanUpRanking(t),this.fire([d.EVENT_REMOVE_RANKING,d.EVENT_DIRTY_HEADER,d.EVENT_DIRTY_VALUES,d.EVENT_DIRTY],t,e),!0)}clearRankings(){this.rankings.forEach(t=>{this.unforward(t,...Object(o.u)(".provider",i.a.EVENT_ADD_COLUMN,i.a.EVENT_REMOVE_COLUMN,i.a.EVENT_DIRTY,i.a.EVENT_DIRTY_HEADER,i.a.EVENT_ORDER_CHANGED,i.a.EVENT_DIRTY_VALUES)),t.on(`${i.a.EVENT_DIRTY_ORDER}.provider`,null),this.cleanUpRanking(t)}),this.rankings=[],this.fire([d.EVENT_REMOVE_RANKING,d.EVENT_DIRTY_HEADER,d.EVENT_DIRTY_VALUES,d.EVENT_DIRTY],null)}getRankings(){return this.rankings.slice()}getLastRanking(){return this.rankings[this.rankings.length-1]}ensureOneRanking(){0===this.rankings.length&&this.pushRanking()}cleanUpRanking(t){}push(t,e){const n=this.create(e);return n?(t.push(n),n):null}insert(t,e,n){const r=this.create(n);return r?(t.insert(r,e),r):null}nextId(){return`col${this.uid++}`}fixDesc(t){"rank"===t.type?t.accessor=this.rankAccessor.bind(this):"selection"===t.type?(t.accessor=((t,e)=>this.isSelected(e)),t.setter=((t,e,n)=>n?this.select(e):this.deselect(e))):"aggregate"===t.type&&(t.isAggregated=((t,e)=>this.isAggregated(t,e)),t.setAggregated=((t,e,n)=>this.setAggregated(t,e,n)))}create(t){this.fixDesc(t);const e=this.columnTypes[t.type];return e?new e(this.nextId(),t):null}clone(t){const e=this.dumpColumn(t);return this.restoreColumn(e)}restoreColumn(t){const e=t=>{const n=this.fromDescRef(t.desc),r=this.columnTypes[n.type];this.fixDesc(n);const i=new r("",n);return i.restore(t,e),i.assignNewId(this.nextId.bind(this)),i};return e(t)}find(t){const e="string"==typeof t?e=>e.id===t:t;for(const t of this.rankings){const n=t.find(e);if(n)return n}return null}dump(){return{uid:this.uid,selection:this.getSelection(),aggregations:Array.from(this.aggregations),rankings:this.rankings.map(t=>t.dump(this.toDescRef))}}dumpColumn(t){return t.dump(this.toDescRef)}toDescRef(t){return t}fromDescRef(t){return t}restoreRanking(t){const e=this.cloneRanking();e.restore(t,this.createHelper),e.children.some(t=>t instanceof a.b)||e.insert(this.create(Object(r.createRankDesc)()),0);const n=this.nextId.bind(this);return e.children.forEach(t=>t.assignNewId(n)),e}restore(t){this.clearRankings(),this.uid=t.uid||0,t.selection&&t.selection.forEach(t=>this.selection.add(t)),t.aggregations&&(this.aggregations.clear(),t.aggregations.forEach(t=>this.aggregations.add(t))),t.rankings&&t.rankings.forEach(t=>{const e=this.cloneRanking();e.restore(t,this.createHelper),e.children.some(t=>t instanceof a.b)||e.insert(this.create(Object(r.createRankDesc)()),0),this.insertRanking(e)}),t.layout&&Object.keys(t.layout).forEach(e=>{this.deriveRanking(t.layout[e])});const e=this.nextId.bind(this);this.rankings.forEach(t=>{t.children.forEach(t=>t.assignNewId(e))})}deriveDefault(){if(this.rankings.length>0)return;const t=this.pushRanking();this.getColumns().forEach(e=>{Object(r.isSupportType)(e)||this.push(t,e)})}deriveRanking(t){const e=this.cloneRanking();e.clear();const n=t=>{switch(t.type){case"rank":return this.create(Object(r.createRankDesc)());case"selection":return this.create(Object(r.createSelectionDesc)());case"aggregate":return this.create(Object(r.createAggregateDesc)());case"actions":const e=this.create(Object(r.createActionDesc)(t.label||"actions"));return e.restore(t,this.createHelper),e;case"stacked":const i=this.create(Object(r.createStackDesc)(t.label||"Combined"));return(t.children||[]).forEach(t=>{const e=n(t);e&&i.push(e)}),i;default:{const e=this.findDesc(t.column);if(e){const n=this.create(e);return t.label=t.label||e.label||e.column,n&&n.restore(t,this.createHelper),n}return null}}};return t.forEach(t=>{const r=n(t);r&&e.push(r)}),e.children.some(t=>t instanceof a.b)||e.insert(this.create(Object(r.createRankDesc)()),0),this.insertRanking(e),e}isAggregated(t,e){let n=e;for(;n;){const e=`${t.id}@${Object(s.c)(n)}`;if(this.aggregations.has(e))return!0;n=n.parent}return!1}setAggregated(t,e,n){const r=`${t.id}@${Object(s.c)(e)}`;n!==this.aggregations.has(r)&&(n?this.aggregations.add(r):this.aggregations.delete(r),this.fire([d.EVENT_GROUP_AGGREGATION_CHANGED,d.EVENT_DIRTY_VALUES,d.EVENT_DIRTY],t,e,n))}aggregateAllOf(t,e){const n=t.getGroups();n.forEach(n=>{const r=`${t.id}@${Object(s.c)(n)}`;e?this.aggregations.add(r):this.aggregations.delete(r)}),this.fire([d.EVENT_GROUP_AGGREGATION_CHANGED,d.EVENT_DIRTY_VALUES,d.EVENT_DIRTY],t,n,e)}isSelected(t){return this.selection.has(t)}select(t){this.selection.has(t)||(!this.multiSelections&&this.selection.size>0&&this.selection.clear(),this.selection.add(t),this.fire(d.EVENT_SELECTION_CHANGED,this.getSelection()))}jumpToNearest(t){0!==t.length&&this.fire(d.EVENT_JUMP_TO_NEAREST,t)}selectAll(t){t.every(t=>this.selection.has(t))||(this.multiSelections||(this.selection.clear(),t=t.slice(0,1)),t.forEach(t=>{this.selection.add(t)}),this.fire(d.EVENT_SELECTION_CHANGED,this.getSelection()))}selectAllOf(t){this.setSelection(t.getOrder())}setSelection(t){if(0===t.length)return this.clearSelection();this.selection.size===t.length&&t.every(t=>this.selection.has(t))||(this.selection.clear(),this.selectAll(t))}toggleSelection(t,e=!1){return this.isSelected(t)?(e?this.deselect(t):this.clearSelection(),!1):(e?this.select(t):this.setSelection([t]),!0)}deselect(t){this.selection.has(t)&&(this.selection.delete(t),this.fire(d.EVENT_SELECTION_CHANGED,this.getSelection()))}selectedRows(){return 0===this.selection.size?Promise.resolve([]):this.view(this.getSelection())}getSelection(){return Array.from(this.selection)}clearSelection(){0!==this.selection.size&&(this.selection.clear(),this.fire(d.EVENT_SELECTION_CHANGED,[],!1))}exportTable(t,e={}){return Promise.resolve(this.view(t.getOrder())).then(n=>Object(c.b)(t,n,e))}}d.EVENT_SELECTION_CHANGED="selectionChanged",d.EVENT_ADD_COLUMN=i.a.EVENT_ADD_COLUMN,d.EVENT_REMOVE_COLUMN=i.a.EVENT_REMOVE_COLUMN,d.EVENT_ADD_RANKING="addRanking",d.EVENT_REMOVE_RANKING="removeRanking",d.EVENT_DIRTY=i.a.EVENT_DIRTY,d.EVENT_DIRTY_HEADER=i.a.EVENT_DIRTY_HEADER,d.EVENT_DIRTY_VALUES=i.a.EVENT_DIRTY_VALUES,d.EVENT_ORDER_CHANGED=i.a.EVENT_ORDER_CHANGED,d.EVENT_ADD_DESC="addDesc",d.EVENT_CLEAR_DESC="clearDesc",d.EVENT_JUMP_TO_NEAREST="jumpToNearest",d.EVENT_GROUP_AGGREGATION_CHANGED=l.b.EVENT_AGGREGATE,e.a=d},function(t,e,n){"use strict";var r=n(3),i=(n.n(r),n(11)),a=n(8),o=n(5);class s extends i.a{constructor(t,e){super(t,e),this.missingValue=NaN,this.numberFormat=Object(r.format)(".3n"),e.numberFormat&&(this.numberFormat=Object(r.format)(e.numberFormat)),void 0!==e.missingValue&&(this.missingValue=e.missingValue),this.setDefaultRenderer("interleaving"),this.setDefaultGroupRenderer("interleaving")}dump(t){const e=super.dump(t);return e.missingValue=this.missingValue,e}restore(t,e){void 0!==t.missingValue&&(this.missingValue=t.missingValue),t.numberFormat&&(this.numberFormat=Object(r.format)(t.numberFormat)),super.restore(t,e)}getLabel(t,e){if(!this.isLoaded())return"";const n=this.getValue(t,e);return String("number"==typeof n&&!isNaN(n)&&isFinite(n)?this.numberFormat(n):n)}getValue(t,e){if(!this.isLoaded())return null;const n=this.compute(t,e);return Object(o.b)(n)?this.missingValue:n}compute(t,e){return NaN}getNumber(t,e){const n=this.getValue(t,e);return null===n?NaN:n}getRawNumber(t,e){return this.getNumber(t,e)}isMissing(t,e){return Object(o.b)(this.compute(t,e))}compare(t,e,n,r){return a.d.prototype.compare.call(this,t,e,n,r)}groupCompare(t,e){return a.d.prototype.groupCompare.call(this,t,e)}getRendererType(){return a.d.prototype.getRendererType.call(this)}}e.a=s},function(t,e,n){"use strict";var r=n(6);class i extends r.a{constructor(t,e,n){super(e,n),this.column=t}markFiltered(t=!1){this.attachment.classList.toggle("filtered",t)}}const a="Filter out rows containing missing values";e.d=a;e.b=(t=>`<label><input class="lu_filter_missing" type="checkbox" ${t?'checked="checked"':""}>${a}</label>`);e.c=((t,e)=>`<label ${0===e?'class="lu-disabled"':""}><input class="lu_filter_missing" type="checkbox" ${t?'checked="checked"':""} ${0===e?"disabled":""}>Filter out ${e} missing value rows</label>`),e.a=i},function(t,e,n){"use strict";function r(t,e=NaN,n=0){const r=new Map,a=[],o="function"==typeof n?n:()=>n;isNaN(e)&&(e=function(t){const e=new Map;if(t.forEach(t=>{e.set(t,(e.get(t)||0)+1)}),0===e.size)return 20;const n=Array.from(e).sort((t,e)=>t[1]!==e[1]?e[1]-t[1]:t[0]-e[0]),r=n[0][0];return 0===r?n.length>1?n[1][0]:20:r}(t)),e+=o(-1);let s=-1,l=0,u=0,c=0;return t.forEach((t,n)=>{if(t+=o(n),u+=t,c++,t===e)return;r.set(n,t);const d=(n-s-1)*e;s=n;const h=l+d;l=h+t,a.push(new i(n,h,t))}),{exceptionsLookup:r,exceptions:a,totalHeight:u,defaultRowHeight:e,numberOfRows:c,padding:o}}e.d=function(t,e,n=0){return{exceptions:[],exceptionsLookup:{keys:()=>[].values(),get:()=>e,has:()=>!1,size:0},totalHeight:t*(e+=n),numberOfRows:t,defaultRowHeight:e,padding:()=>n}},e.b=r,e.c=function(t,e,n,r,i){function a(t,e){return Math.min(i-1,e+Math.max(0,Math.floor(t/n)))}function o(t,e,r=!1){const o=l-t,u=a(s-t,e),c=a(o,e),d=t+(u-e)*n,h=t+(c+1-e)*n;return console.assert(!r||!(d>s||h<l&&c<i-1),"error",r,d,h,s,l,e,t),{first:u,last:c,firstRowPos:d,endPos:h}}if(0===i)return{first:0,last:-1,firstRowPos:0,endPos:0};if(1===i)return{first:0,last:0,firstRowPos:0,endPos:0===r.length?n:r[0].y2};const s=t,l=s+e,u=o(0,0,!0);if(0===r.length)return u;if(u.last<=r[0].index)return u.last===r[0].index?Object.assign(u,{endPos:r[0].y2}):u;const c=r[r.length-1];if(s>=c.y){const t=o(c.y2,c.index+1);return s<c.y2?Object.assign(t,{first:c.index,firstRowPos:c.y}):t}const d=[];let h=r[0];for(const t of r){const{y:e,y2:n}=t;if(e>=l)break;n<=s?h=t:d.push(t)}if(0===d.length)return o(h.y2,h.index+1);{const t=d[0],e=d[d.length-1],r=Math.max(0,t.index-Math.max(0,Math.ceil((t.y-s)/n)));let o=e.index;l>=e.y2&&(o=a(l-e.y2,e.index+1));const u=t.y-(t.index-r)*n,c=e.y2+(o-e.index)*n;return console.assert(u<=s&&(c>=l||o===i-1),"error",u,c,s,l,t,e),{first:r,last:o,firstRowPos:u,endPos:c}}},e.a=function(t,e){const n=t.length,r=e.length;if(0===n)return{added:e,removed:[],common:0};if(0===r)return{added:[],removed:t,common:0};if(n===r)return{added:[],removed:[],common:n};const i=t.slice(Math.min(r,n));return{added:e.slice(Math.min(r,n)),removed:i,common:n-i.length}},e.e=function(t,e,n){const r=0===t.length?0:t[t.length-1]+1,i=[],a=[];for(let e=t.length-1;e>=0&&t[e]>=n;--e)a.push(t.pop());for(let a=r;a<n;++a)e[a].frozen&&(i.push(a),t.push(a));return{target:t,added:i,removed:a}};class i{constructor(t,e,n){this.index=t,this.y=e,this.height=n}get y2(){return this.y+this.height}}},function(t,e,n){"use strict";function r(t){let e=t.label;return null!=t.description&&""!==t.description&&(e+=`\n${t.description}`),e}function i(t,e,n){return(r,i,...a)=>{t.insertAdjacentHTML("beforeend",`<i title="${r}"><span${n?"":' aria-hidden="true"'}>${r}</span> </i>`);const o=t.lastElementChild;return i?(o.onclick=(t=>{t.stopPropagation();new i(e,o,...a).openDialog()}),o):o}}function a(t,e,n){return o(i(t,e,!1),e,n)}function o(t,e,n){(!Object(u.isSupportType)(e.desc)||e instanceof k.b)&&(t("Sort").onclick=(t=>{t.stopPropagation(),e.toggleMySorting()})),Object(R.b)(e)&&(t("Stratify").onclick=(t=>{t.stopPropagation(),e.groupByMe()})),e instanceof w.d&&t("Stratify by Threshold &hellip;",D.a),e instanceof E.b||(t("Remove").onclick=(t=>{t.stopPropagation(),e instanceof E.b?(n.provider.removeRanking(e.findMyRanker()),n.provider.ensureOneRanking()):e.removeMe()})),t("More &hellip;",L.a,"",n)}function s(t,e,n=22.5){const r=t.querySelector(".lu-toolbar"),i=r.querySelector("[title^=More]"),a=e.getWidth()-(i.clientWidth||n),o=Array.from(r.children).filter(t=>t!==i).reverse();o.forEach(t=>{t.classList.remove("hidden")}),o.forEach(t=>{const e=o.reduce((t,e)=>{const r=e.clientWidth;return r>0?t+r:e.classList.contains("hidden")?t:t+n},0);t.classList.toggle("hidden",e>a)})}function l(t,e,n){Object(T.a)(t,()=>{const t=JSON.stringify(n.provider.toDescRef(e.desc)),r={"text/plain":e.label,[`${$}-ref`]:e.id,[$]:t};return Object(S.h)(e)&&(r[`${$}-number`]=t,r[`${$}-number-ref`]=e.id),{effectAllowed:"copyMove",data:r}},!0)}e.i=r,e.c=function(t,e,n,r={}){r=Object.assign({dragAble:!0,mergeDropAble:!0,rearrangeAble:!0,resizeable:!0},r);const i=e.createElement("section");return i.innerHTML=`\n    <div class="lu-label">${t.label}</div>\n    <div class="lu-toolbar"></div>\n    <div class="lu-spacing"></div>\n    <div class="lu-summary"></div>\n    <div class="lu-handle"></div>\n  `,a(i.querySelector("div.lu-toolbar"),t,n),s(i,t),r.dragAble&&l(i,t,n),r.mergeDropAble&&function(t,e,n){const r=(t,r)=>{const i=t.data,a="copy"===t.effect,o=`${$}${r?"-number":""}`;if(`${o}-ref`in i){const t=i[`${o}-ref`];let r=n.provider.find(t);if(a)r=n.provider.clone(r);else{if(r===e)return null;r.removeMe()}return r}const s=JSON.parse(i[o]);return n.provider.create(n.provider.fromDescRef(s))};if(Object(y.b)(e))return void(e.canJustAddNumbers?Object(T.b)(t,[`${$}-number-ref`,`${$}-number`],t=>{const n=r(t,!0);return null!=n&&null!=e.push(n)}):Object(T.b)(t,[`${$}-ref`,$],t=>{const n=r(t,!1);return null!=n&&null!=e.push(n)}));const i=t=>i=>{const a=r(i,t);if(!a)return!1;if(e instanceof y.a)return null!==e.push(a);const o=e.findMyRanker(),s=o.indexOf(e),l=n.provider.create(t?Object(u.createStackDesc)():Object(u.createNestedDesc)());return e.removeMe(),l.push(e),l.push(a),null!=o.insert(l,s)};(t=>t instanceof y.a&&t.canJustAddNumbers||Object(S.h)(t)&&t.parent instanceof O.a&&!(t instanceof H.b))(e)?Object(T.b)(t,[`${$}-number-ref`,`${$}-number`],i(!0)):Object(T.b)(t,[`${$}-ref`,`${$}`],i(!1))}(i,t,n),r.rearrangeAble&&function(t,e,n){Object(T.b)(t,[`${$}-ref`,$],t=>{let r=null;const i=t.data;if(!(`${$}-ref`in i)){const t=JSON.parse(i[$]);return null!=(r=n.provider.create(n.provider.fromDescRef(t)))&&null!=e.insertAfterMe(r)}const a=i[`${$}-ref`];if(!(r=n.provider.find(a))||r===e&&!t.effect.startsWith("copy"))return!1;if(t.effect.startsWith("copy"))return null!=(r=n.provider.clone(r))&&null!=e.insertAfterMe(r);const o=r.parent;return o?o===e.parent?null!=o.moveAfter(r,e):(r.removeMe(),null!=e.insertAfterMe(r)):null!=e.insertAfterMe(r)},null,!0)}(i.querySelector(".lu-handle"),t,n),r.resizeable&&function(t,e){let n;const r=e.querySelector(".lu-handle");let i=0;const a=n=>{n.stopPropagation(),n.preventDefault();const r=n.clientX;if(Math.abs(i-r)<2)return;const a=r-i;i=r;const o=Math.max(0,t.getWidth()+a);t.setWidth(o),s(e,t)},o=r=>{r.stopPropagation(),r.preventDefault();const l=r.clientX;if(e.classList.remove("lu-change-width"),n.removeEventListener("mousemove",a),n.removeEventListener("mouseup",o),n.removeEventListener("mouseleave",o),Math.abs(i-l)<2)return;const u=l-i,c=Math.max(0,t.getWidth()+u);t.setWidth(c),s(e,t)};r.onmousedown=(t=>{t.stopPropagation(),t.preventDefault(),e.classList.add("lu-change-width"),i=t.clientX,(n=e.closest("header")).addEventListener("mousemove",a),n.addEventListener("mouseup",o),n.addEventListener("mouseleave",o)}),r.onclick=(t=>{t.stopPropagation(),t.preventDefault()})}(t,i),i},e.j=function(t,e,n,i=!1){t.querySelector(".lu-label").innerHTML=e.label,t.title=r(e);const a=t.querySelector("i[title='Sort']");if(a){const{asc:t,priority:n}=e.isSortedByMe();a.dataset.sort=void 0!==t?t:"",void 0!==n?a.dataset.priority=(parseInt(n,10)+1).toString():delete a.dataset.priority}const o=t.querySelector("i[title^='Stratify']");if(o){const t=e.isGroupedBy();o.dataset.stratify=t>=0?"true":"false",t>=0?o.dataset.priority=(t+1).toString():delete o.dataset.priority}const s=Object(I.a)(e,n.summaries);s&&s(e,t.querySelector(".lu-summary"),i,n)},e.b=i,e.e=a,e.d=o,e.f=function(t,e,n){const r=Object(u.isSupportType)(e.desc);r||t("Rename + Color &hellip;",p.a),e instanceof j.a&&(t("Sort Group by Name").onclick=(t=>{t.stopPropagation(),e.toggleMyGroupSorting()})),e instanceof w.d&&t("Sort Group by &hellip;",h.a),(e instanceof c.a||e instanceof d.a)&&t("Sort by &hellip;",h.a),(Object(R.b)(e)||e instanceof k.b)&&(t("Stratify").onclick=(t=>{t.stopPropagation(),e.groupByMe()})),e instanceof w.d&&t("Stratify by Threshold &hellip;",D.a);const i=n.getPossibleRenderer(e);(i.item.length>2||i.group.length>2)&&t("Visualization &hellip;",f.a,n),e instanceof g.a&&t("Edit Link Pattern &hellip;",b.a,n.idPrefix,[].concat(e.desc.templates||[],n.linkTemplates)),e instanceof m.b&&t("Edit Combine Script &hellip;",v.a);const a=Object(I.a)(e,n.filters);if(a&&t("Filter &hellip;",a,"",n.provider,n.idPrefix),e instanceof M.a&&t("Set Cut Off &hellip;",N.a,n.idPrefix),n.searchAble(e)&&t("Search &hellip;",C.a,n.provider),e instanceof _.b&&t("Edit Weights &hellip;",x.a),Object(y.b)(e)){const n=e;t(n.getCollapsed()?"Expand":"Compress").onclick=(t=>{t.stopPropagation(),n.setCollapsed(!n.getCollapsed()),t.currentTarget.title=n.getCollapsed()?"Expand":"Compress"})}e instanceof y.a&&e.parent instanceof O.a&&(t("Split Combined Column").onclick=(t=>{t.stopPropagation(),e.children.reverse().forEach(t=>e.insertAfterMe(t)),e.removeMe()})),e instanceof y.a&&(!Object(y.b)(e)||e.getCollapsed())&&t("Contained Columns &hellip;",V.a,n),r||(t("Generate Snapshot").onclick=(t=>{t.stopPropagation(),n.provider.takeSnapshot(e)})),t("Remove").onclick=(t=>{t.stopPropagation(),e instanceof E.b?(n.provider.removeRanking(e.findMyRanker()),n.provider.ensureOneRanking()):e.removeMe()})},e.g=l,e.h=function(t,e,n,r,i){Object(T.b)(t,[`${$}-ref`,$],t=>{let a=null;const o=t.data;if(`${$}-ref`in o){const t=o[`${$}-ref`];if(!(a=n.provider.find(t))||a===e)return!1}else{const t=JSON.parse(o[$]);(a=n.provider.create(n.provider.fromDescRef(t)))&&e.findMyRanker().push(a)}const s=e.findMyRanker();if(!a||a===e||!s)return!1;const l=s.getSortCriterias(),u=s.getGroupCriteria(),c=t=>{const e=l.findIndex(e=>e.col===t);return e>=0&&l.splice(e,1)[0].asc},d=c(a),h=u.indexOf(e),p=l.findIndex(t=>t.col===e);if(i&&h>=0)if(c(e),Object(R.b)(a)){if(u.splice(h+("after"===r?1:0),0,a),u.length>s.getMaxGroupColumns()){const t=u.splice(0,u.length-s.getMaxGroupColumns());l.unshift(...t.reverse().map(t=>({asc:!1,col:t})))}}else{const t=u.splice(0,u.length-h);l.unshift(...t.reverse().map(t=>({asc:!1,col:t}))),l.unshift({asc:d,col:a})}else p<0?l.push({asc:d,col:a}):0===p&&i&&Object(R.b)(a)?u.push(a):l.splice(p+("after"===r?1:0),0,{asc:d,col:a});return Object(A.j)(u,s.getGroupCriteria())||s.groupBy(u),s.setSortCriteria(l),!0},null,!0)};var u=n(12),c=n(52),d=n(26),h=n(106),p=n(108),f=n(109),g=n(28),m=n(27),v=n(110),b=n(111),y=n(11),E=n(25),x=n(112),_=n(19),N=n(113),C=n(114),M=n(37),T=n(115),w=n(8),S=n(2),O=n(13),R=n(10),D=n(116),A=n(0),L=n(117),I=n(118),k=n(20),V=n(119),j=n(9),H=n(30);const $="text/x-caleydo-lineup-column";e.a=$},function(t,e,n){"use strict";e.a=function(t="Weighted Sum"){return{type:"stack",label:t}};var r=n(15),i=n(1),a=n(2),o=n(0);class s extends r.a{constructor(t,e){super(t,e),this.collapsed=!1;const n=this;this.adaptChange=function(t,e){n.adaptWidthChange(this.source,t,e)},"interleaving"===this.getRendererType()&&this.setRendererType("stack"),"interleaving"===this.getGroupRenderer()&&this.setGroupRenderer("stack")}createEventList(){return super.createEventList().concat([s.EVENT_COLLAPSE_CHANGED,s.EVENT_WEIGHTS_CHANGED,s.EVENT_MULTI_LEVEL_CHANGED])}setCollapsed(t){this.collapsed!==t&&this.fire([s.EVENT_COLLAPSE_CHANGED,i.a.EVENT_DIRTY_HEADER,i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY],this.collapsed,this.collapsed=t)}getCollapsed(){return this.collapsed}get canJustAddNumbers(){return!0}flatten(t,e,n=0,r=0){let a=null;const o=n<=i.a.FLAT_ALL_COLUMNS?this._children:this._children.filter(t=>!t.isHidden());if(0===n||n<=i.a.FLAT_ALL_COLUMNS){let i=this.getWidth();if(this.collapsed||(i+=(o.length-1)*r),t.push(a={col:this,offset:e,width:i}),0===n)return i}let s=e;return o.forEach(e=>{s+=e.flatten(t,s,n-1,r)+r}),a&&(a.width=s-e-r),s-e-r}dump(t){const e=super.dump(t);return e.collapsed=this.collapsed,e}restore(t,e){this.collapsed=!0===t.collapsed,super.restore(t,e)}insert(t,e,n=NaN){return isNaN(n)||t.setWidth(n/(1-n)*this.getWidth()),t.on(`${i.a.EVENT_WIDTH_CHANGED}.stack`,this.adaptChange),super.setWidth(0===this.length?t.getWidth():this.getWidth()+t.getWidth()),super.insert(t,e)}push(t,e=NaN){return this.insert(t,this.length,e)}insertAfter(t,e,n=NaN){const r=this.indexOf(e);return r<0?null:this.insert(t,r+1,n)}adaptWidthChange(t,e,n){if(Object(o.t)(e,n,.5))return;const r=this.getWeights(),a=this.getWidth(),l=e/a,u=(1-l-(n-e)/a)/(1-l),c=this._children.map(e=>{if(e===t)return n;const r=e.getWidth()*u,i=isNaN(r)||r<1?0:r;return e.setWidthImpl(i),i});super.setWidth(c.reduce((t,e)=>t+e,0)),this.fire([s.EVENT_WEIGHTS_CHANGED,s.EVENT_MULTI_LEVEL_CHANGED,i.a.EVENT_DIRTY_HEADER,i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY],r,this.getWeights())}getWeights(){const t=this.getWidth();return this._children.map(e=>e.getWidth()/t)}setWeights(t){const e=this.getWeights(),n=t.length-this.length;let r;if(n<0)if((r=t.reduce((t,e)=>t+e,0))<=1)for(let e=0;e<-n;++e)t.push(1/-n*(1-r));else if(r<=100)for(let e=0;e<-n;++e)t.push(1/-n*(100-r));t=t.slice(0,this.length),r=t.reduce((t,e)=>t+e,0)/this.getWidth(),t=t.map(t=>t/r),this._children.forEach((e,n)=>{e.setWidthImpl(t[n])}),this.fire([s.EVENT_WEIGHTS_CHANGED,s.EVENT_MULTI_LEVEL_CHANGED,i.a.EVENT_DIRTY_HEADER,i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY],e,t)}removeImpl(t){return t.on(`${i.a.EVENT_WIDTH_CHANGED}.stack`,null),super.setWidth(0===this.length?100:this.getWidth()-t.getWidth()),super.removeImpl(t)}setWidth(t){const e=t/this.getWidth();this._children.forEach(t=>{t.setWidthImpl(t.getWidth()*e)}),super.setWidth(t)}compute(t,e){const n=this.getWidth();return this._children.reduce((r,i)=>r+i.getValue(t,e)*(i.getWidth()/n),0)}getRendererType(){return this.getCollapsed()&&this.isLoaded()?s.COLLAPSED_RENDERER:super.getRendererType()}toSortingDesc(t){const e=this.getWeights();return this._children.map((n,r)=>({weight:e[r],id:n.toSortingDesc(t)}))}isMissing(t,e){return this._children.some(n=>Object(a.h)(n)&&n.isMissing(t,e))}}e.b=s,s.EVENT_COLLAPSE_CHANGED="collapseChanged",s.EVENT_WEIGHTS_CHANGED="weightsChanged",s.COLLAPSED_RENDERER="number",s.EVENT_MULTI_LEVEL_CHANGED="nestedChildRatio"},function(t,e,n){"use strict";e.a=function(t="S"){return{type:"selection",label:t}};var r=n(7);class i extends r.a{constructor(t,e){super(t,e),this.setWidth(20)}createEventList(){return super.createEventList().concat([i.EVENT_SELECT])}setValue(t,e,n){return this.getValue(t,e)===n||this.setImpl(t,e,n)}setImpl(t,e,n){return this.desc.setter&&this.desc.setter(t,e,n),this.fire(i.EVENT_SELECT,t,n),!0}toggleValue(t,e){const n=this.getValue(t,e);return this.setImpl(t,e,!n),!n}compare(t,e,n,r){const i=!0===this.getValue(t,n),a=!0===this.getValue(e,r);return i===a?0:i<a?-1:1}group(t,e){return this.getValue(t,e)?i.SELECTED_GROUP:i.NOT_SELECTED_GROUP}}e.b=i,i.SELECTED_GROUP={name:"Selected",color:"orange"},i.NOT_SELECTED_GROUP={name:"Unselected",color:"gray"},i.EVENT_SELECT="select"},function(t,e,n){"use strict";e.a=function(t,e,n){return n&&n.color?n.color(e):e&&(t instanceof r.a||Object(i.isCategoricalColumn)(t)||t instanceof a.b)?t.getColor(e.v,e.dataIndex):t.color};var r=n(15),i=n(12),a=n(30)},function(t,e,n){"use strict";e.a=function(t){return t&&void 0!==t.name}},function(t,e,n){"use strict";function r(t,e){return e[t.getRendererType()]||L}function i(t,e){return e[t.getGroupRenderer()]||L}function a(t,e,n=!1){return Object.keys(e).filter(r=>{return e[r].canRender(t,n)}).map(t=>({type:t,label:n?e[t].groupTitle||e[t].title:e[t].title}))}Object.defineProperty(e,"__esModule",{value:!0}),e.createDOM=function(t,e,n,i){const a=r(t,e);return(a.createDOM?a.createDOM.bind(a):L.createDOM.bind(L))(t,n,i)},e.createCanvas=function(t,e,n,i){const a=r(t,e);return(a.createCanvas?a.createCanvas.bind(a):L.createCanvas.bind(L))(t,n,i)},e.createDOMGroup=function(t,e,n,r){const a=i(t,e);return(a.createGroupDOM?a.createGroupDOM.bind(a):L.createGroupDOM.bind(L))(t,n,r)},e.createCanvasGroup=function(t,e,n,r){const a=i(t,e);return(a.createGroupCanvas?a.createGroupCanvas.bind(a):L.createGroupCanvas.bind(L))(t,n,r)},e.possibleRenderer=a,e.possibleGroupRenderer=function(t,e){return a(t,e,!0)};var o=n(80),s=n(31),l=n(81),u=n(82),c=n(83),d=n(84),h=n(85),p=n(40),f=n(88),g=n(89),m=n(90),v=n(91),b=n(92),y=n(93),E=n(94),x=n(95),_=n(96),N=n(97),C=n(98),M=n(58),T=n(99),w=n(100),S=n(101),O=n(102),R=n(103),D=n(104),A=n(105);const L=new s.a;e.defaultCellRenderer=L;const I={rank:new C.a,boolean:new R.a,number:new o.a,string:new l.a,selection:new u.a,heatmap:new _.a,image:new O.a,link:new c.a,annotate:new d.a,actions:new h.a,stack:new p.b,nested:new p.b(!1),categorical:new f.a,catcolor:new M.a,catcolorshifted:new S.a,numbers:new g.a,sparkline:new m.a,verticalbar:new v.a,upset:new b.a,circle:new y.a,boxplot:new E.a,loading:new x.a,empty:new N.a,aggregate:new T.a,histogram:new w.a,interleaving:new D.a,dot:new A.a,default:L};e.renderers=I},function(t,e,n){"use strict";e.b=function(t){if(console.assert(t.length>0),1===t.length)return t[0];const e=t.map(t=>Object.assign({subGroups:[]},t));t.slice(1).forEach((t,n)=>{t.parent=e[n],e[n].subGroups.push(t)});const n={name:t.map(t=>t.name).join(" ∩ "),color:t[0].color,parent:e[e.length-1]};return n.parent.subGroups.push(n),n},e.c=function(t){let e=t.name,n=t.parent;for(;n;)e=`${n.name}.${e}`,n=n.parent;return e},e.d=function(t){if(t.length<=1)return;const e=new Map,n=t=>{let r=t.name;if(t.parent){const e=n(t.parent);t.parent=e.g,r=`${e.id}.$[id}`}return e.has(r)?{g:e.get(r),id:r}:(t.parent&&t.parent.subGroups.push(t),t.subGroups=[],e.set(r,t),{g:t,id:r})};t.forEach(t=>{t.parent&&(t.parent=n(t.parent).g,t.parent.subGroups.push(t))})};e.a={name:"Default",color:"gray"}},function(t,e,n){"use strict";e.a=function(t="Rank"){return{type:"rank",label:t}};var r=n(7);class i extends r.a{constructor(t,e){super(t,e),this.setWidthImpl(50)}}e.b=i},function(t,e,n){"use strict";e.b=function(t){return"function"==typeof t.getBoxPlotData};var r=n(7),i=n(1),a=n(3),o=(n.n(a),n(8)),s=n(2);class l extends r.a{constructor(t,e){super(t,e),this.currentFilter=Object(s.l)(),e.map?this.mapping=Object(o.c)(e.map):e.domain&&(this.mapping=new o.a(e.domain,"linear",e.range||[0,1])),this.original=this.mapping.clone(),this.sort=e.sort||s.d.min}compare(t,e,n,r){return Object(s.e)(this,t,e,n,r)}getBoxPlotData(t,e){return this.getValue(t,e)}getRange(){return this.mapping.getRange(l.DEFAULT_FORMATTER)}getRawBoxPlotData(t,e){return this.getRawValue(t,e)}getRawValue(t,e){return super.getValue(t,e)}getValue(t,e){const n=this.getRawValue(t,e);return null===n?n:{min:this.mapping.apply(n.min),max:this.mapping.apply(n.max),median:this.mapping.apply(n.median),q1:this.mapping.apply(n.q1),q3:this.mapping.apply(n.q3)}}getNumber(t,e){return Object(s.f)(this,t,e,"normalized")}getRawNumber(t,e){return Object(s.f)(this,t,e,"raw")}getLabel(t,e){const n=this.getRawValue(t,e);if(null===n)return"";const r=l.DEFAULT_FORMATTER;return`BoxPlot(min = ${r(n.min)}, q1 = ${r(n.q1)}, median = ${r(n.median)}, q3 = ${r(n.q3)}, max = ${r(n.max)})`}getSortMethod(){return this.sort}setSortMethod(t){this.sort!==t&&(this.fire([i.a.EVENT_SORTMETHOD_CHANGED],this.sort,this.sort=t),this.isSortedByMe().asc||this.sortByMe())}dump(t){const e=super.dump(t);return e.sortMethod=this.getSortMethod(),e.filter=Object(s.j)(this.currentFilter,Object(s.l)())?null:this.currentFilter,e.map=this.mapping.dump(),e}restore(t,e){super.restore(t,e),t.sortMethod&&(this.sort=t.sortMethod),t.filter&&(this.currentFilter=Object(s.n)(t.filter)),t.map?this.mapping=Object(o.c)(t.map):t.domain&&(this.mapping=new o.a(t.domain,"linear",t.range||[0,1]))}createEventList(){return super.createEventList().concat([o.d.EVENT_MAPPING_CHANGED])}getOriginalMapping(){return this.original.clone()}getMapping(){return this.mapping.clone()}setMapping(t){this.mapping.eq(t)||this.fire([l.EVENT_MAPPING_CHANGED,i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY],this.mapping.clone(),this.mapping=t)}isFiltered(){return o.d.prototype.isFiltered.call(this)}getFilter(){return o.d.prototype.getFilter.call(this)}setFilter(t={min:-1/0,max:1/0,filterMissing:!1}){o.d.prototype.setFilter.call(this,t)}filter(t,e){return o.d.prototype.filter.call(this,t,e)}}e.a=l,l.EVENT_MAPPING_CHANGED=o.d.EVENT_MAPPING_CHANGED,l.DEFAULT_FORMATTER=Object(a.format)(".3n")},function(t,e,n){"use strict";e.a=function(t="script"){return{type:"script",label:t,script:o}};var r=n(1),i=n(15),a=n(2);const o="let s = 0;\ncol.forEach((c) => s += c.v);\nreturn s / col.length";class s{constructor(t,e,n){this.c=t,this.v=e,this.raw=n}get type(){return this.c.desc.type}get name(){return this.c.getMetaData().label}get id(){return this.c.id}}class l{constructor(t,e){this.children=t,this.allFactory=e,this.lookup=new Map,this._all=null,t.forEach(t=>{this.lookup.set(`ID@${t.id}`,t),this.lookup.set(`NAME@${t.name}`,t)})}byName(t){return this.lookup.get(`NAME@${t}`)}byID(t){return this.lookup.get(`ID@${t}`)}byIndex(t){return this.children[t]}forEach(t){return this.children.forEach(t)}get length(){return this.children.length}get all(){return null===this._all&&(this._all=this.allFactory?this.allFactory():null),this._all}}class u extends i.a{constructor(t,e){super(t,e),this.script=u.DEFAULT_SCRIPT,this.f=null,this.script=e.script||this.script}createEventList(){return super.createEventList().concat([u.EVENT_SCRIPT_CHANGED])}setScript(t){this.script!==t&&(this.f=null,this.fire([u.EVENT_SCRIPT_CHANGED,r.a.EVENT_DIRTY_VALUES,r.a.EVENT_DIRTY],this.script,this.script=t))}getScript(){return this.script}dump(t){const e=super.dump(t);return e.script=this.script,e}restore(t,e){this.script=t.script||this.script,super.restore(t,e)}compute(t,e){null==this.f&&(this.f=new Function("children","values","raws","col","row","index",function(t){let e=t.trim();return e.includes("return")||(e=`return (${e});`),`\n  const max = function(arr) { return Math.max.apply(Math, arr); };\n  const min = function(arr) { return Math.min.apply(Math, arr); };\n  const extent = function(arr) { return [min(arr), max(arr)]; };\n  const clamp = function(v, minValue, maxValue) { return v < minValue ? minValue : (v > maxValue ? maxValue : v); };\n  const normalize = function(v, minMax, max) {\n    if (Array.isArray(minMax)) {\n      minMax = minMax[0];\n      max = minMax[1];\n    }\n    return (v - minMax) / (max - minMax);\n  };\n  const denormalize = function(v, minMax, max) {\n    if (Array.isArray(minMax)) {\n      minMax = minMax[0];\n      max = minMax[1];\n    }\n    return v * (max - minMax) + minMax;\n  };\n  const linear = function(v, source, target) {\n    target = target || [0, 1];\n    return denormalize(normalize(v, source), target);\n  };\n  const v = (function custom() {\n    ${e}\n  })();\n\n  return typeof v === 'number' ? v : NaN`}(this.script)));const n=this._children,r=this._children.map(n=>n.getValue(t,e)),i=this._children.map(n=>Object(a.h)(n)?n.getRawNumber(t,e):null),o=new l(n.map((t,e)=>new s(t,r[e],i[e])),()=>{const n=this.findMyRanker().flatColumns;return new l(n.map(n=>new s(n,n.getValue(t,e),Object(a.h)(n)?n.getRawNumber(t,e):null)))});return this.f.call(this,n,r,i,o,t,e)}toSortingDesc(t){return{code:this.script,operands:this._children.map(e=>e.toSortingDesc(t))}}}e.b=u,u.EVENT_SCRIPT_CHANGED="scriptChanged",u.DEFAULT_SCRIPT=o},function(t,e,n){"use strict";var r=n(1),i=n(9),a=n(5);class o extends i.a{constructor(t,e){super(t,e),this.link=null,this.link=e.link||null}get headerCssClass(){return null==this.link?"link":"link link_pattern"}createEventList(){return super.createEventList().concat([o.EVENT_LINK_CHANGED])}setLink(t){t!=this.link&&this.fire([o.EVENT_LINK_CHANGED,r.a.EVENT_DIRTY_HEADER,r.a.EVENT_DIRTY_VALUES,r.a.EVENT_DIRTY],this.link,this.link=t)}getLink(){return this.link||""}dump(t){const e=super.dump(t);return this.link!=this.desc.link&&(e.link=this.link),e}restore(t,e){super.restore(t,e),t.link&&(this.link=t.link)}getLabel(t,e){const n=super.getRaw(t,e);return n&&n.alt?n.alt:String(n)}isLink(t,e){const n=super.getRaw(t,e);return!Object(a.b)(n)&&(null!=n.href||this.link)}getValue(t,e){const n=super.getRaw(t,e);return n&&n.href?n.href:this.link?this.link.replace(/\$1/g,n||""):n}}e.a=o,o.EVENT_LINK_CHANGED="linkChanged"},function(t,e,n){"use strict";e.a=function(t="A"){return{type:"aggregate",label:t}};var r=n(1);class i extends r.a{constructor(t,e){super(t,e),this.setWidth(20)}createEventList(){return super.createEventList().concat([i.EVENT_AGGREGATE])}isAggregated(t){const e=this.findMyRanker();return!!this.desc.isAggregated&&this.desc.isAggregated(e,t)}setAggregated(t,e){const n=this.findMyRanker();return(this.desc.isAggregated&&this.desc.isAggregated(n,t))===e||(this.desc.setAggregated&&this.desc.setAggregated(n,t,e),this.fire(i.EVENT_AGGREGATE,n,t,e),!1)}}e.b=i,i.EVENT_AGGREGATE="aggregate"},function(t,e,n){"use strict";e.a=function(t="Imposition"){return{type:"imposition",label:t}};var r=n(11),i=n(8),a=n(2),o=n(10);class s extends r.a{constructor(t,e){super(t,e),this.setDefaultRenderer("number"),this.setDefaultGroupRenderer("boxplot")}getLabel(t,e){const n=this._children;return 0===n.length?"":1===n.length?n[0].getLabel(t,e):`${n[0].getLabel(t,e)} (${n.slice(1).map(n=>`${n.label} = ${n.getLabel(t,e)}`)})`}getValue(t,e){const n=this._children;return 0===n.length?NaN:n[0].getValue(t,e)}getColor(t,e){const n=this._children;return n.length<2?this.color:n[1].getColor(t,e)}getNumber(t,e){const n=this.getValue(t,e);return null===n?NaN:n}getRawNumber(t,e){return this.getNumber(t,e)}isMissing(t,e){return 0===this._children.length||this._children[0].isMissing(t,e)}compare(t,e,n,r){return i.d.prototype.compare.call(this,t,e,n,r)}groupCompare(t,e){return i.d.prototype.groupCompare.call(this,t,e)}insert(t,e){return(0!==this._children.length||Object(a.h)(t))&&(1!==this._children.length||Object(o.b)(t))?this._children.length>=2?null:super.insert(t,e):null}}e.b=s},function(t,e,n){"use strict";var r=n(0),i=n(4);class a{constructor(t="text",e="left"){this.textClass=t,this.align=e,this.title="String"}canRender(t){return!0}createDOM(t){return{template:`<div class="${this.textClass} ${this.align}"> </div>`,update:(e,n)=>{Object(i.b)(e,t,n),Object(r.r)(e,t.getLabel(n.v,n.dataIndex))}}}createCanvas(t,e){return(n,a,o)=>{if(Object(i.a)(n,t,a,e.rowHeight(o)))return;const s=n.textAlign;n.textAlign=this.align;const l=e.colWidth(t);let u=0;"center"===this.align?u=l/2:"right"===this.align&&(u=l),Object(r.d)(n,t.getLabel(a.v,a.dataIndex),u,0,l,e.textHints),n.textAlign=s}}static exampleText(t,e){let n=e.slice(0,5).map(e=>t.getLabel(e.v,e.dataIndex)).join(", ");return e.length>5&&(n+=", &hellip;"),n}createGroupDOM(t){return{template:`<div class="${this.textClass} ${this.align}"> </div>`,update:(e,n,r)=>{e.innerHTML=`\n            ${n.name} (${r.length})\n            <div>${a.exampleText(t,r)}</div>\n        `}}}createGroupCanvas(t,e){const n=e.colWidth(t);return(i,o,s)=>{Object(r.d)(i,`${o.name} (${s.length})`,0,2,n,e.textHints);const l=i.font;i.font='8pt "Helvetica Neue", Helvetica, Arial, sans-serif',Object(r.d)(i,a.exampleText(t,s),0,14,n,e.textHints),i.font=l}}}e.a=a},function(t,e,n){"use strict";var r,i=n(3),a=(n.n(i),n(0)),o=n(12),s=n(11),l=n(14),u=n(34),c=n(44);!function(t){t[t.DIRTY=0]="DIRTY",t[t.SCROLLED=1]="SCROLLED"}(r||(r={}));class d extends a.a{constructor(t,e,n,r,o={}){super(),this.data=t,this.slicer=n,this.options=Object(u.a)().body,this.histCache=new Map,Object(a.p)(this.options,o),this.$node=i.select(e).append(r).classed("lu-body",!0),this.changeDataStorage(t)}createEventList(){return super.createEventList().concat([d.EVENT_HOVER_CHANGED,d.EVENT_RENDER_FINISHED])}get node(){return this.$node.node()}setOption(t,e){this.options[t]=e}changeDataStorage(t){this.data&&this.data.on([`${l.a.EVENT_DIRTY_VALUES}.bodyRenderer`,`${l.a.EVENT_SELECTION_CHANGED}.bodyRenderer`],null),this.data=t,t.on(`${l.a.EVENT_DIRTY_VALUES}.bodyRenderer`,Object(a.f)(this.update.bind(this),1)),t.on(`${l.a.EVENT_SELECTION_CHANGED}.bodyRenderer`,Object(a.f)(this.drawSelection.bind(this),1))}showMeanLine(t){return this.options.meanLine&&Object(o.isNumberColumn)(t)&&t.parent instanceof o.Ranking}fireFinished(){this.fire(d.EVENT_RENDER_FINISHED,this)}createContext(t,e,n,r){const i=this.options;return{cellY:e=>(e+t)*this.options.rowHeight,cellPrevY:e=>(e+t)*this.options.rowHeight,idPrefix:i.idPrefix,totalNumberOfRows:e,option:Object(a.k)(i),renderer(t){return n(t,i.renderers,this)},groupRenderer(t){return r(t,i.renderers,this)}}}select(t,e=!1){return this.data.toggleSelection(t,e)}fakeHover(t){this.mouseOver(t,!0)}mouseOver(t,e=!0){this.fire(d.EVENT_HOVER_CHANGED,e?t:-1)}scrolled(){return this.update(r.SCROLLED)}showAggregatedGroup(t,e){return this.data.isAggregated(t,e)}resolveHistMap(t){return Promise.all(t.columns.map(t=>Promise.resolve(this.histCache.get(t.column.id)))).then(e=>{const n=new Map;return e.forEach((e,r)=>{e&&n.set(t.columns[r].column.id,e)}),n})}update(t=r.DIRTY){const e=this.data.getRankings(),n=e.every(t=>t.getGroups().length<=1),a=i.max(e,t=>i.sum(t.getGroups(),e=>this.showAggregatedGroup(t,e)?this.options.groupHeight:this.options.rowHeight*e.order.length))||0,o=i.max(e,t=>i.sum(t.getGroups(),t=>t.order.length)),l=n?this.slicer(0,o,t=>t*this.options.rowHeight):{from:0,to:1/0},u=this.createContextImpl(l.from,o),c=[].concat(...e.map(t=>t.getGroups().map(t=>(t=>0===l.from&&t.length<=l.to?t:t.slice(l.from,Math.min(t.length,l.to)))(t.order))));let d=0;const h=this.data.fetch(c),p=this.options.columnPadding;let f=0;const g=e.map(t=>{const e=t.children.filter(t=>!t.isHidden()),n=f;let r=0;const a=e.map(t=>{const e=r;return r+=t.getWidth()+p,Object(s.b)(t)&&!t.getCollapsed()&&(r+=p*(t.length-1)),{column:t,renderer:u.renderer(t),groupRenderer:u.groupRenderer(t),shift:e}});f+=r,f+=this.options.slopeWidth;const o=a.slice(0,this.options.freezeCols),l=d;d+=t.getGroups().length;let g=0;const m=t.getGroups().map((e,n)=>{const r=this.showAggregatedGroup(t,e),i=c[l+n],a=g,o=r?this.options.groupHeight:this.options.rowHeight*i.length;return g+=o,{group:e,order:i,data:h[l+n],aggregate:r,y:a,height:o}});return{id:t.id,ranking:t,shift:n,width:r,frozen:o,frozenWidth:Math.max(...o.map(t=>t.shift+t.column.getWidth())),columns:a.slice(this.options.freezeCols),groups:m,height:i.sum(m,t=>t.height)}});return f-=this.options.slopeWidth,this.updateImpl(g,u,f,a,t).then(this.fireFinished.bind(this))}}d.EVENT_HOVER_CHANGED=c.a,d.EVENT_RENDER_FINISHED=c.b,e.a=d},function(t,e,n){"use strict";var r=n(61);n.d(e,"a",function(){return r.a});n(62)},function(t,e,n){"use strict";function r(){return null}e.b=r,e.a=function(){const t=`lu${Math.random().toString(36).slice(-8).substr(0,3)}`,e=Object.assign({},i.renderers);return{idPrefix:t,header:{idPrefix:t,slopeWidth:150,columnPadding:5,headerHistogramHeight:40,headerHeight:20,manipulative:!0,summary:!1,filters:Object.assign({},a.a),summaries:Object.assign({},s.a),linkTemplates:[],searchAble:t=>t instanceof o.a,sortOnLabel:!0,autoRotateLabels:!1,rotationHeight:50,rotationDegree:-20,freezeCols:0,rankingButtons:r},renderingOptions:{stacked:!0,animation:!0,summary:!1,meanLine:!1,histograms:!1},body:{renderer:"svg",visibleRowsOnly:!0,backupScrollRows:5,rowHeight:16,groupHeight:70,groupPadding:5,rowPadding:2,columnPadding:5,textHeight:13,rowBarPadding:1,rowBarTopPadding:1,rowBarBottomPadding:1,idPrefix:"",slopeWidth:150,stacked:!0,animation:!1,animationDuration:1e3,renderers:e,meanLine:!1,actions:[],freezeCols:0},manipulative:!0,pool:!1,renderers:e}};var i=n(23),a=n(120),o=n(9),s=n(126)},function(t,e,n){"use strict";e.a=function(t="Nested"){return{type:"nested",label:t}};var r=n(75);class i extends r.a{compare(t,e,n,r){const i=this.children;for(const a of i){const i=a.compare(t,e,n,r);if(0!==i)return i}return 0}getLabel(t,e){return this.children.map(n=>n.getLabel(t,e)).join(";")}getValue(t,e){return this.children.map(n=>n.getValue(t,e)).join(";")}}e.b=i},function(t,e,n){"use strict";e.a=function(t="actions",e=[],n=[]){return{type:"actions",label:t,actions:e,groupActions:n}};var r=n(1);class i extends r.a{constructor(t,e){super(t,e),this.actions=e.actions||[],this.groupActions=e.groupActions||[]}getLabel(){return""}getValue(){return""}compare(){return 0}}e.b=i},function(t,e,n){"use strict";function r(t,e=1/0){const n=[],r=(t,i)=>{i>=e||0===t.children.length?n.push(t):t.children.forEach(t=>r(t,i+1))};return r(t,0),n}e.b=function(t){const e=[t];let n=0;for(;n<e.length;){const t=e[n++];e.push(...t.children)}return e};var i=n(3),a=(n.n(i),n(1)),o=n(7),s=n(9),l=n(5);class u extends o.a{constructor(t,e){super(t,e),this.currentMaxDepth=1/0,this.currentLeaves=[],this.currentLeavesNameCache=new Map,this.currentLeavesPathCache=new Map,this.separator=";",this.separator=e.separator||this.separator,this.hierarchySeparator=e.hierarchySeparator||".",this.hierarchy=this.initHierarchy(e.hierarchy),this.currentNode=this.hierarchy,this.currentLeaves=r(this.currentNode,this.currentMaxDepth),this.updateCaches(),this.setDefaultRenderer("categorical")}initHierarchy(t){const e=i.scale.category10().range().slice(),n=this.hierarchySeparator,r=(t,i)=>{const a=void 0===i.name?i.value:i.name;let o=-1;const s=(i.children||[]).map(i=>{if("string"==typeof i){const n=t+i;return{path:n,name:i,label:n,color:e[o++%e.length],children:[]}}const s=r(`${t}${a}${n}`,i);return s.color||(s.color=e[o++%e.length]),s}),l=t+a,u=i.label?`${i.label}`:l;return{path:l,name:a,children:s,label:u,color:i.color}};return r("",t)}createEventList(){return super.createEventList().concat([u.EVENT_CUTOFF_CHANGED])}get categories(){return this.currentLeaves.map(t=>t.name)}get categoryLabels(){return this.currentLeaves.map(t=>t.label)}get categoryColors(){return this.currentLeaves.map(t=>t.color)}getCutOff(){return{node:this.currentNode,maxDepth:this.currentMaxDepth}}setCutOff(t,e=1/0){if(this.currentNode===t&&this.currentMaxDepth===e)return;const n=this.getCutOff();this.currentNode=t,this.currentMaxDepth=e,this.currentLeaves=r(t,e),this.updateCaches(),this.fire([u.EVENT_CUTOFF_CHANGED,a.a.EVENT_DIRTY_VALUES,a.a.EVENT_DIRTY],n,this.getCutOff())}resolveCategories(t,e){const n=s.a.prototype.getValue.call(this,t,e);return null===n||""===n?[]:n.split(this.separator).map(t=>(t=t.trim(),this.currentLeavesNameCache.has(t)?this.currentLeavesNameCache.get(t):this.currentLeavesPathCache.has(t)?this.currentLeavesPathCache.get(t):this.currentLeaves.find(e=>e.path===t||e.name===t||t.startsWith(e.path+this.hierarchySeparator)))).filter(t=>Boolean(t))}resolveCategory(t,e){const n=this.resolveCategories(t,e);return n.length>0?n[0]:null}getValue(t,e){const n=this.getValues(t,e);return n.length>0?n[0]:null}getValues(t,e){return this.resolveCategories(t,e).map(t=>t.name)}getLabel(t,e){return this.getLabels(t,e).join(this.separator)}getLabels(t,e){return this.resolveCategories(t,e).map(t=>t.label)}getFirstLabel(t,e){const n=this.getLabels(t,e);return n.length>0?n[0]:null}getCategories(t,e){return this.getValues(t,e)}getColor(t,e){const n=this.resolveCategory(t,e);return n?n.color:null}compare(t,e,n,r){const i=this.resolveCategories(t,n),a=this.resolveCategories(e,r);if(0===i.length)return 0===a.length?0:l.a;if(0===a.length)return-1*l.a;for(let t=0;t<Math.min(i.length,a.length);++t){const e=i[t].path.localeCompare(a[t].path);if(0!==e)return e}return i.length-a.length}group(t,e){const n=this.resolveCategory(t,e);return n?{name:n.name,color:n.color}:super.group(t,e)}updateCaches(){this.currentLeavesPathCache.clear(),this.currentLeavesNameCache.clear(),this.currentLeaves.forEach(t=>{this.currentLeavesPathCache.set(t.path,t),this.currentLeavesNameCache.set(t.name,t)})}}e.a=u,u.EVENT_CUTOFF_CHANGED="cutOffChanged"},function(t,e,n){"use strict";function r(t){return Math.ceil(Math.log(t)/Math.LN2)+1}e.c=r,e.b=function(t,e,n,a,o,s){if(0===t.length)return{min:NaN,max:NaN,mean:NaN,count:0,maxBin:0,hist:[],missing:0};let l=0;const u=t.map((t,r)=>a(t,e[r])?NaN:n(t,e[r])).reduce((t,e)=>(isNaN(e)?l++:t.push(e),t),[]),c=i.layout.histogram();o&&c.range(()=>o),s?c.bins(s):c.bins(r(t.length));const d=i.extent(u),h=c(u);return{min:d[0],max:d[1],mean:i.mean(u),count:t.length,maxBin:Math.max(...h.map(t=>t.y)),hist:h,missing:l}},e.a=function(t,e,n,r){const i=new Map;let a=0;r.forEach(t=>i.set(t,0)),t.forEach((t,r)=>{const o=n(t,e[r]);null!=o&&0!==o.length?o.forEach(t=>{i.set(t,(i.get(t)||0)+1)}):a+=1});const o=[];return i.forEach((t,e)=>o.push({cat:e,y:t})),{maxBin:Math.max(...o.map(t=>t.y)),hist:o,missing:a}};var i=n(3);n.n(i)},function(t,e,n){"use strict";class r{createGroupDOM(){return{template:"",update:()=>void 0}}createGroupCanvas(){return()=>void 0}}e.a=r},function(t,e,n){"use strict";function r(t){return`lu-stacked-${t.id}`}function i(t,e,n,r){const i=n&&e.option("stacked",!0),a=e.option("columnPadding",0);let o=0;return{cols:t.children.map(t=>{const n=o,s=t.getWidth();return o+=s,o+=i?0:a,{column:t,shift:n,width:s,renderer:e.renderer(t,r),groupRenderer:e.groupRenderer(t,r)}}),stacked:i,padding:a}}e.c=r,e.a=i;var a=n(0),o=n(86),s=n(11),l=n(41),u=n(4),c=n(2);class d extends o.a{constructor(t=!0){super(),this.nestingPossible=t,this.title=this.nestingPossible?"Stacked Bar":"Nested"}canRender(t){return Object(s.b)(t)}createDOM(t,e,n){const{cols:o,stacked:s,padding:c}=i(t,e,this.nestingPossible,n),d=e.option("useGridLayout",!1);return{template:`<div class='${t.desc.type} component${e.option("stackLevel",0)} ${d?r(t):""}${d&&!s?" lu-grid-space":""}'>${o.map(t=>t.renderer.template).join("")}</div>`,update:(e,n,r,i)=>{if(Object(u.b)(e,t,n))return;Object(a.o)(e,o,"detail","html");const h=Array.from(e.children),p=t.getWidth();let f=0;o.forEach((t,e)=>{const o=t.column.getWidth()/p,u=h[e];u.style.transform=s?`translate(-${Object(a.q)(f/o*100,4)}%,0)`:null,d?l.b?u.style.msGridColumn=(e+1).toString():u.style.gridColumnStart=(e+1).toString():(u.style.width=`${Object(a.q)(100*o,2)}%`,u.style.marginRight=s?null:`${c}px`),t.renderer.update(u,n,r,i),s&&(f+=(1-t.column.getValue(n.v,n.dataIndex))*o)})}}}createCanvas(t,e,n){const{cols:r,stacked:a}=i(t,e,this.nestingPossible,n);return(n,i,o,s,l,c)=>{if(Object(u.a)(n,t,i,e.rowHeight(o)))return;let d=0;r.forEach(t=>{const e=t.shift-d;n.translate(e,0),t.renderer(n,i,o,s+e,l,c),n.translate(-e,0),a&&(d+=t.width*(1-t.column.getValue(i.v,i.dataIndex)))})}}createGroupDOM(t,e,n){if(this.nestingPossible&&Object(c.h)(t))return super.createGroupDOM(t,e,n);const{cols:o,padding:s}=i(t,e,!1,n),u=e.option("useGridLayout",!1);return{template:`<div class='${t.desc.type} component${e.option("stackLevel",0)} ${u?r(t):""}${u?" lu-grid-space":""}'>${o.map(t=>t.groupRenderer.template).join("")}</div>`,update:(e,n,r)=>{Object(a.o)(e,o,"detail","html");const i=Array.from(e.children),c=t.getWidth();o.forEach((t,e)=>{const o=t.column.getWidth()/c,d=i[e];u?l.b?d.style.msGridColumn=(e+1).toString():d.style.gridColumnStart=(e+1).toString():(d.style.width=`${Object(a.q)(100*o,2)}%`,d.style.marginRight=`${s}px`),t.groupRenderer.update(d,n,r)})}}}createGroupCanvas(t,e,n){if(this.nestingPossible&&Object(c.h)(t))return super.createGroupCanvas(t,e,n);const{cols:r}=i(t,e,!1,n);return(t,e,n,i,a)=>{r.forEach(r=>{const o=r.shift;t.translate(o,0),r.groupRenderer(t,e,n,i+o,a,e),t.translate(-o,0)})}}aggregatedIndex(t,e){return console.assert(Object(c.h)(e)),Object(c.k)(t,e)}}e.b=d},function(t,e,n){"use strict";var r=n(87),i=(n.n(r),n(42));n.d(e,"a",function(){return i.a});var a=n(57);n.d(e,"b",function(){return a.b})},function(t,e,n){"use strict";e.b=function(t,e){r.b?t.style.msGridColumn=e.index+1:t.style.gridColumnStart=e.id,t.dataset.id=e.id};var r=n(57);class i extends r.a{constructor(t,e){super(t),this.id=e,this.extraScrollUpdater=[];const n=t.querySelector("header"),r=t.querySelector("main");r.addEventListener("scroll",()=>{const t=r.scrollLeft;n.scrollLeft=t,this.extraScrollUpdater.forEach(e=>e(t))})}static columnWidths(t,e="px"){const n=r.b?function(t,e){return`(${e})[${t}]`}:function(t,e){return`repeat(${t}, ${e})`};let i=0,a=0,o="";return t.forEach(({width:t})=>{i!==t?(a>0&&(o+=1===a?`${i}${e} `:`${n(a,`${i}${e}`)} `),a=1,i=t):a++}),a>0&&(o+=1===a?`${i}${e}`:`${n(a,`${i}${e}`)}`),o}static gridColumn(t,e,n="px"){const a=i.columnWidths(t,n);return r.b?`-ms-grid-columns: ${a};`:`grid-template-columns: ${a};\n      grid-template-areas: "${t.map(t=>t.id).join(" ")}";\n      grid-auto-columns: ${e}px;`}update(t,e,n,a,o,s="px"){const l=void 0!==o?this.tableIds(o,!0):{header:`${this.id} > header > article`,body:`${this.id} > main > article`};if(this.updateRule(`__heightsRule${l.body}`,`${l.body} > div {\n      height: ${t}px;\n    }`),0===e.length)return void this.deleteRule(`__widthRule${l.body}`);const u=i.gridColumn(e,n,s);r.b&&this.extraScrollUpdater.push(this.updateFrozenColumnsShift.bind(this,e,l,a,s)),this.updateRule(`__widthRule${l.body}`,`${l.body} > div, ${l.header} { ${u} }`),this.updateFrozen(e,l,a,s)}remove(t){const e=this.tableIds(t,!0);this.deleteRule(`__heightsRule${e.body}`),this.deleteRule(`__widthRule${e.body}`);const n=`__frozen${e.body}_`,r=this.ruleNames.reduce((t,e)=>t+(e.startsWith(n)?1:0),0);for(let t=0;t<r;++t)this.deleteRule(`${n}${t}`)}tableIds(t,e=!1){const n=this.id.startsWith("#")?this.id.slice(1):this.id;return{header:`${e?"#":""}${n}_H${t}`,body:`${e?"#":""}${n}_B${t}`}}updateFrozen(t,e,n,i){if(r.b)return;const a=`__frozen${e.body}_`,o=this.ruleNames.reduce((t,e)=>t+(e.startsWith(a)?1:0),0),s=t.filter(t=>t.frozen);if(s.length<=0||r.b){for(let t=0;t<o;++t)this.deleteRule(`${a}${t}`);return}let l=s[0].width;s.slice(1).forEach((t,n)=>{const r=`${e.body} > div > .frozen[data-id="${t.id}"], ${e.header} .frozen[data-id="${t.id}"] {\n        left: ${l}${i};\n      }`;l+=t.width,this.updateRule(`${a}${n}`,r)});for(let t=s.length-1;t<o;++t)this.deleteRule(`${a}${t}`)}updateFrozenColumnsShift(t,e,n,i,a){if(!r.b)return;const o=`__frozen${e.body}_`,s=this.ruleNames.reduce((t,e)=>t+(e.startsWith(o)?1:0),0);if(!t.some(t=>t.frozen)){for(let t=0;t<s;++t)this.deleteRule(`${o}${t}`);return}let l=0,u=0,c=0;t.forEach(t=>{if(t.frozen&&l<a+u){const n=`${e.body} > div > .frozen[data-id="${t.id}"], ${e.header} .frozen[data-id="${t.id}"] {\n          transform: translate(${a-l+u}${i}, 0);\n        }`;this.updateRule(`${o}${c++}`,n),u+=t.width}l+=t.width});for(let t=c;t<s;++t)this.deleteRule(`${o}${t}`)}}e.a=i},function(t,e,n){"use strict";e.b=function(t,e,n){const r=Array.from(t.children);r.length>e.length?r.slice(e.length).forEach(t=>t.remove()):e.length>r.length&&t.insertAdjacentHTML("beforeend",n.repeat(e.length-r.length))};var r=n(3),i=(n.n(r),n(4)),a=n(5),o=n(2);class s{canRender(t,e){return Object(o.i)(t)}static choose(t,e){const n=e.map(e=>t.getRawNumbers(e.v,e.dataIndex)),i=t.getDataLength(),o=[];for(let t=0;t<i;++t){const e=n.map(e=>e[t]).filter(t=>!Object(a.b)(t));o.push(Object(r.mean)(e))}return o}createDOM(t){const{templateRow:e,render:n}=this.createDOMContext(t);return{template:`<div>${e}</div>`,update:(e,r)=>{Object(i.b)(e,t,r)||n(e,t.getRawNumbers(r.v,r.dataIndex))}}}createGroupDOM(t){const{templateRow:e,render:n}=this.createDOMContext(t);return{template:`<div>${e}</div>`,update:(e,r,i)=>{const a=s.choose(t,i);n(e,a)}}}createCanvas(t,e){const n=this.createCanvasContext(t,e);return(r,a,o)=>{if(Object(i.a)(r,t,a,e.rowHeight(o)))return;const s=e.rowHeight(o);n(r,t.getRawNumbers(a.v,a.dataIndex),0,s)}}createGroupCanvas(t,e){const n=this.createCanvasContext(t,e);return(r,i,a)=>{const o=e.groupHeight(i),l=s.choose(t,a);n(r,l,0,o)}}}e.a=s},function(t,e,n){"use strict";e.a="hoverChanged";e.b="renderFinished"},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjEyNHB4IiBoZWlnaHQ9IjMwcHgiIHZpZXdCb3g9IjAgMCAxMjQgMzAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUwIDUwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CiAgPHJlY3QgeD0iNTAiIHk9IjEzIiB3aWR0aD0iNCIgaGVpZ2h0PSI1IiBmaWxsPSIjMzMzIj4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImhlaWdodCIgYXR0cmlidXRlVHlwZT0iWE1MIiB2YWx1ZXM9IjU7MjE7NSIgYmVnaW49IjBzIiBkdXI9IjAuNnMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJ5IiBhdHRyaWJ1dGVUeXBlPSJYTUwiIHZhbHVlcz0iMTM7IDU7IDEzIiBiZWdpbj0iMHMiIGR1cj0iMC42cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4KICA8L3JlY3Q+CiAgPHJlY3QgeD0iNjAiIHk9IjEzIiB3aWR0aD0iNCIgaGVpZ2h0PSI1IiBmaWxsPSIjMzMzIj4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImhlaWdodCIgYXR0cmlidXRlVHlwZT0iWE1MIiB2YWx1ZXM9IjU7MjE7NSIgYmVnaW49IjAuMTVzIiBkdXI9IjAuNnMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+CiAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPSJ5IiBhdHRyaWJ1dGVUeXBlPSJYTUwiIHZhbHVlcz0iMTM7IDU7IDEzIiBiZWdpbj0iMC4xNXMiIGR1cj0iMC42cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4KICA8L3JlY3Q+CiAgPHJlY3QgeD0iNzAiIHk9IjEzIiB3aWR0aD0iNCIgaGVpZ2h0PSI1IiBmaWxsPSIjMzMzIj4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImhlaWdodCIgYXR0cmlidXRlVHlwZT0iWE1MIiB2YWx1ZXM9IjU7MjE7NSIgYmVnaW49IjAuM3MiIGR1cj0iMC42cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InkiIGF0dHJpYnV0ZVR5cGU9IlhNTCIgdmFsdWVzPSIxMzsgNTsgMTMiIGJlZ2luPSIwLjNzIiBkdXI9IjAuNnMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIj48L2FuaW1hdGU+CiAgPC9yZWN0Pgo8L3N2Zz4K"},function(t,e,n){"use strict";var r=n(1),i=n(9);class a extends i.a{constructor(t,e){super(t,e),this.annotations=new Map}createEventList(){return super.createEventList().concat([a.EVENT_VALUE_CHANGED])}getValue(t,e){return this.annotations.has(e)?this.annotations.get(e):super.getValue(t,e)}dump(t){const e=super.dump(t);return e.annotations={},this.annotations.forEach((t,n)=>{e.annotations[n]=t}),e}restore(t,e){super.restore(t,e),t.annotations&&Object.keys(t.annotations).forEach(e=>{this.annotations.set(Number(e),t.annotations[e])})}setValue(t,e,n){const i=this.getValue(t,e);return i===n||(""===n||null==n?this.annotations.delete(e):this.annotations.set(e,n),this.fire([a.EVENT_VALUE_CHANGED,r.a.EVENT_DIRTY_VALUES,r.a.EVENT_DIRTY],e,i,n),!0)}}e.a=a,a.EVENT_VALUE_CHANGED="valueChanged"},function(t,e,n){"use strict";var r=n(1),i=n(7);class a extends i.a{constructor(t,e){super(t,e),this.currentFilter=null,this.trueMarker="X",this.falseMarker="",this.setWidthImpl(30),this.trueMarker=e.trueMarker||this.trueMarker,this.falseMarker=e.falseMarker||this.falseMarker}get categories(){return[this.trueMarker,this.falseMarker]}get categoryLabels(){return["True","False"]}get categoryColors(){return["green","red"]}getValue(t,e){const n=super.getValue(t,e);return void 0!==n&&null!=n&&(!0===n||"true"===n||"yes"===n||"x"===n)}isMissing(){return!1}getCategories(t,e){return this.getValue(t,e)?[this.trueMarker]:[this.falseMarker]}getColor(t,e){return this.getValue(t,e)?"green":"red"}getLabel(t,e){return this.getValue(t,e)?this.trueMarker:this.falseMarker}dump(t){const e=super.dump(t);return null!==this.currentFilter&&(e.filter=this.currentFilter),e}restore(t,e){super.restore(t,e),void 0!==t.filter&&(this.currentFilter=t.filter)}isFiltered(){return null!==this.currentFilter}filter(t,e){if(!this.isFiltered())return!0;return this.getValue(t,e)===this.currentFilter}getFilter(){return this.currentFilter}setFilter(t){this.currentFilter!==t&&this.fire([r.a.EVENT_FILTER_CHANGED,r.a.EVENT_DIRTY_VALUES,r.a.EVENT_DIRTY],this.currentFilter,this.currentFilter=t)}compare(t,e,n,r){const i=this.getValue(t,n),a=this.getValue(e,r);return i===a?0:i<a?-1:1}group(t,e){return this.getValue(t,e)?a.GROUP_TRUE:a.GROUP_FALSE}}e.a=a,a.GROUP_TRUE={name:"True",color:"black"},a.GROUP_FALSE={name:"False",color:"white"}},function(t,e,n){"use strict";e.a=function(t="Min"){return{type:"min",label:t}};var r=n(15);class i extends r.a{constructor(t,e){super(t,e),this.setDefaultRenderer("interleaving")}getColor(t,e){const n=this._children;if(0===n.length)return this.color;let r=0,i=n[0].getValue(t,e);for(let a=1;a<n.length;++a){const o=n[a].getValue(t,e);o<i&&(r=a,i=o),a++}return n[r].color}compute(t,e){return Math.min(...this._children.map(n=>n.getValue(t,e)))}toSortingDesc(t){return{operation:"min",operands:this._children.map(e=>e.toSortingDesc(t))}}get canJustAddNumbers(){return!0}}e.b=i},function(t,e,n){"use strict";e.a=function(t="Max"){return{type:"max",label:t}};var r=n(15);class i extends r.a{constructor(t,e){super(t,e),this.setDefaultRenderer("interleaving")}getColor(t,e){const n=this._children;if(0===n.length)return this.color;let r=0,i=n[0].getValue(t,e);for(let a=1;a<n.length;++a){const o=n[a].getValue(t,e);o>i&&(r=a,i=o)}return n[r].color}compute(t,e){return Math.max(...this._children.map(n=>n.getValue(t,e)))}toSortingDesc(t){return{operation:"max",operands:this._children.map(e=>e.toSortingDesc(t))}}get canJustAddNumbers(){return!0}}e.b=i},function(t,e,n){"use strict";e.a=function(t="Mean"){return{type:"mean",label:t}};var r=n(3),i=(n.n(r),n(15));class a extends i.a{compute(t,e){return Object(r.mean)(this._children,n=>n.getValue(t,e))}toSortingDesc(t){return{operation:"avg",operands:this._children.map(e=>e.toSortingDesc(t))}}get canJustAddNumbers(){return!0}}e.b=a},function(t,e,n){"use strict";var r=n(3),i=(n.n(r),n(1)),a=n(7),o=n(10),s=n(8);class l extends a.a{constructor(t,e){if(super(t,e),this.colors=r.scale.category10(),this.catLabels=new Map,this.scale=r.scale.ordinal().rangeRoundPoints([0,1]),this.currentFilter=null,this.separator=";",this.combiner=r.max,this.separator=e.separator||this.separator,o.a.prototype.initCategories.call(this,e),this.scale.domain(this.colors.domain()),e.categories){const t=e.categories.map(t=>"string"!=typeof t&&"number"==typeof t.value?t.value:.5);this.scale.range(t)}this.setDefaultRenderer("number"),this.setDefaultGroupRenderer("boxplot")}createEventList(){return super.createEventList().concat([l.EVENT_MAPPING_CHANGED])}get categories(){return this.colors.domain().slice()}get categoryColors(){return this.colors.range().slice()}get categoryLabels(){return null===this.catLabels||0===this.catLabels.size?this.categories:this.categories.map(t=>this.catLabels.has(t)?this.catLabels.get(t):t)}colorOf(t){return this.colors(t)}getLabel(t,e){return o.a.prototype.getLabel.call(this,t,e)}getFirstLabel(t,e){return o.a.prototype.getFirstLabel.call(this,t,e)}getLabels(t,e){return o.a.prototype.getLabels.call(this,t,e)}getValue(t,e){const n=this.getValues(t,e);return n.length>0?this.combiner(n):0}getValues(t,e){return o.a.prototype.getValues.call(this,t,e).map(this.scale)}getCategories(t,e){return o.a.prototype.getValues.call(this,t,e)}getNumber(t,e){return this.getValue(t,e)}isMissing(t,e){return 0===this.getLabels(t,e).length}getRawNumber(t,e){return this.getNumber(t,e)}getColor(t,e){const n=this.getValues(t,e),i=this.getColors(t,e);return this.combiner===r.max?i.slice(1).reduce((t,e,r)=>n[r+1]>t.v?{c:e,v:n[r+1]}:t,{c:i[0],v:n[0]}).c:this.combiner===r.min?i.slice(1).reduce((t,e,r)=>n[r+1]<t.v?{c:e,v:n[r+1]}:t,{c:i[0],v:n[0]}).c:i[0]||null}getColors(t,e){return o.a.prototype.getColors.call(this,t,e)}dump(t){const e=o.a.prototype.dump.call(this,t);return e.scale={domain:this.scale.domain(),range:this.scale.range(),separator:this.separator},e}restore(t,e){o.a.prototype.restore.call(this,t,e),t.scale&&this.scale.domain(t.scale.domain).range(t.scale.range),this.separator=t.separator||this.separator}getScale(){return{domain:this.scale.domain(),range:this.scale.range()}}getMapping(){return this.scale.range().slice()}setMapping(t){const e=this.getScale();this.scale.range(t),this.fire([l.EVENT_MAPPING_CHANGED,i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY],e,this.getScale())}isFiltered(){return null!=this.currentFilter}filter(t,e){return o.a.prototype.filter.call(this,t,e)}group(t,e){return o.a.prototype.group.call(this,t,e)}getFilter(){return this.currentFilter}setFilter(t){return o.a.prototype.setFilter.call(this,t)}compare(t,e,n,r){return s.d.prototype.compare.call(this,t,e,n,r)}groupCompare(t,e){return s.d.prototype.groupCompare.call(this,t,e)}getRendererType(){return s.d.prototype.getRendererType.call(this)}}e.a=l,l.EVENT_MAPPING_CHANGED=s.d.EVENT_MAPPING_CHANGED},function(t,e,n){"use strict";var r=n(3),i=(n.n(r),n(7)),a=n(1),o=n(8),s=n(5),l=n(2);class u extends i.a{constructor(t,e){super(t,e),this.currentFilter=Object(l.l)(),e.map?this.mapping=Object(o.c)(e.map):e.domain&&(this.mapping=new o.a(e.domain,"linear",e.range||[0,1])),this.original=this.mapping.clone(),this.dataLength=e.dataLength,this.threshold=e.threshold||0,this.colorRange=e.colorRange||["blue","red"],this.sort=e.sort||l.d.median,this.setWidth(Math.min(Math.max(100,10*this.dataLength),500)),this.splicer={length:this.dataLength,splice:t=>t}}setSplicer(t){this.fire([u.EVENT_SPLICE_CHANGED,a.a.EVENT_DIRTY_VALUES,a.a.EVENT_DIRTY_HEADER,a.a.EVENT_DIRTY],this.splicer,this.splicer=t)}getSplicer(){return this.splicer}compare(t,e,n,r){return Object(l.e)(this,t,e,n,r)}getColorRange(){return this.colorRange.slice()}getRawColorScale(){const t=r.scale.linear(),e=this.mapping.domain;return e[0]<0?t.domain([e[0],0,e[1]]).range([this.colorRange[0],this.colorRange.length>2?this.colorRange[1]:"white",this.colorRange[this.colorRange.length-1]]):t.domain([e[0],e[1]]).range([this.colorRange[0],this.colorRange[this.colorRange.length-1]]),t}getRawNumbers(t,e){return this.getRawValue(t,e)}getDataLength(){return this.splicer?this.splicer.length:this.dataLength}getThreshold(){return this.threshold}getBoxPlotData(t,e){const n=this.getRawValue(t,e);return null===n?null:new l.c(n,this.mapping)}getRange(){return this.mapping.getRange(l.b)}getRawBoxPlotData(t,e){const n=this.getRawValue(t,e);return null===n?null:new l.c(n)}getNumbers(t,e){return this.getValue(t,e)}getNumber(t,e){return Object(l.f)(this,t,e,"normalized")}getRawNumber(t,e){return Object(l.f)(this,t,e,"raw")}getValue(t,e){return this.getRawValue(t,e).map(t=>Object(s.b)(t)?NaN:this.mapping.apply(t))}getRawValue(t,e){let n=super.getValue(t,e);return this.splicer&&null!==n&&(n=this.splicer.splice(n)),null===n?[]:n}getLabel(t,e){const n=this.getRawValue(t,e);return null===n?"":`[${n.map(l.b).join(", ")}]`}getSortMethod(){return this.sort}setSortMethod(t){this.sort!==t&&(this.fire([a.a.EVENT_SORTMETHOD_CHANGED],this.sort,this.sort=t),this.isSortedByMe().asc||this.sortByMe())}dump(t){const e=super.dump(t);return e.sortMethod=this.getSortMethod(),e.filter=Object(l.j)(this.currentFilter,Object(l.l)())?null:this.currentFilter,e.map=this.mapping.dump(),e}restore(t,e){super.restore(t,e),t.sortMethod&&(this.sort=t.sortMethod),t.filter&&(this.currentFilter=Object(l.n)(t.filter)),t.map?this.mapping=Object(o.c)(t.map):t.domain&&(this.mapping=new o.a(t.domain,"linear",t.range||[0,1]))}createEventList(){return super.createEventList().concat([u.EVENT_MAPPING_CHANGED,u.EVENT_SPLICE_CHANGED])}getOriginalMapping(){return this.original.clone()}getMapping(){return this.mapping.clone()}setMapping(t){this.mapping.eq(t)||this.fire([u.EVENT_MAPPING_CHANGED,a.a.EVENT_DIRTY_VALUES,a.a.EVENT_DIRTY],this.mapping.clone(),this.mapping=t)}isFiltered(){return o.d.prototype.isFiltered.call(this)}getFilter(){return o.d.prototype.getFilter.call(this)}setFilter(t={min:-1/0,max:1/0,filterMissing:!1}){o.d.prototype.setFilter.call(this,t)}filter(t,e){return o.d.prototype.filter.call(this,t,e)}}e.a=u,u.EVENT_MAPPING_CHANGED=o.d.EVENT_MAPPING_CHANGED,u.EVENT_SPLICE_CHANGED="spliceChanged"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(14);n.d(e,"DataProvider",function(){return r.a});var i=n(78);n.d(e,"LocalDataProvider",function(){return i.a});var a=n(79);n.d(e,"RemoteDataProvider",function(){return a.a});var o=n(55);n.d(e,"deriveColumnDescriptions",function(){return o.a})},function(t,e,n){"use strict";class r{constructor(t=[]){this[Symbol.toStringTag]=Symbol("OrderedSet"),this.set=new Set,this.list=[],this.addAll(t)}get size(){return this.set.size}clear(){this.set.clear(),this.list.splice(0,this.list.length)}addAll(t){return t.forEach(t=>this.add(t)),this}add(t){return this.set.has(t)?this:(this.set.add(t),this.list.push(t),this)}has(t){return this.set.has(t)}delete(t){if(!this.set.delete(t))return!1;const e=this.list.indexOf(t);return console.assert(e>=0),this.list.splice(e,1),!0}deleteAll(t){return t.reduce((t,e)=>this.delete(e)&&t,!0)}forEach(t,e){this.list.forEach(function(e){t.call(this,e,e,this)},e)}[Symbol.iterator](){return this.list[Symbol.iterator]()}}e.a=r},function(t,e,n){"use strict";function r(t,e,n,r,a){const o={type:"string",label:t,column:n};if("number"==typeof e)return o.type="number",o.domain=Object(i.extent)(r,t=>t[n]),o;if("boolean"==typeof e)return o.type="boolean",o;if("string"==typeof e){const t=new Set(r.map(t=>t[n]));return t.size<r.length*a.categoricalThreshold&&(o.type="categorical",o.categories=t),o}return o}e.a=function(t,e={}){const n=Object.assign({categoricalThreshold:.7},e),i=[];if(0===t.length)return i;const a=t[0];return Array.isArray(a)?a.map((e,i)=>r(`Col${i}`,e,i,t,n)):Object.keys(a).map(e=>r(e,a[e],e,t,n))},e.b=function(t,e,n={}){function r(t,e){return!(i.quote||t.indexOf("\n")>=0)||e&&Object(a.isNumberColumn)(e)?t:`${i.quoteChar}${t.replace(o,i.quoteChar+i.quoteChar)}${i.quoteChar}`}const i=Object.assign({separator:"\t",newline:"\n",header:!0,quote:!1,quoteChar:'"',filter:t=>!Object(a.isSupportType)(t),verboseColumnHeaders:!1},n),o=new RegExp(`[${i.quoteChar}]`,"g"),s=t.flatColumns.filter(t=>i.filter(t.desc)),l=t.getOrder(),u=[];return i.header&&u.push(s.map(t=>r(`${t.label}${i.verboseColumnHeaders&&t.description?`\n${t.description}`:""}`)).join(i.separator)),e.forEach((t,e)=>{u.push(s.map(n=>r(n.getLabel(t,l[e]),n)).join(i.separator))}),u.join(i.newline)};var i=n(3),a=(n.n(i),n(12))},function(t,e,n){"use strict";function r(t,e,n,r){const i=r.column;return function(t){return"string"==typeof t&&t.indexOf(".")>=0}(i)?function(t,e){return t.split(".").reduce((t,e)=>void 0===t?t:/\d+/.test(e)?t[+e]:t[e],e)}(i,t):t[i]}var i=n(12),a=n(13),o=n(14);class s extends o.a{constructor(t=[],e={}){super(e),this.columns=t,this.rankingIndex=0,this.ranks=new Map,t.forEach(t=>{t.accessor=t.accessor||r,t.label=t.label||t.column})}rankAccessor(t,e,n,r,i){const a=this.ranks.get(i.id)||[];let o=0;for(const t of a){const n=t.order.indexOf(e);if(n>=0)return o+n+1;o+=t.order.length}return-1}getMaxNestedSortingCriteria(){return 1}getMaxGroupColumns(){return 1}cloneRanking(t){const e=this.nextRankingId(),n=new a.a(e,this.getMaxNestedSortingCriteria(),this.getMaxGroupColumns());return t?(this.ranks.set(e,this.ranks.get(t.id)),t.children.forEach(t=>{this.push(n,t.desc)})):n.push(this.create(Object(i.createRankDesc)())),n}cleanUpRanking(t){this.ranks.delete(t.id)}sort(t){const e=this.sortImpl(t);return Array.isArray(e)?(this.ranks.set(t.id,e),e):e.then(e=>(this.ranks.set(t.id,e),e))}pushDesc(t){const e=t;e.accessor=e.accessor||r,e.label=t.label||e.column,this.columns.push(t),this.fire(o.a.EVENT_ADD_DESC,e)}clearColumns(){this.clearRankings(),this.columns.splice(0,this.columns.length),this.fire(o.a.EVENT_CLEAR_DESC)}getColumns(){return this.columns.slice()}findDesc(t){return this.columns.filter(e=>e.column===t)[0]}toDescRef(t){return void 0!==t.column?`${t.type}@${t.column}`:t}fromDescRef(t){return"string"==typeof t?this.columns.find(e=>`${e.type}@${e.column}`===t):t}restore(t){super.restore(t),this.rankingIndex=1+Math.max(...this.getRankings().map(t=>+t.id.substring(4)))}nextRankingId(){return`rank${this.rankingIndex++}`}}e.a=s},function(t,e,n){"use strict";const r="undefined"!=typeof CSS&&CSS.supports("(-ms-ime-align:auto)");e.b=r;class i{constructor(t){this.rules=new Map,this.node=t.ownerDocument.createElement("style"),t.appendChild(this.node),r&&t.classList.add("ms-edge")}get stylesheet(){const t=this.node.sheet;return this.rules.size>0&&0===t.cssRules.length&&this.rules.forEach(e=>{e.index=t.cssRules.length,t.insertRule(e.rule.cssText),e.rule=t.cssRules.item(e.index)}),t}destroy(){this.node.remove()}addRule(t,e){const n=this.stylesheet.cssRules.length;return this.stylesheet.insertRule(e,n),this.rules.set(t,{rule:this.stylesheet.cssRules[n],index:n}),t}findIndex(t,e){return this.stylesheet.cssRules[t]===e?t:Array.from(this.stylesheet.cssRules).indexOf(e)}updateRule(t,e){const n=this.rules.get(t);return n?(n.index=this.findIndex(n.index,n.rule),this.stylesheet.deleteRule(n.index),this.stylesheet.insertRule(e,n.index),n.rule=this.stylesheet.cssRules[n.index],t):this.addRule(t,e)}deleteRule(t){const e=this.rules.get(t);e&&(e.index=this.findIndex(e.index,e.rule),this.stylesheet.deleteRule(e.index),this.rules.delete(t))}get ruleNames(){return Array.from(this.rules.keys())}}e.a=i},function(t,e,n){"use strict";var r=n(0),i=n(4);class a{constructor(){this.title="Color"}canRender(){return!1}createDOM(t){return{template:'<div style="background-color: transparent" title=""></div>',update:(e,n)=>{const r=Object(i.b)(e,t,n);e.style.backgroundColor=r?null:t.getColor(n.v,n.dataIndex),e.title=t.getLabel(n.v,n.dataIndex)}}}createCanvas(t,e){return(n,r,a)=>{Object(i.a)(n,t,r,e.rowHeight(a))||(n.fillStyle=t.getColor(r.v,r.dataIndex)||"",n.fillRect(0,0,e.colWidth(t),e.rowHeight(a)))}}static choose(t,e){const n=new Map;t.categories.forEach(t=>n.set(t,0)),e.forEach(e=>t.getCategories(e.v,e.dataIndex).forEach(t=>n.set(t,(n.get(t)||0)+1)));let r=0,i=0;return t.categories.forEach((t,e)=>{const a=n.get(t);a>r&&(r=a,i=e)}),{count:r,label:t.categoryLabels[i],color:t.categoryColors[i]}}createGroupDOM(t){return{template:'<div style="background-color: white"></div>',update:(e,n,r)=>{const{count:i,label:o,color:s}=a.choose(t,r);e.textContent=`${o} (${i})`,e.style.backgroundColor=s}}}createGroupCanvas(t,e){const n=e.colWidth(t);return(i,o,s)=>{const l=e.groupHeight(o),{count:u,label:c,color:d}=a.choose(t,s);i.fillStyle=d,i.fillRect(0,0,n,l),i.fillStyle=e.option("style.text","black");const h=i.textAlign;i.textAlign="center",Object(r.d)(i,`${c} (${u})`,n/2,l/2,n,e.textHints),i.textAlign=h}}}e.a=a},function(t,e,n){"use strict";(function(t){function n(t){return t&&"[object Function]"==={}.toString.call(t)}function r(t,e){if(1!==t.nodeType)return[];var n=getComputedStyle(t,null);return e?n[e]:n}function i(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function a(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=r(t),n=e.overflow,o=e.overflowX,s=e.overflowY;return/(auto|scroll)/.test(n+s+o)?t:a(i(t))}function o(t){var e=t&&t.offsetParent,n=e&&e.nodeName;return n&&"BODY"!==n&&"HTML"!==n?-1!==["TD","TABLE"].indexOf(e.nodeName)&&"static"===r(e,"position")?o(e):e:t?t.ownerDocument.documentElement:document.documentElement}function s(t){return null!==t.parentNode?s(t.parentNode):t}function l(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?t:e,i=n?e:t,a=document.createRange();a.setStart(r,0),a.setEnd(i,0);var u=a.commonAncestorContainer;if(t!==u&&e!==u||r.contains(i))return function(t){var e=t.nodeName;return"BODY"!==e&&("HTML"===e||o(t.firstElementChild)===t)}(u)?u:o(u);var c=s(t);return c.host?l(c.host,e):l(t,s(e).host)}function u(t){var e="top"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=t.nodeName;if("BODY"===n||"HTML"===n){var r=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||r)[e]}return t[e]}function c(t,e){var n="x"===e?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"],10)+parseFloat(t["border"+r+"Width"],10)}function d(t,e,n,r){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],F()?n["offset"+t]+r["margin"+("Height"===t?"Top":"Left")]+r["margin"+("Height"===t?"Bottom":"Right")]:0)}function h(){var t=document.body,e=document.documentElement,n=F()&&getComputedStyle(e);return{height:d("Height",t,e,n),width:d("Width",t,e,n)}}function p(t){return Y({},t,{right:t.left+t.width,bottom:t.top+t.height})}function f(t){var e={};if(F())try{e=t.getBoundingClientRect();var n=u(t,"top"),i=u(t,"left");e.top+=n,e.left+=i,e.bottom+=n,e.right+=i}catch(t){}else e=t.getBoundingClientRect();var a={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},o="HTML"===t.nodeName?h():{},s=o.width||t.clientWidth||a.right-a.left,l=o.height||t.clientHeight||a.bottom-a.top,d=t.offsetWidth-s,f=t.offsetHeight-l;if(d||f){var g=r(t);d-=c(g,"x"),f-=c(g,"y"),a.width-=d,a.height-=f}return p(a)}function g(t,e){var n=F(),i="HTML"===e.nodeName,o=f(t),s=f(e),l=a(t),c=r(e),d=parseFloat(c.borderTopWidth,10),h=parseFloat(c.borderLeftWidth,10),g=p({top:o.top-s.top-d,left:o.left-s.left-h,width:o.width,height:o.height});if(g.marginTop=0,g.marginLeft=0,!n&&i){var m=parseFloat(c.marginTop,10),v=parseFloat(c.marginLeft,10);g.top-=d-m,g.bottom-=d-m,g.left-=h-v,g.right-=h-v,g.marginTop=m,g.marginLeft=v}return(n?e.contains(l):e===l&&"BODY"!==l.nodeName)&&(g=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=u(e,"top"),i=u(e,"left"),a=n?-1:1;return t.top+=r*a,t.bottom+=r*a,t.left+=i*a,t.right+=i*a,t}(g,e)),g}function m(t){var e=t.nodeName;return"BODY"!==e&&"HTML"!==e&&("fixed"===r(t,"position")||m(i(t)))}function v(t,e,n,r){var o={top:0,left:0},s=l(t,e);if("viewport"===r)o=function(t){var e=t.ownerDocument.documentElement,n=g(t,e),r=Math.max(e.clientWidth,window.innerWidth||0),i=Math.max(e.clientHeight,window.innerHeight||0),a=u(e),o=u(e,"left");return p({top:a-n.top+n.marginTop,left:o-n.left+n.marginLeft,width:r,height:i})}(s);else{var c=void 0;"scrollParent"===r?"BODY"===(c=a(i(e))).nodeName&&(c=t.ownerDocument.documentElement):c="window"===r?t.ownerDocument.documentElement:r;var d=g(c,s);if("HTML"!==c.nodeName||m(s))o=d;else{var f=h(),v=f.height,b=f.width;o.top+=d.top-d.marginTop,o.bottom=v+d.top,o.left+=d.left-d.marginLeft,o.right=b+d.left}}return o.left+=n,o.top+=n,o.right-=n,o.bottom-=n,o}function b(t,e,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var o=v(n,r,a,i),s={top:{width:o.width,height:e.top-o.top},right:{width:o.right-e.right,height:o.height},bottom:{width:o.width,height:o.bottom-e.bottom},left:{width:e.left-o.left,height:o.height}},l=Object.keys(s).map(function(t){return Y({key:t},s[t],{area:function(t){return t.width*t.height}(s[t])})}).sort(function(t,e){return e.area-t.area}),u=l.filter(function(t){var e=t.width,r=t.height;return e>=n.clientWidth&&r>=n.clientHeight}),c=u.length>0?u[0].key:l[0].key,d=t.split("-")[1];return c+(d?"-"+d:"")}function y(t,e,n){return g(n,l(e,n))}function E(t){var e=getComputedStyle(t),n=parseFloat(e.marginTop)+parseFloat(e.marginBottom),r=parseFloat(e.marginLeft)+parseFloat(e.marginRight);return{width:t.offsetWidth+r,height:t.offsetHeight+n}}function x(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function _(t,e,n){n=n.split("-")[0];var r=E(t),i={width:r.width,height:r.height},a=-1!==["right","left"].indexOf(n),o=a?"top":"left",s=a?"left":"top",l=a?"height":"width",u=a?"width":"height";return i[o]=e[o]+e[l]/2-r[l]/2,i[s]=n===s?e[s]-r[u]:e[x(s)],i}function N(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function C(t,e,r){return(void 0===r?t:t.slice(0,function(t,e,n){if(Array.prototype.findIndex)return t.findIndex(function(t){return t[e]===n});var r=N(t,function(t){return t[e]===n});return t.indexOf(r)}(t,"name",r))).forEach(function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var r=t.function||t.fn;t.enabled&&n(r)&&(e.offsets.popper=p(e.offsets.popper),e.offsets.reference=p(e.offsets.reference),e=r(e,t))}),e}function M(t,e){return t.some(function(t){var n=t.name;return t.enabled&&n===e})}function T(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<e.length-1;r++){var i=e[r],a=i?""+i+n:t;if(void 0!==document.body.style[a])return a}return null}function w(t){var e=t.ownerDocument;return e?e.defaultView:window}function S(t,e,n,r){var i="BODY"===t.nodeName,o=i?t.ownerDocument.defaultView:t;o.addEventListener(e,n,{passive:!0}),i||S(a(o.parentNode),e,n,r),r.push(o)}function O(){this.state.eventsEnabled||(this.state=function(t,e,n,r){n.updateBound=r,w(t).addEventListener("resize",n.updateBound,{passive:!0});var i=a(t);return S(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}(this.reference,this.options,this.state,this.scheduleUpdate))}function R(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function(t,e){return w(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e}(this.reference,this.state))}function D(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function A(t,e){Object.keys(e).forEach(function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&D(e[n])&&(r="px"),t.style[n]=e[n]+r})}function L(t,e,n){var r=N(t,function(t){return t.name===e}),i=!!r&&t.some(function(t){return t.name===n&&t.enabled&&t.order<r.order});if(!i){var a="`"+e+"`",o="`"+n+"`";console.warn(o+" modifier is required by "+a+" modifier in order to work, be sure to include it before "+a+"!")}return i}function I(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=q.indexOf(t),r=q.slice(n+1).concat(q.slice(0,n));return e?r.reverse():r}function k(t,e,n,r){var i=[0,0],a=-1!==["right","left"].indexOf(r),o=t.split(/(\+|\-)/).map(function(t){return t.trim()}),s=o.indexOf(N(o,function(t){return-1!==t.search(/,|\s/)}));o[s]&&-1===o[s].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,u=-1!==s?[o.slice(0,s).concat([o[s].split(l)[0]]),[o[s].split(l)[1]].concat(o.slice(s+1))]:[o];return(u=u.map(function(t,r){var i=(1===r?!a:a)?"height":"width",o=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,o=!0,t):o?(t[t.length-1]+=e,o=!1,t):t.concat(e)},[]).map(function(t){return function(t,e,n,r){var i=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),a=+i[1],o=i[2];if(!a)return t;if(0===o.indexOf("%")){var s=void 0;switch(o){case"%p":s=n;break;case"%":case"%r":default:s=r}return p(s)[e]/100*a}if("vh"===o||"vw"===o)return("vh"===o?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*a;return a}(t,i,e,n)})})).forEach(function(t,e){t.forEach(function(n,r){D(n)&&(i[e]+=n*("-"===t[r-1]?-1:1))})}),i}for(var V="undefined"!=typeof window&&"undefined"!=typeof document,j=["Edge","Trident","Firefox"],H=0,$=0;$<j.length;$+=1)if(V&&navigator.userAgent.indexOf(j[$])>=0){H=1;break}var P=V&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},H))}},G=void 0,F=function(){return void 0===G&&(G=-1!==navigator.appVersion.indexOf("MSIE 10")),G},z=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},U=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),W=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},Y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},B=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],q=B.slice(3),Z={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"},J={placement:"bottom",eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,n=e.split("-")[0],r=e.split("-")[1];if(r){var i=t.offsets,a=i.reference,o=i.popper,s=-1!==["bottom","top"].indexOf(n),l=s?"left":"top",u=s?"width":"height",c={start:W({},l,a[l]),end:W({},l,a[l]+a[u]-o[u])};t.offsets.popper=Y({},o,c[r])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var n=e.offset,r=t.placement,i=t.offsets,a=i.popper,o=i.reference,s=r.split("-")[0],l=void 0;return l=D(+n)?[+n,0]:k(n,a,o,s),"left"===s?(a.top+=l[0],a.left-=l[1]):"right"===s?(a.top+=l[0],a.left+=l[1]):"top"===s?(a.left+=l[0],a.top-=l[1]):"bottom"===s&&(a.left+=l[0],a.top+=l[1]),t.popper=a,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var n=e.boundariesElement||o(t.instance.popper);t.instance.reference===n&&(n=o(n));var r=v(t.instance.popper,t.instance.reference,e.padding,n);e.boundaries=r;var i=e.priority,a=t.offsets.popper,s={primary:function(t){var n=a[t];return a[t]<r[t]&&!e.escapeWithReference&&(n=Math.max(a[t],r[t])),W({},t,n)},secondary:function(t){var n="right"===t?"left":"top",i=a[n];return a[t]>r[t]&&!e.escapeWithReference&&(i=Math.min(a[n],r[t]-("right"===t?a.width:a.height))),W({},n,i)}};return i.forEach(function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";a=Y({},a,s[e](t))}),t.offsets.popper=a,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,n=e.popper,r=e.reference,i=t.placement.split("-")[0],a=Math.floor,o=-1!==["top","bottom"].indexOf(i),s=o?"right":"bottom",l=o?"left":"top",u=o?"width":"height";return n[s]<a(r[l])&&(t.offsets.popper[l]=a(r[l])-n[u]),n[l]>a(r[s])&&(t.offsets.popper[l]=a(r[s])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var n;if(!L(t.instance.modifiers,"arrow","keepTogether"))return t;var i=e.element;if("string"==typeof i){if(!(i=t.instance.popper.querySelector(i)))return t}else if(!t.instance.popper.contains(i))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var a=t.placement.split("-")[0],o=t.offsets,s=o.popper,l=o.reference,u=-1!==["left","right"].indexOf(a),c=u?"height":"width",d=u?"Top":"Left",h=d.toLowerCase(),f=u?"left":"top",g=u?"bottom":"right",m=E(i)[c];l[g]-m<s[h]&&(t.offsets.popper[h]-=s[h]-(l[g]-m)),l[h]+m>s[g]&&(t.offsets.popper[h]+=l[h]+m-s[g]),t.offsets.popper=p(t.offsets.popper);var v=l[h]+l[c]/2-m/2,b=r(t.instance.popper),y=parseFloat(b["margin"+d],10),x=parseFloat(b["border"+d+"Width"],10),_=v-t.offsets.popper[h]-y-x;return _=Math.max(Math.min(s[c]-m,_),0),t.arrowElement=i,t.offsets.arrow=(n={},W(n,h,Math.round(_)),W(n,f,""),n),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(M(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var n=v(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement),r=t.placement.split("-")[0],i=x(r),a=t.placement.split("-")[1]||"",o=[];switch(e.behavior){case Z.FLIP:o=[r,i];break;case Z.CLOCKWISE:o=I(r);break;case Z.COUNTERCLOCKWISE:o=I(r,!0);break;default:o=e.behavior}return o.forEach(function(s,l){if(r!==s||o.length===l+1)return t;r=t.placement.split("-")[0],i=x(r);var u=t.offsets.popper,c=t.offsets.reference,d=Math.floor,h="left"===r&&d(u.right)>d(c.left)||"right"===r&&d(u.left)<d(c.right)||"top"===r&&d(u.bottom)>d(c.top)||"bottom"===r&&d(u.top)<d(c.bottom),p=d(u.left)<d(n.left),f=d(u.right)>d(n.right),g=d(u.top)<d(n.top),m=d(u.bottom)>d(n.bottom),v="left"===r&&p||"right"===r&&f||"top"===r&&g||"bottom"===r&&m,b=-1!==["top","bottom"].indexOf(r),y=!!e.flipVariations&&(b&&"start"===a&&p||b&&"end"===a&&f||!b&&"start"===a&&g||!b&&"end"===a&&m);(h||v||y)&&(t.flipped=!0,(h||v)&&(r=o[l+1]),y&&(a="end"===a?"start":"start"===a?"end":a),t.placement=r+(a?"-"+a:""),t.offsets.popper=Y({},t.offsets.popper,_(t.instance.popper,t.offsets.reference,t.placement)),t=C(t.instance.modifiers,t,"flip"))}),t},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],r=t.offsets,i=r.popper,a=r.reference,o=-1!==["left","right"].indexOf(n),s=-1===["top","left"].indexOf(n);return i[o?"left":"top"]=a[n]-(s?i[o?"width":"height"]:0),t.placement=x(e),t.offsets.popper=p(i),t}},hide:{order:800,enabled:!0,fn:function(t){if(!L(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=N(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,r=e.y,i=t.offsets.popper,a=N(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration;void 0!==a&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s=void 0!==a?a:e.gpuAcceleration,l=f(o(t.instance.popper)),u={position:i.position},c={left:Math.floor(i.left),top:Math.floor(i.top),bottom:Math.floor(i.bottom),right:Math.floor(i.right)},d="bottom"===n?"top":"bottom",h="right"===r?"left":"right",p=T("transform"),g=void 0,m=void 0;if(m="bottom"===d?-l.height+c.bottom:c.top,g="right"===h?-l.width+c.right:c.left,s&&p)u[p]="translate3d("+g+"px, "+m+"px, 0)",u[d]=0,u[h]=0,u.willChange="transform";else{var v="bottom"===d?-1:1,b="right"===h?-1:1;u[d]=m*v,u[h]=g*b,u.willChange=d+", "+h}var y={"x-placement":t.placement};return t.attributes=Y({},y,t.attributes),t.styles=Y({},u,t.styles),t.arrowStyles=Y({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){return A(t.instance.popper,t.styles),function(t,e){Object.keys(e).forEach(function(n){!1!==e[n]?t.setAttribute(n,e[n]):t.removeAttribute(n)})}(t.instance.popper,t.attributes),t.arrowElement&&Object.keys(t.arrowStyles).length&&A(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,n,r,i){var a=y(0,e,t),o=b(n.placement,a,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",o),A(e,{position:"absolute"}),n},gpuAcceleration:void 0}}},X=function(){function t(e,r){var i=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};z(this,t),this.scheduleUpdate=function(){return requestAnimationFrame(i.update)},this.update=P(this.update.bind(this)),this.options=Y({},t.Defaults,a),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=e&&e.jquery?e[0]:e,this.popper=r&&r.jquery?r[0]:r,this.options.modifiers={},Object.keys(Y({},t.Defaults.modifiers,a.modifiers)).forEach(function(e){i.options.modifiers[e]=Y({},t.Defaults.modifiers[e]||{},a.modifiers?a.modifiers[e]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return Y({name:t},i.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(t){t.enabled&&n(t.onLoad)&&t.onLoad(i.reference,i.popper,i.options,t,i.state)}),this.update();var o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}return U(t,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=y(this.state,this.popper,this.reference),t.placement=b(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.offsets.popper=_(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position="absolute",t=C(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,M(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.left="",this.popper.style.position="",this.popper.style.top="",this.popper.style[T("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return O.call(this)}},{key:"disableEventListeners",value:function(){return R.call(this)}}]),t}();X.Utils=("undefined"!=typeof window?window:t).PopperUtils,X.placements=B,X.Defaults=J,e.a=X}).call(e,n(107))},function(t,e,n){"use strict";function r(t){let e=t.getFilter()||"";const n=e,r=e===i.a.FILTER_MISSING;return r&&(e=""),{original:n,template:`<input type="text" placeholder="containing..." autofocus value="${e instanceof RegExp?e.source:e}" style="width: 100%">\n  <br><label><input type="checkbox" ${e instanceof RegExp?'checked="checked"':""}>RegExp</label>\n  ${Object(a.b)(r)}`,update(t){const n=t.querySelector('input[type="checkbox"]:first-of-type'),i=t.querySelector('input[type="checkbox"].lu_filter_missing'),a=t.querySelector('input[type="text"]');n.checked=e instanceof RegExp,i.checked=r,a.value!==e&&(a.value=e instanceof RegExp?e.source:e)},init(e,n){function r(t){let e=s.value;o.checked&&""===e&&(e=i.a.FILTER_MISSING),""!==e?e.length<3&&!t||(a.checked&&e!==i.a.FILTER_MISSING&&(e=new RegExp(e)),l(e)):l(e)}const a=e.querySelector('input[type="checkbox"]:first-of-type'),o=e.querySelector('input[type="checkbox"].lu_filter_missing'),s=e.querySelector('input[type="text"]'),l=e=>{n&&n(null!=e&&""!==e),t.setFilter(e)};return a.onchange=(()=>r(!1)),o.onchange=(()=>r(!1)),s.oninput=(()=>r(!1)),r}}}e.b=r;var i=n(9),a=n(16);class o extends a.a{constructor(t,e,n="Filter"){super(t,e,n)}openDialog(){const t=r(this.column),e=this.makePopup(t.template),n=t=>{this.markFiltered(null!=t&&""!==t),this.column.setFilter(t)},i=t.init(e.querySelector("form"),t=>this.markFiltered(t));this.onButton(e,{cancel:()=>{n(t.original)},reset:()=>{e.querySelector('input[type="text"]').value="",Array.from(e.querySelectorAll("input[type=checkbox")).forEach(t=>t.checked=!1),n(null)},submit:()=>(i(!0),!0)})}}e.a=o},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r;!function(t){t[t.NONE=0]="NONE",t[t.ALL=1]="ALL",t[t.PARTIAL=2]="PARTIAL"}(r||(r={}))},function(t,e,n){"use strict";var r=n(17),i=n(61);class a{constructor(t,e){return this.adapter=t,this.prefetchTimeout=-1,this.options={prefetchRows:20,cleanUpRows:3,delay:50},Object.assign(this.options,e),this}prefetchDown(){this.prefetchTimeout=-1;const t=this.adapter.context,e=Math.min(this.adapter.visible.last+this.options.prefetchRows,t.numberOfRows-1);this.adapter.visible.last===e&&this.adapter.visible.last>=this.adapter.visible.forcedLast+this.options.prefetchRows||(this.adapter.addAtBottom(this.adapter.visible.last+1,e),this.adapter.visible.last=e)}prefetchUp(){if(this.prefetchTimeout=-1,this.adapter.visible.first<=this.adapter.visible.forcedFirst-this.options.prefetchRows)return;const t=this.adapter.context,e=this.adapter.scroller,n=Math.max(e.scrollTop-this.options.prefetchRows*t.defaultRowHeight,0),i=e.clientHeight,{first:a,firstRowPos:o}=Object(r.c)(n,i,t.defaultRowHeight,t.exceptions,t.numberOfRows);if(a===this.adapter.visible.first)return;const s=this.adapter.syncFrozen?this.adapter.syncFrozen(a):0;this.adapter.addAtBeginning(a,this.adapter.visible.first-1,s),this.adapter.visible.first=a,this.adapter.updateOffset(o)}triggerPrefetch(t){this.prefetchTimeout>=0&&clearTimeout(this.prefetchTimeout),t&&this.adapter.visible.last>=this.adapter.visible.forcedLast+this.options.prefetchRows||!t&&this.adapter.visible.first<=this.adapter.visible.forcedFirst-this.options.prefetchRows||(this.prefetchTimeout=setTimeout(t?this.prefetchDown.bind(this):this.prefetchUp.bind(this),this.options.delay))}cleanUpTop(t){this.prefetchTimeout=-1;const e=Math.max(0,t-this.options.cleanUpRows);if(e<=this.adapter.visible.first)return;const n=this.adapter.syncFrozen?this.adapter.syncFrozen(e):0;this.adapter.removeFromBeginning(this.adapter.visible.first,e-1,n);const r=this.adapter.context;let i=(e-this.adapter.visible.first)*r.defaultRowHeight;if(r.exceptions.length>0)for(let t=this.adapter.visible.first;t<e;++t)r.exceptionsLookup.has(t)&&(i+=r.exceptionsLookup.get(t)-r.defaultRowHeight);this.adapter.visible.first=e,this.adapter.updateOffset(this.adapter.visibleFirstRowPos+i),this.prefetchDown()}cleanUpBottom(t){this.prefetchTimeout=-1;const e=t+this.options.cleanUpRows;this.adapter.visible.last<=e||(this.adapter.removeFromBottom(e+1,this.adapter.visible.last),this.adapter.visible.last=e,this.prefetchUp())}triggerCleanUp(t,e,n){this.prefetchTimeout>=0&&clearTimeout(this.prefetchTimeout),n&&t-this.options.cleanUpRows<=this.adapter.visible.first||!n&&this.adapter.visible.last<=e+this.options.cleanUpRows||(this.prefetchTimeout=setTimeout(n?this.cleanUpTop.bind(this):this.cleanUpBottom.bind(this),this.options.delay,n?t:e))}onScrolled(t,e){e===i.a.NONE?this.options.cleanUpRows>0&&this.triggerCleanUp(this.adapter.visible.forcedFirst,this.adapter.visible.forcedLast,t):this.options.prefetchRows>0&&this.triggerPrefetch(t)}}e.a=a},function(t,e,n){"use strict";class r{constructor(t,e){this.context=t,this.key=e,this.cache=[],this.lastFilled=0,this.key2index=new Map,this.context.exceptions.forEach(t=>{this.cache[t.index]=t.y,this.key2index.set(e(t.index),t.index)})}findValidStart(t){for(let e=t-1;e>=0;--e)if(void 0!==this.cache[e])return e;return-1}posByKey(t){if(this.key2index.has(t)){const e=this.key2index.get(t);return{index:e,pos:this.pos(e)}}return this.fillCacheTillKey(t)}pos(t){if(0===this.context.exceptions.length)return t*this.context.defaultRowHeight;const e=this.cache[t];if(void 0!==e)return e;const n=this.findValidStart(t);return n<0?this.fillCache(0,t,0):this.fillCache(n+1,t,this.cache[n]+this.heightOf(n)),this.cache[t]}fillCache(t,e,n,r){if(e<=this.lastFilled){if(!r)return;for(let n=t;n<=e;++n)r(n,this.key(n),this.cache[n]);return}let i=n;for(let n=t;n<=e;++n){this.cache[n]=i;const t=this.key(n);this.key2index.set(t,n),r&&r(n,t,i),i+=this.heightOf(n)}}heightOf(t){const e=this.context.exceptionsLookup;return e.has(t)?e.get(t):this.context.defaultRowHeight}exceptionHeightOf(t,e=!1){const n=this.context.padding(t),r=this.context.exceptionsLookup;return r.has(t)?r.get(t)-n:e?this.context.defaultRowHeight-n:null}padding(t){return this.context.padding(t)}fillCacheTillKey(t){let e=0;for(let n=this.lastFilled;n<this.context.numberOfRows;++n,++this.lastFilled){const r=this.cache[n];if(void 0!==r){e=r+this.heightOf(n);continue}const i=this.key(n);if(this.cache[n]=e,this.key2index.set(i,n),i===t)return{index:n,pos:e};e+=this.heightOf(n)}return{index:-1,pos:-1}}positions(t,e,n,r){this.fillCache(t,e,n,r)}}e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r;n(63);!function(t){t[t.UPDATE=0]="UPDATE",t[t.UPDATE_CREATE=1]="UPDATE_CREATE",t[t.UPDATE_REMOVE=2]="UPDATE_REMOVE",t[t.SHOW=3]="SHOW",t[t.HIDE=4]="HIDE"}(r||(r={}));const i=[{delay:0,apply({mode:t,previous:e,nodeY:n,current:i,node:a}){a.dataset.animation=r[t].toLowerCase(),a.style.transform=`translate(0, ${e.y-n}px)`,t===r.SHOW?a.style.height=null!==i.height?`${i.height}px`:null:a.style.height=`${e.height}px`,a.style.opacity=t===r.SHOW?"0":t===r.HIDE?"1":null}},{delay:10,apply({mode:t,current:e,nodeY:n,node:i}){i.style.transform=t===r.HIDE||t===r.UPDATE_REMOVE?`translate(0, ${e.y-n}px)`:null,t!==r.HIDE&&(i.style.height=null!==e.height?`${e.height}px`:null),i.style.opacity=t===r.SHOW?"1":t===r.HIDE?"0":null}},{delay:1100,apply({node:t}){delete t.dataset.animation,t.style.opacity=null,t.style.transform=null}}];e.b=i},function(t,e,n){"use strict";function r(t,e){const n=t.createElement("div");n.innerHTML=e;const r=n.firstElementChild;return n.innerHTML="",r}var i=n(18),a=n(13);class o{constructor(t,e,n){this.c=t,this.renderers=e,this.index=n}get width(){return this.c.getWidth()}get id(){return this.c.id}get frozen(){return Object(a.b)(this.c.desc)||!0===this.c.desc.frozen}createHeader(t,e){const n=Object(i.c)(this.c,t,e);return this.updateHeader(n,e),n}updateHeader(t,e){t.className=`lu-header ${this.c.cssClass?` ${this.c.cssClass}`:""} ${this.c.headerCssClass}${e.autoRotateLabels?" rotateable":""}${this.c.isFiltered()?" lu-filtered":""}`,t.classList.toggle("frozen",this.frozen),Object(i.j)(t,this.c,e)}createCell(t,e,n){const i=n.isGroup(t),a=r(e,i?this.renderers.group.template:this.renderers.single.template);return a.dataset.renderer=i?this.renderers.groupId:this.renderers.singleId,a.dataset.group=i?"g":"d",this.updateCell(a,t,n),a}updateCell(t,e,n){t.classList.toggle("frozen",this.frozen);const i=n.isGroup(e),a=t.dataset.renderer,o=i?this.renderers.groupId:this.renderers.singleId,s=t.dataset.group,l=i?"g":"d";if(a===o&&s===l||((t=r(document,i?this.renderers.group.template:this.renderers.single.template)).dataset.renderer=o,t.dataset.group=l),i){const r=n.getGroup(e);this.renderers.group.update(t,r,r.rows,n.statsOf(this.c))}else{const r=n.getRow(e);this.renderers.single.update(t,r,r.relativeIndex,r.group,n.statsOf(this.c))}return t}}e.a=o},function(t,e,n){"use strict";function r(t){return Object(u.b)(t)&&!t.getCollapsed()?1+Math.max.apply(Math,t.children.map(r)):1}var i=n(3),a=(n.n(i),n(0)),o=n(1),s=n(9),l=n(13),u=n(11),c=n(2),d=n(10),h=n(19),p=n(35),f=n(14),g=n(20),m=n(18),v=n(34),b=n(8),y=n(23);class E{constructor(t,e,n){this.data=t,this.options=Object(v.a)().header,this.histCache=new Map,this.dragHandler=i.behavior.drag().on("dragstart",function(){i.select(this).classed("dragging",!0),i.event.sourceEvent.stopPropagation(),i.event.sourceEvent.preventDefault()}).on("drag",function(t){const e=Math.max(i.mouse(this.parentNode)[0],2);t.setWidth(e),i.event.sourceEvent.stopPropagation(),i.event.sourceEvent.preventDefault()}).on("dragend",function(){i.select(this).classed("dragging",!1),i.event.sourceEvent.stopPropagation(),i.event.sourceEvent.preventDefault()}),this.dropHandler=Object(a.i)([`${m.a}-ref`,m.a],(t,e,n)=>{let r=null;if(`${m.a}-ref`in t){const e=t[`${m.a}-ref`];if(!(r=this.data.find(e)))return!1;n?r=this.data.clone(r):r.removeMe()}else{const e=JSON.parse(t[m.a]);r=this.data.create(this.data.fromDescRef(e))}if(!r)return!1;if(e instanceof o.a)return null!=e.insertAfterMe(r);return null!==this.data.getLastRanking().push(r)}),Object(a.p)(this.options,n),this.$node=i.select(e).append("div").classed("lu-header",!0),this.$node.append("div").classed("drop",!0).call(this.dropHandler),this.changeDataStorage(t)}changeDataStorage(t){this.data&&this.data.on(Object(a.u)(".headerRenderer",f.a.EVENT_DIRTY_HEADER,f.a.EVENT_ORDER_CHANGED,f.a.EVENT_SELECTION_CHANGED),null),this.data=t,t.on(`${f.a.EVENT_DIRTY_HEADER}.headerRenderer`,Object(a.f)(this.update.bind(this),1)),this.options.summary&&(t.on(`${f.a.EVENT_ORDER_CHANGED}.headerRenderer`,()=>{this.updateHist(),this.update()}),t.on(`${f.a.EVENT_SELECTION_CHANGED}.headerRenderer`,Object(a.f)(this.drawSelection.bind(this),1)))}get sharedHistCache(){return this.histCache}currentHeight(){return parseInt(this.$node.style("height"),10)}updateHist(){this.data.getRankings().forEach(t=>{const e=t.getOrder(),n=t.flatColumns,r=null==e?null:this.data.stats(e);n.filter(t=>t instanceof b.d&&!t.isHidden()).forEach(t=>{this.histCache.set(t.id,null===r?null:r.stats(t))}),n.filter(t=>Object(d.b)(t)&&!t.isHidden()).forEach(t=>{this.histCache.set(t.id,null===r?null:r.hist(t))})})}drawSelection(){if(!this.options.summary)return;const t=this.$node.node();Object(a.l)(t,"div.bar",t=>t.classList.remove("selected"));const e=this.data.getSelection();if(e.length<=0)return;const n=n=>{this.data.getRankings().forEach(r=>{const i=r.flatColumns;i.filter(t=>t instanceof b.d&&!t.isHidden()).forEach(r=>{const i=[].slice.call(t.querySelectorAll(`div.header[data-id="${r.id}"] div.bar`));n.forEach((t,n)=>{const a=r.getValue(t,e[n]);for(let t=1;t<i.length;++t){const e=i[t];if(e.dataset.x>a){i[t-1].classList.add("selected");break}if(t===i.length-1){e.classList.add("selected");break}}})}),i.filter(t=>Object(d.b)(t)&&!t.isHidden()).forEach(r=>{const i=t.querySelector(`div.header[data-id="${r.id}"]`);n.forEach((t,n)=>{(r.getCategories(t,e[n])||[]).forEach(t=>{const e=i.querySelector(`div.bar[data-cat="${t}"]`);e&&e.classList.add("selected")})})})})},r=this.data.view(e);Array.isArray(r)?n(r):r.then(n)}renderRankingButtons(t,e){const n=this.$node.selectAll("div.rankingbuttons").data(t);n.enter().append("div").classed("rankingbuttons",!0).call(this.options.rankingButtons),n.style("left",(t,n)=>`${e[n]}px`),n.exit().remove()}update(){const t=this,e=this.data.getRankings(),n=[],a=[];let o=0;e.forEach(t=>{o+=t.flatten(n,o,1,this.options.columnPadding)+this.options.slopeWidth,a.push(o-this.options.slopeWidth)}),o-=this.options.slopeWidth,this.$node.select("div.drop").style("min-width",`${o}px`);const s=n.map(t=>t.col);this.options.summary&&0===this.histCache.size&&e.length>0&&this.updateHist(),this.renderColumns(s,n),this.options.rankingButtons!==v.b&&this.renderRankingButtons(e,a);const l=Math.max(...s.map(r));let u=(this.options.summary?this.options.headerHistogramHeight:this.options.headerHeight)+(l-1)*this.options.headerHeight;if(this.options.autoRotateLabels){let e=!1;this.$node.selectAll("div.header").style("height",`${u}px`).select("div.lu-label").each(function(n){this.querySelector("span.lu-label").offsetWidth>n.getWidth()+30?(i.select(this).style("transform",`rotate(${t.options.rotationDegree}deg)`),e=!0):i.select(this).style("transform",null)}),this.$node.selectAll("div.header").style("margin-top",e?`${this.options.rotationHeight}px`:null),u+=e?this.options.rotationHeight:0}this.$node.style("height",`${u}px`)}createToolbar(t){const e=Object(v.a)().renderers,n=Object.assign({provider:this.data,statsOf:()=>null,getPossibleRenderer:t=>({item:Object(y.possibleRenderer)(t,e),group:Object(y.possibleGroupRenderer)(t,e)})},this.options);t.each(function(t){const e=i.select(this);Object(m.d)((n,r,...a)=>{const o={onclick:()=>void 0};return e.append("i").attr("title",n).html(`<span aria-hidden="true">${n}</span>`).on("click",function(){o.onclick(i.event)}),r?(o.onclick=(e=>{e.stopPropagation(),new r(t,e.currentTarget.parentElement,...a).openDialog()}),o):o},t,n)})}updateFreeze(t){const e=this.options.freezeCols;this.$node.selectAll("div.header").style("z-index",(t,n)=>n<e?1:null).style("transform",(n,r)=>r<e?`translate(${t}px,0)`:null)}renderColumns(t,e,n=this.$node,r="header"){const o=this,f=n.selectAll(`div.${r}`).data(t,t=>t.id),v=f.enter().append("div").attr("class",r).on("click",t=>{const e=i.event;this.options.manipulative&&!e.defaultPrevented&&e.currentTarget===e.target&&t.toggleMySorting()}),y=v.append("div").classed("lu-label",!0).on("click",t=>{const e=i.event;this.options.manipulative&&!e.defaultPrevented&&t.toggleMySorting()}).call(Object(a.h)(t=>{const e=JSON.stringify(this.data.toDescRef(t.desc)),n={"text/plain":t.label,[`${m.a}-ref`]:t.id,[m.a]:e};return Object(c.h)(t)&&(n[`${m.a}-number`]=e,n[`${m.a}-number-ref`]=t.id),{data:n,effectAllowed:"copyMove"}}));y.append("i").attr("class","fa fa sort_indicator"),y.append("span").classed("lu-label",!0).attr({draggable:this.options.manipulative}),this.options.manipulative&&(v.append("div").classed("lu-handle",!0).call(this.dragHandler).style("width",`${this.options.columnPadding}px`).call(this.dropHandler),v.append("div").classed("lu-toolbar",!0).call(this.createToolbar.bind(this))),this.options.summary&&v.append("div").classed("summary",!0),f.style({width:(t,n)=>`${e[n].width+this.options.columnPadding}px`,left:(t,n)=>`${e[n].offset}px`,"background-color":t=>t.color}),f.attr({class:t=>`${r} ${t.cssClass||""} ${t.headerCssClass} ${this.options.autoRotateLabels?"rotateable":""} ${t.isFiltered()?"filtered":""} ${t.isGroupedBy()>=0?"grouped":""}`,title:t=>Object(m.i)(t),"data-id":t=>t.id}),f.select("i.sort_indicator").attr("class",t=>{const e=t.findMyRanker();if(!e)return"sort_indicator fa";const n=e.getSortCriterias(),r=n.findIndex(e=>e.col===t);return 0===r?`sort_indicator fa fa-sort-${n[r].asc?"asc":"desc"}`:"sort_indicator fa"}),f.select("span.lu-label").text(t=>t.label);const E=(t,e,n)=>{const r=`${m.a}${n?"-number":""}`;if(`${r}-ref`in t){const n=t[`${r}-ref`];let i=this.data.find(n);return e?i=this.data.clone(i):i&&i.removeMe(),i}const i=JSON.parse(t[r]);return this.data.create(this.data.fromDescRef(i))},x=function(t){if(t.getCollapsed())return void i.select(this).selectAll(`div.${r}_i`).remove();const e=[];t.flatten(e,0,1,o.options.columnPadding);const n=e.map(t=>t.col);o.renderColumns(n,e,i.select(this),r+("_i"!==r.substr(r.length-2)?"_i":""))};f.filter(t=>Object(u.b)(t)&&t.canJustAddNumbers).each(x).select("div.lu-label").call(Object(a.i)([`${m.a}-number-ref`,`${m.a}-number`],(t,e,n)=>{const r=E(t,n,!0);return null!=e.push(r)})),f.filter(t=>Object(u.b)(t)&&!t.canJustAddNumbers).each(x).select("div.lu-label").call(Object(a.i)([`${m.a}-ref`,m.a],(t,e,n)=>{const r=E(t,n,!1);return null!=e.push(r)}));const _=t=>t instanceof u.a&&t.canJustAddNumbers||Object(c.h)(t)&&t.parent instanceof l.a,N=t=>(e,n,r)=>{const i=E(e,r,t);if(n instanceof u.a)return null!==n.push(i);const a=n.findMyRanker(),o=a.indexOf(n),s=this.data.create(t?Object(h.a)():Object(p.a)());return n.removeMe(),s.push(n),s.push(i),null!=a.insert(s,o)};f.filter(t=>!Object(u.b)(t)&&_(t)).select("div.lu-label").call(Object(a.i)([`${m.a}-number-ref`,`${m.a}-number`],N(!0))),f.filter(t=>!Object(u.b)(t)&&!_(t)).select("div.lu-label").call(Object(a.i)([`${m.a}-ref`,m.a],N(!1))),this.options.summary&&(f.filter(t=>Object(d.b)(t)).each(function(t){o.renderCategoricalSummary(t,i.select(this).select("div.summary"))}),f.filter(t=>t instanceof b.d).each(function(t){o.renderNumericalSummary(t,i.select(this).select("div.summary"))}),f.filter(t=>t instanceof s.a).each(function(t){o.renderStringSummary(t,i.select(this).select("div.summary"))}),f.filter(t=>t instanceof g.b).each(function(t){o.renderSelectionSummary(t,i.select(this).select("div.summary"))})),f.exit().remove()}renderCategoricalSummary(t,e){const n=this.histCache.get(t.id);if(!n)return;const r=n=>{const r=t.categories,a=t.categoryColors,o=e.selectAll("div.bar").data(n.hist);o.enter().append("div").classed("bar",!0);const s=i.scale.ordinal().domain(r).rangeBands([0,100],.1),l=i.scale.linear().domain([0,n.maxBin]).range([0,100]);o.style({left:t=>`${s(t.cat)}%`,width:`${s.rangeBand()}%`,top:t=>`${100-l(t.y)}%`,height:t=>`${l(t.y)}%`,"background-color":t=>a[r.indexOf(t.cat)]}).attr({title:t=>`${t.cat}: ${t.y}`,"data-cat":t=>t.cat}),o.exit().remove()};n instanceof Promise?n.then(r):r(n)}renderNumericalSummary(t,e){const n=this.histCache.get(t.id);if(!n)return;const r=t=>{const n=e.selectAll("div.bar").data(t.hist);n.enter().append("div").classed("bar",!0);const r=i.scale.ordinal().domain(i.range(t.hist.length).map(String)).rangeBands([0,100],.1),a=i.scale.linear().domain([0,t.maxBin]).range([0,100]);n.style({left:(t,e)=>`${r(String(e))}%`,width:`${r.rangeBand()}%`,top:t=>`${100-a(t.y)}%`,height:t=>`${a(t.y)}%`}).attr({title:(t,e)=>`Bin ${e}: ${t.y}`,"data-x":t=>t.x}),n.exit().remove();let o=e.select("div.mean");o.empty()&&(o=e.append("div").classed("mean",!0)),o.style("left",`${100*t.mean}%`)};n instanceof Promise?n.then(r):r(n)}renderStringSummary(t,e){const n=t.getFilter();e.text(null===n?"":n.toString())}renderSelectionSummary(t,e){let n=e.select("i");n.empty()&&(n=e.append("i").attr("class","fa fa-square-o").attr("title","Toggle Select All")),n.on("click",()=>{if(n.classed("fa-square-o")){const e=t.findMyRanker().getOrder();n.attr("class","fa fa-check-square-o"),this.data.setSelection(e)}else n.attr("class","fa fa-square-o"),this.data.clearSelection()})}}e.a=E},function(t,e,n){"use strict";var r=n(3),i=(n.n(r),n(0)),a=n(12),o=n(14),s=n(18);class l{constructor(t){this.desc=t,this.used=0}}class u{constructor(t,e,n={}){this.data=t,this.options={layout:"vertical",elemWidth:100,elemHeight:40,width:100,height:500,additionalDesc:[],hideUsed:!0,addAtEndOnClick:!1},Object(i.p)(this.options,n),this.$node=Object(r.select)(e).append("div").classed("lu-pool",!0),this.changeDataStorage(t)}changeDataStorage(t){if(this.data&&this.data.on(Object(i.u)(".pool",o.a.EVENT_ADD_COLUMN,o.a.EVENT_REMOVE_COLUMN,o.a.EVENT_ADD_RANKING,o.a.EVENT_REMOVE_RANKING,o.a.EVENT_ADD_DESC),null),this.data=t,this.entries=t.getColumns().concat(this.options.additionalDesc).map(t=>new l(t)),t.on(`${o.a.EVENT_ADD_DESC}.pool`,t=>{this.entries.push(new l(t)),this.update()}),!this.options.hideUsed)return;const e=this;t.on(Object(i.u)(".pool",o.a.EVENT_ADD_COLUMN,o.a.EVENT_REMOVE_COLUMN),function(t){const n=t.desc,r="addColumn"===this.type?1:-1;e.entries.some(t=>t.desc===n&&(t.used+=r,!0)),e.update()}),t.on(Object(i.u)(".pool",o.a.EVENT_ADD_RANKING,o.a.EVENT_REMOVE_RANKING),function(t){const n=t.flatColumns.map(t=>t.desc),r="addRanking"===this.type?1:-1;e.entries.some(t=>!(n.indexOf(t.desc)<0)&&(t.used+=r,!0)),e.update()}),t.getRankings().forEach(t=>{const n=t.flatColumns.map(t=>t.desc);e.entries.some(t=>!(n.indexOf(t.desc)<0)&&(t.used+=1,!0))})}remove(){this.$node.remove(),this.data&&this.data.on(Object(i.u)(".pool",o.a.EVENT_ADD_COLUMN,o.a.EVENT_REMOVE_COLUMN,o.a.EVENT_ADD_RANKING,o.a.EVENT_REMOVE_RANKING,o.a.EVENT_ADD_DESC),null)}update(){const t=this.data,e=this.entries.filter(t=>0===t.used).map(t=>t.desc),n=this.$node.selectAll("div.header").data(e),i=n.enter().append("div").attr({class:"header",draggable:!0}).on("dragstart",e=>{const n=r.event;n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData("text/plain",e.label),n.dataTransfer.setData("application/caleydo-lineup-column",JSON.stringify(t.toDescRef(e))),Object(a.isNumberColumn)(e)&&n.dataTransfer.setData("application/caleydo-lineup-column-number",JSON.stringify(t.toDescRef(e)))}).style({width:`${this.options.elemWidth}px`,height:`${this.options.elemHeight}px`});switch(this.options.addAtEndOnClick&&i.on("click",t=>{this.data.push(this.data.getLastRanking(),t)}),i.append("span").classed("label",!0).text(t=>t.label),n.attr("class",t=>`header ${t.cssClass||""} ${t.type}`),n.style({transform:(t,e)=>{const n=this.layout(e);return`translate(${n.x}px,${n.y}px)`},"background-color":t=>{const e=t;return e.cssClass?null:e.color||a.Column.DEFAULT_COLOR}}),n.attr({title:t=>Object(s.i)(t)}),n.select("span").text(t=>t.label),n.exit().remove(),this.options.layout){case"horizontal":this.$node.style({width:`${this.options.elemWidth*e.length}px`,height:`${this.options.elemHeight}px`});break;case"grid":const t=Object(r.round)(this.options.width/this.options.elemWidth,0);this.$node.style({width:`${t*this.options.elemWidth}px`,height:`${Math.ceil(e.length/t)*this.options.elemHeight}px`});break;default:this.$node.style({width:`${this.options.elemWidth}px`,height:`${this.options.elemHeight*e.length}px`})}}layout(t){switch(this.options.layout){case"horizontal":return{x:t*this.options.elemWidth,y:0};case"grid":const e=Object(r.round)(this.options.width/this.options.elemWidth,0);return{x:t%e*this.options.elemWidth,y:Math.floor(t/e)*this.options.elemHeight};default:return{x:0,y:t*this.options.elemHeight}}}}e.a=u},function(t,e,n){"use strict";e.a=function(t="svg",e,n,a={}){return"engine"===t?new r.a(e,n,a):new i.a(e,n,a,t)};var r=n(69),i=n(137)},function(t,e,n){"use strict";var r=n(0),i=n(32),a=n(14),o=n(23),s=n(22),l=n(10),u=n(8),c=n(17),d=n(127),h=n(13),p=n(128),f=n(129);class g extends r.a{constructor(t,e,n){super(),this.data=t,this.histCache=new Map,this.rankings=[],this.slopeGraphs=[],this.updateAbles=[],this.zoomFactor=1,this.options=n,this.node=e.ownerDocument.createElement("main"),e.appendChild(this.node),this.ctx={provider:t,filters:this.options.header.filters,summaries:this.options.header.summaries?this.options.header.summaries:{},linkTemplates:this.options.header.linkTemplates,autoRotateLabels:!1,searchAble:this.options.header.searchAble,option:Object(r.k)(Object.assign({useGridLayout:!0},this.options.body)),statsOf:t=>{const e=this.histCache.get(t.id);return null==e||e instanceof Promise?null:e},renderer:(t,e)=>Object(o.createDOM)(t,this.options.renderers,this.ctx,e),groupRenderer:(t,e)=>Object(o.createDOMGroup)(t,this.options.renderers,this.ctx,e),idPrefix:this.options.idPrefix,totalNumberOfRows:0,createRenderer:(t,e)=>{return{single:Object(o.createDOM)(t,this.options.renderers,this.ctx,e),group:Object(o.createDOMGroup)(t,this.options.renderers,this.ctx,e),singleId:t.getRendererType(),groupId:t.getGroupRenderer()}},getPossibleRenderer:t=>({item:Object(o.possibleRenderer)(t,this.options.renderers),group:Object(o.possibleGroupRenderer)(t,this.options.renderers)}),columnPadding:this.options.body.columnPadding||5},this.node.id=this.options.idPrefix,this.table=new d.a(this.node,`#${n.idPrefix}`),this.initProvider(t)}zoomOut(){this.zoomFactor=Math.max(this.zoomFactor-.1,.5),this.updateZoomFactor(),this.update()}zoomIn(){this.zoomFactor=Math.min(this.zoomFactor+.1,2),this.updateZoomFactor(),this.update()}updateZoomFactor(){this.node.querySelector("main").style.fontSize=`${100*this.zoomFactor}%`}pushUpdateAble(t){this.updateAbles.push(t)}createEventList(){return super.createEventList().concat([g.EVENT_HOVER_CHANGED,g.EVENT_RENDER_FINISHED])}changeDataStorage(t){this.takeDownProvider(),this.data=t,this.ctx.provider=t,this.initProvider(t)}takeDownProvider(){this.data.on(`${a.a.EVENT_SELECTION_CHANGED}.body`,null),this.data.on(`${a.a.EVENT_ADD_RANKING}.body`,null),this.data.on(`${a.a.EVENT_REMOVE_RANKING}.body`,null),this.data.on(`${a.a.EVENT_GROUP_AGGREGATION_CHANGED}.body`,null),this.rankings.forEach(t=>this.table.remove(t)),this.rankings.splice(0,this.rankings.length),this.slopeGraphs.forEach(t=>this.table.remove(t)),this.slopeGraphs.splice(0,this.slopeGraphs.length)}initProvider(t){t.on(`${a.a.EVENT_SELECTION_CHANGED}.body`,()=>this.updateSelection(t.getSelection())),t.on(`${a.a.EVENT_ADD_RANKING}.body`,t=>{this.addRanking(t)}),t.on(`${a.a.EVENT_REMOVE_RANKING}.body`,t=>{this.removeRanking(t)}),t.on(`${a.a.EVENT_GROUP_AGGREGATION_CHANGED}.body`,t=>{this.update(this.rankings.filter(e=>e.ranking===t))}),this.data.getRankings().forEach(t=>this.addRanking(t))}updateSelection(t){const e=new Set(t);this.rankings.forEach(t=>t.updateSelection(e)),this.slopeGraphs.forEach(t=>t.updateSelection(e))}updateHist(t){if(!this.options.header.summary)return;(t?[t]:this.rankings).forEach(t=>{const e=t.ranking,n=e.getOrder(),r=e.flatColumns,i=null==n?null:this.data.stats(n);r.filter(t=>t instanceof u.d&&!t.isHidden()).forEach(t=>{this.histCache.set(t.id,null===i?null:i.stats(t))}),r.filter(t=>Object(l.b)(t)&&!t.isHidden()).forEach(t=>{this.histCache.set(t.id,null===i?null:i.hist(t))}),t.updateHeaders()}),this.updateAbles.forEach(t=>t(this.ctx))}addRanking(t){if(this.rankings.length>0){const e=this.table.pushSeparator((e,n)=>new p.a(e,n,`${t.id}S`,this.ctx));this.slopeGraphs.push(e)}const e=this.table.pushTable((e,n,r,i)=>new f.a(t,e,n,r,i,this.ctx,{animation:this.options.body.animation,customRowUpdate:this.options.body.customRowUpdate||(()=>void 0)}));e.on(f.a.EVENT_WIDTH_CHANGED,()=>this.table.widthChanged()),e.on(f.a.EVENT_UPDATE_DATA,()=>this.update([e])),t.on(`${h.a.EVENT_ORDER_CHANGED}.renderer`,()=>this.updateHist(e)),this.rankings.push(e),this.update([e])}removeRanking(t){const e=this.rankings.findIndex(e=>e.ranking===t);if(e<0)return;const n=this.rankings.splice(e,1)[0],r=this.slopeGraphs.splice(e-1,1)[0];this.table.remove(n),r&&this.table.remove(r)}update(t=this.rankings){if(0===(t=t.filter(t=>!t.hidden)).length)return;const e=t.map(t=>t.ranking.getOrder()),n=this.data.fetch(e);this.ctx.totalNumberOfRows=Math.max(...n.map(t=>t.length));const i=n.map(t=>t.map(t=>t));0===this.histCache.size&&this.updateHist();const a=t=>Object(r.q)(t,2),o=(t,e)=>{if(this.options.body.dynamicHeight){const n=this.options.body.dynamicHeight(e,t);return{defaultHeight:a(this.zoomFactor*n.defaultHeight),height:t=>a(this.zoomFactor*n.height(t))}}const n=a(this.zoomFactor*this.options.body.rowHeight),r=a(this.zoomFactor*this.options.body.groupHeight);return{defaultHeight:n,height:t=>Object(s.a)(t)?r:n}},l=a(this.zoomFactor*this.options.body.groupPadding),u=a(this.zoomFactor*this.options.body.rowPadding);t.forEach((t,e)=>{const n=t.groupData(i[e]),{height:r,defaultHeight:a}=o(t.ranking,n),d=Object(c.b)(n.map(r),a,t=>t>=0&&n[t]&&(Object(s.a)(n[t])||"last"===n[t].meta||"first last"===n[t].meta)?l+u:u);t.render(n,d)}),this.updateSlopeGraphs(t),this.table.widthChanged()}updateSlopeGraphs(t=this.rankings){const e=new Set(t.map(t=>this.rankings.indexOf(t)));this.slopeGraphs.forEach((t,n)=>{if(t.hidden)return;const r=n,i=n+1;if(!e.has(r)&&!e.has(i))return;const a=this.rankings[r],o=this.rankings[i];t.rebuild(a.currentData,a.context,o.currentData,o.context)})}fakeHover(t){this.rankings.forEach(e=>e.fakeHover(t))}destroy(){this.takeDownProvider(),this.table.destroy(),this.node.remove()}scrollIntoView(t){}setBodyOption(t,e){}}e.a=g,g.EVENT_HOVER_CHANGED=i.a.EVENT_HOVER_CHANGED,g.EVENT_RENDER_FINISHED=i.a.EVENT_RENDER_FINISHED},function(t,e,n){"use strict";var r=n(14),i=n(67),a=n(0),o=n(3),s=(n.n(o),n(34)),l=n(44),u=n(68);n.d(e,"b",function(){return a.g});class c extends a.a{constructor(t,e,n={}){super(),this.data=e,this.config=Object(s.a)(),this.pools=[],this.isUpdateInitialized=!1;const l=t instanceof o.selection?t:Object(o.select)(t);this.$container=l.append("div").classed("lu",!0),Object(a.p)(this.config,n),!0===this.config.renderingOptions.histograms&&(this.config.renderingOptions.summary=!0),this.data.on(`${r.a.EVENT_SELECTION_CHANGED}.main`,this.triggerSelection.bind(this)),this.data.on(`${r.a.EVENT_JUMP_TO_NEAREST}.main`,this.jumpToNearest.bind(this)),this.renderer=Object(u.a)(this.config.body.renderer,this.data,this.node,this.config),this.forward(this.renderer,c.EVENT_HOVER_CHANGED),this.config.pool&&this.config.manipulative&&this.addPool(new i.a(e,this.node,this.config.pool))}createEventList(){return super.createEventList().concat([c.EVENT_HOVER_CHANGED,c.EVENT_SELECTION_CHANGED,c.EVENT_MULTISELECTION_CHANGED,c.EVENT_UPDATE_START,c.EVENT_UPDATE_FINISHED])}addPool(t,e=("boolean"==typeof this.config.pool?{}:this.config.pool)){return t instanceof i.a?this.pools.push(t):this.pools.push(new i.a(this.data,t,e)),this.pools[this.pools.length-1]}get node(){return this.$container.node()}destroy(){this.pools.forEach(t=>t.remove()),this.$container.remove(),this.renderer.destroy()}sortBy(t,e=!1){const n=this.data.find(t);return n&&n.sortByMe(e),null!==n}dump(){return this.data.dump()}changeDataStorage(t,e){this.data&&this.data.on([`${r.a.EVENT_SELECTION_CHANGED}.main`,`${r.a.EVENT_JUMP_TO_NEAREST}.main`],null),this.data=t,e&&this.data.restore(e),this.data.on(`${r.a.EVENT_SELECTION_CHANGED}.main`,this.triggerSelection.bind(this)),this.data.on(`${r.a.EVENT_JUMP_TO_NEAREST}.main`,this.jumpToNearest.bind(this)),this.renderer.changeDataStorage(t),this.pools.forEach(e=>e.changeDataStorage(t)),this.update()}triggerSelection(t){this.fire(c.EVENT_SELECTION_CHANGED,t.length>0?t[0]:-1),this.fire(c.EVENT_MULTISELECTION_CHANGED,t)}jumpToNearest(t){const e=this.data.getRankings()[0];if(0===t.length||void 0===e)return;const n=e.getOrder(),r=t.map(t=>n.indexOf(t)).sort((t,e)=>t-e);this.renderer.scrollIntoView(n.length,r[0]),setTimeout(()=>{this.renderer.fakeHover(n[r[0]])},100)}restore(t){this.changeDataStorage(this.data,t)}update(){let t=this.isUpdateInitialized?1:3;this.isUpdateInitialized=!0,this.fire(c.EVENT_UPDATE_START),this.renderer.update(),this.pools.forEach(t=>t.update()),this.renderer.on(`${l.b}.main`,()=>{0===(t-=1)&&this.fire(c.EVENT_UPDATE_FINISHED)})}changeRenderingOption(t,e){this.config.renderingOptions[t]=e,"animation"!==t&&"stacked"!==t||this.renderer.setBodyOption(t,e)}}e.a=c,c.EVENT_HOVER_CHANGED=l.a,c.EVENT_SELECTION_CHANGED=r.a.EVENT_SELECTION_CHANGED,c.EVENT_MULTISELECTION_CHANGED="multiSelectionChanged",c.EVENT_UPDATE_START="updateStart",c.EVENT_UPDATE_FINISHED="updateFinished"},function(t,e){function n(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(r),a=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(a).concat([i]).join("\n")}return[n].join("\n")}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r=n(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var a=this[i][0];"number"==typeof a&&(r[a]=!0)}for(i=0;i<t.length;i++){var o=t[i];"number"==typeof o[0]&&r[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjEyNHB4IiBoZWlnaHQ9IjMwcHgiIHZpZXdCb3g9IjAgMCAxMjQgMzAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUwIDUwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CiAgPHJlY3QgeD0iNTAiIHk9IjEzIiB3aWR0aD0iNCIgaGVpZ2h0PSI1IiBmaWxsPSIjMzMzIiAvPgogIDxyZWN0IHg9IjYwIiB5PSI1IiB3aWR0aD0iNCIgaGVpZ2h0PSIyMSIgZmlsbD0iIzMzMyIgLz4KICA8cmVjdCB4PSI3MCIgeT0iOSIgd2lkdGg9IjQiIGhlaWdodD0iMTMiIGZpbGw9IiMzMzMiIC8+Cjwvc3ZnPgo="},function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=d[r.id];if(i){i.refs++;for(o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(u(r.parts[o],e))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(u(r.parts[o],e));d[r.id]={id:r.id,refs:1,parts:a}}}}function i(t,e){for(var n=[],r={},i=0;i<t.length;i++){var a=t[i],o=e.base?a[0]+e.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};r[o]?r[o].parts.push(s):n.push(r[o]={id:o,parts:[s]})}return n}function a(t,e){var n=p(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=m[m.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),m.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function o(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=m.indexOf(t);e>=0&&m.splice(e,1)}function s(t){var e=document.createElement("style");return t.attrs.type="text/css",l(e,t.attrs),a(t,e),e}function l(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function u(t,e){var n,r,i,u;if(e.transform&&t.css){if(!(u=e.transform(t.css)))return function(){};t.css=u}if(e.singleton){var d=g++;n=f||(f=s(e)),r=c.bind(null,n,d,!1),i=c.bind(null,n,d,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",l(e,t.attrs),a(t,e),e}(e),r=function(t,e,n){var r=n.css,i=n.sourceMap,a=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||a)&&(r=v(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var o=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}.bind(null,n,e),i=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){o(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}function c(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=b(e,i);else{var a=document.createTextNode(i),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}var d={},h=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),p=function(t){var e={};return function(t){return void 0===e[t]&&(e[t]=function(t){return document.querySelector(t)}.call(this,t)),e[t]}}(),f=null,g=0,m=[],v=n(74);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=h()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=i(t,e);return r(n,e),function(t){for(var a=[],o=0;o<n.length;o++){var s=n[o];(l=d[s.id]).refs--,a.push(l)}if(t){r(i(t,e),e)}for(o=0;o<a.length;o++){var l=a[o];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete d[l.id]}}}};var b=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return t;var a;return a=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(a)+")"})}},function(t,e,n){"use strict";var r=n(11),i=n(1),a=n(19),o=n(2),s=n(0);class l extends r.a{constructor(t,e){super(t,e),this.collapsed=!1;const n=this;this.adaptChange=function(t,e){n.adaptWidthChange(t,e)}}createEventList(){return super.createEventList().concat([l.EVENT_COLLAPSE_CHANGED,l.EVENT_MULTI_LEVEL_CHANGED])}setCollapsed(t){this.collapsed!==t&&this.fire([a.b.EVENT_COLLAPSE_CHANGED,i.a.EVENT_DIRTY_HEADER,i.a.EVENT_DIRTY_VALUES,i.a.EVENT_DIRTY],this.collapsed,this.collapsed=t)}getCollapsed(){return this.collapsed}dump(t){const e=super.dump(t);return e.collapsed=this.collapsed,e}restore(t,e){this.collapsed=!0===t.collapsed,super.restore(t,e)}flatten(t,e,n=0,r=0){return a.b.prototype.flatten.call(this,t,e,n,r)}insert(t,e){return t.on(`${i.a.EVENT_WIDTH_CHANGED}.stack`,this.adaptChange),super.setWidth(0===this.length?t.getWidth():this.getWidth()+t.getWidth()),super.insert(t,e)}adaptWidthChange(t,e){if(Object(s.t)(t,e,.5))return;const n=this.getWidth(),r=n+(e-t);this.fire([l.EVENT_MULTI_LEVEL_CHANGED,i.a.EVENT_DIRTY_HEADER,i.a.EVENT_DIRTY],n,r),super.setWidth(r)}removeImpl(t){return t.on(`${i.a.EVENT_WIDTH_CHANGED}.stack`,null),super.setWidth(0===this.length?100:this.getWidth()-t.getWidth()),super.removeImpl(t)}setWidth(t){const e=this.getWidth(),n=t/e;this._children.forEach(t=>{t.setWidthImpl(t.getWidth()*n)}),Object(s.t)(e,t,.5)||this.fire([l.EVENT_MULTI_LEVEL_CHANGED,i.a.EVENT_DIRTY_HEADER,i.a.EVENT_DIRTY],e,t),super.setWidth(t)}getRendererType(){return this.getCollapsed()?l.EVENT_COLLAPSE_CHANGED:super.getRendererType()}isMissing(t,e){return!!this.getCollapsed()&&this._children.some(n=>(Object(o.h)(n)||Object(r.b)(n))&&n.isMissing(t,e))}}e.a=l,l.EVENT_COLLAPSE_CHANGED=a.b.EVENT_COLLAPSE_CHANGED,l.EVENT_MULTI_LEVEL_CHANGED=a.b.EVENT_MULTI_LEVEL_CHANGED},function(t,e,n){"use strict";var r=n(7),i=n(5);class a extends r.a{constructor(t,e){super(t,e),this.dataLength=e.dataLength,this.categories=[];for(let t=0;t<this.dataLength;++t)this.categories.push(`Category #${t+1}`);this.setDefaultRenderer("upset")}get categoryLabels(){return this.categories}get categoryColors(){return["green","red"]}getCategories(t,e){const n=this.getValue(t,e);return this.categories.filter((t,e)=>null!=n&&n[e])}getColor(t,e){return this.getValue(t,e)?"green":"red"}compare(t,e,n,r){const a=this.getValue(t,n),o=this.getValue(e,r);if(null===a)return null===o?0:i.a;if(null===o)return-1*i.a;return a.filter(t=>t).length-o.filter(t=>t).length}getDataLength(){return this.dataLength}}e.a=a},function(t,e,n){"use strict";var r=n(7),i=n(5),a=n(3);n.n(a);class o extends r.a{constructor(t,e){super(t,e),this.format=a.time.format(e.dateFormat||"%x"),this.parse=e.dateParse?a.time.format(e.dateParse).parse:this.format.parse,this.setDefaultRenderer("default")}getValue(t,e){const n=super.getValue(t,e);return Object(i.b)(n)?null:n instanceof Date?n:this.parse(String(n))}getLabel(t,e){const n=this.getValue(t,e);return n instanceof Date?this.format(n):""}compare(t,e,n,r){const a=this.getValue(t,n),o=this.getValue(e,r);return a===o?0:a instanceof Date?o instanceof Date?a.getTime()-o.getTime():-1*i.a:o instanceof Date?i.a:0}}e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(56),a=n(38),o=n(24);class s extends i.a{constructor(t,e=[],n={}){super(e,n),this._data=t,this.options={filterGlobally:!1,jumpToSearchResult:!1,maxNestedSortingCriteria:1,maxGroupColumns:1},Object.assign(this.options,n);const r=this;this.reorderAll=function(){const t=this.source;r.getRankings().forEach(e=>{e!==t&&e.dirtyOrder()})}}getMaxGroupColumns(){return this.options.maxGroupColumns}getMaxNestedSortingCriteria(){return this.options.maxNestedSortingCriteria}get data(){return this._data}setData(t){this._data=t,this.reorderAll()}clearData(){this.setData([])}appendData(t){this._data.push(...t),this.reorderAll()}cloneRanking(t){const e=super.cloneRanking(t);return this.options.filterGlobally&&e.on(`${r.a.EVENT_FILTER_CHANGED}.reorderAll`,this.reorderAll),e}cleanUpRanking(t){this.options.filterGlobally&&t.on(`${r.a.EVENT_FILTER_CHANGED}.reorderAll`,null),super.cleanUpRanking(t)}sortImpl(t){if(0===this._data.length)return[];let e=this._data.map((t,e)=>({v:t,dataIndex:e,group:null}));if(this.options.filterGlobally){const t=this.getRankings().filter(t=>t.isFiltered());t.length>0&&(e=e.filter(e=>t.every(t=>t.filter(e.v,e.dataIndex))))}else t.isFiltered()&&(e=e.filter(e=>t.filter(e.v,e.dataIndex)));if(0===e.length)return[];if(e.forEach(e=>e.group=t.grouper(e.v,e.dataIndex)||o.a),1===new Set(e.map(t=>t.group.name)).size){const n=e[0].group;e.sort((e,n)=>t.comparator(e.v,n.v,e.dataIndex,n.dataIndex));const r=e.map(t=>t.dataIndex);return[Object.assign({order:r},n)]}e.sort((e,n)=>{const r=e.group,i=n.group;return r.name!==i.name?r.name.toLowerCase().localeCompare(i.name.toLowerCase()):t.comparator(e.v,n.v,e.dataIndex,n.dataIndex)});const n=[Object.assign({order:[],rows:[]},e[0].group)];let r=n[0];return e.forEach(t=>{const e=t.group;e.name===r.name?(r.order.push(t.dataIndex),r.rows.push(t)):(r=Object.assign({order:[t.dataIndex],rows:[t]},e),n.push(r))}),n.sort((e,n)=>t.groupComparator(e,n)),n}viewRaw(t){return t.map(t=>this._data[t])}view(t){return this.viewRaw(t)}fetch(t){return t.map(t=>t.map(t=>({v:this._data[t],dataIndex:t})))}stats(t){let e=null;const n=()=>(null===e&&(e=this.viewRaw(t)),e);return{stats:e=>Object(a.b)(n(),t,e.getNumber.bind(e),e.isMissing.bind(e),[0,1]),hist:e=>Object(a.a)(n(),t,e.getCategories.bind(e),e.categories)}}mappingSample(t){const e=this._data.length;if(e<=500)return this._data.map(t.getRawNumber.bind(t));const n=[];for(let t=0;t<500;++t){let t=Math.floor(Math.random()*(e-1));for(;n.indexOf(t)>=0;)t=Math.floor(Math.random()*(e-1));n.push(t)}return n.map(e=>t.getRawNumber(this.data[e],e))}searchAndJump(t,e){const n="string"==typeof(t="string"==typeof t?t.toLowerCase():t)?e=>e.toLowerCase().indexOf(t)>=0:t.test.bind(t),r=[];for(let t=0;t<this._data.length;++t)n(e.getLabel(this._data[t],t))&&r.push(t);this.jumpToNearest(r)}}e.a=s},function(t,e,n){"use strict";var r=n(56),i=n(24);class a extends r.a{constructor(t,e=[],n={}){super(e,n),this.server=t,this.options={maxCacheSize:1e3},this.cache=new Map,Object.assign(this.options,n)}sortImpl(t){const e=t.toSortingDesc(t=>t.column);return this.server.sort(e).then(t=>[Object.assign({order:t},i.a)])}loadFromServer(t){return this.server.view(t).then(e=>e.map((e,n)=>{return{v:e,dataIndex:t[n]}}))}view(t){if(0===t.length)return Promise.resolve([]);const e=this.fetch([t])[0];return Promise.all(e).then(t=>t.map(t=>t.v))}computeMissing(t){const e=new Set,n=e.add.bind(e);return t.forEach(t=>t.forEach(n)),this.cache.forEach((t,n)=>e.delete(n)),this.cache.size,e.size,this.options.maxCacheSize,Array.from(e)}loadInCache(t){if(0===t.length)return;const e=this.loadFromServer(t);t.forEach((n,r)=>{const i=t[r];this.cache.set(i,e.then(t=>({v:t[r],dataIndex:i})))})}fetch(t){const e=this.computeMissing(t);return this.loadInCache(e),t.map(t=>t.map(t=>this.cache.get(t)))}mappingSample(t){return this.server.mappingSample(t.desc.column)}searchAndJump(t,e){this.server.search(t,e.desc.column).then(t=>{this.jumpToNearest(t)})}stats(t){return this.server.stats(t)}}e.a=a},function(t,e,n){"use strict";var r=n(1),i=n(2),a=n(0),o=n(4),s=n(21);class l{constructor(t=!1){this.renderValue=t,this.title="Bar"}canRender(t,e){return Object(i.h)(t)&&!e&&!Object(i.i)(t)}createDOM(t,e,n){return{template:`<div title="">\n          <div style='background-color: ${t.color}'>\n            <span ${this.renderValue?"":'class="lu-hover-only"'}></span>\n          </div>\n        </div>`,update:(e,r)=>{const i=t.getNumber(r.v,r.dataIndex),l=Object(o.b)(e,t,r),u=isNaN(i)?0:Math.round(100*i*100)/100,c=t.getLabel(r.v,r.dataIndex);e.title=c;const d=e.firstElementChild;Object(a.c)(d,{title:c},{width:l?"100%":`${u}%`,"background-color":l?null:Object(s.a)(t,r,n)}),Object(a.r)(d.firstElementChild,c)}}}createCanvas(t,e,n){const i=e.option("rowBarTopPadding",e.option("rowBarPadding",1)),l=e.option("rowBarBottomPadding",e.option("rowBarPadding",1));return(u,c,d)=>{if(Object(o.a)(u,t,c,e.rowHeight(d)))return;u.fillStyle=Object(s.a)(t,c,n)||r.a.DEFAULT_COLOR;const h=e.colWidth(t)*t.getNumber(c.v,c.dataIndex);u.fillRect(0,i,isNaN(h)?0:h,e.rowHeight(d)-(i+l)),(this.renderValue||e.hovered(c.dataIndex)||e.selected(c.dataIndex))&&(u.fillStyle=e.option("style.text","black"),Object(a.d)(u,t.getLabel(c.v,c.dataIndex),1,0,e.colWidth(t)-1,e.textHints))}}}e.a=l},function(t,e,n){"use strict";var r=n(31),i=n(9);class a{constructor(){this.alignments={left:new r.a,right:new r.a("text_right","right"),center:new r.a("text_center","center")},this.title="Default"}canRender(t){return t instanceof i.a}createDOM(t){return this.alignments[t.alignment||"left"].createDOM(t)}createCanvas(t,e){return this.alignments[t.alignment||"left"].createCanvas(t,e)}createGroupDOM(t){return this.alignments[t.alignment||"left"].createGroupDOM(t)}createGroupCanvas(t,e){return this.alignments[t.alignment||"left"].createGroupCanvas(t,e)}}e.a=a},function(t,e,n){"use strict";var r=n(20),i=n(0);class a{constructor(){this.title="Default"}canRender(t){return t instanceof r.b}createDOM(t){return{template:"<div></div>",update:(e,n)=>{e.onclick=function(e){e.preventDefault(),e.stopPropagation(),t.toggleValue(n.v,n.dataIndex)}}}}createCanvas(t,e){return(n,r)=>{const a=n.font;n.font="10pt FontAwesome",Object(i.d)(n,t.getValue(r.v,r.dataIndex)?"":"",0,0,e.colWidth(t),e.textHints),n.font=a}}createGroupCanvas(t,e){return(n,r,a)=>{const o=a.reduce((e,n)=>t.getValue(n.v,n.dataIndex)?e+1:e,0);Object(i.d)(n,String(o),0,e.groupHeight(r),t.getWidth(),e.textHints)}}createGroupDOM(t){return{template:"<div></div>",update:(e,n,r)=>{r.reduce((e,n)=>t.getValue(n.v,n.dataIndex)?e+1:e,0)>=r.length/2?e.classList.add("lu-group-selected"):e.classList.remove("lu-group-selected"),e.onclick=function(n){n.preventDefault(),n.stopPropagation();const i=e.classList.toggle("lu-group-selected");r.forEach(e=>{t.setValue(e.v,e.dataIndex,i)})}}}}}e.a=a},function(t,e,n){"use strict";var r=n(28),i=n(0),a=n(39),o=n(4);class s extends a.a{constructor(){super(...arguments),this.title="Default"}canRender(t){return t instanceof r.a}createDOM(t){return{template:"<div class='link text'></div>",update:(e,n)=>{Object(o.b)(e,t,n),e.innerHTML=t.isLink(n.v,n.dataIndex)?`<a class="link" href="${t.getValue(n.v,n.dataIndex)}" target="_blank">${t.getLabel(n.v,n.dataIndex)}</a>`:t.getLabel(n.v,n.dataIndex)}}}createCanvas(t,e){return(n,r,a,s,l)=>{if(Object(o.a)(n,t,r,e.rowHeight(a)))return;if(!t.isLink(r.v,r.dataIndex))return void Object(i.d)(n,t.getLabel(r.v,r.dataIndex),0,0,e.colWidth(t),e.textHints);if(e.hovered(r.dataIndex)){const n=Object(i.s)(e.bodyDOMElement,e.idPrefix+t.id,s,l);n.style.width=`${e.colWidth(t)}px`,n.innerHTML=`<a class='link' href='${t.getValue(r.v,r.dataIndex)}' target='_blank'>${t.getLabel(r.v,r.dataIndex)}</a>`}else{const a=n.fillStyle;n.fillStyle=e.option("style.link",e.option("style.text","black")),Object(i.d)(n,t.getLabel(r.v,r.dataIndex),0,0,e.colWidth(t),e.textHints),n.fillStyle=a}}}}e.a=s},function(t,e,n){"use strict";var r=n(46),i=n(0),a=n(39);class o extends a.a{constructor(){super(...arguments),this.title="Default"}canRender(t){return t instanceof r.a}createDOM(t){return{template:"<div class='annotations text'>\n        <input class='lu-hover-only'>\n        <span class='text lu-not-hover'></span>\n       </div>",update:(e,n)=>{const r=e.firstElementChild;r.onchange=(()=>{t.setValue(n.v,n.dataIndex,r.value)}),r.onclick=(t=>{t.stopPropagation()}),e.lastElementChild.textContent=r.value=t.getLabel(n.v,n.dataIndex)}}}createCanvas(t,e){return(n,r,a,o,s)=>{if(!e.hovered(r.dataIndex))return void Object(i.d)(n,t.getLabel(r.v,r.dataIndex),0,0,e.colWidth(t),e.textHints);const l=Object(i.s)(e.bodyDOMElement,e.idPrefix+t.id,o,s);l.style.width=`${e.colWidth(t)}px`,l.innerHTML=`<input type='text' value='${t.getValue(r.v,r.dataIndex)}' style='width:${e.colWidth(t)}px'>`;const u=l.childNodes[0];u.onchange=function(){t.setValue(r.v,r.dataIndex,u.value)},u.onclick=function(t){t.stopPropagation()}}}}e.a=o},function(t,e,n){"use strict";var r=n(0),i=n(36);class a{constructor(){this.title="Default"}canRender(t){return t instanceof i.b}createDOM(t,e){const n=e.option("actions",[]).concat(t.actions);return{template:`<div class='actions lu-hover-only'>${n.map(t=>`<span title='${t.name}' class='fa'>${t.icon}</span>`).join("")}</div>`,update:(t,e)=>{Object(r.m)(t,(t,r)=>{t.onclick=function(t){t.preventDefault(),t.stopPropagation(),n[r].action(e.v,e.dataIndex)}})}}}createGroupDOM(t,e){const n=e.option("groupActions",[]).concat(t.groupActions);return{template:`<div class='actions lu-hover-only'>${n.map(t=>`<span title='${t.name}' class='fa'>${t.icon}</span>`).join("")}</div>`,update:(t,e,i)=>{Object(r.m)(t,(t,r)=>{t.onclick=function(t){t.preventDefault(),t.stopPropagation(),n[r].action(e,i)}})}}}createCanvas(t,e){const n=e.option("actions",[]).concat(t.actions);return(i,a,o,s,l)=>{if(!e.hovered(a.dataIndex))return;const u=Object(r.s)(e.bodyDOMElement,e.idPrefix+t.id,s,l);u.style.width=`${e.colWidth(t)}px`,u.classList.add("actions"),u.innerHTML=n.map(t=>`<span title='${t.name}' class='fa'>${t.icon}</span>`).join(""),Object(r.m)(u,(t,e)=>{t.onclick=function(t){t.preventDefault(),t.stopPropagation(),n[e].action(a.v,a.dataIndex)}})}}createGroupCanvas(t,e){const n=e.option("groupActions",[]).concat(t.groupActions);return(i,a,o,s,l)=>{if(!e.groupHovered(a))return;const u=Object(r.s)(e.bodyDOMElement,e.idPrefix+t.id,s,l);u.style.width=`${e.colWidth(t)}px`,u.classList.add("actions"),u.innerHTML=n.map(t=>`<span title='${t.name}' class='fa'>${t.icon}</span>`).join(""),Object(r.m)(u,(t,e)=>{t.onclick=function(t){t.preventDefault(),t.stopPropagation(),n[e].action(a,o)}})}}}e.a=a},function(t,e,n){"use strict";class r{createGroupDOM(t,e,n){const r=this.createDOM(t,e,n);return{template:`<div>${r.template}</div>`,update:(e,n,i,a)=>{const o=this.aggregatedIndex(i,t);r.update(e.firstElementChild,i[o],o,n,a)}}}createGroupCanvas(t,e,n){const r=this.createCanvas(t,e,n);return(n,i,a,o,s,l)=>{const u=this.aggregatedIndex(a,t),c=(e.groupHeight(i)-e.rowHeight(u))/2;n.translate(0,c),r(n,a[u],u,o,s+c,i,l),n.translate(0,-c)}}}e.a=r},function(t,e){},function(t,e,n){"use strict";var r=n(10),i=n(0),a=n(38),o=n(4);class s{constructor(){this.title="Color",this.groupTitle="Histogram"}canRender(t){return Object(r.b)(t)}createDOM(t){return{template:"<div>\n        <div></div><div></div>\n      </div>",update:(e,n)=>{Object(o.b)(e,t,n),e.firstElementChild.style.backgroundColor=t.getColor(n.v,n.dataIndex),Object(i.r)(e.lastElementChild,t.getLabel(n.v,n.dataIndex))}}}createCanvas(t,e){const n=e.option("rowBarPadding",1);return(r,a,s)=>{if(Object(o.a)(r,t,a,e.rowHeight(s)))return;r.fillStyle=t.getColor(a.v,a.dataIndex)||"";const l=Math.min(.3*e.colWidth(t),Math.max(e.rowHeight(s)-2*n,0));r.fillRect(0,0,l,l),r.fillStyle=e.option("style.text","black"),Object(i.d)(r,t.getLabel(a.v,a.dataIndex),l+2,0,e.colWidth(t)-l-2,e.textHints)}}createGroupDOM(t){const e=t.categoryColors,n=t.categoryLabels;return{template:`<div>${t.categories.map((t,r)=>`<div style="height: 0; background-color: ${e[r]}" title="${n[r]}: 0" data-cat="${t}"></div>`).join("")}</div>`,update:(e,r,o,s)=>{const{maxBin:l,hist:u}=Object(a.a)(o,o.map(t=>t.dataIndex),e=>t.getCategories(e.v,e.dataIndex),t.categories),c=Math.max(l,s?s.maxBin:0);Object(i.m)(e,(t,e)=>{const{y:r}=u[e];t.style.height=`${Math.round(100*r/c)}%`,t.title=`${n[e]}: ${r}`})}}}createGroupCanvas(t,e){const n=e.option("rowBarPadding",1),r=t.categories,i=t.categoryColors,o=e.colWidth(t)/r.length;return(r,s,l,u,c,d)=>{const{maxBin:h,hist:p}=Object(a.a)(l,l.map(t=>t.dataIndex),e=>t.getCategories(e.v,e.dataIndex),t.categories),f=Math.max(h,d?d.maxBin:0),g=e.groupHeight(s)-n;p.forEach(({y:t},e)=>{const a=t/f*g;r.fillStyle=i[e],r.fillRect(e*o+n,g-a+n,o-2*n,a)})}}}e.a=s},function(t,e,n){"use strict";var r=n(0),i=n(43),a=n(4),o=n(5),s=n(2);class l extends i.a{constructor(){super(...arguments),this.title="Heatmap"}createDOMContext(t){const e=t.getRawColorScale();let n="";for(let e=0;e<t.getDataLength();++e)n+='<div style="background-color: white" title=""></div>';return{templateRow:n,render:(t,n)=>{Object(r.m)(t,(t,i)=>{const a=n[i];Object(r.c)(t,{title:Object(s.b)(a),class:Object(o.b)(a)?"lu-missing":""},{"background-color":Object(o.b)(a)?null:e(a)})})}}}createCanvasContext(t,e){const n=e.colWidth(t)/t.getDataLength(),r=e.option("rowBarPadding",1),i=t.getRawColorScale();return(t,e,s,l)=>{e.forEach((e,u)=>{const c=u*n;Object(o.b)(e)?Object(a.c)(t,n,l,c,r+s):(t.beginPath(),t.fillStyle=i(e),t.fillRect(c,r+s,n,l))})}}}e.a=l},function(t,e,n){"use strict";function r(t){if(0===t.length)return"";let e="",n=!0;return t.forEach((t,r)=>{Object(s.b)(t)?n=!0:n?(e+=`M${r},${1-t} `,n=!1):e+=`L${r},${1-t} `}),e}var i=n(43),a=n(0),o=n(4),s=n(5),l=n(2);class u{constructor(){this.title="Sparkline"}canRender(t){return Object(l.i)(t)}createDOM(t){const e=1-t.getMapping().apply(t.getThreshold());return{template:`<svg viewBox="0 0 ${t.getDataLength()-1} 1" preserveAspectRatio="none meet"><line x1="0" x2="${t.getDataLength()-1}" y1="${e}" y2="${e}"></line><path></path></svg>`,update:(e,n)=>{if(Object(o.b)(e,t,n))return;const i=t.getNumbers(n.v,n.dataIndex);e.querySelector("path").setAttribute("d",r(i))}}}createCanvas(t,e){return(n,r,i)=>{const a=e.rowHeight(i);if(Object(o.a)(n,t,r,a))return;const s=t.getNumbers(r.v,r.dataIndex);if(0===s.length)return;n.save();const l=e.colWidth(t)/(t.getDataLength()-1);n.strokeStyle="#c1c1c1",n.beginPath(),n.moveTo(0,1-t.getMapping().apply(t.getThreshold())),n.lineTo(l*(s.length-1),a),n.stroke(),n.strokeStyle="black",this.renderLine(n,s,a,l),n.restore()}}renderLine(t,e,n,r){t.beginPath();let i=!1;Object(s.b)(e[0])?i=!0:t.moveTo(0,(1-e[0])*r);for(let a=1;a<e.length;++a){const o=e[a];Object(s.b)(o)?i=!0:i?(t.moveTo(a*n,(1-e[a])*r),i=!1):t.lineTo(a*n,(1-e[a])*r)}t.stroke()}createGroupDOM(t){const e=1-t.getMapping().apply(t.getThreshold());return{template:`<svg viewBox="0 0 ${t.getDataLength()} 1" preserveAspectRatio="none meet"><line x1="0" x2="${t.getDataLength()-1}" y1="${e}" y2="${e}"></line><path></path></svg>`,update:(e,n,o)=>{Object(i.b)(e,o,"<path></path>"),Object(a.m)(e,(e,n)=>{const i=o[n];e.setAttribute("d",r(t.getNumbers(i.v,i.dataIndex)))})}}}createGroupCanvas(t,e){return(n,r,i)=>{const a=e.groupHeight(r),o=e.colWidth(t);n.save(),n.strokeStyle="#c1c1c1",n.beginPath();const s=(1-t.getMapping().apply(t.getThreshold()))*a;n.moveTo(0,s),n.lineTo(o,s),n.stroke(),n.strokeStyle="rgba(0, 0, 0, 0.2)",i.forEach(e=>{const r=t.getNumbers(e.v,e.dataIndex);0!==r.length&&this.renderLine(n,r,o,a)}),n.restore()}}}e.a=u},function(t,e,n){"use strict";var r=n(0),i=n(43),a=n(2);class o extends i.a{constructor(){super(...arguments),this.title="Bar Chart"}canRender(t,e){return super.canRender(t,e)&&!e}static compute(t,e,n){return t<e?{height:e-t,bottom:t-n[0]}:{height:t-e,bottom:e-n[0]}}createDOMContext(t){const e=t.getRawColorScale(),n=t.getMapping().domain,i=t.getThreshold(),s=n[1]-n[0];let l="";for(let e=0;e<t.getDataLength();++e)l+='<div style="background-color: white" title=""></div>';return{templateRow:l,render:(t,l)=>{Object(r.m)(t,(t,u)=>{const c=l[u],{bottom:d,height:h}=o.compute(c,i,n);Object(r.c)(t,{title:Object(a.b)(c)},{"background-color":e(c),bottom:`${Math.round(100*d/s)}%`,height:`${Math.round(100*h/s)}%`})})}}}createCanvasContext(t,e){const n=t.getRawColorScale(),r=e.colWidth(t)/t.getDataLength(),i=t.getMapping().domain,a=t.getThreshold(),s=i[1]-i[0];return(t,e,l,u)=>{const c=u/s;e.forEach((e,u)=>{t.fillStyle=n(e);const d=u*r,{bottom:h,height:p}=o.compute(e,a,i);t.fillRect(d,(s-p-h)*c+l,r,p*c)})}}}e.a=o},function(t,e,n){"use strict";var r=n(0),i=n(10),a=n(4);class o{constructor(){this.title="Matrix"}static calculateSetPath(t,e){const n=[];t.forEach((t,e)=>t?n.push(e):-1);return{left:n[0]*e+e/2,right:n[n.length-1]*e+e/2}}static createDOMContext(t){const e=t.categories.length;let n="";for(let t=0;t<e;++t)n+="<div></div>";return{templateRow:n,render:(t,e)=>{Array.from(t.children).slice(1).forEach((t,n)=>{const i=e[n];Object(r.c)(t,{class:i?"enabled":""})});const n=t.firstElementChild,i=e.findIndex(t=>t),a=e.length-1-e.reverse().findIndex(t=>t);i<0||i===a?n.style.display="none":(n.style.display=null,n.style.left=`${Math.round(100*(i+.5)/e.length)}%`,n.style.width=`${Math.round(100*(a-i)/e.length)}%`)}}}static union(t,e){const n=new Set;return e.forEach(e=>{t.getCategories(e.v,e.dataIndex).forEach(t=>n.add(t))}),t.categories.map(t=>n.has(t))}canRender(t){return Object(i.b)(t)}createDOM(t){const{templateRow:e,render:n}=o.createDOMContext(t);return{template:`<div><div></div>${e}</div>`,update:(e,r)=>{if(Object(a.b)(e,t,r))return;const i=new Set(t.getCategories(r.v,r.dataIndex)),o=t.categories.map(t=>i.has(t));n(e,o)}}}createGroupDOM(t){const{templateRow:e,render:n}=o.createDOMContext(t);return{template:`<div><div></div>${e}</div>`,update:(e,r,i)=>{const a=o.union(t,i);n(e,a)}}}static createCanvasContext(t,e){const n=t.categories.length,r=e.colWidth(t)/n,i=e.option("style.upset.circle","black"),a=e.option("style.upset.inactiveOpacity",.1),s=e.option("style.upset.stroke","black");return(t,e,n)=>{const l=e.some(t=>t),u=n/3;if(t.save(),t.fillStyle=i,t.strokeStyle=s,l){const{left:i,right:a}=o.calculateSetPath(e,r);t.beginPath(),t.moveTo(i,n/2),t.lineTo(a,n/2),t.stroke()}e.forEach((e,i)=>{const o=n/2,s=i*r+r/2;t.beginPath(),t.globalAlpha=e?1:a,t.arc(s,o,u,0,2*Math.PI),t.fill()}),t.restore()}}createCanvas(t,e){const n=o.createCanvasContext(t,e);return(r,i,o)=>{if(Object(a.a)(r,t,i,e.rowHeight(o)))return;const s=new Set(t.getCategories(i.v,i.dataIndex)),l=t.categories.map(t=>s.has(t)),u=e.rowHeight(o);n(r,l,u)}}createGroupCanvas(t,e){const n=o.createCanvasContext(t,e);return(r,i,a)=>{const s=o.union(t,a),l=e.groupHeight(i);n(r,s,l)}}}e.a=o},function(t,e,n){"use strict";var r=n(1),i=n(2),a=n(0),o=n(4),s=n(21);class l{constructor(){this.title="Proportional Symbol"}canRender(t,e){return Object(i.h)(t)&&!e&&!Object(i.i)(t)}createDOM(t,e,n){return{template:'<div style="background: radial-gradient(circle closest-side, red 100%, transparent 100%)" title="">\n              <div class="lu-hover-only"></div>\n          </div>',update:(e,r)=>{const i=t.getNumber(r.v,r.dataIndex),l=Math.round(100*i),u=Object(o.b)(e,t,r);Object(a.c)(e,{},{background:u?null:`radial-gradient(circle closest-side, ${Object(s.a)(t,r,n)} ${l}%, transparent ${l}%)`}),Object(a.r)(e.firstElementChild,t.getLabel(r.v,r.dataIndex))}}}createCanvas(t,e,n){return(i,l,u)=>{if(Object(o.a)(i,t,l,e.rowHeight(u)))return;const c=t.getNumber(l.v,l.dataIndex),d=e.rowHeight(u)/2,h=e.colWidth(t)/2;i.strokeStyle=i.fillStyle=Object(s.a)(t,l,n)||r.a.DEFAULT_COLOR,i.beginPath(),i.arc(h,d,e.rowHeight(u)/2*c,0,2*Math.PI),i.fill(),i.stroke(),(e.hovered(l.dataIndex)||e.selected(l.dataIndex))&&(i.fillStyle=e.option("style.text","black"),Object(a.d)(i,t.getLabel(l.v,l.dataIndex),1,0,e.colWidth(t)-1,e.textHints))}}}e.a=l},function(t,e,n){"use strict";function r(t,e,n,r,i){t.title=function(t){if(null===t)return"";const e=a.a.DEFAULT_FORMATTER;return`min = ${e(t.min)}\nq1 = ${e(t.q1)}\nmedian = ${e(t.median)}\nq3 = ${e(t.q3)}\nmax = ${e(t.max)}`}(n);const o=t.firstElementChild,s=o.firstElementChild,l=o.lastElementChild,u=Math.max(e.q1-1.5*(e.q3-e.q1),e.min),c=Math.min(e.q3+1.5*(e.q3-e.q1),e.max);o.style.left=`${Math.round(100*u)}%`;const d=c-u;if(o.style.width=`${Math.round(100*d)}%`,s.style.left=`${Math.round((e.q1-u)/d*100)}%`,s.style.width=`${Math.round((e.q3-e.q1)/d*100)}%`,s.style.backgroundColor=i,l.style.left=`${Math.round((e.median-u)/d*100)}%`,o.dataset.sort=r,!e.outlier||0===e.outlier.length)return void(t.children.length>1&&(t.innerHTML="",t.appendChild(o)));const h=Array.from(t.children).slice(1);h.slice(e.outlier.length).forEach(t=>t.remove());for(let n=h.length;n<e.outlier.length;++n){const e=t.ownerDocument.createElement("div");h.push(e),t.appendChild(e)}e.outlier.forEach((t,e)=>{h[e].style.left=`${Math.round(100*t)}%`})}function i(t,e,n,r,i,a,o){const s=r||o.option("style.boxplot.box","#e0e0e0"),l=o.option("style.boxplot.stroke","black"),u=o.option("style.boxplot.sortIndicator","#ffa500"),c=a+.1*(i-2*a),d=Math.max(e.q1-1.5*(e.q3-e.q1),e.min),h=Math.min(e.q3+1.5*(e.q3-e.q1),e.max);t.fillStyle=s,t.strokeStyle=l,t.beginPath(),t.rect(e.q1,c,e.q3-e.q1,i-2*c),t.fill(),t.stroke();const p=i-a,f=i/2;t.beginPath(),t.moveTo(d,f),t.lineTo(e.q1,f),t.moveTo(d,a),t.lineTo(d,p),t.moveTo(e.median,c),t.lineTo(e.median,i-c),t.moveTo(e.q3,f),t.lineTo(h,f),t.moveTo(h,a),t.lineTo(h,p),t.stroke(),t.fill(),""!==n&&(t.strokeStyle=u,t.beginPath(),t.moveTo(e[n],a),t.lineTo(e[n],i-a),t.stroke(),t.fill()),e.outlier&&e.outlier.forEach(e=>{t.fillRect(e-1,f-1,3,3)})}var a=n(26),o=n(2),s=n(4),l=n(12),u=n(8),c=n(21);class d{constructor(){this.title="Box Plot"}canRender(t,e){return Object(a.b)(t)&&!e||Object(l.isNumberColumn)(t)&&e}createDOM(t,e,n){const i=t.getSortMethod(),a=void 0!==t.isSortedByMe().asc;return{template:'<div title="">\n                    <div><div></div><div></div></div>\n                 </div>',update:(e,o)=>{const l=t.getBoxPlotData(o.v,o.dataIndex);if(!l||Object(s.b)(e,t,o))return;r(e,l,t.getRawBoxPlotData(o.v,o.dataIndex),a?i:"",Object(c.a)(t,o,n))}}}createCanvas(t,e,n){const r=t.getSortMethod(),a=e.option("rowBarPadding",1),o=void 0!==t.isSortedByMe().asc,l=e.colWidth(t);return(u,d,h)=>{const p=e.rowHeight(h);if(Object(s.a)(u,t,d,e.rowHeight(h)))return;const f=t.getBoxPlotData(d.v,d.dataIndex);if(!f)return;i(u,{min:f.min*l,median:f.median*l,q1:f.q1*l,q3:f.q3*l,max:f.max*l,outlier:f.outlier?f.outlier.map(t=>t*l):void 0},o?r:"",Object(c.a)(t,d,n),p,a,e)}}static createAggregatedBoxPlot(t,e){const n=[].concat(...e.map(e=>t.getNumbers(e.v,e.dataIndex)));return new o.c(n)}createGroupDOM(t,e,n){const i=t instanceof u.d&&void 0!==t.isGroupSortedByMe().asc?t.getSortMethod():"";return{template:'<div title="">\n                    <div><div></div><div></div></div>\n                 </div>',update:(e,a,s)=>{const l=Object(o.i)(t)?d.createAggregatedBoxPlot(t,s):new o.c(s.map(e=>t.getNumber(e.v,e.dataIndex)));r(e,l,l,i,Object(c.a)(t,null,n))}}}createGroupCanvas(t,e,n){const r=e.option("rowBarGroupPadding",1),a=e.colWidth(t),s=t instanceof u.d&&void 0!==t.isGroupSortedByMe().asc?t.getSortMethod():"";return(l,u,h)=>{const p=e.groupHeight(u),f=Object(o.i)(t)?d.createAggregatedBoxPlot(t,h):new o.c(h.map(e=>t.getNumber(e.v,e.dataIndex)));i(l,{min:f.min*a,median:f.median*a,q1:f.q1*a,q3:f.q3*a,max:f.max*a,outlier:f.outlier?f.outlier.map(t=>t*a):void 0},s,Object(c.a)(t,null,n),p,r,e)}}}e.a=d},function(t,e,n){"use strict";function r(t,e,n,r,a,o){Object(i.d)(t,"Loading…",10,0,o.colWidth(a)-10,o.textHints);const s=(e+45*n)*(Math.PI/180);t.save(),t.font="10pt FontAwesome",t.textAlign="center";const l=.5*(r-o.textHints.spinnerWidth);t.translate(2,l+.5*o.textHints.spinnerWidth),t.rotate(s),t.translate(0,.5*-o.textHints.spinnerWidth),t.fillText("",0,0),t.restore()}var i=n(0);class a{constructor(){this.title="Loading"}canRender(){return!1}createDOM(){return{template:"<div>Loading…</div>",update:()=>void 0}}createCanvas(t,e){const n=Date.now()%360;return(i,a,o)=>{r(i,n,o,e.rowHeight(o),t,e)}}createGroupDOM(){return this.createDOM()}createGroupCanvas(t,e){const n=Date.now()%360;return(i,a)=>{r(i,n,0,e.groupHeight(a),t,e)}}}e.a=a},function(t,e,n){"use strict";function r(t,e,n){let r=e.getNumber(t.v,t.dataIndex);isNaN(r)&&(r=1);const i=Object(s.hsl)(Object(u.a)(e,t,n)||a.a.DEFAULT_COLOR);return i.l=1-r,i.toString()}var i=n(2),a=n(1),o=n(0),s=n(3),l=(n.n(s),n(4)),u=n(21);class c{constructor(){this.title="Brightness"}canRender(t,e){return Object(i.h)(t)&&!e&&!Object(i.i)(t)}createDOM(t,e,n){return{template:`<div title="">\n        <div style="background-color: ${t.color}"></div><div> </div>\n      </div>`,update:(e,i)=>{const a=Object(l.b)(e,t,i);e.title=t.getLabel(i.v,i.dataIndex),e.firstElementChild.style.backgroundColor=a?null:r(i,t,n),Object(o.r)(e.lastElementChild,e.title)}}}createCanvas(t,e,n){const i=e.option("rowBarPadding",1);return(a,s,u)=>{if(Object(l.a)(a,t,s,e.rowHeight(u)))return;a.fillStyle=r(s,t,n);const c=Math.min(.3*e.colWidth(t),Math.max(e.rowHeight(u)-2*i,0));a.fillRect(0,0,c,c),a.fillStyle=e.option("style.text","black"),Object(o.d)(a,t.getLabel(s.v,s.dataIndex),c+2,0,e.colWidth(t)-c-2,e.textHints)}}}e.a=c},function(t,e,n){"use strict";class r{constructor(){this.title="Nothing"}canRender(){return!1}createDOM(t){return{template:'<div title=""></div>',update:(e,n)=>{e.title=t.getLabel(n.v,n.dataIndex)}}}createCanvas(){return()=>{}}createGroupDOM(){return{template:'<div title=""></div>',update:(t,e)=>{t.title=e.name}}}createGroupCanvas(){return()=>{}}}e.a=r},function(t,e,n){"use strict";var r=n(31),i=n(25),a=n(0);class o extends r.a{constructor(){super("rank","right"),this.title="String"}canRender(t){return t instanceof i.b}createGroupDOM(t){return{template:"<div><div></div><div></div></div>",update:(e,n,r)=>{const i=e.firstElementChild,a=e.lastElementChild;if(0===r.length)return i.textContent="",void(a.textContent="");i.textContent=t.getLabel(r[0].v,r[0].dataIndex),a.textContent=t.getLabel(r[r.length-1].v,r[r.length-1].dataIndex)}}}createGroupCanvas(t,e){return(n,r,i)=>{if(0===i.length)return;const o=t.getLabel(i[0].v,i[0].dataIndex),s=t.getLabel(i[i.length-1].v,i[i.length-1].dataIndex),l=n.textAlign;n.textAlign="right";const u=t.getWidth(),c=u;Object(a.d)(n,o,c,0,u,e.textHints),Object(a.d)(n,s,c,e.groupHeight(r)-e.textHints.spinnerWidth,u,e.textHints),n.textAlign=l}}}e.a=o},function(t,e,n){"use strict";function r(t,e,n,r){const i=r.colWidth(n),o=t.font,s=t.textAlign;t.textAlign="center",t.font="10pt FontAwesome",Object(a.d)(t,e,i/2,0,i,r.textHints),t.font=o,t.textAlign=s}var i=n(29),a=n(0);class o{constructor(){this.title="Default"}canRender(t){return t instanceof i.b}createDOM(t){return{template:'<div title="Collapse Group"></div>',update(e,n,r,i){e.onclick=function(e){e.preventDefault(),e.stopPropagation(),t.setAggregated(i,!0)}}}}createGroupDOM(t){return{template:'<div title="Expand Group"></div>',update(e,n){e.onclick=function(e){e.preventDefault(),e.stopPropagation(),t.setAggregated(n,!1)}}}}createCanvas(t,e){return(n,i,a)=>{0===a&&r(n,"",t,e)}}createGroupCanvas(t,e){return n=>{r(n,"",t,e)}}}e.a=o},function(t,e,n){"use strict";var r=n(2),i=n(38),a=n(0),o=n(5),s=n(4),l=n(21);class u{constructor(){this.title="Histogram"}canRender(t,e){return Object(r.h)(t)&&e||Object(r.i)(t)&&!e}static getHistDOMRenderer(t,e,n){const o=Object(i.c)(t);let s="";for(let t=0;t<o;++t)s+=`<div style="height: 0" title="Bin ${t}: 0"></div>`;return{template:`<div>${s}</div>`,render:(t,i,s)=>{const{bins:c,max:d,hist:h}=u.createHist(s,o,i,e);if(t.children.length!==c){let e="";for(let t=0;t<c;++t)e+=`<div style="height: 0" title="Bin ${t}: 0"></div>`;t.innerHTML=e}Object(a.m)(t,(t,i)=>{const{x:a,dx:o,y:s}=h[i];t.style.height=`${Math.round(100*s/d)}%`,t.title=`${Object(r.b)(a)} - ${Object(r.b)(a+o)} (${s})`,t.style.backgroundColor=Object(l.a)(e,null,n)})}}}createDOM(t,e,n){const{template:r,render:i}=u.getHistDOMRenderer(e.totalNumberOfRows,t,n);return{template:r,update:(e,n,r,a,o)=>{Object(s.b)(e,t,n)||i(e,[n],o)}}}createGroupDOM(t,e,n){const{template:r,render:i}=u.getHistDOMRenderer(e.totalNumberOfRows,t,n);return{template:r,update:(t,e,n,r)=>{i(t,n,r)}}}static getHistCanvasRenderer(t,e,n){const r=Object(i.c)(e.totalNumberOfRows),a=e.option("rowBarPadding",1);return(i,o,s,c)=>{const{max:d,bins:h,hist:p}=u.createHist(c,r,s,t),f=e.colWidth(t)/h,g=o-a;i.fillStyle=Object(l.a)(t,null,n)||e.option("style.histogram","lightgray"),p.forEach(({y:t},e)=>{const n=t/d*g;i.fillRect(e*f+a,g-n+a,f-2*a,n)})}}static createHist(t,e,n,a){const s=t?t.hist.length:e;let l;if(Object(r.i)(a)){const t=[].concat(...n.map(t=>a.getNumbers(t.v,t.dataIndex)));l=Object(i.b)(t,[],t=>t,o.b,[0,1],s)}else l=Object(i.b)(n,n.map(t=>t.dataIndex),t=>a.getNumber(t.v,t.dataIndex),t=>a.isMissing(t.v,t.dataIndex),[0,1],s);return{bins:s,max:Math.max(l.maxBin,t?t.maxBin:0),hist:l.hist}}createCanvas(t,e,n){const r=u.getHistCanvasRenderer(t,e,n);return(n,i,a,o,l,u,c)=>{if(!Object(s.a)(n,t,i,e.rowHeight(a)))return r(n,e.rowHeight(a),[i],c)}}createGroupCanvas(t,e,n){const r=u.getHistCanvasRenderer(t,e,n);return(t,n,i,a,o,s)=>r(t,e.groupHeight(n),i,s)}}e.a=u},function(t,e,n){"use strict";var r=n(10),i=n(0),a=n(58);class o{constructor(){this.title="Shifted Most Frequent Category"}canRender(t,e){return Object(r.b)(t)&&e}static total(t,e){let n=0,r=0,i=!1;return t.getGroups().forEach(t=>{t!==e&&t.name!==e.name||(i=!0),r+=t.order.length,i||(n+=t.order.length)}),{before:n,total:r}}createGroupDOM(t){return{template:"<div></div>",update:(e,n,r)=>{const{count:i,label:s,color:l}=a.a.choose(t,r),{total:u,before:c}=o.total(t.findMyRanker(),n);e.innerHTML=`<div style="background-color: ${l}; width: ${0===u?100:Math.round(100*i/u)}%; left: ${0===u?0:Math.round(100*c/u)}%"></div><span>${s} (${i})</span>`}}}createGroupCanvas(t,e){const n=e.colWidth(t);return(r,s,l)=>{const u=e.groupHeight(s),{count:c,label:d,color:h}=a.a.choose(t,l);r.fillStyle=h;const{total:p,before:f}=o.total(t.findMyRanker(),s);if(0===p)return;r.fillRect(0===p?0:n*f/p,0,0===p?n:n*c/p,u),r.fillStyle=e.option("style.text","black");const g=r.textAlign;r.textAlign="center",Object(i.d)(r,`${d} (${c})`,n/2,u/2,n,e.textHints),r.textAlign=g}}}e.a=o},function(t,e,n){"use strict";var r=n(0),i=n(39),a=n(28),o=n(4);class s extends i.a{constructor(){super(...arguments),this.imageCache=new Map,this.title="Image"}canRender(t){return t instanceof a.a}getImage(t,e,n){if(!t.isLink(e,n))return null;const r=t.getValue(e,n);if(!this.imageCache.has(r)){const t=new Image;t.src=r,this.imageCache.set(r,t)}return this.imageCache.get(r)}createDOM(t){return{template:"<div></div>",update:(e,n)=>{const r=Object(o.b)(e,t,n);e.title=t.getLabel(n.v,n.dataIndex),e.style.backgroundImage=r||!t.isLink(n.v,n.dataIndex)?null:`url('${t.getValue(n.v,n.dataIndex)}')`}}}createCanvas(t,e){return(n,i,a)=>{if(Object(o.a)(n,t,i,e.rowHeight(a)))return;if(!t.isLink(i.v,i.dataIndex))return void Object(r.d)(n,t.getLabel(i.v,i.dataIndex),0,0,e.colWidth(t),e.textHints);const s=this.getImage(t,i.v,i.dataIndex);if(!s)return;const l=s.width,u=s.height;if(0===l||0===u)return;const c=e.colWidth(t),d=e.rowHeight(a),h=Math.min(c/l,d/u),p=l*h,f=u*h;n.drawImage(s,(c-p)/2,(d-f)/2,p,f)}}}e.a=s},function(t,e,n){"use strict";var r=n(31),i=n(47);class a extends r.a{constructor(){super("boolean","center"),this.title="Default"}canRender(t){return t instanceof i.a}}e.a=a},function(t,e,n){"use strict";var r=n(4),i=n(15),a=n(40),o=n(0);class s{constructor(){this.title="Interleaved"}canRender(t){return t instanceof i.a}createDOM(t,e){const{cols:n}=Object(a.a)(t,e,!1);return{template:`<div>${n.map(t=>t.renderer.template).join("")}</div>`,update:(e,i,a,s,l)=>{Object(r.b)(e,t,i)||(Object(o.o)(e,n,"detail","html"),Array.from(e.children).forEach((t,e)=>{n[e].renderer.update(t,i,a,s,l)}))}}}createGroupDOM(t,e){const{cols:n}=Object(a.a)(t,e,!1);return{template:`<div>${n.map(t=>t.renderer.template).join("")}</div>`,update:(t,e,r,i)=>{Object(o.o)(t,n,"group","html"),Array.from(t.children).forEach((t,a)=>{n[a].groupRenderer.update(t,e,r,i)})}}}createCanvas(t,e){const n=t.children,i=n.map(t=>e.renderer(t));return(a,o,s,l,u,c,d)=>{if(Object(r.a)(a,t,o,e.rowHeight(s)))return;const h=e.rowHeight(s),p=h/n.length;a.save(),a.scale(1,1/n.length),i.forEach((t,e)=>{t(a,o,e,l,u+p*e,c,d),a.translate(0,h)}),a.restore()}}createGroupCanvas(t,e){const n=t.children,r=n.map(t=>e.groupRenderer(t));return(t,i,a,o,s,l)=>{const u=e.groupHeight(i),c=u/n.length;t.save(),t.scale(1,1/n.length),r.forEach((e,n)=>{e(t,i,a,o,s+c*n,l),t.translate(0,u)}),t.restore()}}}e.a=s},function(t,e,n){"use strict";var r=n(2),i=n(0),a=n(4),o=n(5),s=n(21);class l{constructor(){this.title="Dot(s)"}canRender(t){return Object(r.h)(t)}static getDOMRenderer(t){const e=Object(r.i)(t)?t.getDataLength():1;let n="";for(let r=0;r<e;++r)n+=`<div style='background-color: ${t.color}' title=''></div>`;return{template:`<div>${n}</div>`,render:(t,e,n,r)=>{if(t.children.length!==e.length){let i="";for(let t=0;t<e.length;++t)i+=`<div style='background-color: ${r[t]}' title='${n[t]}'></div>`;t.innerHTML=i}Object(i.m)(t,(t,a)=>{const s=e[a];Object(i.c)(t,{title:n[a]},{display:Object(o.b)(s)?"none":null,left:`${Math.round(100*s)}%`,top:e.length>1?`${Math.round(80*Math.random()+10)}%`:null,"background-color":r[a]})})}}}createDOM(t,e,n){const{template:i,render:u}=l.getDOMRenderer(t);return{template:i,update:(e,i)=>{if(Object(a.b)(e,t,i))return;const l=Object(s.a)(t,i,n),c=t.getValue(i.v,i.dataIndex);if(!Object(r.i)(t))return u(e,[c],[t.getLabel(i.v,i.dataIndex)],[l]);const d=c.filter(t=>!Object(o.b)(t));return u(e,d,d.map(r.b),d.map(t=>l))}}}createGroupDOM(t,e,n){const{template:i,render:a}=l.getDOMRenderer(t);return{template:i,update:(e,i,l)=>{const u=l.map(e=>t.getValue(e.v,e.dataIndex)),c=l.map(e=>Object(s.a)(t,e,n));if(!Object(r.i)(t))return a(e,u,l.map(e=>t.getLabel(e.v,e.dataIndex)),c);const d=[].concat(...u.filter(t=>!Object(o.b)(t)));return a(e,d,d.map(r.b),u.map((t,e)=>c[e]))}}}}e.a=l},function(t,e,n){"use strict";var r=n(6),i=n(8),a=n(2),o=n(26);class s extends r.a{constructor(t,e,n="Change Sort Criteria"){super(e,n),this.column=t}openDialog(){const t=this.column.getSortMethod(),e=Object.keys(this.column instanceof o.a?a.d:a.a),n=this.column instanceof i.d?this.column.isGroupSortedByMe().asc:this.column.isSortedByMe().asc,r=e.map(e=>`<label><input type="radio" name="multivaluesort" value="${e}"  ${t===e?"checked":""} > ${e.slice(0,1).toUpperCase()+e.slice(1)}</label><br>`).join("\n"),s=`\n        <label><input type="radio" name="sortorder" value="asc"  ${"asc"===n?"checked":""} > Ascending</label><br>\n        <label><input type="radio" name="sortorder" value="desc"  ${"desc"===n?"checked":""} > Decending</label><br>`,l=this.makeChoosePopup(`${r}<strong>Sort Order</strong><br>${s}`);Array.from(l.querySelectorAll("input[name=multivaluesort]")).forEach(t=>{t.addEventListener("change",()=>this.column.setSortMethod(t.value))}),Array.from(l.querySelectorAll("input[name=sortorder]")).forEach(t=>{t.addEventListener("change",()=>{this.column instanceof i.d?this.column.groupSortByMe("asc"===t.value):this.column.sortByMe("asc"===t.value)})})}}e.a=s},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=n(6);class i extends r.a{constructor(t,e,n="Rename Column"){super(e,n),this.column=t}openDialog(){const t=this.makePopup(`\n      <input type="text" value="${this.column.label}" required autofocus placeholder="name">\n      <input type="color" value="${this.column.color}" required placeholder="color">\n      <textarea rows="5">${this.column.description}</textarea><br>`,!1);t.classList.add("lu-rename-dialog"),this.onButton(t,{cancel:()=>void 0,reset:()=>void 0,submit:()=>{const e=t.querySelector('input[type="text"]').value,n=t.querySelector('input[type="color"]').value,r=t.querySelector("textarea").value;return this.column.setMetaData({label:e,color:n,description:r}),!0}})}}e.a=i},function(t,e,n){"use strict";var r=n(6);class i extends r.a{constructor(t,e,n){super(e,"Visualization"),this.column=t,this.ctx=n}openDialog(){const t=this.column.getRendererType(),e=this.column.getGroupRenderer(),{item:n,group:r}=this.ctx.getPossibleRenderer(this.column);console.assert(n.length>1||r.length>1);let i="";i+=n.map(e=>`<label><input type="radio" name="renderertype" value=${e.type}  ${t===e.type?"checked":""}> ${e.label}</label><br>`).join("\n"),e.length>1&&(i+="<strong>Group Visualization</strong><br>",i+=r.map(t=>`<label><input type="radio" name="grouptype" value=${t.type}  ${e===t.type?"checked":""}> ${t.label}</label><br>`).join("\n"));const a=this.makeChoosePopup(i);Array.from(a.querySelectorAll('input[name="renderertype"]')).forEach(t=>{t.addEventListener("change",()=>this.column.setRendererType(t.value))}),Array.from(a.querySelectorAll('input[name="grouptype"]')).forEach(t=>{t.addEventListener("change",()=>this.column.setGroupRenderer(t.value))})}}e.a=i},function(t,e,n){"use strict";var r=n(6),i=n(27);class a extends r.a{constructor(t,e,n="Edit Script"){super(e,n),this.column=t}openDialog(){const t=this.column.getScript(),e=this.makePopup(`<div class="script-description">\n      <p>You can write any valid JavaScript code. It will be embedded in a function. Therefore the last statement has to return a value.\n      In case of a single line statement the code piece statement <code>return</code> will be automatically prefixed.</p>\n      <p>The function signature is: <br><code>(row: any, index: number, children: Column[], values: any[], raws: (number|null)[]) => number</code>\n      <dl>\n        <dt>param: <code>row</code></dt>\n        <dd>the row in the dataset to compute the value for</dd>\n        <dt>param: <code>index</code></dt>\n        <dd>the index of the row</dd>\n        <dt>param: <code>children</code></dt>\n        <dd>the list of LineUp columns that are part of this ScriptColumn</dd>\n        <dt>param: <code>values</code></dt>\n        <dd>the computed value of each column (see <code>children</code>) for the current row</dd>\n        <dt>param: <code>raws</code></dt>\n        <dd>similar to <code>values</code>. Numeric columns return by default the normalized value, this array gives access to the original "raw" values before mapping is applied</dd>\n        <dt>returns:</dt>\n        <dd>the computed number <strong>in the range [0, 1] or NaN</strong></dd>\n      </dl>\n      <p>In addition to the standard JavaScript functions and objects (Math, ...) a couple of utility functions are available: </p>\n      <dl>\n        <dt><code>max(arr: number[]) => number</code></dt>\n        <dd>computes the maximum of the given array of numbers</dd>\n        <dt><code>min(arr: number[]) => number</code></dt>\n        <dd>computes the minimum of the given array of numbers</dd>\n        <dt><code>extent(arr: number[]) => [number, number]</code></dt>\n        <dd>computes both minimum and maximum and returning an array with the first element the minimum and the second the maximum</dd>\n        <dt><code>clamp(v: number, min: number, max: number) => number</code></dt>\n        <dd>ensures that the given value is within the given min/max value</dd>\n        <dt><code>normalize(v: number, min: number, max: number) => number</code></dt>\n        <dd>normalizes the given value <code>(v - min) / (max - min)</code></dd>\n        <dt><code>denormalize(v: number, min: number, max: number) => number</code></dt>\n        <dd>inverts a normalized value <code>v * (max - min) + min</code></dd>\n        <dt><code>linear(v: number, input: [number, number], output: [number, number]) => number</code></dt>\n        <dd>performs a linear mapping from input domain to output domain both given as an array of [min, max] values. <code>denormalize(normalize(v, input[0], input[1]), output[0], output[1])</code></dd>\n      </dl>\n      </div><br>\n      <textarea autofocus="true" rows="5" autofocus="autofocus" style="width: 95%;">${this.column.getScript()}</textarea>\n      <br>`),n=t=>{this.column.setScript(t)};this.onButton(e,{cancel:()=>{e.querySelector("textarea").value=t,n(t)},reset:()=>{e.querySelector("textarea").value=i.b.DEFAULT_SCRIPT,n(i.b.DEFAULT_SCRIPT)},submit:()=>((()=>{const t=e.querySelector("textarea").value;n(t)})(),!0)})}}e.a=a},function(t,e,n){"use strict";var r=n(6);class i extends r.a{constructor(t,e,n,r=[],i="Edit Link ($ as Placeholder)"){super(e,i),this.column=t,this.idPrefix=n,this.templates=r}openDialog(){let t=`<input\n        type="text"\n        size="15"\n        value="${this.column.getLink()}"\n        required="required"\n        autofocus="autofocus"\n        placeholder="link pattern"\n        ${this.templates.length>0?`list="ui${this.idPrefix}lineupPatternList"`:""}\n      ><br>`;this.templates.length>0&&(t+=`<datalist id="ui${this.idPrefix}lineupPatternList">${this.templates.map(t=>`<option value="${t}">`)}</datalist>`);const e=this.makePopup(t);this.onButton(e,{cancel:()=>void 0,reset:()=>void 0,submit:()=>{const t=e.querySelector("input").value;return this.column.setLink(t),!0}})}}e.a=i},function(t,e,n){"use strict";var r=n(6);class i extends r.a{constructor(t,e,n="Edit Weights"){super(e,n),this.column=t}openDialog(){function t(){Array.from(a.querySelectorAll(".bar")).forEach((t,e)=>t.style.width=`${r(n[e].weight)}px`)}const e=this.column.getWeights(),n=this.column.children.map((t,n)=>({col:t,weight:100*e[n]})),r=t=>Math.round(t/100*120),i=this.makePopup("<table></table>"),a=i.querySelector("table");n.forEach(e=>{a.insertAdjacentHTML("beforeend",`<tr>\n        <td><input type="number" value="${e.weight}" min="0" max="100" size="5"></td>\n        <td><div class="${e.col.cssClass} bar" style="background-color: ${e.col.color}"></div></td>\n        <td>${e.col.label}</td>\n       </tr>`),i.lastElementChild.querySelector("input").addEventListener("input",function(){e.weight=+this.value,t()})}),t(),this.onButton(i,{cancel:()=>{this.column.setWeights(e)},reset:()=>{n.forEach((t,n)=>t.weight=100*e[n]),Array.from(a.querySelectorAll("input")).forEach((t,e)=>t.value=n[e].weight.toString()),t()},submit:()=>(this.column.setWeights(n.map(t=>t.weight)),!0)})}}e.a=i},function(t,e,n){"use strict";var r=n(37),i=n(6);class a extends i.a{constructor(t,e,n){super(e,"Edit Hierarchy Cutoff"),this.column=t,this.idPrefix=n}openDialog(){const t=this.column.getCutOff(),e=Object(r.b)(this.column.hierarchy),n=e.map(t=>t.path),i=`<input type="text" value="${t.node.label}"\n        required="required" autofocus="autofocus" list="ui${this.idPrefix}lineupHierarchyList" placeholder="cut off node"><br>\n        <input type="number" value="${isFinite(t.maxDepth)?t.maxDepth:""}" placeholder="max depth (&infin;)"><br>\n        <datalist id="ui${this.idPrefix}lineupHierarchyList">${e.map(t=>`<option value="${t.path}">${t.label}</option>`)}</datalist>`,a=this.makePopup(i,!1);a.querySelector('input[type="text"]').addEventListener("change",function(){const t=this.value;console.log("validate",t),n.indexOf(t)<0?this.setCustomValidity("invalid node"):this.setCustomValidity("")}),this.onButton(a,{cancel:()=>void 0,reset:()=>void 0,submit:()=>{if(!a.querySelector("form").checkValidity())return!1;const t=a.querySelector('input[type="text"]').value,r=n.indexOf(t),i=e[r],o=a.querySelector('input[type="number"]').value,s=""===o?1/0:parseInt(o,10);return this.column.setCutOff(i,s),!0}})}}e.a=a},function(t,e,n){"use strict";var r=n(6);class i extends r.a{constructor(t,e,n,r="Search"){super(e,r),this.column=t,this.provider=n}openDialog(){const t=this.makePopup('<input type="text" size="15" value="" required autofocus placeholder="search..."><br><label><input type="checkbox">RegExp</label><br>'),e=t.querySelector('input[type="text"]'),n=t.querySelector('input[type="checkbox"]');e.addEventListener("input",()=>{let t=e.value;if(t.length<3)return;n.checked&&(t=new RegExp(t)),this.provider.searchAndJump(t,this.column)});const i=()=>{let i=e.value;const a=n.checked;i.length>0&&(a&&(i=new RegExp(i)),this.provider.searchAndJump(i,this.column)),r.a.removePopup(t)};n.addEventListener("change",i),this.onButton(t,{cancel:()=>void 0,reset:()=>void 0,submit:()=>(i(),!0)})}}e.a=i},function(t,e,n){"use strict";function r(t,...e){const n=t.dataTransfer.types;return"function"==typeof n.indexOf?e.some(t=>n.indexOf(t)>=0):"function"==typeof n.includes?e.some(t=>n.includes(t)):"function"==typeof n.contains&&e.some(t=>n.contains(t))}function i(t){return o.size>0&&r(t,"text/plain")}function a(t){const e=t.dataTransfer;!function(t){const e=t.dataTransfer;return Boolean(t.ctrlKey&&e.effectAllowed.match(/copy/gi)||!e.effectAllowed.match(/move/gi))}(t)?e.dropEffect="move":e.dropEffect="copy"}e.a=function(t,e,n=!1){const r=++s;t.draggable=!0,t.addEventListener("dragstart",i=>{t.classList.add("lu-dragging");const a=e();if(i.dataTransfer.effectAllowed=a.effectAllowed,n&&i.stopPropagation(),Object.keys(a.data).every(t=>{try{return i.dataTransfer.setData(t,a.data[t]),!0}catch(t){return!1}}))return;const s=a.data["text/plain"]||"";i.dataTransfer.setData("text/plain",`${r}${s?`: ${s}`:""}`),o.set(r,a.data)}),t.addEventListener("dragend",e=>{t.classList.remove("lu-dragging"),n&&e.stopPropagation(),o.size>0&&o.delete(r)})},e.b=function(t,e,n,s=null,l=!1){t.addEventListener("dragenter",n=>{if(r(n,...e)||i(n))return t.classList.add("lu-dragover"),l&&n.stopPropagation(),!1;t.classList.remove("lu-dragover")}),t.addEventListener("dragover",n=>{if(r(n,...e)||i(n))return n.preventDefault(),a(n),t.classList.add("lu-dragover"),l&&n.stopPropagation(),s&&s(n),!1}),t.addEventListener("dragleave",t=>{t.target.classList.remove("lu-dragover")}),t.addEventListener("drop",s=>{s.preventDefault(),l&&s.stopPropagation(),a(s);const u=s.dataTransfer.dropEffect;if(t.classList.remove("lu-dragover"),i(s)){const t=s.dataTransfer.getData("text/plain"),e=parseInt(t.indexOf(":")>=0?t.substring(0,t.indexOf(":")):t,10);if(o.has(e)){const t=o.get(e);return o.delete(e),!n({effect:u,data:t},s)}}else if(r(s,...e)){const t={};return e.forEach(e=>{const n=s.dataTransfer.getData(e);""!==n&&(t[e]=n)}),!n({effect:u,data:t},s)}})};const o=new Map;let s=0},function(t,e,n){"use strict";var r=n(6);class i extends r.a{constructor(t,e){super(e,"Stratify by Threshold"),this.column=t}openDialog(){if(this.column.isGroupedBy()>=0)return void this.column.groupByMe();const t=this.column.getOriginalMapping().domain,e=this.column.getStratifyThresholds(),n=`<input\n        type="number"\n        size="15"\n        value="${e.length>0?e[0]:(t[1]-t[0])/2}"\n        required\n        autofocus\n        min="${t[0]}"\n        max="${t[1]}"\n        step="any"\n      ><br>`,r=this.makePopup(n);this.onButton(r,{cancel:()=>void 0,reset:()=>void 0,submit:()=>{const t=+r.querySelector('input[type="number"]').value;return this.column.setStratifyThresholds([t]),this.column.groupByMe(),!0}})}}e.a=i},function(t,e,n){"use strict";var r=n(6),i=n(18);class a extends r.a{constructor(t,e,n="More",r){super(e,n),this.column=t,this.ctx=r}openDialog(){const t=this.makeMenuPopup("");t.classList.add("lu-more-options"),Object(i.f)(Object(i.b)(t,this.column,!0),this.column,this.ctx)}}e.a=a},function(t,e,n){"use strict";e.a=function(t,e){const n=t.desc.type;if(void 0!==e[n])return e[n];const u=function(t){const e=["default"];return Object(r.b)(t)&&e.push("categoricalLike"),Object(i.h)(t)&&e.push("numberLike"),Object(a.b)(t)&&e.push("boxplotLike"),t instanceof o.a&&e.push("stringLike"),Object(s.b)(t)&&e.push("multiLevelLike"),t instanceof s.a&&e.push("compositeLike"),t instanceof l.a&&e.push("compositeNumberLike"),e.reverse()}(t).find(t=>void 0!==e[t]);return u?e[u]:void 0};var r=n(10),i=n(2),a=n(26),o=n(9),s=n(11),l=n(15)},function(t,e,n){"use strict";var r=n(6),i=n(18),a=n(0),o=n(1);class s extends r.a{constructor(t,e,n){super(e,""),this.column=t,this.ctx=n}openDialog(){const t=this.makePopup('<div class="lu-sub-nested"></div>'),e=t.querySelector(".lu-sub-nested");this.column.children.forEach(n=>{const r=Object(i.c)(n,t.ownerDocument,this.ctx,{mergeDropAble:!1,resizeable:!1});r.className=`lu-header ${n.cssClass?` ${n.cssClass}`:""}${n.headerCssClass}${n.isFiltered()?" lu-filtered":""}`,Object(i.j)(r,n,this.ctx),e.appendChild(r)});const n=`.dialog${Math.random().toString(36).slice(-8).substr(0,3)}`,r=()=>{this.column.on(Object(a.u)(n,o.a.EVENT_ADD_COLUMN,o.a.EVENT_REMOVE_COLUMN),null)};this.column.on(Object(a.u)(n,o.a.EVENT_ADD_COLUMN,o.a.EVENT_REMOVE_COLUMN),Object(a.f)(()=>{t.parentElement?(e.innerHTML="",this.column.children.forEach(n=>{const r=Object(i.c)(n,t.ownerDocument,this.ctx,{mergeDropAble:!1,resizeable:!1});r.className=`lu-header ${n.cssClass?` ${n.cssClass}`:""}${n.headerCssClass}${n.isFiltered()?" lu-filtered":""}`,Object(i.j)(r,n,this.ctx),e.appendChild(r)})):r()})),this.onButton(t,{cancel:()=>r(),reset:()=>void 0,submit:()=>(r(),!0)})}}e.a=s},function(t,e,n){"use strict";var r=n(60),i=n(121),a=n(122),o=n(123),s=n(125);const l={stringLike:r.a,boolean:i.a,categorical:a.a,number:o.a,ordinal:s.a,boxplot:o.a,numbers:o.a};e.a=l},function(t,e,n){"use strict";var r=n(16);class i extends r.a{constructor(t,e,n="Filter"){super(t,e,n)}openDialog(){function t(){const t=n.querySelector('input[type="radio"][value="true"]').checked,e=n.querySelector('input[type="radio"][value="false"]').checked;r(!!t||!e&&null)}const e=this.column.getFilter(),n=this.makePopup(`<label><input type="radio" name="boolean_check" value="null" ${null===e?'checked="checked"':""}>No Filter</label><br>\n     <label><input type="radio" name="boolean_check" value="true" ${!0===e?'checked="checked"':""}>True</label><br>\n     <label><input type="radio" name="boolean_check" value="false" ${!1===e?'checked="checked"':""}>False</label>\n    <br>`),r=t=>{this.markFiltered(null!==t),this.column.setFilter(t)},i=Array.from(n.querySelectorAll('input[type="radio"]'));i.forEach(e=>e.addEventListener("change",t)),this.onButton(n,{cancel:()=>r(e),reset:()=>{const t=null===e?"null":String(e);i.forEach(e=>e.checked=e.value===t),r(null)},submit:()=>(t(),!0)})}}e.a=i},function(t,e,n){"use strict";var r=n(16),i=n(6);class a extends r.a{constructor(t,e,n="Filter"){super(t,e,n)}openDialog(){function t(){d.forEach((t,e)=>{const n=u[e];t.querySelector(".checkmark").innerHTML=`<i class="fa fa-${n.isChecked?"check-":""}square-o"></i>`,t.querySelector(".datalabel").style.opacity=n.isChecked?"1.0":".8"})}const e=this.column.getFilter()||{filter:[],filterMissing:!1},n=e.filter||[],a=e.filterMissing,o=this.makePopup(`<div class="selectionTable"><table><thead><th class="selectAll"></th><th>Category</th></thead><tbody></tbody></table></div>\n        ${Object(r.b)(a)}<br>`),s=this.column.categoryColors,l=this.column.categoryLabels,u=this.column.categories.map(function(t,e){return{cat:t,label:l[e],isChecked:0===n.length||n.indexOf(t)>=0,color:s[e]}}).sort(Object(i.b)("label")),c=o.querySelector("table"),d=u.map(e=>{c.insertAdjacentHTML("beforeend",`<tr>\n          <td class="checkmark"></td>\n          <td class="datalabel">${e.label}</td>\n         </tr>`);const n=c.lastElementChild;return n.querySelector("td.checkmark").addEventListener("click",()=>{e.isChecked=!e.isChecked,t()}),n});t();let h=!0;o.querySelector("thead").addEventListener("click",()=>{h=!h,u.forEach(t=>t.isChecked=h),t(),o.querySelector(".selectAll").innerHTML=`<i class="fa fa-${h?"check-":""}square-o"></i>`});const p=(t,e)=>{const n=null===t&&!1===e;this.markFiltered(!n),this.column.setFilter(n?null:{filter:t,filterMissing:e})};this.onButton(o,{cancel:()=>p(n,a),reset:()=>{u.forEach(t=>t.isChecked=!0),t(),p(null,!1)},submit:()=>{let t=u.filter(t=>t.isChecked).map(t=>t.cat);t.length===u.length&&(t=null);const e=o.querySelector('input[type="checkbox"].lu_filter_missing').checked;return p(t,e),!0}})}}e.a=a},function(t,e,n){"use strict";var r=n(16),i=n(124),a=n(59),o=n(6),s=n(2);class l extends r.a{constructor(t,e,n="Change Mapping",r,i){super(t,e,n),this.data=r,this.idPrefix=i}openDialog(){const t=this.column.getOriginalMapping();let e=this.column.getFilter(),n=this.column.getMapping(),r=n.clone(),l=e;const u=this.attachment.ownerDocument.body;u.insertAdjacentHTML("beforeend",`<div class="lu-popup">${this.dialogForm('<div class="mappingArea"></div>')}</div>`);const c=u.lastElementChild,d=(n,i)=>{r=n,l=i,this.markFiltered(!n.eq(t)||e.min!==i.min||e.max!==i.min||e.filterMissing!==i.filterMissing),this.column.setMapping(n),this.column.setFilter(i)},h={idPrefix:this.idPrefix,callback:d,triggerCallback:"dragend",padding_ver:15},p=Promise.resolve(this.data.mappingSample(this.column));let f=new i.a(c.querySelector(".mappingArea"),r,t,l,p,h);this.onButton(c,{cancel:()=>{this.column.setMapping(n),this.markFiltered(!n.eq(t))},reset:()=>{r=(n=t).clone(),e=Object(s.l)(),d(r,l=e),c.querySelector(".mappingArea").innerHTML="",f=new i.a(c.querySelector(".mappingArea"),r,t,l,p,h)},submit:()=>(d(f.scale,f.filter),!0)});const g=new a.a(this.attachment,c,{placement:"bottom-start",removeOnDestroy:!0});o.a.registerPopup(c,g,!1),this.hidePopupOnClickOutside(c)}}e.a=l},function(t,e,n){"use strict";function r(t,e,n){return Math.max(Math.min(t,n),e)}var i=n(3),a=(n.n(i),n(8)),o=n(16);class s{constructor(t,e,n,r,a,o){this.scale=e,this.original=n,this.oldFilter=r,this.dataPromise=a,this.options={idPrefix:"",width:370,height:150,padding_hor:7,padding_ver:7,filter_height:20,radius:5,callback:()=>void 0,callbackThisArg:null,triggerCallback:"change"},Object.assign(this.options,o),this.scale=e.clone(),this._filter={min:this.oldFilter.min,max:this.oldFilter.max},this.build(Object(i.select)(t))}get filter(){return this.computeFilter()}build(t){function e(){y.attr({x1:t=>m(h.scale.apply(t)),x2:g}).style("visibility",t=>{const e=h.scale.domain;return t<e[0]||t>e[e.length-1]?"hidden":null})}function n(t){return i.behavior.drag().on("dragstart",function(){Object(i.select)(this).classed("dragging",!0).attr("r",1.1*d.radius),Object(i.select)(`#me${d.idPrefix}mapping-overlay`).classed("hide",!0)}).on("drag",t).on("dragend",function(){Object(i.select)(this).classed("dragging",!1).attr("r",d.radius),Object(i.select)(`#me${d.idPrefix}mapping-overlay`).classed("hide",!1),u(!0)})}function s(){function o(){E.sort((t,e)=>t.r-e.r);const t=h.scale;t.domain=E.map(t=>t.r),t.range=E.map(t=>t.n),e()}function l(t,e){if(document.querySelector(`#me${d.idPrefix}mapping-overlay`)){document.querySelector(`#me${d.idPrefix}${e}-input`).value=t.toFixed(2)}}if(!(h.scale instanceof a.a))return;{const t=h.scale,e=t.domain,n=t.range;E=e.map((t,e)=>({r:t,n:n[e]}))}t.on("click",function(){t.select(`#me${d.idPrefix}mapping-overlay`).remove()}),t.selectAll("rect.adder").on("click",()=>{!function(t){const e=r(t,0,p);E.push({n:m.invert(e),r:g.invert(e)}),o(),s()}(Object(i.mouse)(t.select("svg > g").node())[0])});const u=t.select("g.mappings").selectAll("g.mapping").data(E);u.on("click",function(e){t.select(`#me${d.idPrefix}mapping-overlay`).remove();const n=[{label:"Normalized Input",value:e.n,domain:b,type:"normalized"},{label:"Raw Input",value:e.r,domain:v,type:"raw"}],r=t.append("div");r.attr("id",`me${d.idPrefix}mapping-overlay`).attr("style",`left: ${i.event.layerX+d.padding_hor+50}px; top: ${i.event.layerY+d.padding_ver}px`).on("click",()=>i.event.stopPropagation());const a=r.selectAll("div").data(n).enter().append("div");a.append("label").attr("for",t=>`me${d.idPrefix}${t.type}-input`).text(t=>`${t.label}: `),a.append("input").attr("id",t=>`me${d.idPrefix}${t.type}-input`).attr("type","number").attr("min",t=>t.domain[0]).attr("max",t=>t.domain[1]).attr("step",.01).attr("data-type",t=>t.type).attr("value",t=>parseFloat(t.value.toFixed(2))).on("change",t=>{const n=i.event.target,r=t.type;let a=0;switch(r){case"normalized":e.n=parseFloat(n.value),a=m(parseFloat(n.value)),Object(i.select)(this).select("line").attr("x1",a);break;case"raw":e.r=parseFloat(n.value),a=g(parseFloat(n.value)),Object(i.select)(this).select("line").attr("x2",a)}Object(i.select)(this).select(`circle.${r}`).attr("cx",a),o(),d.callback.call(d.callbackThisArg,h.scale.clone(),h.filter)}),i.event.stopPropagation()});const c=u.enter().append("g").classed("mapping",!0).on("contextmenu",(t,e)=>{i.event.preventDefault(),i.event.stopPropagation(),function(t){E.length<=2||(E.splice(t,1),o(),s())}(e)});c.append("line").attr({y1:0,y2:f}).call(n(function(t){const e=i.event.dx,n=r(m(t.n)+e,0,p),a=r(g(t.r)+e,0,p);t.n=m.invert(n),t.r=g.invert(a),Object(i.select)(this).attr("x1",n).attr("x2",a),Object(i.select)(this.parentElement).select("circle.normalized").attr("cx",n),Object(i.select)(this.parentElement).select("circle.raw").attr("cx",a),l(t.r,"raw"),l(t.n,"normalized"),o()})),c.append("circle").classed("normalized",!0).attr("r",d.radius).call(n(function(t){const e=r(i.event.x,0,p);t.n=m.invert(e),Object(i.select)(this).attr("cx",e),Object(i.select)(this.parentElement).select("line").attr("x1",e),l(t.n,"normalized"),o()})),c.append("circle").classed("raw",!0).attr("r",d.radius).attr("cy",f).call(n(function(t){const e=r(i.event.x,0,p);t.r=g.invert(e),Object(i.select)(this).attr("cx",e),Object(i.select)(this.parentElement).select("line").attr("x2",e),l(t.r,"raw"),o()})),u.select("line").attr({x1:t=>m(t.n),x2:t=>g(t.r)}),u.select("circle.normalized").attr("cx",t=>m(t.n)),u.select("circle.raw").attr("cx",t=>g(t.r)),u.exit().remove()}function l(){if(!(h.scale instanceof a.b))return void t.select("div.script").style("display","none");t.select("div.script").style("display",null);const n=h.scale,r=t.select("textarea").text(n.code);t.select("div.script").select("button").on("click",()=>{n.code=r.property("value"),e(),u()})}function u(t=!1){t&&"dragend"!==d.triggerCallback||d.callback.call(d.callbackThisArg,h.scale.clone(),h.filter)}function c(){const n=g.domain();t.select("input.raw_min").property("value",n[0]),t.select("input.raw_max").property("value",n[1]),e(),s(),function(){const e=g.domain();t.select("g.left_filter").attr("transform",`translate(${g(isFinite(h._filter.min)?h._filter.min:e[0])}, 0)`),t.select("g.right_filter").attr("transform",`translate(${g(isFinite(h._filter.max)?h._filter.max:e[1])}, 0)`);const n=[(isFinite(h._filter.min)?h._filter.min:e[0]).toFixed(1),(isFinite(h._filter.max)?h._filter.max:e[1]).toFixed(1)];Object(i.selectAll)(`#me${d.idPrefix}filter_inputs div input`).data(n).property("value",String)}()}const d=this.options,h=this;t=t.append("div").classed("lu-mapping-editor",!0);const p=d.width-2*d.padding_hor,f=d.height-2*d.padding_ver-d.filter_height;t.node().innerHTML=`<form onsubmit="return false">\n      <div><label for="me${d.idPrefix}mapping_type"><span class="title">Mapping / Scaling Type: </span><select id="me${d.idPrefix}mapping_type">\n        <option value="linear">Linear</option>\n        <option value="linear_invert">Invert</option>\n        <option value="linear_abs">Absolute</option>\n        <option value="log">Log</option>\n        <option value="pow1.1">Pow 1.1</option>\n        <option value="pow2">Pow 2</option>\n        <option value="pow3">Pow 3</option>\n        <option value="sqrt">Sqrt</option>\n        <option value="script">Custom Script</option>\n      </select>\n      </label></div>\n      <div class="filter_part"><span class="title">Mapping:</span></div>\n      <div class="mapping_area">\n        <div>\n          <span>0</span>\n          <input type="text" class="raw_min" id="me${d.idPrefix}raw_min" value="0"><label for="me${d.idPrefix}raw_min">Min</label>\n        </div>\n        <svg width="${d.width}" height="${d.height+35}">\n          <text x="${p/2}" y="10">Normalized Input</text>\n          <text x="${p/2}" y="${d.height-d.filter_height+5}">Raw Input</text>\n          <line y1="${d.padding_ver}" y2="${d.padding_ver}" x1="${d.padding_hor}" x2="${p+d.padding_hor}" stroke="black"></line>\n          <rect class="adder" x="${d.padding_hor}" width="${p}" height="10"></rect>\n          <line y1="${d.height-d.filter_height-d.padding_ver}" y2="${d.height-d.filter_height-d.padding_ver}" x1="${d.padding_hor}" x2="${p+d.padding_hor}" stroke="black"></line>\n          <rect class="adder" x="${d.padding_hor}" width="${p}" height="10" y="${d.height-d.filter_height-10}"></rect>\n          <g transform="translate(${d.padding_hor},${d.padding_ver})">\n            <g class="samples"></g>\n            <g class="mappings"></g>\n            <g class="filter" transform="translate(0,${d.height-d.filter_height-d.padding_ver-10+35})">\n               <g class="left_filter" transform="translate(0,0)">\n                  <path d="M0,0L4,7L-4,7z"></path>\n                  <rect x="-4" y="7" width="40" height="13" rx="2" ry="2"></rect>\n                  <text y="14" x="15" text-anchor="middle">Min</text>\n                </g>\n              <g class="right_filter" transform="translate(${p},0)">\n                  <path d="M0,0L4,7L-4,7z"></path>\n                  <rect x="-36" y="7" width="40" height="13" rx="2" ry="2"></rect>\n                  <text y="14" x="-15" text-anchor="middle">Max</text>\n              </g>\n            </g>\n          </g>\n        </svg>\n        <div>\n          <span>1</span>\n          <input type="text" class="raw_max" id="me${d.idPrefix}raw_max" value="1"><label for="me${d.idPrefix}raw_max">Max</label>\n        </div>\n      </div>\n      <div class="filter_part2" style=""><span class="title">Filter:</span></div>\n\n      <div id="me${d.idPrefix}filter_inputs">\n        <div>\n          <label for="me${d.idPrefix}min_filter_input">Min Filter:</label>\n          <input id="me${d.idPrefix}min_filter_input" type="number" step="0.1">\n        </div>\n        <div>\n          <label for="me${d.idPrefix}max_filter_input">Max Filter:</label>\n          <input id="me${d.idPrefix}max_filter_input" type="number" step="0.1">\n        </div>\n      </div>\n      <div>\n         Extras: <label><input type="checkbox" id="me${d.idPrefix}filterMissing" ${this.oldFilter.filterMissing?'checked="checked"':""}>${o.d}</label>\n      </div>\n      <div class="script" style="/* display: none; */">\n        <label for="me${d.idPrefix}script_code">Custom Script</label><button>Apply</button>\n        <textarea id="me${d.idPrefix}script_code">\n        </textarea>\n      </div>\n    </form>`;const g=i.scale.linear().domain([Math.min(this.scale.domain[0],this.original.domain[0]),Math.max(this.scale.domain[this.scale.domain.length-1],this.original.domain[this.original.domain.length-1])]).range([0,p]),m=i.scale.linear().domain([0,1]).range([0,p]),v=g.domain(),b=m.domain();t.select("input.raw_min").property("value",g.domain()[0]).on("blur",function(){const t=g.domain();t[0]=parseFloat(this.value),g.domain(t);const e=h.scale.domain;e[0]=t[0],h.scale.domain=e,c(),u()}),t.select("input.raw_max").property("value",g.domain()[1]).on("blur",function(){const t=g.domain();t[1]=parseFloat(this.value),g.domain(t);const e=h.scale.domain;e[e.length-1]=t[1],h.scale.domain=e,c(),u()}),t.select('input[type="checkbox"]').on("change",()=>{u()});let y=t.select("g.samples").selectAll("line").data([]);this.dataPromise.then(t=>{t=function(t){return Array.from(new Set(t))}(t),(y=y.data(t)).enter().append("line").attr({x1:t=>m(h.scale.apply(t)),y1:0,x2:g,y2:f}).style("visibility",t=>{const e=h.scale.domain;return t<e[0]||t>e[e.length-1]?"hidden":null})});let E=[];s(),l();{const e=isFinite(this.oldFilter.min)?g(this.oldFilter.min):0,a=isFinite(this.oldFilter.max)?g(this.oldFilter.max):p,o=[(isFinite(this.oldFilter.min)?this.oldFilter.min:v[0]).toFixed(1),(isFinite(this.oldFilter.max)?this.oldFilter.max:v[1]).toFixed(1)];Object(i.selectAll)(`#me${d.idPrefix}filter_inputs div input`).attr("min",v[0]).attr("max",v[1]).data(o).attr("value",t=>t).on("change",function(e,n){const r=parseFloat(this.value),i=0===n?"min":"max";if(r>=v[0]&&r<=v[1]){const e="min"===i?"left":"right",n=g(r);h._filter[i]=r===v[0]?-1/0:r===v[1]?1/0:r,t.select(`g.${e}_filter`).attr("transform",`translate(${n}, 0)`)}u()}),t.selectAll("g.left_filter, g.right_filter").data([this.oldFilter.min,this.oldFilter.max]).attr("transform",(t,n)=>`translate(${0===n?e:a},0)`).call(n(function(t,e){const n=r(i.event.x,0,p),a=g.invert(n),o=0===e?"min":"max",s=n<=0&&"min"===o?-1/0:n>=p&&"max"===o?1/0:a;h._filter[o]=s,document.querySelector(`#me${d.idPrefix}filter_inputs #me${d.idPrefix}${o}_filter_input`).value=a.toFixed(1),Object(i.select)(this).datum(s).attr("transform",`translate(${n},0)`)}))}this.computeFilter=(()=>({min:this._filter.min,max:this._filter.max,filterMissing:t.select('input[type="checkbox"]').property("checked")})),c(),t.select("select").on("change",function(){const t=this.value;if("linear_invert"===t)h.scale=new a.a(g.domain(),"linear",[1,0]);else if("linear_abs"===t){const t=g.domain();h.scale=new a.a([t[0],(t[1]-t[0])/2,t[1]],"linear",[1,0,1])}else h.scale="script"===t?new a.b(g.domain()):new a.a(g.domain(),t);e(),s(),l(),u()}).property("selectedIndex",function(){let t="script";h.scale instanceof a.a&&(t=h.scale.scaleType);return["linear","linear_invert","linear_abs","log","pow1.1","pow2","pow3","sqrt","script"].indexOf(t)})}}e.a=s},function(t,e,n){"use strict";var r=n(16),i=n(3),a=(n.n(i),n(6));class o extends r.a{constructor(t,e,n="Edit Categorical Mapping"){super(t,e,n)}openDialog(){function t(){g.forEach((t,e)=>{const n=p[e];t.querySelector(".checkmark").innerHTML=`<i class="fa fa-${n.isChecked?"check-":""}square-o"></i>`,t.querySelector(".bar").style.width=`${l(n.range)}px`,t.querySelector(".datalabel").style.opacity=n.isChecked?"1.0":".8"})}function e(){u.querySelector(".selectAll").innerHTML=`<i class="fa fa-${m?"check-":""}square-o"></i>`}const n=this.column.getFilter()||{filter:[],filterMissing:!1},o=n.filter,s=n.filterMissing,l=i.scale.linear().domain([0,100]).range([0,120]),u=this.makePopup(`<div class="selectionTable"><table><thead><th class="selectAll"></th><th colspan="2">Scale</th><th>Category</th></thead><tbody></tbody></table></div>\n        ${Object(r.b)(s)}<br>`),c=this.column.getScale().range,d=this.column.categoryColors,h=this.column.categoryLabels,p=this.column.categories.map((t,e)=>({cat:t,label:h[e],isChecked:0===o.length||o.indexOf(t)>=0,range:100*c[e],color:d[e]})).sort(Object(a.b)("label")),f=u.querySelector("table"),g=p.map(e=>{f.insertAdjacentHTML("beforeend",`<tr>\n          <td class="checkmark"></td>\n          <td><input type="number" value="${e.range}" min="0" max="100" size="5"></td>\n          <td><div class="bar" style="background-color: ${e.color}"></div></td>\n          <td class="datalabel">${e.label}</td>\n         </tr>`);const n=f.lastElementChild;return n.querySelector("td.checkmark").addEventListener("click",()=>{e.isChecked=!e.isChecked,t()}),n.querySelector("input").addEventListener("input",function(){e.range=parseFloat(this.value),t()}),n});t();let m=!0;u.querySelector("thead").addEventListener("click",()=>{m=!m,p.forEach(t=>t.isChecked=m),t(),e()}),e();const v=(t,e)=>{const n=null===t&&!1===e;this.markFiltered(!n),this.column.setFilter(n?null:{filter:t,filterMissing:e})};this.onButton(u,{cancel:()=>{v(o,s),this.column.setMapping(c)},reset:()=>{p.forEach(t=>{t.isChecked=!0,t.range=50}),t(),v(null,!1),this.column.setMapping(p.map(()=>1))},submit:()=>{let t=p.filter(t=>t.isChecked).map(t=>t.cat);t.length===p.length&&(t=null);const e=u.querySelector('input[type="checkbox"].lu_filter_missing').checked;return v(t,e),this.column.setMapping(p.map(t=>t.range/100)),!0}})}}e.a=o},function(t,e,n){"use strict";var r=n(10),i=n(8),a=n(9),o=n(51),s=n(16),l=n(60),u=n(3),c=(n.n(u),n(0));const d={stringLike:function(t,e,n){const r=e.dataset.summary;if(e.dataset.summary="string",!n){const n=t.getFilter()||"";return void(e.textContent=n===a.a.FILTER_MISSING?"":String(n))}const i=Object(l.b)(t);"string"!==r?(e.innerHTML=i.template,i.init(e)):i.update(e)},categoricalLike:function(t,e,n,i){const a=i.statsOf(t),l=e.dataset.summary;if(!a||a.hist.length>50)return void(e.innerHTML="");const u=t.categories,c=t.categoryColors,d=t.categoryLabels;if(l&&l.endsWith("hist")){const t=Array.from(e.querySelectorAll("div[data-cat]"));for(let r=t.length;r<a.hist.length;++r){e.insertAdjacentHTML("beforeend",`<div style="background-color: ${c[r]}" data-cat="${a.hist[r].cat}" ${n?`data-title="${d[r]}"`:""}></div>`);const i=e.lastElementChild;0===t.length?e.insertBefore(e.firstElementChild,i):e.insertBefore(e.children[r],i),t.push(i)}a.hist.forEach(({y:e},n)=>{const r=t[n];r.style.height=`${Math.round(100*e/a.maxBin)}%`,r.title=`${d[n]}: ${e}`})}else a.hist.forEach(({cat:t,y:r})=>{const i=u.indexOf(t);e.insertAdjacentHTML("beforeend",`<div style="height: ${Math.round(100*r/a.maxBin)}%; background-color: ${c[i]}" title="${d[i]}: ${r}" data-cat="${t}" ${n?`data-title="${d[i]}"`:""}></div>`)});if(!(t instanceof r.a||t instanceof o.a))return void(e.dataset.summary="hist");e.dataset.summary=n?"interactive-filter-hist":"interactive-hist";const h=t,p=h.getFilter();let f=null;Array.from(e.children).slice(0,u.length).forEach((t,e)=>{const n=t.dataset.cat;t.dataset.filtered=r.a.filter(p,n)?"":"filtered",t.onclick=(r=>{r.preventDefault(),r.stopPropagation();const i=h.getFilter();if(null===i||!Array.isArray(i.filter)){const n=u.slice();return t.dataset.filtered="filtered",n.splice(e,1),void h.setFilter({filterMissing:!!f&&f.checked,filter:n})}const a=i.filter.slice(),o=a.indexOf(n);o>=0?(t.dataset.filtered="filtered",a.splice(o,1)):(t.dataset.filtered="",a.push(n)),h.setFilter({filterMissing:f?f.checked:i.filterMissing,filter:a})})}),n&&("interactive-filter-hist"!==l?(e.insertAdjacentHTML("beforeend",Object(s.c)(null!==p&&p.filterMissing,a.missing)),f=e.querySelector("input")):(f=e.querySelector("input")).checked=null!==p&&p.filterMissing,f.onchange=(()=>{const t=h.getFilter();null===t?h.setFilter({filterMissing:f.checked,filter:[]}):h.setFilter({filterMissing:f.checked,filter:t.filter})}))},numberLike:function(t,e,n,r){const a=r.statsOf(t),o=e.dataset.summary;if(!a)return void(e.innerHTML="");if(!(n&&t instanceof i.d)){if(e.dataset.summary="hist",e.innerHTML="",a.hist.forEach(({x:n,y:r},i)=>{e.insertAdjacentHTML("beforeend",`<div style="height: ${Math.round(100*r/a.maxBin)}%; background-color: ${t.getMetaData().color};" title="Bin ${i}: ${r}" data-x="${n}"></div>`)}),Object(i.e)(t)){const n=t.getRange();e.insertAdjacentHTML("beforeend",`<span>${n[0]}</span><span>${n[1]}</span>`)}return}const l=t,d=l.getFilter(),h=l.getMapping().domain,p=t=>100*(t-h[0])/(h[1]-h[0]),f=t=>t/100*(h[1]-h[0])+h[0],g=isFinite(d.min)?d.min:h[0],m=isFinite(d.max)?d.max:h[1];if("slider-hist"===o){const n=Array.from(e.querySelectorAll("div[data-x]"));for(let t=n.length;t<a.hist.length;++t)e.insertAdjacentHTML("afterbegin","<div></div>"),n.unshift(e.firstElementChild);a.hist.forEach(({x:e,y:r},i)=>{const o=n[i];o.style.height=`${Math.round(100*r/a.maxBin)}%`,o.style.backgroundColor=t.getMetaData().color,o.title=`Bin ${i}: ${r}`,o.dataset.x=String(e)})}else e.dataset.summary="slider-hist",a.hist.forEach(({x:t,y:n},r)=>{e.insertAdjacentHTML("beforeend",`<div style="height: ${Math.round(100*n/a.maxBin)}%" title="Bin ${r}: ${n}" data-x="${t}"></div>`)}),e.insertAdjacentHTML("beforeend",`\n      <div data-handle="min-hint" style="width: ${Math.round(p(g))}%"></div>\n      <div data-handle="max-hint" style="width: ${Math.round(100-p(m))}%"></div>\n      <div data-handle="min" data-value="${Object(c.q)(g,2)}" style="left: ${Math.round(p(g))}%"></div>\n      <div data-handle='max' data-value="${Object(c.q)(m,2)}" style="right: ${Math.round(100-p(m))}%"></div>\n      ${Object(s.c)(d.filterMissing,a.missing)}\n    `);const v=e.querySelector("[data-handle=min]"),b=e.querySelector("[data-handle=max]"),y=e.querySelector("[data-handle=min-hint]"),E=e.querySelector("[data-handle=max-hint]"),x=e.querySelector("input");if("slider-hist"===o)return y.style.width=`${Math.round(p(g))}%`,E.style.width=`${Math.round(100-p(m))}%`,v.dataset.value=Object(c.q)(g,2).toString(),b.dataset.value=Object(c.q)(m,2).toString(),v.style.left=`${Math.round(p(g))}%`,b.style.right=`${Math.round(100-p(m))}%`,void(x.checked=d.filterMissing);const _=()=>{const t=f(parseFloat(v.style.left)),e=f(100-parseFloat(b.style.right));l.setFilter({filterMissing:x.checked,min:Math.abs(t-h[0])<.001?NaN:t,max:Math.abs(e-h[1])<.001?NaN:e})};x.onchange=(()=>_()),Object(u.selectAll)([v,b]).call(u.behavior.drag().on("dragstart",function(){Object(u.select)(this).classed("lu-dragging",!0)}).on("drag",function(){const t=u.event,n=e.clientWidth,r=Math.max(0,Math.min(t.x,n)),i=Math.round(100*r/n);if(this.dataset.value=Object(c.q)(f(i),2).toString(),"min"===this.dataset.handle)return this.style.left=`${i}%`,void(y.style.width=`${i}%`);this.style.right=`${100-i}%`,E.style.width=`${100-i}%`}).on("dragend",function(){Object(u.select)(this).classed("lu-dragging",!1),_()}))},selection:function(t,e,n,r){const i=r.provider,a=e.dataset.summary;e.dataset.summary="selection","selection"!==a&&(e.innerHTML="<i class='fa fa-square-o' title='(Un)Select All'></i>");const o=e.firstElementChild;o.onclick=(e=>{e.stopPropagation(),o.classList.contains("fa-square-o")?i.selectAllOf(t.findMyRanker()):i.setSelection([]),o.classList.toggle("fa-square-o"),o.classList.toggle("fa-check-square-o")})},aggregate:function(t,e,n,r){const i=e.dataset.summary;if(e.dataset.summary="aggregation","aggregation"!==i){let n="down";const r=t.findMyRanker();r&&r.getGroups().every(e=>t.isAggregated(e))&&(n="right"),e.innerHTML=`<i class='fa fa-caret-${n}' title='(Un)Aggregate All'></i>`}const a=e.firstElementChild;a.onclick=(e=>{e.stopPropagation();const n=t.findMyRanker();if(!n)return;const i=a.classList.contains("fa-caret-down");a.classList.toggle("fa-caret-down"),a.classList.toggle("fa-caret-right"),r.provider.aggregateAllOf(n,i)})}};e.a=d},function(t,e,n){"use strict";var r=n(41),i=n(17),a=n(33);class o{constructor(t,e,n={}){this.node=t,this.tableId=0,this.sections=[],this.visible={first:0,forcedFirst:0,last:0,forcedLast:0},this.options={columnPadding:0},this.context=Object(i.d)(0,500),Object.assign(this.options,n),t.innerHTML="<header></header><main></main>",t.classList.add("lineup-engine","lineup-multi-engine"),this.style=new r.a(this.node,e);const a=this.main;let o=a.scrollLeft;a.addEventListener("scroll",()=>{const t=a.scrollLeft;if(t===o)return;const e=t>o;o=t,this.onScrolledHorizontally(t,a.clientWidth,e)})}update(){this.context=Object(i.b)(this.sections.map(t=>t.width),NaN,this.options.columnPadding),this.updateGrid(),this.onScrolledHorizontally(this.main.scrollLeft,this.main.clientWidth,!1)}updateGrid(){const t=r.a.gridColumn(this.sections,this.context.defaultRowHeight-this.context.padding(-1));this.style.updateRule("multiTableRule",`${this.style.id} > header, ${this.style.id} > main { ${t} }`)}onScrolledHorizontally(t,e,n){const{first:r,last:o}=Object(i.c)(t,e,this.context.defaultRowHeight,this.context.exceptions,this.context.numberOfRows),s=this.visible;s.forcedFirst=r,s.forcedLast=o;let l=0;return this.sections.forEach((i,a)=>{a>=r&&a<=o?i.show(Math.max(0,t-l),Math.min(t+e-l,i.width),n):i.hide(),l+=i.width}),s.first=r,s.last=o,a.a.PARTIAL}destroy(){this.sections.forEach(t=>t.destroy()),this.node.remove()}get doc(){return this.node.ownerDocument}get header(){return this.node.querySelector("header")}get main(){return this.node.querySelector("main")}pushTable(t,...e){const n=this.doc.createElement("article"),r=this.doc.createElement("article"),i=`T${this.tableId++}`,a=this.style.tableIds(i);n.id=a.header,r.id=a.body,this.header.appendChild(n),this.main.appendChild(r);const o=t(n,r,i,this.style,...e);return o.init(),this.sections.push(o),this.update(),o}pushSeparator(t,...e){const n=this.doc.createElement("section"),r=this.doc.createElement("section");this.header.appendChild(n),this.main.appendChild(r);const i=t(n,r,this.style,...e);return i.init(),this.sections.push(i),this.update(),i}remove(t){const e=this.sections.indexOf(t);return!(e<0)&&(this.sections.splice(e,1),t.destroy(),this.update(),!0)}widthChanged(){this.update()}}e.a=o},function(t,e,n){"use strict";var r=n(17),i=n(22);class a{constructor(t,e,n){this.left=t,this.right=e,this.dataIndex=n}get dataIndices(){return[this.dataIndex]}isSelected(t){return t.has(this.dataIndex)}update(t){t.setAttribute("class","lu-slope"),t.setAttribute("d",`M0,${this.left}L200,${this.right}`)}}class o{constructor(t,e,n){this.left=t,this.right=e,this.dataIndices=n}isSelected(t){return this.dataIndices.some(e=>t.has(e))}update(t){t.setAttribute("class","lu-group-slope"),t.setAttribute("d",`M0,${this.left[0]}L200,${this.right[0]}L200,${this.right[1]}L0,${this.left[1]}Z`)}}class s{constructor(t,e,n,r){this.header=t,this.body=e,this.id=n,this.ctx=r,this.leftSlopes=[],this.rightSlopes=[],this.pool=[],this.width=200,this.node=t.ownerDocument.createElementNS("http://www.w3.org/2000/svg","svg"),this.node.innerHTML='<g transform="translate(0,0)"></g>',t.classList.add("lu-slopegraph"),e.classList.add("lu-slopegraph"),this.body.style.height="1px",e.appendChild(this.node)}init(){this.hide();const t=this.body.parentElement;let e=t.scrollTop;this.scrollListener=(()=>{const n=t.scrollTop;e!==n&&(e=n,this.onScrolledVertically(n,t.clientHeight))}),t.addEventListener("scroll",this.scrollListener)}get hidden(){return this.header.classList.contains("loading")}set hidden(t){this.header.classList.toggle("loading",t),this.body.classList.toggle("loading",t)}hide(){this.hidden=!0}show(){const t=this.hidden;this.hidden=!1,t&&this.revalidate()}destroy(){this.node.remove(),this.body.parentElement.removeEventListener("scroll",this.scrollListener)}revalidate(){if(!this.leftContext||this.hidden)return;const t=this.body.parentElement;this.onScrolledVertically(t.scrollTop,t.clientHeight)}rebuild(t,e,n,r){this.leftContext=e,this.rightContext=r;const s=new Map;let l=0;this.rightSlopes=n.map((t,e)=>{const n=r.exceptionsLookup.get(e)||r.defaultRowHeight,a=n-r.padding(e);if(Object(i.a)(t)){const n={rows:t.rows.map(t=>t.dataIndex),start:l,heightPerRow:a/t.rows.length,offset:0,ref:e};t.rows.forEach(t=>s.set(t.dataIndex,n))}else{const n=t.dataIndex;s.set(n,{rows:[n],start:l,heightPerRow:a,offset:0,ref:e})}return l+=n,[]}),l=0,this.leftSlopes=t.map((t,n)=>{const u=e.exceptionsLookup.get(n)||r.defaultRowHeight,c=u-r.padding(n),d=[];if(Object(i.a)(t)){const e=new Set(t.rows.map(t=>t.dataIndex)),n=c/t.rows.length;let r=0;t.rows.forEach(t=>{if(!e.has(t.dataIndex))return;e.delete(t.dataIndex);const i=s.get(t.dataIndex);if(!i)return;const u=i.rows.filter(t=>e.delete(t));u.push(t.dataIndex);const c=u.length,h=1===c?new a(l+r+n/2,i.start+i.offset+i.heightPerRow/2,t.dataIndex):new o([l+r,l+r+n*u.length],[i.start+i.offset,i.start+i.offset+i.heightPerRow*c],u);d.push(h),this.rightSlopes[i.ref].push(h),i.offset+=c*i.heightPerRow,r+=c*n})}else{const e=t.dataIndex,n=s.get(e);if(n){const t=new a(l+c/2,n.start+n.offset+n.heightPerRow/2,e);d.push(t),this.rightSlopes[n.ref].push(t),n.offset+=n.heightPerRow}}return l+=u,d}),this.revalidate()}onScrolledVertically(t,e){if(!this.leftContext||!this.rightContext)return;const n=Object(r.c)(t,e,this.leftContext.defaultRowHeight,this.leftContext.exceptions,this.leftContext.numberOfRows),i=Object(r.c)(t,e,this.rightContext.defaultRowHeight,this.rightContext.exceptions,this.rightContext.numberOfRows),a=Math.min(n.firstRowPos,i.firstRowPos),o=Math.max(n.endPos,i.endPos);this.body.style.transform=`translate(0, ${a.toFixed(0)}px)`,this.body.style.height=`${(o-a).toFixed(0)}px`,this.node.firstElementChild.setAttribute("transform",`translate(0,-${a.toFixed(0)})`),this.choose(n.first,n.last,i.first,i.last)}choose(t,e,n,r){const i=new Set;for(let n=t;n<=e;++n)this.leftSlopes[n].forEach(t=>i.add(t));for(let t=n;t<=r;++t)this.rightSlopes[t].forEach(t=>i.add(t));this.render(i)}render(t){const e=this.node.firstElementChild,n=Array.from(e.children);for(let e=t.size;e<n.length;++e){const t=n[e];this.pool.push(t),t.remove()}for(let r=n.length;r<t.size;++r){const t=this.pool.pop();if(t)e.appendChild(t),n.push(t);else{const t=e.ownerDocument.createElementNS("http://www.w3.org/2000/svg","path");t.onclick=(e=>{const n=t.__data__,r=this.ctx.provider,i=n.dataIndices;if(e.ctrlKey)i.forEach(t=>r.toggleSelection(t,!0));else{const t=r.isSelected(i[0]);r.setSelection(t?[]:i)}}),e.appendChild(t),n.push(t)}}const r=this.ctx.provider,i={has:t=>r.isSelected(t)};let a=0;t.forEach(t=>{const r=n[a++];t.update(r),r.__data__=t;const o=t.isSelected(i);r.classList.toggle("lu-selected",o),o&&e.appendChild(r)})}updateSelection(t){const e=this.node.firstElementChild;Array.from(e.children).forEach(n=>{const r=n.__data__.isSelected(t);n.classList.toggle("lu-selected",r),r&&e.appendChild(n)})}}e.a=s},function(t,e,n){"use strict";var r=n(130),i=n(13),a=n(65),o=n(1),s=n(134),l=n(17),u=n(19),c=n(11),d=n(22),h=n(0),p=n(135),f=n(136),g=n(62),m=n(42);class v extends h.a{fire(t,...e){super.fire(t,...e)}createEventList(){return super.createEventList().concat([v.EVENT_WIDTH_CHANGED,v.EVENT_UPDATE_DATA])}}v.EVENT_WIDTH_CHANGED="widthChanged",v.EVENT_UPDATE_DATA="updateData";class b extends r.a{constructor(t,e,n,r,a,s,u={}){super(e,n,r,a,g.a),this.ranking=t,this.ctx=s,this.data=[],this.events=new v,this.on=this.events.on.bind(this.events),this.options={animation:!0,customRowUpdate:()=>void 0},Object.assign(this.options,u);const c=this;this.delayedUpdate=Object(h.f)(function(){this.type===i.a.EVENT_DIRTY_VALUES?this.primaryType!==o.a.EVENT_RENDERER_TYPE_CHANGED&&this.primaryType!==o.a.EVENT_GROUP_RENDERER_TYPE_CHANGED&&this.primaryType!==o.a.EVENT_LABEL_CHANGED&&c.updateBody():c.events.fire(b.EVENT_UPDATE_DATA)},50,(t,e)=>{return t.self.type===i.a.EVENT_ORDER_CHANGED?t:e}),t.on(`${i.a.EVENT_DIRTY_HEADER}.body`,Object(h.f)(()=>this.updateHeaders(),50)),t.on(`${i.a.EVENT_DIRTY_VALUES}.body`,this.delayedUpdate),t.on([`${i.a.EVENT_ADD_COLUMN}.body`,`${i.a.EVENT_REMOVE_COLUMN}.body`,`${i.a.EVENT_MOVE_COLUMN}.body`],Object(h.f)(()=>this.updateAll(),50)),t.on(`${i.a.EVENT_ORDER_CHANGED}.body`,this.delayedUpdate),this.selection=new p.a(this.ctx,n),this.selection.on(p.a.EVENT_SELECT_RANGE,(t,e,n)=>{this.selection.selectRange(this.data.slice(t,e+1),n)}),this.renderCtx=Object.assign({isGroup:t=>Object(d.a)(this.data[t]),getRow:t=>this.data[t],getGroup:t=>this.data[t]},s);const f=this.createColumns();this._context=Object.assign({columns:f,column:Object(l.b)(f.map(t=>t.width),100,this.ctx.columnPadding)},Object(l.d)(0,20))}get id(){return this.ranking.id}onVisibilityChanged(t){super.onVisibilityChanged(t),t&&this.delayedUpdate.call({type:i.a.EVENT_ORDER_CHANGED})}updateHeaders(){return super.updateHeaders()}get currentData(){return this.data}get context(){return this._context}createHeader(t,e){return e instanceof s.a&&e.updateWidthRule(this.style),e.createHeader(t,this.renderCtx)}updateHeader(t,e){return e instanceof s.a&&e.updateWidthRule(this.style),e.updateHeader(t,this.renderCtx)}createCell(t,e,n){return n.createCell(e,t,this.renderCtx)}updateCell(t,e,n){return n.updateCell(t,e,this.renderCtx)}updateAll(){const t=this.createColumns();this._context=Object.assign({},this._context,{columns:t,column:Object(l.b)(t.map(t=>t.width),100,this.ctx.columnPadding)}),super.recreate(),this.events.fire(b.EVENT_WIDTH_CHANGED)}updateBody(){this.hidden||this.forEachRow((t,e)=>this.updateRow(t,e))}updateHeaderOf(t){const e=this.header.children[t],n=this._context.columns[t];n instanceof s.a&&n.updateWidthRule(this.style),this.updateHeader(e,n)}createRow(t,e){super.createRow(t,e);const n=this.renderCtx.isGroup(e);if(this.options.customRowUpdate(t,e),n)return void(t.dataset.agg="group");const{dataIndex:r,meta:i}=this.renderCtx.getRow(e);t.dataset.dataIndex=r.toString(),t.dataset.agg="detail",t.dataset.meta=i||"",this.selection.updateState(t,r),this.selection.add(t)}updateRow(t,e){const n=this.renderCtx.isGroup(e),r="group"===t.dataset.agg;if(this.options.customRowUpdate(t,e),n!==r&&(t.innerHTML="",t.dataset.agg=n?"group":"detail",n?(t.dataset.dataIndex="",this.selection.remove(t)):this.selection.add(t)),!n){const{dataIndex:n,meta:r}=this.renderCtx.getRow(e);t.dataset.dataIndex=n.toString(),t.dataset.meta=r||"",this.selection.updateState(t,n)}super.updateRow(t,e)}updateSelection(t){this.forEachRow((e,n)=>{this.renderCtx.isGroup(n)?this.updateRow(e,n):this.selection.update(e,t)},!0)}updateColumnWidths(){this._context.column=Object(l.b)(this._context.columns.map(t=>t.width),100,this.ctx.columnPadding),super.updateColumnWidths();const{columns:t}=this.context;t.forEach(t=>{t instanceof s.a&&t.updateWidthRule(this.style)}),this.events.fire(b.EVENT_WIDTH_CHANGED)}updateColumn(t){const e=this.context.columns[t];this.forEachRow((n,r)=>{const i=n.children[t],a=this.updateCell(i,r,e);i!==a&&a&&(Object(m.b)(a,e),n.replaceChild(a,i))})}destroy(){super.destroy(),this.ranking.flatColumns.forEach(t=>this.disableListener(t))}disableListener(t){t.on(`${o.a.EVENT_WIDTH_CHANGED}.body`,null),t.on([`${o.a.EVENT_RENDERER_TYPE_CHANGED}.body`,`${o.a.EVENT_GROUP_RENDERER_TYPE_CHANGED}.body`,`${o.a.EVENT_LABEL_CHANGED}.body`],null),Object(c.b)(t)&&(t.on(`${u.b.EVENT_MULTI_LEVEL_CHANGED}.body`,null),t.on(`${u.b.EVENT_MULTI_LEVEL_CHANGED}.bodyUpdate`,null))}groupData(t){const e=this.ranking.getGroups(),n=this.ctx.provider,r=(t,e)=>1===e?"first last":0===t?"first":t===e-1?"last":void 0;if(1===e.length)return n.isAggregated(this.ranking,e[0])?[Object.assign({rows:t},e[0])]:t.map((n,i)=>Object.assign({group:e[0],relativeIndex:i,meta:r(i,t.length)},n));let i=0;const a=[];return e.forEach(e=>{const o=e.order.length,s=t.slice(i,i+o);i+=o,n.isAggregated(this.ranking,e)?a.push(Object.assign({rows:s},e)):a.push(...s.map((t,n)=>Object.assign({group:e,relativeIndex:n,meta:r(n,s.length)},t)))}),a}render(t,e){const n=this._context;n.columns.forEach(t=>this.disableListener(t.c));const r=this.data;this.data=t,this.renderCtx.totalNumberOfRows=t.length;const i=this.createColumns();return this._context=Object.assign({columns:i,column:Object(l.b)(i.map(t=>t.width),100,this.ctx.columnPadding)},e),super.recreate(this.options.animation?Object(f.a)(n,r,this.data):void 0)}fakeHover(t){const e=this.body.querySelector("[data-data-index].lu-hovered");e&&e.classList.remove("lu-hovered");const n=this.body.querySelector(`[data-data-index="${t}"]`);n&&n.classList.add("lu-hovered")}createColumns(){const t=[];this.ranking.flatten(t,0,1,0);return t.map(t=>t.col).map((t,e)=>this.createColumn(t,e))}createColumn(t,e){const n=this.ctx.createRenderer(t);if(t.on(`${o.a.EVENT_WIDTH_CHANGED}.body`,()=>{this.updateColumnWidths()}),t.on([`${o.a.EVENT_RENDERER_TYPE_CHANGED}.body`,`${o.a.EVENT_GROUP_RENDERER_TYPE_CHANGED}.body`,`${o.a.EVENT_LABEL_CHANGED}.body`],()=>{this._context.columns[e]=this.createColumn(t,e),this.updateColumn(e)}),Object(c.b)(t)&&!t.getCollapsed()){const r=new s.a(t,n,e,this.ctx.columnPadding);return t.on(`${u.b.EVENT_MULTI_LEVEL_CHANGED}.body`,()=>{r.updateWidthRule(this.style)}),t.on(`${u.b.EVENT_MULTI_LEVEL_CHANGED}.bodyUpdate`,Object(h.f)(()=>this.updateColumn(e),25)),r}return new a.a(t,n,e)}}e.a=b,b.EVENT_WIDTH_CHANGED=v.EVENT_WIDTH_CHANGED,b.EVENT_UPDATE_DATA=v.EVENT_UPDATE_DATA},function(t,e,n){"use strict";var r=n(131),i=n(133),a=n(33);class o extends r.a{constructor(t,e,n,r,...a){super(e,...a),this.header=t,this.tableId=n,this.style=r;const o=this;class s extends i.a{get context(){return o.context}createHeader(t,e){return o.createHeader(t,e)}updateHeader(t,e){return o.updateHeader(t,e)}createCell(t,e,n){return o.createCell(t,e,n)}updateCell(t,e,n){return o.updateCell(t,e,n)}forEachRow(t){return o.forEachRow(t)}}this.cell=new s(this.header,this.style,n,...a)}addColumnMixin(t,e){this.cell.addColumnMixin(t,e)}get width(){return this.context.column.totalHeight}get hidden(){return this.header.classList.contains("loading")}set hidden(t){this.hidden!==t&&(this.header.classList.toggle("loading",t),this.body.classList.toggle("loading",t),this.onVisibilityChanged(!t))}onVisibilityChanged(t){}hide(){this.hidden=!0}show(t,e,n){this.hidden=!1,this.cell.onScrolledHorizontally(t,e,n)}init(){this.hide(),this.cell.init(),super.init()}destroy(){super.destroy(),this.header.remove(),this.style.remove(this.tableId)}onScrolledVertically(t,e,n){return this.hidden?a.a.NONE:super.onScrolledVertically(t,e,n)}onScrolledHorizontally(t,e,n){return this.cell.onScrolledHorizontally(t,e,n)}updateHeaders(){this.cell.updateHeaders()}updateColumnWidths(){const t=this.context;this.style.update(t.defaultRowHeight-t.padding(-1),t.columns,t.column.defaultRowHeight-t.column.padding(-1),t.column.padding,this.tableId)}recreate(t){const e=this.bodyScroller,n=e.scrollLeft;this.cell.recreate(n,e.clientWidth),super.recreate(t),e.scrollLeft=n}clearPool(){super.clearPool(),this.cell.clearPool()}createRow(t,e){this.cell.createRow(t,e)}updateRow(t,e){this.cell.updateRow(t,e)}}e.a=o},function(t,e,n){"use strict";var r=n(17),i=n(132),a=n(33),o=n(63),s=n(64);class l{constructor(t,...e){this.body=t,this.pool=[],this.loadingPool=[],this.loading=new Map,this.visible={first:0,forcedFirst:0,last:-1,forcedLast:-1},this.visibleFirstRowPos=0,this.abortAnimation=(()=>void 0),this.adapter=this.createAdapter(),this.mixins=e.map(t=>new t(this.adapter)),this.fragment=t.ownerDocument.createDocumentFragment()}addMixin(t,e){this.mixins.push(new t(this.adapter,e))}createAdapter(){const t={visible:this.visible,addAtBeginning:this.addAtBeginning.bind(this),addAtBottom:this.addAtBottom.bind(this),removeFromBeginning:this.removeFromBeginning.bind(this),removeFromBottom:this.removeFromBottom.bind(this),updateOffset:this.updateOffset.bind(this),scroller:this.bodyScroller};return Object.defineProperties(t,{visibleFirstRowPos:{get:()=>this.visibleFirstRowPos,enumerable:!0},context:{get:()=>this.context,enumerable:!0}}),t}get bodyScroller(){return this.body.parentElement}init(){const t=this.bodyScroller;let e=t.scrollTop;this.scrollListener=(()=>{const n=t.scrollTop;if(e===n)return;const r=n>e;e=n,this.onScrolledVertically(n,t.clientHeight,r)}),t.addEventListener("scroll",this.scrollListener),this.recreate()}destroy(){this.bodyScroller.removeEventListener("scroll",this.scrollListener),this.body.remove()}static cleanUp(t){t.style.height&&(t.style.height=null)}select(t){let e,n;return this.pool.length>0?(e=this.pool.pop(),n=this.updateRow(e,t)):this.loadingPool.length>0?((e=this.loadingPool.pop()).classList.remove("loading"),n=this.createRow(e,t)):(e=this.body.ownerDocument.createElement("div"),n=this.createRow(e,t)),e.dataset.index=String(t),{item:e,result:n}}selectProxy(){let t;return this.loadingPool.length>0?t=this.loadingPool.pop():(t=this.body.ownerDocument.createElement("div")).classList.add("loading"),t}recycle(t){if(l.cleanUp(t),this.loading.has(t)){this.loading.get(t).abort()}else this.pool.push(t)}proxy(t,e){if(!Object(i.b)(e))return t;const n=e,r=t,a=this.selectProxy();return a.dataset.index=r.dataset.index,a.style.height=r.style.height,this.loading.set(a,n),n.then(t=>{t===i.a?(l.cleanUp(r),this.pool.push(r)):this.body.replaceChild(r,a),this.loading.delete(a),l.cleanUp(a),this.loadingPool.push(a)}),a}create(t){const{item:e,result:n}=this.select(t),{exceptionsLookup:r,padding:i}=this.context;return r.has(t)&&(e.style.height=`${r.get(t)-i(t)}px`),this.proxy(e,n)}removeAll(){const t=Array.from(this.body.children);this.body.innerHTML="",t.forEach(t=>{this.recycle(t)})}update(){const t=this.visible.first,e=this.fragment,n=Array.from(this.body.children);this.body.innerHTML="",n.forEach((n,r)=>{if(this.loading.has(n))return;const i=this.updateRow(n,r+t);e.appendChild(this.proxy(n,i))}),this.body.appendChild(e)}forEachRow(t,e=!1){const n=Array.from(this.body.children),r=this.fragment;e||(this.body.innerHTML=""),n.forEach((n,i)=>{n.classList.contains("loading")||"update_remove"===n.dataset.animation||"hide"===n.dataset.animation||t(n,i+this.visible.first),e||r.appendChild(n)}),e||this.body.appendChild(r)}removeFromBeginning(t,e){return this.remove(t,e,!0)}removeFromBottom(t,e){return this.remove(t,e,!1)}remove(t,e,n){for(let r=t;r<=e;++r){const t=n?this.body.firstChild:this.body.lastChild;t.remove(),this.recycle(t)}}addAtBeginning(t,e){if(t===e)return void this.body.insertBefore(this.create(t),this.body.firstChild);const n=this.fragment;for(let r=t;r<=e;++r)n.appendChild(this.create(r));this.body.insertBefore(n,this.body.firstChild)}addAtBottom(t,e){if(t===e)return void this.body.appendChild(this.create(t));const n=this.fragment;for(let r=t;r<=e;++r)n.appendChild(this.create(r));this.body.appendChild(n)}updateOffset(t){const{totalHeight:e}=this.context;this.visibleFirstRowPos=t,this.body.classList.toggle("odd",this.visible.first%2==1),this.body.style.transform=`translate(0, ${t.toFixed(0)}px)`,this.body.style.height=`${Math.max(1,e-t).toFixed(0)}px`}recreate(t){return this.abortAnimation(),t?this.recreateAnimated(t):this.recreatePure()}recreatePure(){const t=this.context,e=this.bodyScroller;this.updateOffset(0),this.removeAll(),this.clearPool();const{first:n,last:i,firstRowPos:a}=Object(r.c)(e.scrollTop,e.clientHeight,t.defaultRowHeight,t.exceptions,t.numberOfRows);this.visible.first=this.visible.forcedFirst=n,this.visible.last=this.visible.forcedLast=i,n<0?this.updateOffset(0):(this.addAtBottom(n,i),this.updateOffset(a))}recreateAnimated(t){const e=new Map,n=new o.a(t.previous,t.previousKey),i=new o.a(this.context,t.currentKey),a=Object(r.c)(this.bodyScroller.scrollTop,this.bodyScroller.clientHeight,i.context.defaultRowHeight,i.context.exceptions,i.context.numberOfRows);{const t=Array.from(this.body.children),r=Object.assign({},this.visible);n.positions(r.first,Math.min(r.last,r.first+t.length),this.visibleFirstRowPos,(n,r,i)=>{const a=t[n];a&&e.set(r,{n:a,pos:i,i:n})}),this.body.innerHTML=""}this.visible.first=this.visible.forcedFirst=a.first,this.visible.last=this.visible.forcedLast=a.last;const l=this.fragment,u=[];let c=a.firstRowPos;i.positions(a.first,a.last,a.firstRowPos,(t,r,a)=>{let o,d,h=s.a.UPDATE;if(e.has(r)){const i=e.get(r);e.delete(r),o=this.proxy(i.n,this.updateRow(i.n,t)),d={index:i.i,y:i.pos,height:n.exceptionHeightOf(i.i,!0)}}else{const e=n.posByKey(r);o=this.create(t),h=e.index<0?s.a.SHOW:s.a.UPDATE_CREATE,d={index:e.index,y:e.pos>=0?e.pos:a,height:e.index<0?i.exceptionHeightOf(t,!0):n.exceptionHeightOf(e.index,!0)}}u.push({node:o,key:r,mode:h,previous:d,nodeY:c,nodeYCurrentHeight:a,current:{index:t,y:a,height:i.exceptionHeightOf(t)}}),o.style.transform=`translate(0, ${c-a}px)`,c+=d.height+(d.index<0?i.padding(t):n.padding(d.index)),l.appendChild(o)});let d=a.endPos;e.forEach((t,e)=>{const r=i.posByKey(e),a=r.pos>=0?r.pos:t.pos,o=t.n;o.style.transform=`translate(0, ${t.pos-c}px)`,l.appendChild(o);const h=n.exceptionHeightOf(t.i,!0);u.push({node:t.n,key:e,mode:r.index<0?s.a.HIDE:s.a.UPDATE_REMOVE,previous:{index:t.i,y:t.pos,height:h},nodeY:c,nodeYCurrentHeight:d,current:{index:r.index,y:a,height:r.index<0?null:i.exceptionHeightOf(r.index)}}),d+=r.index<0?i.context.defaultRowHeight:i.exceptionHeightOf(r.index,!0)+i.padding(r.index),c+=h+n.padding(t.i)}),this.updateOffset(a.firstRowPos),this.animate(u,t.phases||s.b,n,i,l)}animate(t,e,n,r,i){if(t.length<=0)return void this.body.appendChild(i);let a=-1,o=0;const l=e=>{t.forEach(t=>e.apply(t,n,r))},u=()=>{if(console.assert(t[0].node.offsetTop>=0,"dummy log for forcing dom update"),l(e[o++]),o<e.length){const t=e[o];return void(a=setTimeout(u,t.delay))}const n=this.body.classList;Array.from(n).forEach(t=>{t.startsWith("le-")&&t.endsWith("-animation")&&n.remove(t)}),t.forEach(({node:t,mode:e})=>{e!==s.a.UPDATE_REMOVE&&e!==s.a.HIDE||(t.remove(),t.style.transform=null,this.recycle(t))}),this.abortAnimation=(()=>void 0),a=-1};for(this.abortAnimation=(()=>{a<=0||(clearTimeout(a),a=-1,o=e.length-1,u())});0===e[o].delay;)l(e[o++]);const c=this.body;this.body.appendChild(i),c.classList.add("le-row-animation"),new Set(t.map(t=>t.mode)).forEach(t=>{c.classList.add(`le-${s.a[t].toLowerCase().split("_")[0]}-animation`)}),a=setTimeout(u,e[o].delay)}clearPool(){this.pool.splice(0,this.pool.length)}revalidate(){const t=this.bodyScroller;this.onScrolledVertically(t.scrollTop,t.clientHeight,!0),this.updateOffset(this.visibleFirstRowPos)}onScrolledVertically(t,e,n){const r=this.onScrolledImpl(t,e);return this.mixins.forEach(t=>t.onScrolled(n,r)),r}onScrolledImpl(t,e){const n=this.context,{first:i,last:o,firstRowPos:s}=Object(r.c)(t,e,n.defaultRowHeight,n.exceptions,n.numberOfRows),l=this.visible;if(l.forcedFirst=i,l.forcedLast=o,i-l.first>=0&&o-l.last<=0)return a.a.NONE;let u=a.a.PARTIAL;return i>l.last||o<l.first?(this.removeAll(),this.addAtBottom(i,o),u=a.a.ALL):i<l.first?(this.removeFromBottom(o+1,l.last),this.addAtBeginning(i,l.first-1)):(this.removeFromBeginning(l.first,i-1),this.addAtBottom(l.last+1,o)),l.first=i,l.last=o,this.updateOffset(s),u}}e.a=l},function(t,e,n){"use strict";e.b=function(t){return void 0!==t&&null!==t&&t&&"function"==typeof t.then&&"function"==typeof t.abort};const r=Symbol("aborted");e.a=r},function(t,e,n){"use strict";function r(t,e,n){const r=Array.from(t.children);if(r.length<=1)return;const i=r.map(t=>n.find(e=>e.id===t.dataset.id));console.assert(i.every(t=>Boolean(t)),"all columns must exist",e),console.assert(i.every((t,e)=>0===e||t.index>=i[e-1].index),"all columns in ascending order",e),console.assert(new Set(i).size===i.length,"unique columns",i)}var i=n(17),a=n(33),o=n(42);class s{constructor(t,e,n,...r){this.header=t,this.style=e,this.tableId=n,this.cellPool=[],this.visibleColumns={frozen:[],first:0,forcedFirst:0,last:-1,forcedLast:-1},this.visibleFirstColumnPos=0,this.columnAdapter=this.createColumnAdapter(),this.columnMixins=r.map(t=>new t(this.columnAdapter)),this.columnFragment=t.ownerDocument.createDocumentFragment()}get headerScroller(){return this.header.parentElement}addColumnMixin(t,e){this.columnMixins.push(new t(this.columnAdapter,e))}createColumnAdapter(){const t={visible:this.visibleColumns,addAtBeginning:this.addColumnAtStart.bind(this),addAtBottom:this.addColumnAtEnd.bind(this),removeFromBeginning:this.removeColumnFromStart.bind(this),removeFromBottom:this.removeColumnFromEnd.bind(this),updateOffset:this.updateColumnOffset.bind(this),scroller:this.headerScroller,syncFrozen:this.syncFrozen.bind(this)};return Object.defineProperties(t,{visibleFirstRowPos:{get:()=>this.visibleFirstColumnPos,enumerable:!0},context:{get:()=>this.context.column,enumerable:!0}}),t}init(){const t=this.context;this.style.update(t.defaultRowHeight-t.padding(-1),t.columns,t.column.defaultRowHeight-t.column.padding(-1),t.column.padding,this.tableId),t.columns.forEach(()=>{this.cellPool.push([])})}onScrolledHorizontally(t,e,n){const r=this.onScrolledHorizontallyImpl(t,e);return this.columnMixins.forEach(t=>t.onScrolled(n,r)),r}removeColumnFromStart(t,e,n=this.visibleColumns.frozen.length){this.forEachRow(r=>{this.removeCellFromStart(r,t,e,n)})}removeCellFromStart(t,e,n,r){for(let i=e;i<=n;++i){const e=0===r?t.firstElementChild:t.children[r];e.remove(),this.recycleCell(e,i)}}removeColumnFromEnd(t,e){this.forEachRow(n=>{this.removeCellFromEnd(n,t,e)})}removeCellFromEnd(t,e,n){for(let r=n;r>=e;--r){const e=t.lastElementChild;e.remove(),this.recycleCell(e,r)}}removeFrozenCells(t,e,n){for(const r of e){const e=t.children[n];e.remove(),this.recycleCell(e,r)}}removeFrozenColumns(t,e){this.forEachRow(n=>{this.removeFrozenCells(n,t,e)})}removeAllColumns(t){this.forEachRow(e=>{this.removeAllCells(e,t)})}removeAllCells(t,e,n=this.visibleColumns.first){const r=Array.from(t.children),i=this.visibleColumns.frozen;if(t.innerHTML="",e||0===i.length)for(const t of i)this.recycleCell(r.shift(),t);else for(const e of i)t.appendChild(r.shift());r.forEach((t,e)=>{this.recycleCell(t,e+n)})}selectCell(t,e,n){const r=this.cellPool[e],i=n[e];if(r.length>0){const e=r.pop(),n=this.updateCell(e,t,i);return n&&n!==e&&Object(o.b)(n,i),n||e}const a=this.createCell(this.header.ownerDocument,t,i);return Object(o.b)(a,i),a}recycleCell(t,e){this.cellPool[e].push(t)}addColumnAtStart(t,e,n=this.visibleColumns.frozen.length){const{columns:r}=this.context;this.forEachRow((i,a)=>{this.addCellAtStart(i,a,t,e,n,r)})}addCellAtStart(t,e,n,r,i,a){for(let o=r;o>=n;--o){const n=this.selectCell(e,o,a);t.insertBefore(n,i>0?t.children[i]:t.firstChild)}}insertFrozenCells(t,e,n,r,i){const a=t.children[r];for(const r of n){const n=this.selectCell(e,r,i);a?t.insertBefore(n,a):t.appendChild(n)}}insertFrozenColumns(t,e){const{columns:n}=this.context;this.forEachRow((r,i)=>{this.insertFrozenCells(r,i,t,e,n)})}addColumnAtEnd(t,e){const{columns:n}=this.context;this.forEachRow((r,i)=>{this.addCellAtEnd(r,i,t,e,n)})}verifyRows(){const{columns:t}=this.context;this.forEachRow((e,n)=>r(e,n,t))}addCellAtEnd(t,e,n,r,i){for(let a=n;a<=r;++a){const n=this.selectCell(e,a,i);t.appendChild(n)}}updateHeaders(){const{columns:t}=this.context;Array.from(this.header.children).forEach((e,n)=>{this.updateHeader(e,t[n])})}recreate(t,e){const n=this.context;void 0===n.hasFrozenColumns&&(n.hasFrozenColumns=n.columns.some(t=>t.frozen)),this.style.update(n.defaultRowHeight-n.padding(-1),n.columns,n.column.defaultRowHeight-n.column.padding(-1),n.column.padding,this.tableId),this.clearPool();for(let t=this.cellPool.length;t<n.columns.length;++t)this.cellPool.push([]);{const t=this.columnFragment,e=t.ownerDocument;this.header.innerHTML="",n.columns.forEach(n=>{const r=this.createHeader(e,n);Object(o.b)(r,n),t.appendChild(r)}),this.header.appendChild(t)}const{first:r,last:a,firstRowPos:s}=Object(i.c)(t,e,n.column.defaultRowHeight,n.column.exceptions,n.column.numberOfRows);if(this.visibleColumns.first=this.visibleColumns.forcedFirst=r,this.visibleColumns.last=this.visibleColumns.forcedLast=a,n.hasFrozenColumns){const{target:t}=Object(i.e)([],n.columns,r);this.visibleColumns.frozen=t}this.updateColumnOffset(s)}clearPool(){this.cellPool.forEach(t=>t.splice(0,t.length))}updateColumnOffset(t){this.visibleFirstColumnPos=t}createRow(t,e){const{columns:n,hasFrozenColumns:r}=this.context,i=this.visibleColumns;if(r)for(const r of i.frozen){const i=this.selectCell(e,r,n);t.appendChild(i)}for(let r=i.first;r<=i.last;++r){const i=this.selectCell(e,r,n);t.appendChild(i)}}updateRow(t,e){const{columns:n,hasFrozenColumns:r}=this.context,a=this.visibleColumns,s=Array.from(t.children);switch(s.length){case 0:r&&this.insertFrozenCells(t,e,a.frozen,0,n),this.addCellAtEnd(t,e,a.first,a.last,n);break;case 1:const l=s[0],u=l.dataset.id,c=n.findIndex(t=>t.id===u);t.removeChild(l),this.recycleCell(l,c),r&&this.insertFrozenCells(t,e,a.frozen,0,n),this.addCellAtEnd(t,e,a.first,a.last,n);break;default:if(r){const r=[];for(const t of s){const e=t.dataset.id,i=n.findIndex(t=>t.id===e);if(!n[i].frozen)break;r.push(i)}const{common:l,removed:u,added:c}=Object(i.a)(r,a.frozen);s.slice(0,l).forEach((i,a)=>{const s=n[r[a]],l=this.updateCell(i,e,s);l&&l!==i&&(Object(o.b)(l,s),t.replaceChild(l,i))}),this.removeFrozenCells(t,u,l),this.insertFrozenCells(t,e,c,l,n),s.splice(0,r.length)}const d=s[0].dataset.id,h=s[s.length-1].dataset.id,p=n.findIndex(t=>t.id===d),f=n.findIndex(t=>t.id===h),g=a.frozen.length;p===a.first&&f===a.last?s.forEach((r,i)=>{const s=n[i+a.first],l=this.updateCell(r,e,s);l&&l!==r&&(Object(o.b)(l,s),t.replaceChild(l,r))}):a.last>p||a.first<f?(this.removeAllCells(t,!1,p),this.addCellAtStart(t,e,a.first,a.last,g,n)):a.first<p?(this.removeCellFromEnd(t,a.last+1,p),this.addCellAtStart(t,e,a.first,p-1,g,n)):(this.removeCellFromStart(t,p,a.first-1,g),this.addCellAtEnd(t,e,f+1,a.last,n))}}syncFrozen(t){const{columns:e,hasFrozenColumns:n}=this.context,r=this.visibleColumns;if(!n)return 0;if(0===t)return r.frozen.length>0&&(this.removeFrozenColumns(r.frozen,0),r.frozen=[]),0;const a=r.frozen.length,{target:o,added:s,removed:l}=Object(i.e)(r.frozen,e,t);return l.length>0&&this.removeFrozenColumns(l,a-l.length),s.length>0&&this.insertFrozenColumns(s,a-l.length),r.frozen=o,o.length}onScrolledHorizontallyImpl(t,e){const{column:n}=this.context,{first:r,last:o,firstRowPos:s}=Object(i.c)(t,e,n.defaultRowHeight,n.exceptions,n.numberOfRows),l=this.visibleColumns;if(l.forcedFirst=r,l.forcedLast=o,r-l.first>=0&&o-l.last<=0)return a.a.NONE;let u=a.a.PARTIAL;const c=this.syncFrozen(r);return r>l.last||o<l.first?(this.removeAllColumns(!1),this.addColumnAtEnd(r,o),u=a.a.ALL):r<l.first?(this.removeColumnFromEnd(o+1,l.last),this.addColumnAtStart(r,l.first-1,c)):(this.removeColumnFromStart(l.first,r-1,c),this.addColumnAtEnd(l.last+1,o)),l.first=r,l.last=o,this.updateColumnOffset(s),u}}e.a=s},function(t,e,n){"use strict";var r=n(18),i=n(65),a=n(0),o=n(41),s=n(40);class l extends i.a{constructor(t,e,n,r){super(t,e,n),this.columnPadding=r}get mc(){return this.c}get width(){return this.c.getWidth()+this.columnPadding*this.mc.length}createHeader(t,e){const n=super.createHeader(t,e),i=t.createElement("div");i.classList.add("lu-nested"),i.classList.add(Object(s.c)(this.c)),n.appendChild(i);const a=this.mc;return a.getCollapsed()?n:(a.children.forEach((n,a)=>{const s=Object(r.c)(n,t,e);s.style.marginLeft=a>0?`${2*this.columnPadding}px`:null,s.classList.add("lu-header"),o.b?s.style.msGridColumn=(a+1).toString():s.style.gridColumnStart=(a+1).toString(),i.appendChild(s)}),this.updateNested(i,e),n)}updateHeader(t,e){super.updateHeader(t,e);const n=t.querySelector(".lu-nested");n&&this.updateNested(n,e)}updateWidthRule(t){const e=this.mc,n=this.width,r=e.children.map(t=>`${Object(a.q)(100*t.getWidth()/n,2)}%`),i=Object(s.c)(this.c);return t.updateRule(`stacked-${this.c.id}`,`.lineup-engine .${i} {\n      display: ${o.b?"-ms-grid":"grid"};\n      ${o.b?"-ms-grid-columns":"grid-template-columns"}: ${r.join(" ")};\n    }`),i}updateNested(t,e){if(this.mc.getCollapsed())return;const n=this.mc.children,i=Array.from(t.children);n.forEach((t,n)=>{const a=i[n];a.className=`lu-header ${t.cssClass?` ${t.cssClass}`:""}${this.c.headerCssClass}${this.c.isFiltered()?" lu-filtered":""}`,Object(r.j)(a,t,e)})}}e.a=l},function(t,e,n){"use strict";var r=n(0),i=n(54),a=n(22);class o extends r.a{constructor(t,e){super(),this.ctx=t,this.body=e,this.start=null,this.startNode=null,this.endNode=null;const n=e.parentElement.parentElement;let r=n.querySelector("hr");r||(r=n.ownerDocument.createElement("hr"),n.appendChild(r)),this.hr=r,e.addEventListener("mousemove",t=>{this.start&&this.showHint(this.start,t)}),e.addEventListener("mousedown",t=>{const e=n.getBoundingClientRect();this.start={x:t.x,y:t.y,xShift:e.left,yShift:e.top}});const i=t=>{this.select(t.ctrlKey),this.start=this.startNode=this.endNode=null,this.body.classList.remove("lu-selection-active"),this.hr.classList.remove("lu-selection-active")};e.addEventListener("mouseup",i),e.addEventListener("mouseleave",i)}createEventList(){return super.createEventList().concat([o.EVENT_SELECT_RANGE])}select(t){if(!this.start||!this.startNode||!this.endNode)return;if(this.startNode===this.endNode)return;const e=parseInt(this.startNode.dataset.index,10),n=parseInt(this.endNode.dataset.index,10),r=Math.min(e,n),i=Math.max(e,n);r!==i&&this.fire(o.EVENT_SELECT_RANGE,r,i,t)}showHint(t,e){this.start=t;const n=t.y,r=e.y,i=Math.abs(n-r)>o.MIN_DISTANCE;this.body.classList.toggle("lu-selection-active",i),this.hr.classList.toggle("lu-selection-active",i),this.hr.style.transform=`translate(${t.x-t.xShift}px,${n-t.yShift}px)scale(1,${Math.abs(r-n)})rotate(${r>n?90:-90}deg)`}remove(t){t.onclick=t.onmousedown=t.onmouseup=void 0}add(t){t.onclick=(e=>{const n=parseInt(t.dataset.dataIndex,10);this.ctx.provider.toggleSelection(n,e.ctrlKey)}),t.onmousedown=(()=>{this.startNode=t}),t.onmouseup=(()=>{this.start&&(this.endNode=t)})}selectRange(t,e=!1){const n=new i.a(e?this.ctx.provider.getSelection():[]),r=t=>{n.has(t)?n.delete(t):n.add(t)};t.forEach(t=>{Object(a.a)(t)?t.rows.forEach(t=>r(t.dataIndex)):r(t.dataIndex)}),this.ctx.provider.setSelection(Array.from(n))}updateState(t,e){this.ctx.provider.isSelected(e)?t.classList.add("lu-selected"):t.classList.remove("lu-selected")}update(t,e){const n=parseInt(t.dataset.dataIndex,10);e.has(n)?t.classList.add("lu-selected"):t.classList.remove("lu-selected")}}e.a=o,o.EVENT_SELECT_RANGE="selectRange",o.MIN_DISTANCE=10},function(t,e,n){"use strict";function r(t){const e=new Map,n=new Map;return t.forEach((t,r)=>{Object(a.a)(t)?t.rows.forEach(t=>e.set(t.dataIndex,r)):t.group&&0===t.relativeIndex&&n.set(t.group.name,r)}),{item2groupIndex:e,group2firstItemIndex:n}}function i(t){return Object(a.a)(t)?t.name:t.dataIndex.toString()}e.a=function(t,e,n){const s=t=>i(e[t]),l=t=>i(n[t]);if(e.reduce((t,e)=>t+(Object(a.a)(e)?1:0),0)===n.reduce((t,e)=>t+(Object(a.a)(e)?1:0),0))return{currentKey:l,previous:t,previousKey:s};let u,c;const d=[Object.assign({},o.b[0],{apply(t,i){o.b[0].apply(t),t.mode===o.a.SHOW&&(t.node.style.transform=`translate(0, ${((t,i,o)=>{u||(u=r(e));const l=n[t],c=Object(a.a)(l)?u.group2firstItemIndex.get(l.name):u.item2groupIndex.get(l.dataIndex);if(void 0===c)return o;const d=i.posByKey(s(c));return d.pos>=0?d.pos:o})(t.current.index,i,t.previous.y)-t.nodeY}px)`)}}),Object.assign({},o.b[1],{apply(t,i,s){o.b[1].apply(t),t.mode===o.a.HIDE&&(t.node.style.transform=`translate(0, ${((t,i,o)=>{c||(c=r(n));const s=e[t],u=Object(a.a)(s)?c.group2firstItemIndex.get(s.name):c.item2groupIndex.get(s.dataIndex);if(void 0===u)return o;const d=i.posByKey(l(u));return d.pos>=0?d.pos:o})(t.previous.index,s,t.current.y)-t.nodeY}px)`)}}),o.b[o.b.length-1]];return{previous:t,previousKey:s,currentKey:l,phases:d}};var a=n(22),o=n(64)},function(t,e,n){"use strict";var r=n(0),i=n(138),a=n(139),o=n(32),s=n(66);class l extends r.a{constructor(t,e,n,l){super(),this.config=n,this.header=new s.a(t,e,Object(r.p)({},this.config.header,{idPrefix:this.config.idPrefix,manipulative:this.config.manipulative,summary:this.config.renderingOptions.summary,freezeCols:this.config.body.freezeCols})),e.insertAdjacentHTML("beforeend",'<div class="lu-body-wrapper"></div>');const u=e.lastElementChild;{const e=Object(r.p)({},this.config.body,{meanLine:this.config.renderingOptions.meanLine,animation:this.config.renderingOptions.animation,stacked:this.config.renderingOptions.stacked,idPrefix:this.config.idPrefix,renderers:this.config.renderers});this.body="canvas"===l?new a.a(t,u,this.slice.bind(this),e):new i.a(t,u,this.slice.bind(this),e)}this.body.histCache=this.header.sharedHistCache,this.forward(this.body,o.a.EVENT_HOVER_CHANGED),this.forward(this.body,o.a.EVENT_RENDER_FINISHED),this.config.body.visibleRowsOnly&&(this.contentScroller=new r.b(u,this.body.node,{pageSize:this.config.body.backupScrollRows*this.config.body.rowHeight,backupRows:this.config.body.backupScrollRows,rowHeight:this.config.body.rowHeight}),this.contentScroller.on(r.b.EVENT_SCROLL,(t,e)=>{this.header.$node.style("margin-left",`${-e}px`),this.config.body.freezeCols>0&&(this.header.updateFreeze(e),this.body.updateFreeze(e))}),this.contentScroller.on(r.b.EVENT_REDRAW,t=>this.body.scrolled(t)))}createEventList(){return[o.a.EVENT_RENDER_FINISHED,o.a.EVENT_HOVER_CHANGED]}slice(t,e,n){return this.contentScroller?this.contentScroller.select(t,e,n):{from:t,to:e}}destroy(){this.contentScroller&&this.contentScroller.destroy()}changeDataStorage(t){this.header.changeDataStorage(t),this.body.changeDataStorage(t)}scrollIntoView(t,e){if(this.contentScroller)this.contentScroller.scrollIntoView(0,t,e,t=>t*this.config.body.rowHeight);else{this.body.node.parentElement.scrollTop=e*this.config.body.rowHeight}}fakeHover(t){this.body.fakeHover(t)}update(){this.header.update(),this.body.update()}setBodyOption(t,e){this.body.setOption(t,e),this.body.update()}}e.a=l},function(t,e,n){"use strict";var r=n(3),i=(n.n(r),n(0)),a=n(23),o=n(32);class s extends o.a{constructor(t,e,n,r={}){super(t,e,n,"div",r),this.currentFreezeLeft=0}animated(t){return this.options.animationDuration>0&&this.options.animation?t.transition().duration(this.options.animationDuration):t}renderRankings(t,e,n){const a=this,o=t.selectAll("div.ranking").data(e,t=>t.id);o.enter().append("div").attr("class","ranking").style("left",t=>`${t.shift}px`),this.animated(o).style("left",t=>`${t.shift}px`);const s=[],l=o.selectAll("div.group").data(t=>t.groups,t=>t.group.name),u=l.enter().append("div").attr("class","group"),c=u.append("div").attr("class","aggregate").attr("data-agg","group");c.append("div").attr("class","cols"),c.append("div").attr("class","frozen").style("transform",`translate${this.currentFreezeLeft}px,0)`),u.append("div").attr("class","rows").attr("data-agg","detail"),u.append("div").attr("class","meanlines"),u.style("top",t=>`${t.y}px`);const d=(t,o,u)=>{t.selectAll("div.aggregate .cols > *, div.aggregate .frozen > *").remove(),t.select("div.aggregate").style("height",null);const c=t.select("div.rows").selectAll("div.row").data(u.order,String),d=c.enter().append("div").attr("class","row");d.style("top",(t,e)=>`${n.cellPrevY(e)}px`),d.on("mouseenter",t=>this.mouseOver(t,!0)).on("mouseleave",t=>this.mouseOver(t,!1)).on("click",t=>this.select(t,r.event.ctrlKey));const h=(t,e)=>{Object(i.o)(t,e,"detail")};d.append("div").attr("class","frozen").style("transform",`translate${this.currentFreezeLeft}px,0)`).each(function(){h(this,o.frozen)}),d.append("div").attr("class","cols").each(function(){h(this,o.columns)}),c.each(function(t,e){const n=a.data.isSelected(t);Object(i.c)(this,{class:`row${e%2==0?" even":""}${n?" selected":""}`,"data-data-index":t})}),this.animated(c).style("top",(t,e)=>`${n.cellY(e)}px`).style("height",`${this.options.rowHeight}px`);const p=(t,e,n,r)=>{const a=e=>{Object(i.o)(t,r,"detail"),r.forEach((i,a)=>{const o=t.childNodes[a];o.style.width=`${a<r.length-2?r[a+1].shift-i.shift:i.column.getWidth()}px`,i.renderer.update(o,e,n,u.group)})},o=e.data[n];return o instanceof Promise?o.then(a):a(o)},f=0===e.length||0===e[0].frozen.length?0:r.max(e[0].frozen,t=>t.shift+t.column.getWidth())+a.options.columnPadding;c.select("div.cols").each(function(t,e){this.style.marginLeft=`${f}px`,s.push(p(this,u,e,o.columns))}),c.select("div.frozen").each(function(t,e){this.style.width=`${f}px`,s.push(p(this,u,e,o.frozen))}),c.exit().remove();{const t=l.select("div.meanlines").selectAll("div.meanline").data(o.columns.filter(t=>this.showMeanLine(t.column)));t.enter().append("div").attr("class","meanline"),t.each(function(t){const e=a.histCache.get(t.column.id),n=r.select(this);if(!e)return;const i=e=>{const r=t.shift+t.column.getWidth()*e.mean;n.style("left",`${isNaN(r)?0:r}px`).style("height",`${u.height}px`)};e instanceof Promise?e.then(i):i(e)}),t.exit().remove()}},h=(t,n,a)=>{t.selectAll("div.rows > *, div.meanlines > *").remove();const o=t.select("div.aggregate").style("height",`${a.height}px`),l=(t,e,n)=>(Object(i.o)(t,n,"group"),Promise.all(e.data).then(r=>Promise.all(n.map((i,a)=>Promise.resolve(this.histCache.get(i.column.id)).then(o=>{const s=t.childNodes[a];s.style.width=`${a<n.length-2?n[a+1].shift-i.shift:i.column.getWidth()}px`,i.groupRenderer.update(s,e.group,r,o)}))))),u=0===e.length||0===e[0].frozen.length?0:r.max(e[0].frozen,t=>t.shift+t.column.getWidth());o.select("div.cols").each(function(){this.style.marginLeft=`${u}px`,s.push(l(this,a,n.columns))}),o.select("div.frozen").each(function(){this.style.width=`${u}px`,s.push(l(this,a,n.frozen))})};return l.each(function(t,n,i){(t.aggregate?h:d)(r.select(this),e[i],t)}),this.animated(l).style("top",t=>`${t.y}px`),l.exit().remove(),o.exit().remove(),Promise.all(s)}select(t,e=!1){const n=super.select(t,e);return this.$node.selectAll(`[data-data-index="${t}"]`).classed("selected",n),n}drawSelection(){const t=this.data.getSelection();if(Object(i.l)(this.node,".selected",t=>t.classList.remove("selected")),0===t.length)return;const e=t.map(t=>`[data-data-index='${t}']`).join(",");Object(i.l)(this.node,e,t=>t.classList.add("selected"))}mouseOver(t,e=!0){function n(t){t.classList.add("hover")}super.mouseOver(t,e),Object(i.l)(this.node,".hover",t=>t.classList.remove("hover")),e&&Object(i.l)(this.node,`[data-data-index='${t}']`,n)}renderSlopeGraphs(t,e,n,r){const i=e.slice(1).map((t,n)=>({left:e[n].groups[0].order,left_i:n,right:t.groups[0].order,right_i:n+1})),a=t.selectAll("svg.slopegraph").data(i);a.enter().append("svg").attr("class","slopegraph"),a.attr("width",this.options.slopeWidth).attr("height",r).style("left",(t,n)=>`${e[n+1].shift-this.options.slopeWidth}px`);const o=a.selectAll("line.slope").data(t=>{const e=new Map;return t.right.forEach((t,n)=>e.set(t,n)),t.left.map((t,n)=>({dataIndex:t,lpos:n,rpos:e.get(t)})).filter(t=>null!=t.rpos)});o.enter().append("line").attr({class:"slope",x2:this.options.slopeWidth}).on("mouseenter",t=>this.mouseOver(t.dataIndex,!0)).on("mouseleave",t=>this.mouseOver(t.dataIndex,!1)),o.attr("data-data-index",t=>t.dataIndex);const s=t=>{const e=n.cellY(t);return e+.5*(n.cellY(t+1)-e)};o.attr({y1:t=>s(t.lpos),y2:t=>s(t.rpos)}),o.exit().remove(),a.exit().remove()}updateFreeze(t){Object(i.l)(this.node,"div.row .frozen",e=>{e.style.transform=`translate(${t}px,0px)`}),this.currentFreezeLeft=t}createContextImpl(t,e){return this.createContext(t,e,a.createDOM,a.createDOMGroup)}updateImpl(t,e,n,r){this.node.style.width=`${Math.max(0,n)}px`,this.node.style.height=`${Math.max(0,r)}px`;let i=this.$node.select("div.body");return i.empty()&&(i=this.$node.append("div").classed("body",!0)),this.renderSlopeGraphs(i,t,e,r),this.renderRankings(i,t,e)}}e.a=s},function(t,e,n){"use strict";var r=n(3),i=(n.n(r),n(0)),a=n(20),o=n(23),s=n(32);class l extends s.a{constructor(t,e,n,r={}){super(t,e,n,"div",Object(i.p)({},l.CUSTOM_OPTIONS,r)),this.currentFreezeLeft=0,this.currentHover=-1,this.lastShifts=[],this.$node.append("canvas"),this.initInteraction()}columnUnderMouse(t){for(const e of this.lastShifts)if(e.shift<=t&&t<e.shift+e.column.getWidth())return e.column;return null}rowUnderMouse(t){const e=this.options.rowHeight;return Math.floor((t+1)/e)}itemUnderMouse(t){const e=this.rowUnderMouse(t[1]);if(e<0)return null;const n=this.columnUnderMouse(t[0]);if(null===n)return null;return{dataIndex:n.findMyRanker().getOrder()[e],column:n}}initInteraction(){this.$node.on("selectstart",()=>r.event.preventDefault()),this.$node.on("mousemove",()=>{const t=Object(r.mouse)(this.node),e=this.itemUnderMouse(t);this.mouseOver(e?e.dataIndex:-1)}),this.$node.on("mouseenter",()=>{this.mouseOver(-1,!1)}),this.$node.on("mouseleave",()=>{this.mouseOver(-1,!1)}),this.$node.on("click",()=>{const t=Object(r.mouse)(this.node),e=this.itemUnderMouse(t);e&&this.select(e.dataIndex,r.event.ctrlKey||e.column instanceof a.b)})}style(t){return(this.options.style||{})[t]}select(t,e=!1){const n=super.select(t,e);return this.update(),n}drawSelection(){this.update()}updateFreeze(t){this.currentFreezeLeft=t,this.update()}mouseOver(t,e=!0){e!==(this.currentHover===t)&&(this.currentHover=t,super.mouseOver(t,t>=0),(!e||t<0)&&Object(i.n)(this.$node.node()),this.update())}isHovered(t){return this.currentHover===t}renderRow(t,e,n,r,i,a){const o=r.dataIndex;let s=n.shift;const l=e.cellY(i)+a.y;t.translate(s,l),i%2==0&&(t.fillStyle=this.style("bg"),t.fillRect(0,0,n.width,e.rowHeight(i)),t.fillStyle=this.style("text"));this.data.isSelected(o)?(t.strokeStyle=this.style("selection"),t.strokeRect(0,0,n.width,e.rowHeight(i))):this.isHovered(o)&&(t.strokeStyle=this.style("hover"),t.strokeRect(0,0,n.width,e.rowHeight(i))),t.save();const u=this.currentFreezeLeft<n.shift?0:Math.min(this.currentFreezeLeft-n.shift,n.width-n.frozenWidth);n.frozenWidth>0&&u>0&&(t.rect(s+u+n.frozenWidth,0,n.width,e.rowHeight(i)),t.clip()),n.columns.forEach(e=>{t.save(),t.translate(e.shift,0),e.renderer(t,r,i,s+e.shift,l,a.group),t.restore()}),t.restore(),t.translate(u,0),s+=u,n.frozen.forEach(e=>{t.save(),t.translate(e.shift,0),e.renderer(t,r,i,s+e.shift,l,a),t.restore()}),t.translate(-s,-l)}renderMeanlines(t,e,n,r){const i=e.columns.filter(t=>this.showMeanLine(t.column));return Promise.all(i.map(i=>{const a=this.histCache.get(i.column.id);if(a)return Promise.resolve(a).then(a=>{const o=e.shift+i.shift+i.column.getWidth()*a.mean;isNaN(o)||(t.strokeStyle=this.style("meanLine"),t.beginPath(),t.moveTo(o,n),t.lineTo(o,n+r),t.stroke())})}))}renderGroup(t,e,n,r,i){let a=e.shift;const o=n.y;t.translate(a,o),t.save();const s=this.currentFreezeLeft<e.shift?0:Math.min(this.currentFreezeLeft-e.shift,e.width-e.frozenWidth);e.frozenWidth>0&&s>0&&(t.rect(a+s+e.frozenWidth,0,e.width,n.height),t.clip()),e.columns.forEach(e=>{t.save(),t.translate(e.shift,0),e.groupRenderer(t,n.group,r,a+e.shift,o,i.get(e.column.id)),t.restore()}),t.restore(),t.translate(s,0),a+=s,e.frozen.forEach(e=>{t.save(),t.translate(e.shift,0),e.groupRenderer(t,n.group,r,a+e.shift,o,i.get(e.column.id)),t.restore()}),t.translate(-a,-o)}renderRankings(t,e,n){const r=this.renderRow.bind(this,t,n),i=this.renderGroup.bind(this,t),a=Promise.all.bind(Promise);return a(e.map(e=>{let n;return a(e.groups.map(o=>{if(o.aggregate)return null==n&&(n=this.resolveHistMap(e)),Promise.all([a(o.data),n]).then(t=>{const n=t[0],r=t[1];return i(e,o,n,r)});const s=o.data;return a(s.map((t,n)=>Promise.resolve(t).then(t=>r(e,t,n,o)))).then(()=>this.renderMeanlines(t,e,o.y,o.height))}))}))}renderSlopeGraphs(t,e,n){const r=e.slice(1).map((t,n)=>({left:e[n].groups[0].order,left_i:n,right:t.groups[0].order,right_i:n+1}));t.save(),t.strokeStyle=this.style("slope"),r.forEach((r,i)=>{t.save(),t.translate(e[i+1].shift-this.options.slopeWidth,0);const a=new Map;r.right.forEach((t,e)=>{a.set(t,e)});r.left.map((t,e)=>({dataIndex:t,lpos:e,rpos:a.get(t)})).filter(t=>null!=t.rpos).forEach(e=>{const r=this.data.isSelected(e.dataIndex),i=this.isHovered(e.dataIndex);r?t.strokeStyle=this.style("selection"):i&&(t.strokeStyle=this.style("hover")),t.beginPath(),t.moveTo(0,.5*n.rowHeight(e.lpos)+n.cellY(e.lpos)),t.lineTo(this.options.slopeWidth,.5*n.rowHeight(e.rpos)+n.cellY(e.rpos)),t.stroke(),(r||i)&&(t.strokeStyle=this.style("slope"))}),t.restore()}),t.restore()}createContextImpl(t,e){const n=this.createContext(t,e,o.createCanvas,o.createCanvasGroup);return n.hovered=this.isHovered.bind(this),n.groupHovered=(()=>!1),n.selected=(t=>this.data.isSelected(t)),n.bodyDOMElement=this.$node.node(),n.rowHeight=(()=>this.options.rowHeight),n.groupHeight=(()=>this.options.groupHeight),n.colWidth=(t=>t.getWidth()),n}computeShifts(t){const e=[];return t.forEach(t=>{const n=t.shift;e.push(...t.frozen.map(t=>({column:t.column,shift:t.shift+n+this.currentFreezeLeft}))),e.push(...t.columns.map(t=>({column:t.column,shift:t.shift+n})))}),e}updateImpl(t,e,n,r){const a=this.$node.select("canvas"),o=Math.max(e.cellY(0)-20,0),s=Math.min(Math.max(...t.map(t=>t.height))+20,r);this.$node.style({width:`${Math.max(0,n)}px`,height:`${r}px`}),a.attr({width:Math.max(0,n),height:s-o}).style("margin-top",`${o}px`),this.lastShifts=this.computeShifts(t);const l=a.node().getContext("2d");return l.save(),l.font=this.style("font"),l.textBaseline="top",l.fillStyle=this.style("text"),l.clearRect(0,0,l.canvas.width,l.canvas.height),e.textHints=Object(i.e)(l,this.style("font")),l.translate(0,-o),this.renderSlopeGraphs(l,t,e),this.renderRankings(l,t,e).then(()=>{l.restore()})}}e.a=l,l.CUSTOM_OPTIONS={style:{text:"black",font:'10pt "Helvetica Neue", Helvetica, Arial, sans-serif',slope:"darkgray",link:"blue",selection:"#ffa500",hover:"#e5e5e5",bg:"#f7f7f7",meanLine:"darkgray",histogram:"lightgray",boxplot:{box:"#e0e0e0",stroke:"black",sortIndicator:"#ffa500"},upset:{circle:"black",inactiveOpacity:.1,stroke:"black"}}}},function(t,e,n){"use strict";function r(t,e){return Object(i.a)(t)?Object(a.b)(e):Object(a.c)(e)}var i=n(22),a=n(141);const o=18,s=1,l=o,u=40,c=o+5,d={name:"NotSpacefillingNotProportional",apply:()=>({item:o,group:u}),levelOfDetail:r};e.a=d;const h={name:"SpacefillingNotProportional",apply:(t,e,n)=>{const{violation:r,height:d}=function(t,e,n){const r=e-c,d=t.filter(t=>!Object(i.a)(t)),h=t.length-d.length,p=d.reduce((t,e)=>t+("last"===e.meta||"first last"===e.meta?1:0),0),f=d.reduce((t,e)=>t+(n.has(e.dataIndex)?1:0),0),g=d.length-f,m=h+p;if(g<=0)return{height:o,violation:""};const v=(r-h*u-m*a.a-f*o)/g;return v<s?{height:s,violation:"Not possible to fit all rows on the screen. Set filters or aggregate groups to make it fit again."}:v>l?{height:l,violation:""}:{height:v,violation:""}}(t,e,n);return{item:t=>n.has(t.dataIndex)?o:d,group:u,violation:r}},levelOfDetail:r};e.b=h},function(t,e,n){"use strict";e.b=function(t){return t>=35?"high":t>=15?"medium":"low"},e.c=function(t){return t>=18?"high":t>=10?"medium":"low"};e.a=5},,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createLocalStorage=function(t,e,n={}){return new a.LocalDataProvider(t,e,n)},e.createLineUp=function(t,e,n={}){return new o.a(e,t,n)},e.createTaggle=function(t,e,n={}){return new s.a(e,t,n)};var r=n(147),i=(n.n(r),n(12)),a=n(53),o=n(70),s=n(153),l=n(0);n.d(e,"deriveColors",function(){return l.g}),n.d(e,"deriveColumnDescriptions",function(){return a.deriveColumnDescriptions});const u=i;e.model=u},function(t,e,n){var r=n(148);"string"==typeof r&&(r=[[t.i,r,""]]);var i={};i.transform=void 0;n(73)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(71)(void 0)).push([t.i,'.lu{position:relative;display:flex;flex-direction:column;align-items:stretch;align-content:stretch}.lu div.lu-header{flex:0 0 auto;position:relative;z-index:1;overflow-x:hidden}.lu div.lu-body-wrapper{flex:1 1 auto;position:relative;overflow:auto}.lu-pool{position:relative}.lineup-engine [aria-hidden=true],.lu-header [aria-hidden=true],.lu-pool [aria-hidden=true],.lu-popup2 [aria-hidden=true],.lu-side-panel [aria-hidden=true],.lu [aria-hidden=true]{display:none}.lineup-engine [draggable],.lu-header [draggable],.lu-pool [draggable],.lu-popup2 [draggable],.lu-side-panel [draggable],.lu [draggable]{cursor:pointer;cursor:-moz-grab;cursor:-webkit-grab}.lineup-engine .lu-dragover,.lu-header .lu-dragover,.lu-pool .lu-dragover,.lu-popup2 .lu-dragover,.lu-side-panel .lu-dragover,.lu .lu-dragover{pointer-events:all!important}.lineup-engine .lu-dragover *,.lineup-engine .lu-dragover:after,.lineup-engine .lu-dragover :after,.lineup-engine .lu-dragover:before,.lineup-engine .lu-dragover :before,.lu-header .lu-dragover *,.lu-header .lu-dragover:after,.lu-header .lu-dragover :after,.lu-header .lu-dragover:before,.lu-header .lu-dragover :before,.lu-pool .lu-dragover *,.lu-pool .lu-dragover:after,.lu-pool .lu-dragover :after,.lu-pool .lu-dragover:before,.lu-pool .lu-dragover :before,.lu-popup2 .lu-dragover *,.lu-popup2 .lu-dragover:after,.lu-popup2 .lu-dragover :after,.lu-popup2 .lu-dragover:before,.lu-popup2 .lu-dragover :before,.lu-side-panel .lu-dragover *,.lu-side-panel .lu-dragover:after,.lu-side-panel .lu-dragover :after,.lu-side-panel .lu-dragover:before,.lu-side-panel .lu-dragover :before,.lu .lu-dragover *,.lu .lu-dragover:after,.lu .lu-dragover :after,.lu .lu-dragover:before,.lu .lu-dragover :before{pointer-events:none!important}.lu-mapping-editor{margin-bottom:5px;clear:both}.lu-mapping-editor div.filter_part{margin-top:15px}.lu-mapping-editor div.filter_part2{position:relative;top:-25px;height:0}.lu-mapping-editor div span.title{font-weight:700}.lu-mapping-editor .raw_max,.lu-mapping-editor .raw_min{width:3em;display:block}.lu-mapping-editor .mapping_area{display:flex;align-items:stretch}.lu-mapping-editor .mapping_area>div{display:flex;flex-direction:column;margin-bottom:40px}.lu-mapping-editor .mapping_area>div:first-child{text-align:right}.lu-mapping-editor .mapping_area>div>span:first-of-type{flex-grow:1}.lu-mapping-editor svg{z-index:1;position:relative}.lu-mapping-editor svg>rect{fill:#fff;opacity:0}.lu-mapping-editor svg g.samples line{stroke:#000;opacity:.5}.lu-mapping-editor svg g.mapping:hover{cursor:ew-resize}.lu-mapping-editor svg g.mapping:hover line{stroke:#0000cf}.lu-mapping-editor svg g.mapping:hover circle{fill:#0000cf}.lu-mapping-editor svg g.mapping line{stroke:blue}.lu-mapping-editor svg g.mapping circle{fill:blue}.lu-mapping-editor svg g.filter text{font-size:8pt}.lu-mapping-editor svg g.filter path{fill:gray}.lu-mapping-editor svg g.filter rect{fill:#fff;stroke:gray;stroke-width:1}.lu-mapping-editor svg g.filter>g{cursor:pointer;cursor:-moz-grab;cursor:-webkit-grab}.lu-mapping-editor svg g.filter>g:hover path{fill:#a9a9a9}.lu-mapping-editor svg g.filter>g:hover rect{stroke:#a9a9a9}.lu-mapping-editor div.script{clear:both}.lu-mapping-editor div.script textarea{height:4em;width:98%;font-size:8pt;display:block}.lu-mapping-editor div[id$=mapping-overlay]{position:absolute;padding:10px;background-color:#fff;border:1px solid #c1c1c1;border-radius:5px;z-index:10}.lu-mapping-editor div[id$=mapping-overlay].hide{opacity:.2}.lu-mapping-editor div[id$=mapping-overlay] div input{display:block}.lu-mapping-editor div[id$=mapping-overlay] input{width:75px}.lu-mapping-editor div[id$=mapping-overlay] div:first-child{margin-bottom:10px}.lu-mapping-editor div[id$=filter_inputs]{display:flex;justify-content:space-around;padding:0 30px 10px}.lu-mapping-editor div input[id$=_filter_input]{width:75px}.lu-popup{position:absolute;dominant-baseline:central;text-anchor:middle}.lu-popup .ok{position:absolute;right:10px}.lu-popup,.lu-popup2{background-color:#fff;border:1px solid #000;position:absolute;padding:5px;z-index:9;font-size:11pt;clear:right}.lu-popup2:before,.lu-popup:before{content:"";top:-10px;left:-10px;right:-10px;bottom:-10px;position:absolute;z-index:-1}.lu-popup2 form,.lu-popup form{display:block}.lu-popup2 label,.lu-popup label{font-weight:400}.lu-popup2 input,.lu-popup input{font-size:8pt}.lu-popup2 .selectionTable,.lu-popup .selectionTable{background:#fff;overflow-x:auto;overflow-y:auto;max-height:50vh}.lu-popup2 .selectionTable td,.lu-popup2 .selectionTable th,.lu-popup .selectionTable td,.lu-popup .selectionTable th{white-space:nowrap;padding:1px 5px 1px 3px;cursor:pointer}.lu-popup2 .selectionTable th,.lu-popup .selectionTable th{border-bottom:1px solid #c1c1c1}.lu-popup2 .selectionTable table,.lu-popup .selectionTable table{width:95%;border:0}.lu-popup2 .selectionTable tr:hover,.lu-popup .selectionTable tr:hover{background-color:#add8e6}.lu-popup2 .lu-popup-title,.lu-popup .lu-popup-title{cursor:pointer;cursor:-webkit-grab}.lu-popup2 .script-description,.lu-popup .script-description{font-size:120%;max-width:50em}.lu-popup2 .script-description dl,.lu-popup .script-description dl{padding:1em .2em}.lu-popup2 .script-description dl dd,.lu-popup .script-description dl dd{padding-left:1em}.lu-popup2 .lu-sub-nested,.lu-popup .lu-sub-nested{width:100px}.lu-popup2.lu-rename-dialog input,.lu-popup.lu-rename-dialog input{width:100%;display:block}.lu-popup2 *{margin:0}.lu-popup2 .ok{float:right}.lu-popup2 div.bar{height:1em;transition:width .5s ease}.lineup-engine>main>article [data-renderer=aggregate]{text-align:center;background-image:linear-gradient(270deg,transparent 3px,#000 0,#000 4px,transparent 0);background-size:4px 100%;background-repeat:no-repeat;background-position:100%}.lineup-engine>main>article [data-meta~=first] [data-renderer=aggregate]{cursor:pointer;background-image:linear-gradient(270deg,transparent 3px,#000 0,#000 4px,transparent 0),linear-gradient(180deg,#000 1px,transparent 0);background-size:4px 100%;background-repeat:no-repeat;background-position:100%}.lineup-engine>main>article [data-meta~=first] [data-renderer=aggregate]:before{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\F0D7";padding-right:4px}.lineup-engine>main>article [data-meta=last] [data-renderer=aggregate]{background-image:linear-gradient(270deg,transparent 3px,#000 0,#000 4px,transparent 0),linear-gradient(0deg,#000 1px,transparent 0);background-size:4px 100%;background-repeat:no-repeat;background-position:100%}.lineup-engine>main>article [data-agg=group] [data-renderer=aggregate],.lineup-engine>main>article [data-meta="first last"] [data-renderer=aggregate]{padding-right:4px;cursor:pointer;background-image:linear-gradient(270deg,transparent 3px,#000 0,#000 4px,transparent 0),linear-gradient(180deg,#000 1px,transparent 0),linear-gradient(0deg,#000 1px,transparent 0);background-size:4px 100%;background-repeat:no-repeat;background-position:100%}.lineup-engine>main>article [data-agg=group] [data-renderer=aggregate]:before{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\F0DA"}.lineup-engine>main>article [data-renderer=circle],.lineup-engine>main>article [data-renderer=max],.lineup-engine>main>article [data-renderer=mean],.lineup-engine>main>article [data-renderer=min],.lineup-engine>main>article [data-renderer=number],.lineup-engine>main>article [data-renderer=script]{position:relative;white-space:nowrap}.lineup-engine>main>article [data-renderer=circle] div,.lineup-engine>main>article [data-renderer=max] div,.lineup-engine>main>article [data-renderer=mean] div,.lineup-engine>main>article [data-renderer=min] div,.lineup-engine>main>article [data-renderer=number] div,.lineup-engine>main>article [data-renderer=script] div{position:absolute;width:100%}.lineup-engine>main>article [data-renderer=circle]>div,.lineup-engine>main>article [data-renderer=max]>div,.lineup-engine>main>article [data-renderer=mean]>div,.lineup-engine>main>article [data-renderer=min]>div,.lineup-engine>main>article [data-renderer=number]>div,.lineup-engine>main>article [data-renderer=script]>div{top:0;bottom:0}.lineup-engine>main>article [data-renderer=circle]>div>div,.lineup-engine>main>article [data-renderer=max]>div>div,.lineup-engine>main>article [data-renderer=mean]>div>div,.lineup-engine>main>article [data-renderer=min]>div>div,.lineup-engine>main>article [data-renderer=number]>div>div,.lineup-engine>main>article [data-renderer=script]>div>div{height:100%}.lineup-engine>main>article [data-agg=group] [data-renderer$=number]>div>div{display:flex;align-items:center}.lineup-engine>main>article [data-renderer=stack] [data-renderer$=number]>div{overflow-x:hidden;text-overflow:ellipsis}.lineup-engine>main>article [data-renderer=boxplot]{display:flex;flex-direction:row;align-items:center;position:relative}.lineup-engine>main>article [data-renderer=boxplot]>div:first-of-type{position:relative;border-left:1px solid #000;border-right:1px solid #000;height:90%;max-height:30px}.lineup-engine>main>article [data-renderer=boxplot]>div:first-of-type:before{content:"";position:absolute;top:0;height:50%;width:100%;border-bottom:1px solid #000}.lineup-engine>main>article [data-renderer=boxplot]>div:first-of-type>div:first-child{position:absolute;top:10%;height:80%;background:#e0e0e0;outline:1px solid #000}.lineup-engine>main>article [data-renderer=boxplot]>div:first-of-type>div:last-child{position:absolute;top:10%;height:80%;width:1px;background:#000}.lineup-engine>main>article [data-renderer=boxplot]>div:first-of-type[data-sort=min]{border-left-color:orange}.lineup-engine>main>article [data-renderer=boxplot]>div:first-of-type[data-sort=max]{border-right-color:orange}.lineup-engine>main>article [data-renderer=boxplot]>div:first-of-type[data-sort=q1]>div:first-child:after,.lineup-engine>main>article [data-renderer=boxplot]>div:first-of-type[data-sort=q3]>div:first-child:after{content:"";position:absolute;width:1px;height:100%}.lineup-engine>main>article [data-renderer=boxplot]>div:first-of-type[data-sort=q1]>div:first-child:after{left:-1px;border-left:1px solid orange}.lineup-engine>main>article [data-renderer=boxplot]>div:first-of-type[data-sort=q3]>div:first-child:after{right:-1px;border-right:1px solid orange}.lineup-engine>main>article [data-renderer=boxplot]>div:first-of-type[data-sort=median]>div:last-child{background-color:orange}.lineup-engine>main>article [data-renderer=boxplot]>div:nth-of-type(n+2){position:absolute;top:50%;width:5px;height:5px;margin:-2.5px;background:#e0e0e0;border-radius:50%}.lineup-engine>main>article [data-agg=detail] [data-renderer=categorical],.lineup-engine>main>article [data-agg=detail] [data-renderer=heatmap],.lineup-engine>main>article [data-agg=group] [data-renderer=heatmap]>div{display:flex;white-space:nowrap}.lineup-engine>main>article [data-agg=detail] [data-renderer=categorical] :first-child,.lineup-engine>main>article [data-agg=detail] [data-renderer=heatmap] :first-child,.lineup-engine>main>article [data-agg=group] [data-renderer=heatmap]>div :first-child{flex:0 0 16px;line-height:100%;margin-right:.5em}.lineup-engine>main>article [data-agg=detail] [data-renderer=categorical] :last-child,.lineup-engine>main>article [data-agg=detail] [data-renderer=heatmap] :last-child,.lineup-engine>main>article [data-agg=group] [data-renderer=heatmap]>div :last-child{flex:1 1 auto;overflow:hidden;text-overflow:ellipsis}.lineup-engine>main>article [data-agg=group] [data-renderer=heatmap]{display:flex;align-items:center}.lineup-engine>main>article [data-agg=group] [data-renderer=heatmap]>div{width:100%}.lineup-engine>main>article [data-agg=group] [data-renderer=catcolor],.lineup-engine>main>article [data-agg=group] [data-renderer=catcolorshifted]{display:flex;align-items:flex-start;position:relative}.lineup-engine>main>article [data-agg=group] [data-renderer=catcolor]>div,.lineup-engine>main>article [data-agg=group] [data-renderer=catcolorshifted]>div{position:absolute;height:100%}.lineup-engine>main>article [data-agg=group] [data-renderer=catcolor]>span,.lineup-engine>main>article [data-agg=group] [data-renderer=catcolorshifted]>span{z-index:1}.lineup-engine>main>article [data-renderer=dot]{position:relative}.lineup-engine>main>article [data-renderer=dot]>div{background:gray;opacity:.7;border-radius:2.5px;width:5px;height:5px;margin-top:-2.5px;margin-left:-2.5px;top:50%;position:absolute}.lineup-engine>main>article [data-renderer=numbers],.lineup-engine>main>article [data-renderer=threshold],.lineup-engine>main>article [data-renderer=verticalbar]{display:flex;flex-direction:row;align-content:stretch;align-items:stretch}.lineup-engine>main>article [data-renderer=numbers] div,.lineup-engine>main>article [data-renderer=threshold] div,.lineup-engine>main>article [data-renderer=verticalbar] div{flex:1 1 auto}.lineup-engine>main>article [data-renderer=numbers] .lu-missing,.lineup-engine>main>article [data-renderer=threshold] .lu-missing,.lineup-engine>main>article [data-renderer=verticalbar] .lu-missing{background-size:3px 3px}.lineup-engine>main>article [data-agg=group] [data-renderer=categorical],.lineup-engine>main>article [data-renderer=histogram]{display:flex;align-items:flex-end;font-size:x-small}.lineup-engine>main>article [data-agg=group] [data-renderer=categorical]>*,.lineup-engine>main>article [data-renderer=histogram]>*{flex:1 1 auto;position:relative;background:rgba(0,0,0,.26);margin:0 1px;display:flex;flex-direction:row;align-items:flex-end}.lineup-engine>main>article [data-agg=group] [data-renderer=categorical]>*>.lu-selected,.lineup-engine>main>article [data-renderer=histogram]>*>.lu-selected{flex:1 1 auto;background-color:orange;border-radius:5px 5px 0 0}.lineup-engine>main>article [data-renderer=image]{background-size:contain;background-position:50%;background-repeat:no-repeat;position:relative}.lineup-engine>main>article [data-renderer=image]:not(.lu-missing):before{content:"";position:absolute;width:100%;height:100%;background:url('+n(45)+');background-position:50%;background-repeat:no-repeat;background-blend-mode:overlay;z-index:-1}.lineup-engine>main>article [data-renderer=interleaving]{display:flex;flex-direction:column}.lineup-engine>main>article [data-renderer=interleaving]>div{flex:1 1 0;overflow-y:hidden}.lineup-engine>main>article .lu-missing{background-image:linear-gradient(180deg,#c1c1c1 3px,transparent 0);background-position:50%;background-size:10px 3px;background-repeat:no-repeat}.lineup-engine>main>article .lu-missing>*{display:none}.lineup-engine>main>article [data-renderer=rank]{text-align:right}.lineup-engine>main>article [data-agg=group] [data-renderer=rank]{display:flex;flex-direction:column;justify-content:space-between}.lineup-engine>main>article [data-renderer=selection]{text-align:center}.lineup-engine>main>article [data-renderer=selection]:before{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\F096";padding-top:2px}.lineup-engine>main>article .lu-group-selected[data-renderer=selection]:before,.lineup-engine>main>article .lu-selected [data-renderer=selection]:before,.lineup-engine>main>article .selected [data-renderer=selection]:before{content:"\\F046";padding-left:2px}.lineup-engine>main>article [data-renderer=sparkline] path{stroke:#000;fill:none;vector-effect:non-scaling-stroke}.lineup-engine>main>article [data-renderer=sparkline] line{stroke:#c1c1c1;stroke-width:1;vector-effect:non-scaling-stroke}.lineup-engine>main>article [data-renderer=nested]>*,.lineup-engine>main>article [data-renderer=stack]>*{height:100%;overflow:hidden}.lineup-engine>main>article [data-renderer=nested]>*>*,.lineup-engine>main>article [data-renderer=stack]>*>*{overflow:hidden}.lineup-engine>main>article [data-agg=group] [data-renderer=string]{display:flex;white-space:normal;flex-direction:column}.lineup-engine>main>article [data-agg=group] [data-renderer=string]>div{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:#a9a9a9}.lineup-engine>main>article [data-renderer=threshold]{align-items:flex-start}.lineup-engine>main>article [data-renderer=threshold]>div{height:50%}.lineup-engine>main>article [data-renderer=threshold]>div.down{align-self:flex-end}.lineup-engine>main>article [data-renderer=upset]{position:relative;display:flex;align-items:center;justify-content:space-around}.lineup-engine>main>article [data-renderer=upset]>div:first-child{position:absolute;top:0;height:50%;border-bottom:1px solid #000}.lineup-engine>main>article [data-renderer=upset]>div:nth-child(n+2){border-radius:50%;background-color:#676767;opacity:.1;width:15px;height:15px}.lineup-engine>main>article [data-renderer=upset]>div:nth-child(n+2).enabled{opacity:1}.lineup-engine>main>article [data-renderer=upset] path{stroke:#000;fill:none}.lineup-engine>main>article [data-renderer=verticalbar]{align-items:flex-end}.lineup-engine>main>article [data-renderer=verticalbar]>div{position:relative}.lineup-engine>header>article,.lineup-engine>main>article>*{grid-column-gap:5px}.lineup-engine>main>article>* .lu-hover-only,.lineup-engine>main>article>* .lu-selection-only,.lineup-engine>main>article>.lu-hovered .lu-not-hover,.lineup-engine>main>article>.lu-selected .lu-not-hover,.lineup-engine>main>article>:hover .lu-not-hover{display:none}.lineup-engine>main>article>.lu-hovered .lu-hover-only,.lineup-engine>main>article>.lu-selected .lu-hover-only,.lineup-engine>main>article>:hover .lu-hover-only{display:block;padding-left:4px}.lineup-engine>main>article>[data-agg=group],.lineup-engine>main>article>[data-meta~=last]{margin-bottom:5px}.lineup-engine>main>article>.lu-selected{z-index:10;position:relative;box-shadow:2px 0 0 0 orange,0 2px 0 0 orange,2px 2px 0 0 orange,inset 2px 0 0 0 orange,inset 0 2px 0 0 orange}.lineup-engine>main>article>.lu-selected .lu-selection-only{display:block}.lineup-engine>main>article>* [data-renderer]{overflow-x:hidden;text-overflow:ellipsis}.lineup-engine>main>article>* .lu-grid-space{grid-column-gap:5px}.lu-side-panel>div>main>article,section.lu-header{position:relative;user-select:none;display:flex;flex-direction:column;justify-content:flex-start}.lu-side-panel>div>main>article .lu-toolbar,section.lu-header .lu-toolbar{position:relative;font-size:11pt;display:flex;justify-content:center;padding:3px}.lu-side-panel>div>main>article .lu-toolbar>i,section.lu-header .lu-toolbar>i{padding:2px 4px;cursor:pointer;position:relative;display:flex}.lu-side-panel>div>main>article .lu-toolbar>i:hover,section.lu-header .lu-toolbar>i:hover{color:#000}.lu-side-panel>div>main>article .lu-toolbar>i.hidden,section.lu-header .lu-toolbar>i.hidden{display:none}.lu-side-panel>div>main>article .lu-toolbar>i[title^=Sort][data-priority],.lu-side-panel>div>main>article .lu-toolbar>i[title^=Stratify][data-priority],section.lu-header .lu-toolbar>i[title^=Sort][data-priority],section.lu-header .lu-toolbar>i[title^=Stratify][data-priority]{padding-left:10px}.lu-side-panel>div>main>article .lu-toolbar>i[title^=Sort][data-priority]:after,.lu-side-panel>div>main>article .lu-toolbar>i[title^=Stratify][data-priority]:after,section.lu-header .lu-toolbar>i[title^=Sort][data-priority]:after,section.lu-header .lu-toolbar>i[title^=Stratify][data-priority]:after{content:attr(data-priority) ".";position:absolute;right:0;z-index:1;margin-top:2px;margin-right:65%;text-align:right;color:orange;font-style:normal;font-size:10px;font-weight:700;line-height:1;pointer-events:none}.lu-side-panel>div>main>article .lu-toolbar>i[title^=Stratify][data-priority],section.lu-header .lu-toolbar>i[title^=Stratify][data-priority]{padding-left:15px}.lu-side-panel>div>main>article .lu-toolbar>i[title^=Stratify][data-priority]:after,section.lu-header .lu-toolbar>i[title^=Stratify][data-priority]:after{margin-right:60%}.lu-side-panel>div>main>article.filtered .lu-toolbar i[title=Filter],.lu-side-panel>div>main>article.grouped .lu-toolbar i[title="Stratify by"],section.filtered.lu-header .lu-toolbar i[title=Filter],section.grouped.lu-header .lu-toolbar i[title="Stratify by"]{color:#c1c1c1}.lu-side-panel>div>main>article .lu-label,section.lu-header .lu-label{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis}.lu-side-panel>div>main>article.lu-dragging,section.lu-dragging.lu-header{opacity:.5}.lu-side-panel>div>main>article.lu-dragover:after,section.lu-dragover.lu-header:after{content:"+";font-size:250%;color:#fff;position:absolute;top:0;left:0;width:100%;height:100%;z-index:2;display:flex;align-items:center;justify-content:center;user-select:none;pointer-events:none;background:hsla(0,0%,59%,.8)}.lu-side-panel>div>main>article .lu-spacing,section.lu-header .lu-spacing{flex:1}.lu-side-panel>div>main>article .lu-summary,section.lu-header .lu-summary{position:relative;display:none;font-size:x-small}.lu-side-panel>div>main>article .lu-summary[data-summary$=hist],section.lu-header .lu-summary[data-summary$=hist]{display:flex;align-items:flex-end}.lu-side-panel>div>main>article .lu-summary[data-summary$=hist]>div,section.lu-header .lu-summary[data-summary$=hist]>div{flex:1 1 auto;position:relative;margin:0 1px;display:flex;flex-direction:row;align-items:flex-end}.lu-side-panel>div>main>article .lu-summary[data-summary$=hist]>div[data-filtered=filtered],section.lu-header .lu-summary[data-summary$=hist]>div[data-filtered=filtered]{opacity:.2}.lu-side-panel>div>main>article .lu-summary[data-summary$=hist]>div>.lu-selected,section.lu-header .lu-summary[data-summary$=hist]>div>.lu-selected{flex:1 1 auto;background-color:orange;border-radius:5px 5px 0 0}.lu-side-panel>div>main>article .lu-summary[data-summary$=hist]>div[data-title]:before,section.lu-header .lu-summary[data-summary$=hist]>div[data-title]:before{content:attr(data-title);position:absolute;top:100%;width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;text-align:center}.lu-side-panel>div>main>article .lu-summary[data-summary$=hist]>span,section.lu-header .lu-summary[data-summary$=hist]>span{position:absolute;bottom:-15px;pointer-events:none;user-select:none;line-height:100%;background-image:linear-gradient(180deg,#000 3px,transparent);background-repeat:no-repeat;background-size:1px 3px;padding-top:5px}.lu-side-panel>div>main>article .lu-summary[data-summary$=hist]>span:first-of-type,section.lu-header .lu-summary[data-summary$=hist]>span:first-of-type{left:0;background-position:0 0}.lu-side-panel>div>main>article .lu-summary[data-summary$=hist]>span:last-of-type,section.lu-header .lu-summary[data-summary$=hist]>span:last-of-type{right:0;text-align:right;background-position:100% 0}.lu-side-panel>div>main>article .lu-summary[data-summary^=interactive]>div,section.lu-header .lu-summary[data-summary^=interactive]>div{cursor:pointer}.lu-side-panel>div>main>article .lu-summary[data-summary=interactive-filter-hist] label,section.lu-header .lu-summary[data-summary=interactive-filter-hist] label{position:absolute;bottom:-3.5em}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist],section.lu-header .lu-summary[data-summary=slider-hist]{margin-bottom:2.75em;position:relative}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]>div,section.lu-header .lu-summary[data-summary=slider-hist]>div{background:#c1c1c1}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]>[data-handle=max],.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]>[data-handle=min],section.lu-header .lu-summary[data-summary=slider-hist]>[data-handle=max],section.lu-header .lu-summary[data-summary=slider-hist]>[data-handle=min]{position:absolute;height:100%;border-right:1px solid #000;transition:border-width .2s ease;width:1px;cursor:ew-resize}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]>[data-handle=max]:before,.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]>[data-handle=min]:before,section.lu-header .lu-summary[data-summary=slider-hist]>[data-handle=max]:before,section.lu-header .lu-summary[data-summary=slider-hist]>[data-handle=min]:before{content:attr(data-value);position:absolute;top:100%;width:5em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]>[data-handle=max],section.lu-header .lu-summary[data-summary=slider-hist]>[data-handle=max]{right:0;border-right:none;border-left:1px solid #000}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]>[data-handle=max]:before,section.lu-header .lu-summary[data-summary=slider-hist]>[data-handle=max]:before{left:-5em;text-align:right}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]:hover>[data-handle=min],section.lu-header .lu-summary[data-summary=slider-hist]:hover>[data-handle=min]{border-right-width:5px}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]:hover>[data-handle=max],section.lu-header .lu-summary[data-summary=slider-hist]:hover>[data-handle=max]{border-left-width:5px}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]>[data-handle$=hint],section.lu-header .lu-summary[data-summary=slider-hist]>[data-handle$=hint]{pointer-events:none;position:absolute;height:100%;background:repeating-linear-gradient(-45deg,hsla(0,0%,100%,.7),hsla(0,0%,100%,.7) 7px,#bababa 0,#bababa 10px)}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]>[data-handle$=hint][data-handle=max-hint],section.lu-header .lu-summary[data-summary=slider-hist]>[data-handle$=hint][data-handle=max-hint]{right:0}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist] label,section.lu-header .lu-summary[data-summary=slider-hist] label{position:absolute;bottom:-3.5em}.lu-side-panel>div>main>article .lu-summary[data-summary=aggregation]>i,.lu-side-panel>div>main>article .lu-summary[data-summary=selection]>i,section.lu-header .lu-summary[data-summary=aggregation]>i,section.lu-header .lu-summary[data-summary=selection]>i{cursor:pointer;font-size:150%}.lu-side-panel>div>main>article .lu-summary[data-summary=aggregation]>i,section.lu-header .lu-summary[data-summary=aggregation]>i{padding-right:4px}.lu-side-panel>div>main>article .lu-summary[data-summary=aggregation],.lu-side-panel>div>main>article .lu-summary[data-summary=selection],.lu-side-panel>div>main>article .lu-summary[data-summary=string],section.lu-header .lu-summary[data-summary=aggregation],section.lu-header .lu-summary[data-summary=selection],section.lu-header .lu-summary[data-summary=string]{display:block}.lu-side-panel>div>main>article .lu-summary label.lu-disabled,section.lu-header .lu-summary label.lu-disabled{color:gray;user-select:none;cursor:not-allowed}.lu-side-panel>div>main>article .lu-summary input[type=text],section.lu-header .lu-summary input[type=text]{width:100%;border:1px solid #999;border-radius:3px;padding:3px 5px}.lu-side-panel>div>main>article .lu-summary select,section.lu-header .lu-summary select{width:100%;border:1px solid #999;border-radius:3px;padding:3px 5px;outline:none;cursor:pointer}.lu-side-panel>div>main>article .lu-summary label,section.lu-header .lu-summary label{font-weight:400;display:flex;align-items:center;margin:5px 0}.lu-side-panel>div>main>article .lu-summary label input[type=checkbox],section.lu-header .lu-summary label input[type=checkbox]{margin:0 5px 0 0}.lu-side-panel>div>main>article .lu-nested,section.lu-header .lu-nested{position:relative}section.lu-header{text-align:center;color:#000;overflow:unset!important;margin-right:-5px;margin-bottom:15px;border-bottom:1px solid #000}section.lu-header.frozen:before{content:"";position:absolute;left:0;width:100%;height:15px;bottom:-15px;background:#fff;pointer-events:none}section.lu-header:hover{background-color:#f7f7f7}section.lu-header:hover>.lu-toolbar{color:#999}section.lu-header[draggable=true]{cursor:pointer;cursor:-moz-grab;cursor:-webkit-grab}section.lu-header>.lu-toolbar{color:#c1c1c1}section.lu-header>.lu-label{padding-left:.8em;margin-right:5px;font-weight:500}section.lu-header>.lu-sort{position:absolute;left:1px;top:1px;font-size:11pt}section.lu-header.lu-dragover:after{background:hsla(0,0%,59%,.8)}section.lu-header>.lu-summary{height:2em;margin-right:5px}section.lu-header>.lu-summary[data-summary=hist]>div,section.lu-header>.lu-summary[data-summary=slider-hist]>div{background:#c1c1c1}section.lu-header>.lu-nested{grid-column-gap:1px}section.lu-header>.lu-nested>section{border-bottom:none}section.lu-header>.lu-handle{position:absolute;right:0;width:5px;height:100%;background-color:#fff;cursor:col-resize;border-bottom:1px solid #fff;bottom:-1px}section.lu-header>.lu-handle.lu-dragover{background-color:hsla(0,0%,59%,.8)}section.lu-header>.lu-handle:hover{background-color:#e5e5e5}.lu-sub-nested>section{margin-bottom:5px}.lu-sub-nested>section>.lu-handle{height:5px;width:100%;bottom:-6px;left:0;right:0;cursor:inherit}section.lu-slopegraph svg{shape-rendering:geometricprecision;height:100%}section.lu-slopegraph svg path.lu-slope{fill:none;stroke:#a9a9a9;stroke-width:1;stroke-linecap:round}section.lu-slopegraph svg path.lu-slope.lu-selected,section.lu-slopegraph svg path.lu-slope:hover{z-index:10;stroke:orange}section.lu-slopegraph svg path.lu-group-slope{fill:hsla(0,0%,66%,.5);stroke:#a9a9a9;stroke-linejoin:round}section.lu-slopegraph svg path.lu-group-slope.lu-selected,section.lu-slopegraph svg path.lu-group-slope:hover{z-index:10;stroke:orange;fill:rgba(255,165,0,.5)}.lineup-engine>hr{position:absolute;left:0;top:0;width:1px;height:2px;margin:0;background-color:orange;border:none;transform-origin:left center;display:none;pointer-events:none;-moz-user-select:none;user-select:none}.lineup-engine>hr.lu-selection-active{display:block;z-index:1000}.lineup-engine article.lu-selection-active *{-moz-user-select:none;user-select:none}.lineup-engine{position:relative;display:flex;flex-direction:column;align-items:stretch;align-content:stretch;overflow-x:auto}.lineup-engine>header{flex:0 0 auto;overflow-x:hidden;margin-bottom:3px}.lineup-engine>header>:last-child{margin-right:5px}.lineup-engine>main{flex:1 1 auto;overflow-y:auto}.lineup-engine>header,.lineup-engine>main{display:flex;flex-direction:row;align-items:stretch;justify-content:stretch}.lineup-engine>header>*,.lineup-engine>main>*{flex:0 0 auto}.lineup-engine>header>article,.lineup-engine>main>article>div{display:-ms-grid;display:grid;grid-auto-flow:column;-ms-grid-column-align:stretch;-ms-grid-row-align:stretch;align-items:stretch;justify-items:stretch}.lineup-engine>header>article>*,.lineup-engine>main>article>div>*{overflow:hidden;text-overflow:ellipsis}.lineup-engine>header>article>.frozen,.lineup-engine>main>article>div>.frozen{background-color:#fff;z-index:1}.lineup-engine>main:not(.scrolling)>article>div{padding-top:2px}.lineup-engine>main:not(.scrolling)>article>div:hover{position:relative;z-index:2;box-shadow:2px 0 0 0 orange,0 2px 0 0 orange,2px 2px 0 0 orange,inset 2px 0 0 0 orange,inset 0 2px 0 0 orange}.lineup-engine:not(.ms-edge)>header>article>.frozen,.lineup-engine:not(.ms-edge)>main>article>div>.frozen{position:sticky;left:0}.lineup-engine .loading{background:url('+n(72)+") 50% contain repeat-x;background-blend-mode:overlay}.lineup-engine .loading>*{opacity:0}.lineup-engine.animated>header>article>*,.lineup-engine.animated>main>article>div>*{transition:opacity .5s;opacity:1}.lineup-engine.animated .loading{background-image:url("+n(45)+')}.lineup-engine article.le-row-animation>*{transition:all .5s linear}.lineup-engine article.le-row-animation>[data-animation=hide],.lineup-engine article.le-row-animation>[data-animation=show]{transition:all .25s linear}.lineup-engine article.le-row-animation.le-hide-animation>*{transition:all .5s linear .3s}.lineup-engine article.le-row-animation.le-hide-animation>[data-animation=hide]{transition:all .25s linear}.lineup-engine article.le-row-animation.le-hide-animation>[data-animation=show]{transition:all .25s linear .3s}.lineup-engine article.le-row-animation.le-update-animation>[data-animation=show]{transition:all .25s linear .55s}.lineup-engine article.le-row-animation.le-update-animation.le-hide-animation>[data-animation=show]{transition:all .25s linear .85s}.lineup-multi-engine>header,.lineup-multi-engine>main{display:grid}.lu-side-panel{display:flex;flex-direction:column;max-width:20em;min-width:15em}.lu-side-panel>header{flex:0 0 auto;text-align:center;padding:1em .5em;border-bottom:2px solid #dedede}.lu-side-panel>header form{position:relative}.lu-side-panel>header form select{width:100%;font-size:120%}.lu-side-panel>div{flex:1 1 auto;position:relative;overflow:auto}.lu-side-panel>div>main{counter-reset:side-panel-counter}.lu-side-panel>div>main>article,.lu-side-panel>div>main section.lu-header{position:relative;user-select:none;display:flex;flex-direction:column;justify-content:flex-start}.lu-side-panel>div>main>article .lu-toolbar,.lu-side-panel>div>main section.lu-header .lu-toolbar{position:relative;font-size:11pt;display:flex;justify-content:center;padding:3px}.lu-side-panel>div>main>article .lu-toolbar>i,.lu-side-panel>div>main section.lu-header .lu-toolbar>i{padding:2px 4px;cursor:pointer;position:relative;display:flex}.lu-side-panel>div>main>article .lu-toolbar>i:hover,.lu-side-panel>div>main section.lu-header .lu-toolbar>i:hover{color:#000}.lu-side-panel>div>main>article .lu-toolbar>i.hidden,.lu-side-panel>div>main section.lu-header .lu-toolbar>i.hidden{display:none}.lu-side-panel>div>main>article .lu-toolbar>i[title^=Sort][data-priority],.lu-side-panel>div>main>article .lu-toolbar>i[title^=Stratify][data-priority],.lu-side-panel>div>main section.lu-header .lu-toolbar>i[title^=Sort][data-priority],.lu-side-panel>div>main section.lu-header .lu-toolbar>i[title^=Stratify][data-priority]{padding-left:10px}.lu-side-panel>div>main>article .lu-toolbar>i[title^=Sort][data-priority]:after,.lu-side-panel>div>main>article .lu-toolbar>i[title^=Stratify][data-priority]:after,.lu-side-panel>div>main section.lu-header .lu-toolbar>i[title^=Sort][data-priority]:after,.lu-side-panel>div>main section.lu-header .lu-toolbar>i[title^=Stratify][data-priority]:after{content:attr(data-priority) ".";position:absolute;right:0;z-index:1;margin-top:2px;margin-right:65%;text-align:right;color:orange;font-style:normal;font-size:10px;font-weight:700;line-height:1;pointer-events:none}.lu-side-panel>div>main>article .lu-toolbar>i[title^=Stratify][data-priority],.lu-side-panel>div>main section.lu-header .lu-toolbar>i[title^=Stratify][data-priority]{padding-left:15px}.lu-side-panel>div>main>article .lu-toolbar>i[title^=Stratify][data-priority]:after,.lu-side-panel>div>main section.lu-header .lu-toolbar>i[title^=Stratify][data-priority]:after{margin-right:60%}.lu-side-panel>div>main>article.filtered .lu-toolbar i[title=Filter],.lu-side-panel>div>main>article.grouped .lu-toolbar i[title="Stratify by"],.lu-side-panel>div>main section.filtered.lu-header .lu-toolbar i[title=Filter],.lu-side-panel>div>main section.grouped.lu-header .lu-toolbar i[title="Stratify by"]{color:#c1c1c1}.lu-more-options i:before,.lu-toolbar i:before{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.lu-more-options i[title^="Rename + Color"]:before,.lu-toolbar i[title^="Rename + Color"]:before{content:"\\F044"}.lu-more-options i[title="Generate Snapshot"]:before,.lu-toolbar i[title="Generate Snapshot"]:before{content:"\\F126"}.lu-more-options i[title^="Sort by"]:before,.lu-toolbar i[title^="Sort by"]:before{content:"\\F0DC"}.lu-more-options i[title^=Visualization]:before,.lu-toolbar i[title^=Visualization]:before{content:"\\F0EC"}.lu-more-options i[title^="Edit Link Pattern"]:before,.lu-toolbar i[title^="Edit Link Pattern"]:before{content:"\\F08E"}.lu-more-options i[title^="Sort Group by"]:before,.lu-toolbar i[title^="Sort Group by"]:before{content:"\\F0DC"}.lu-more-options i[title^="Edit Combine Script"]:before,.lu-toolbar i[title^="Edit Combine Script"]:before{content:"\\F085"}.lu-more-options i[title="Split Combined Column"]:before,.lu-toolbar i[title="Split Combined Column"]:before{content:"\\F2D2"}.lu-more-options i[title^=Filter]:before,.lu-toolbar i[title^=Filter]:before{content:"\\F0B0"}.lu-more-options i[title^=Stratify]:before,.lu-toolbar i[title^=Stratify]:before{content:"\\F0DB";transform:rotate(-90deg);height:14px}.lu-more-options i[title=Sort]:before,.lu-toolbar i[title=Sort]:before{content:"\\F160"}.lu-more-options i[title=Sort][data-sort=desc]:before,.lu-toolbar i[title=Sort][data-sort=desc]:before{content:"\\F161"}.lu-more-options i[title=Sort][data-sort$=sc]:before,.lu-more-options i[title^=Stratify][data-stratify=true]:before,.lu-toolbar i[title=Sort][data-sort$=sc]:before,.lu-toolbar i[title^=Stratify][data-stratify=true]:before{color:orange}.lu-more-options i[title^="Set Cut Off"]:before,.lu-toolbar i[title^="Set Cut Off"]:before{content:"\\F0C4"}.lu-more-options i[title^=Search]:before,.lu-toolbar i[title^=Search]:before{content:"\\F002"}.lu-more-options i[title="Edit Weights"]:before,.lu-toolbar i[title="Edit Weights"]:before{content:"\\F0AE"}.lu-more-options i[title=UnCollapse]:before,.lu-toolbar i[title=UnCollapse]:before{content:"\\F152"}.lu-more-options i[title=Collapse]:before,.lu-toolbar i[title=Collapse]:before{content:"\\F191"}.lu-more-options i[title=Expand]:before,.lu-toolbar i[title=Expand]:before{content:"\\F065"}.lu-more-options i[title=Compress]:before,.lu-toolbar i[title=Compress]:before{content:"\\F066"}.lu-more-options i[title=Remove]:before,.lu-toolbar i[title=Remove]:before{content:"\\F1F8"}.lu-more-options i[title^=More]:before,.lu-toolbar i[title^=More]:before{content:"\\F141"}.lu-more-options i[title^="Contained Columns"]:before,.lu-toolbar i[title^="Contained Columns"]:before{content:"\\F0E8"}.annotate .lu-more-options i[title=Sort]:before,.annotate .lu-toolbar i[title=Sort]:before,.categorical .lu-more-options i[title=Sort]:before,.categorical .lu-toolbar i[title=Sort]:before,.hierarchy .lu-more-options i[title=Sort]:before,.hierarchy .lu-toolbar i[title=Sort]:before,.link .lu-more-options i[title=Sort]:before,.link .lu-toolbar i[title=Sort]:before,.string .lu-more-options i[title=Sort]:before,.string .lu-toolbar i[title=Sort]:before,[data-type=annotate] .lu-more-options i[title=Sort]:before,[data-type=annotate] .lu-toolbar i[title=Sort]:before,[data-type=categorical] .lu-more-options i[title=Sort]:before,[data-type=categorical] .lu-toolbar i[title=Sort]:before,[data-type=hierarchy] .lu-more-options i[title=Sort]:before,[data-type=hierarchy] .lu-toolbar i[title=Sort]:before,[data-type=link] .lu-more-options i[title=Sort]:before,[data-type=link] .lu-toolbar i[title=Sort]:before,[data-type=string] .lu-more-options i[title=Sort]:before,[data-type=string] .lu-toolbar i[title=Sort]:before{content:"\\F15D"}.annotate .lu-more-options i[title=Sort][data-sort=desc]:before,.annotate .lu-toolbar i[title=Sort][data-sort=desc]:before,.categorical .lu-more-options i[title=Sort][data-sort=desc]:before,.categorical .lu-toolbar i[title=Sort][data-sort=desc]:before,.hierarchy .lu-more-options i[title=Sort][data-sort=desc]:before,.hierarchy .lu-toolbar i[title=Sort][data-sort=desc]:before,.link .lu-more-options i[title=Sort][data-sort=desc]:before,.link .lu-toolbar i[title=Sort][data-sort=desc]:before,.string .lu-more-options i[title=Sort][data-sort=desc]:before,.string .lu-toolbar i[title=Sort][data-sort=desc]:before,[data-type=annotate] .lu-more-options i[title=Sort][data-sort=desc]:before,[data-type=annotate] .lu-toolbar i[title=Sort][data-sort=desc]:before,[data-type=categorical] .lu-more-options i[title=Sort][data-sort=desc]:before,[data-type=categorical] .lu-toolbar i[title=Sort][data-sort=desc]:before,[data-type=hierarchy] .lu-more-options i[title=Sort][data-sort=desc]:before,[data-type=hierarchy] .lu-toolbar i[title=Sort][data-sort=desc]:before,[data-type=link] .lu-more-options i[title=Sort][data-sort=desc]:before,[data-type=link] .lu-toolbar i[title=Sort][data-sort=desc]:before,[data-type=string] .lu-more-options i[title=Sort][data-sort=desc]:before,[data-type=string] .lu-toolbar i[title=Sort][data-sort=desc]:before{content:"\\F15E"}.number .lu-more-options i[title=Sort]:before,.number .lu-toolbar i[title=Sort]:before,.rank .lu-more-options i[title=Sort]:before,.rank .lu-toolbar i[title=Sort]:before,[data-type=boxplot] .lu-more-options i[title=Sort]:before,[data-type=boxplot] .lu-toolbar i[title=Sort]:before,[data-type=max] .lu-more-options i[title=Sort]:before,[data-type=max] .lu-toolbar i[title=Sort]:before,[data-type=min] .lu-more-options i[title=Sort]:before,[data-type=min] .lu-toolbar i[title=Sort]:before,[data-type=number] .lu-more-options i[title=Sort]:before,[data-type=number] .lu-toolbar i[title=Sort]:before,[data-type=numbers] .lu-more-options i[title=Sort]:before,[data-type=numbers] .lu-toolbar i[title=Sort]:before,[data-type=ordinal] .lu-more-options i[title=Sort]:before,[data-type=ordinal] .lu-toolbar i[title=Sort]:before,[data-type=script] .lu-more-options i[title=Sort]:before,[data-type=script] .lu-toolbar i[title=Sort]:before,[data-type=stack] .lu-more-options i[title=Sort]:before,[data-type=stack] .lu-toolbar i[title=Sort]:before{content:"\\F162"}.number .lu-more-options i[title=Sort][data-sort=desc]:before,.number .lu-toolbar i[title=Sort][data-sort=desc]:before,.rank .lu-more-options i[title=Sort][data-sort=desc]:before,.rank .lu-toolbar i[title=Sort][data-sort=desc]:before,[data-type=boxplot] .lu-more-options i[title=Sort][data-sort=desc]:before,[data-type=boxplot] .lu-toolbar i[title=Sort][data-sort=desc]:before,[data-type=max] .lu-more-options i[title=Sort][data-sort=desc]:before,[data-type=max] .lu-toolbar i[title=Sort][data-sort=desc]:before,[data-type=min] .lu-more-options i[title=Sort][data-sort=desc]:before,[data-type=min] .lu-toolbar i[title=Sort][data-sort=desc]:before,[data-type=number] .lu-more-options i[title=Sort][data-sort=desc]:before,[data-type=number] .lu-toolbar i[title=Sort][data-sort=desc]:before,[data-type=numbers] .lu-more-options i[title=Sort][data-sort=desc]:before,[data-type=numbers] .lu-toolbar i[title=Sort][data-sort=desc]:before,[data-type=ordinal] .lu-more-options i[title=Sort][data-sort=desc]:before,[data-type=ordinal] .lu-toolbar i[title=Sort][data-sort=desc]:before,[data-type=script] .lu-more-options i[title=Sort][data-sort=desc]:before,[data-type=script] .lu-toolbar i[title=Sort][data-sort=desc]:before,[data-type=stack] .lu-more-options i[title=Sort][data-sort=desc]:before,[data-type=stack] .lu-toolbar i[title=Sort][data-sort=desc]:before{content:"\\F163"}.lu-more-options{font-size:11pt;padding:0}.lu-more-options>i{display:flex;padding:5px 10px 5px 5px;align-items:center;cursor:pointer}.lu-more-options>i:hover{background:#e5e5e5}.lu-more-options>i:before{width:19px;text-align:center}.lu-more-options>i>span{font-style:normal;margin-left:3px}.lu-side-panel>div>main>article .lu-label,.lu-side-panel>div>main section.lu-header .lu-label{white-space:nowrap;overflow-x:hidden;text-overflow:ellipsis}.lu-side-panel>div>main>article.lu-dragging,.lu-side-panel>div>main section.lu-dragging.lu-header{opacity:.5}.lu-side-panel>div>main>article.lu-dragover:after,.lu-side-panel>div>main section.lu-dragover.lu-header:after{content:"+";font-size:250%;color:#fff;position:absolute;top:0;left:0;width:100%;height:100%;z-index:2;display:flex;align-items:center;justify-content:center;user-select:none;pointer-events:none;background:hsla(0,0%,59%,.8)}.lu-side-panel>div>main>article .lu-spacing,.lu-side-panel>div>main section.lu-header .lu-spacing{flex:1}.lu-side-panel>div>main>article .lu-summary,.lu-side-panel>div>main section.lu-header .lu-summary{position:relative;display:none;font-size:x-small}.lu-side-panel>div>main>article .lu-summary[data-summary$=hist],.lu-side-panel>div>main section.lu-header .lu-summary[data-summary$=hist]{display:flex;align-items:flex-end}.lu-side-panel>div>main>article .lu-summary[data-summary$=hist]>div,.lu-side-panel>div>main section.lu-header .lu-summary[data-summary$=hist]>div{flex:1 1 auto;position:relative;margin:0 1px;display:flex;flex-direction:row;align-items:flex-end}.lu-side-panel>div>main>article .lu-summary[data-summary$=hist]>div[data-filtered=filtered],.lu-side-panel>div>main section.lu-header .lu-summary[data-summary$=hist]>div[data-filtered=filtered]{opacity:.2}.lu-side-panel>div>main>article .lu-summary[data-summary$=hist]>div>.lu-selected,.lu-side-panel>div>main section.lu-header .lu-summary[data-summary$=hist]>div>.lu-selected{flex:1 1 auto;background-color:orange;border-radius:5px 5px 0 0}.lu-side-panel>div>main>article .lu-summary[data-summary$=hist]>div[data-title]:before,.lu-side-panel>div>main section.lu-header .lu-summary[data-summary$=hist]>div[data-title]:before{content:attr(data-title);position:absolute;top:100%;width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;text-align:center}.lu-side-panel>div>main>article .lu-summary[data-summary$=hist]>span,.lu-side-panel>div>main section.lu-header .lu-summary[data-summary$=hist]>span{position:absolute;bottom:-15px;pointer-events:none;user-select:none;line-height:100%;background-image:linear-gradient(180deg,#000 3px,transparent);background-repeat:no-repeat;background-size:1px 3px;padding-top:5px}.lu-side-panel>div>main>article .lu-summary[data-summary$=hist]>span:first-of-type,.lu-side-panel>div>main section.lu-header .lu-summary[data-summary$=hist]>span:first-of-type{left:0;background-position:0 0}.lu-side-panel>div>main>article .lu-summary[data-summary$=hist]>span:last-of-type,.lu-side-panel>div>main section.lu-header .lu-summary[data-summary$=hist]>span:last-of-type{right:0;text-align:right;background-position:100% 0}.lu-side-panel>div>main>article .lu-summary[data-summary^=interactive]>div,.lu-side-panel>div>main section.lu-header .lu-summary[data-summary^=interactive]>div{cursor:pointer}.lu-side-panel>div>main>article .lu-summary[data-summary=interactive-filter-hist] label,.lu-side-panel>div>main section.lu-header .lu-summary[data-summary=interactive-filter-hist] label{position:absolute;bottom:-3.5em}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist],.lu-side-panel>div>main section.lu-header .lu-summary[data-summary=slider-hist]{margin-bottom:2.75em;position:relative}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]>div,.lu-side-panel>div>main section.lu-header .lu-summary[data-summary=slider-hist]>div{background:#c1c1c1}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]>[data-handle=max],.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]>[data-handle=min],.lu-side-panel>div>main section.lu-header .lu-summary[data-summary=slider-hist]>[data-handle=max],.lu-side-panel>div>main section.lu-header .lu-summary[data-summary=slider-hist]>[data-handle=min]{position:absolute;height:100%;border-right:1px solid #000;transition:border-width .2s ease;width:1px;cursor:ew-resize}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]>[data-handle=max]:before,.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]>[data-handle=min]:before,.lu-side-panel>div>main section.lu-header .lu-summary[data-summary=slider-hist]>[data-handle=max]:before,.lu-side-panel>div>main section.lu-header .lu-summary[data-summary=slider-hist]>[data-handle=min]:before{content:attr(data-value);position:absolute;top:100%;width:5em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]>[data-handle=max],.lu-side-panel>div>main section.lu-header .lu-summary[data-summary=slider-hist]>[data-handle=max]{right:0;border-right:none;border-left:1px solid #000}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]>[data-handle=max]:before,.lu-side-panel>div>main section.lu-header .lu-summary[data-summary=slider-hist]>[data-handle=max]:before{left:-5em;text-align:right}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]:hover>[data-handle=min],.lu-side-panel>div>main section.lu-header .lu-summary[data-summary=slider-hist]:hover>[data-handle=min]{border-right-width:5px}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]:hover>[data-handle=max],.lu-side-panel>div>main section.lu-header .lu-summary[data-summary=slider-hist]:hover>[data-handle=max]{border-left-width:5px}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]>[data-handle$=hint],.lu-side-panel>div>main section.lu-header .lu-summary[data-summary=slider-hist]>[data-handle$=hint]{pointer-events:none;position:absolute;height:100%;background:repeating-linear-gradient(-45deg,hsla(0,0%,100%,.7),hsla(0,0%,100%,.7) 7px,#bababa 0,#bababa 10px)}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist]>[data-handle$=hint][data-handle=max-hint],.lu-side-panel>div>main section.lu-header .lu-summary[data-summary=slider-hist]>[data-handle$=hint][data-handle=max-hint]{right:0}.lu-side-panel>div>main>article .lu-summary[data-summary=slider-hist] label,.lu-side-panel>div>main section.lu-header .lu-summary[data-summary=slider-hist] label{position:absolute;bottom:-3.5em}.lu-side-panel>div>main>article .lu-summary[data-summary=aggregation]>i,.lu-side-panel>div>main>article .lu-summary[data-summary=selection]>i,.lu-side-panel>div>main section.lu-header .lu-summary[data-summary=aggregation]>i,.lu-side-panel>div>main section.lu-header .lu-summary[data-summary=selection]>i{cursor:pointer;font-size:150%}.lu-side-panel>div>main>article .lu-summary[data-summary=aggregation]>i,.lu-side-panel>div>main section.lu-header .lu-summary[data-summary=aggregation]>i{padding-right:4px}.lu-side-panel>div>main>article .lu-summary[data-summary=aggregation],.lu-side-panel>div>main>article .lu-summary[data-summary=selection],.lu-side-panel>div>main>article .lu-summary[data-summary=string],.lu-side-panel>div>main section.lu-header .lu-summary[data-summary=aggregation],.lu-side-panel>div>main section.lu-header .lu-summary[data-summary=selection],.lu-side-panel>div>main section.lu-header .lu-summary[data-summary=string]{display:block}.lu-side-panel>div>main>article .lu-summary label.lu-disabled,.lu-side-panel>div>main section.lu-header .lu-summary label.lu-disabled{color:gray;user-select:none;cursor:not-allowed}.lu-side-panel>div>main>article .lu-summary input[type=text],.lu-side-panel>div>main section.lu-header .lu-summary input[type=text]{width:100%;border:1px solid #999;border-radius:3px;padding:3px 5px}.lu-side-panel>div>main>article .lu-summary select,.lu-side-panel>div>main section.lu-header .lu-summary select{width:100%;border:1px solid #999;border-radius:3px;padding:3px 5px;outline:none;cursor:pointer}.lu-side-panel>div>main>article .lu-summary label,.lu-side-panel>div>main section.lu-header .lu-summary label{font-weight:400;display:flex;align-items:center;margin:5px 0}.lu-side-panel>div>main>article .lu-summary label input[type=checkbox],.lu-side-panel>div>main section.lu-header .lu-summary label input[type=checkbox]{margin:0 5px 0 0}.lu-side-panel>div>main>article .lu-nested,.lu-side-panel>div>main section.lu-header .lu-nested{position:relative}.lu-side-panel>div>main>article{counter-increment:side-panel-counter;background-color:#fff;margin-bottom:.8em}.lu-side-panel>div>main>article.lu-dragover:after{display:none}.lu-side-panel>div>main>article:before{content:"Drop here to change the sorting";position:absolute;z-index:2;opacity:0;visibility:hidden;margin-bottom:.8em;height:0;width:100%;user-select:none;pointer-events:none;font-size:120%;color:#000;display:flex;align-items:center;justify-content:center;border:2px dashed hsla(0,0%,59%,.8);background-color:hsla(0,0%,94%,.8);transition:height .2s ease,opacity .2s ease}.lu-side-panel>div>main>article.lu-dragover:before{position:static;height:50px;opacity:1;visibility:visible}.lu-side-panel>div>main>article>header{display:flex;align-content:space-between;background:#f0f0f0;padding:.2em .5em;position:relative;font-size:12pt;font-weight:500}.lu-side-panel>div>main>article>header:before{color:#999;padding-right:.2em;content:counter(side-panel-counter)}.lu-side-panel>div>main>article>header .lu-label{margin:0 1em 0 0;padding:0 0 0 .4em;overflow:hidden!important;cursor:pointer;flex:1}.lu-side-panel>div>main>article>header>.lu-toolbar{color:#999}.lu-side-panel>div>main>article .lu-toolbar{padding:0}.lu-side-panel>div>main>article main.lu-summary{margin:.5em;height:50px;font-size:small}.lu-side-panel>div>main>article main.lu-summary[data-summary=hist]>div,.lu-side-panel>div>main>article main.lu-summary[data-summary=slider-hist]>div{background:#c1c1c1}.lu-side-panel>div>main>article main.lu-summary[data-summary=interactive-filter-hist]{margin-bottom:3em}.lu-side-panel>div>main>article main.lu-summary[data-summary=string]{display:block;height:auto}.lu-side-panel .lu-search{position:relative}.lu-side-panel .lu-search>input{width:100%;border:1px solid #999;border-radius:4px;padding:3px 5px;outline:none}.lu-side-panel .lu-search>ul{display:none;position:absolute;overflow:auto;z-index:1000;max-height:0;background:#fff;text-align:left;padding:0;margin-top:-1px;transition:all .5s linear;list-style:none;border:1px solid #999;border-radius:0 0 3px 3px}.lu-side-panel .lu-search>ul.lu-search-empty:before{content:"No results found"}.lu-side-panel .lu-search>ul li,.lu-side-panel .lu-search>ul ul{list-style:none;margin:0;padding:0}.lu-side-panel .lu-search>ul li>span{padding:.2em;display:block}.lu-side-panel .lu-search>ul li.lu-search-group>span{background:#f0f0f0;text-transform:capitalize;padding-left:.4em;font-weight:700}.lu-side-panel .lu-search>ul li.lu-search-item>span{cursor:pointer;padding-left:.4em;pointer-events:auto}.lu-side-panel .lu-search>ul li.lu-search-highlighted>span,.lu-side-panel .lu-search>ul li.lu-search-item>span:hover{background-color:#f8f8f8}.lu-side-panel .lu-search.lu-search-open>input{border-radius:3px 3px 0 0}.lu-side-panel .lu-search.lu-search-open>ul{display:block;max-height:70vh}.lu-taggle{display:flex;flex-direction:row-reverse}.lu-taggle>aside.panel{flex:0 0 auto;display:flex;flex-direction:column;border-left:1px solid #6d6c6c;border-radius:0}.lu-taggle>main{flex:1 1 auto}.lineup-engine [data-lod=low][data-agg=detail]:hover,.lineup-engine [data-lod=medium][data-agg=detail]:hover{height:18px!important}.lineup-engine [data-lod=low][data-agg=detail]:not(:hover),.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover){padding-top:0}.lineup-engine [data-lod=low][data-agg=detail]:not(:hover)[data-meta~=first],.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover)[data-meta~=first]{z-index:11;position:relative}.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) .lu-hover-only,.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) .lu-selection-only,.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=circle],.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=rank],.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=selection],.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=sparkline],.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=string],.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=threshold],.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) .lu-hover-only,.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) .lu-selection-only,.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=circle],.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=rank],.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=selection],.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=sparkline],.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=string],.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=threshold]{display:none!important}.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=aggregate],.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=aggregate]{overflow:visible!important}.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=aggregate]:before,.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=aggregate]:before{position:absolute;left:0;right:0}.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=number]>*,.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=number]>*{top:0;bottom:0}.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=boxplot]>div,.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=boxplot]>div{height:100%}.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=boxplot]>div:before,.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=boxplot]>div>div:first-child:after,.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=boxplot]>div>div:last-child,.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=boxplot]>div:before,.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=boxplot]>div>div:first-child:after,.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=boxplot]>div>div:last-child{display:none}.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=boxplot]>div>div:first-child,.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=boxplot]>div>div:first-child{top:0;height:100%;background:#c1c1c1}.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=upset],.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=upset]{align-items:stretch}.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=upset]>div:first-child,.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=upset]>div:first-child{display:none}.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=upset]>div:nth-child(n+2),.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=upset]>div:nth-child(n+2){border-radius:0;height:100%}.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=upset]>div:nth-child(n+2):not(.enabled),.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=upset]>div:nth-child(n+2):not(.enabled){visibility:hidden}.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=categorical]>div:first-of-type,.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=heatmap]>div:first-of-type,.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=categorical]>div:first-of-type,.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=heatmap]>div:first-of-type{margin-right:0;flex:1 1 auto}.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=categorical]>div:last-of-type,.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=heatmap]>div:last-of-type,.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=categorical]>div:last-of-type,.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=heatmap]>div:last-of-type{display:none}.lineup-engine [data-lod=low][data-agg=detail]:not(:hover) [data-renderer=dot]>div,.lineup-engine [data-lod=medium][data-agg=detail]:not(:hover) [data-renderer=dot]>div{top:0!important;height:100%;margin-top:0}.lu-side-panel>div>main>article>header .lu-label{padding:0 0 0 .2em}.lu-side-panel>div>main>article>header .lu-label:before{content:"";display:inline;padding-left:20px;background-position:0;background-repeat:no-repeat;background-size:75%}.lu-side-panel .lu-search [data-type=categorical]:before,.lu-side-panel>div>main>article[data-type=categorical]>header .lu-label:before{background-image:url('+n(149)+")}.lu-side-panel .lu-search [data-type=number]:before,.lu-side-panel .lu-search [data-type=numerical]:before,.lu-side-panel>div>main>article[data-type=number]>header .lu-label:before{background-image:url("+n(150)+")}.lu-side-panel .lu-search [data-type=matrix]:before,.lu-side-panel .lu-search [data-type=numbers]:before,.lu-side-panel>div>main>article[data-type=numbers]>header .lu-label:before{background-image:url("+n(151)+")}.lu-side-panel .lu-search [data-type=label]:before,.lu-side-panel .lu-search [data-type=string]:before,.lu-side-panel>div>main>article[data-type=string]>header .lu-label:before{background-image:url("+n(152)+')}.lu-search .lu-search-group>span>span,.lu-search .lu-search-item>span>span{display:flex}.lu-search .lu-search-group>span>span:before,.lu-search .lu-search-item>span>span:before{content:"";color:#999;display:inline;padding-left:20px;background-position:0;background-repeat:no-repeat;background-size:70%}.lu-rule-button-chooser{padding:.5em .5em 0;flex:0 0 auto;cursor:pointer;display:flex;align-items:center;position:relative}.lu-rule-button-chooser span{padding-left:5px}.lu-rule-button-chooser>div{display:none}.lu-rule-button-chooser:hover div:not(:empty){opacity:1;visibility:visible;transition-delay:0s,.3s}.lu-rule-button-chooser:before{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;margin-top:-1px;content:"\\F096"}.lu-rule-button-chooser.chosen:before{content:"\\F046"}.lu-rule-button-chooser.violated>div{display:block;position:absolute;background:#fffbe6;border:1px solid #000;top:110%;left:5px;width:96%;hyphens:manual;padding:5px;z-index:100;pointer-events:none;opacity:0;visibility:hidden;transition:visibility 0s ease .3s,opacity .3s ease 0s}.lu-rule-button-chooser.violated>div:before{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:5px solid #000;position:absolute;top:-6px;left:29.4%}.lu-rule-button-chooser.violated:after{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\F071";margin-top:-1px;margin-left:5px;color:gold}',""])},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6Izk5OTk5OTt9Cjwvc3R5bGU+CjxnPgoJPGNpcmNsZSBjbGFzcz0ic3QwIiBjeD0iMzk4LjMiIGN5PSIzNzIuMyIgcj0iMTA3LjciLz4KCTxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjExMy43IiBjeT0iMzcyLjMiIHI9IjEwNy43Ii8+Cgk8Y2lyY2xlIGNsYXNzPSJzdDAiIGN4PSIyNTYiIGN5PSIxMzkuNyIgcj0iMTA3LjciLz4KPC9nPgo8L3N2Zz4K"},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6Izk5OTk5OTt9Cjwvc3R5bGU+CjxnPgoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTI1Niw1MDZjMi41LTIzLjUsNS4yLTQ2LjYsOC02OS4zYzIuOC0yMi43LDUuNS00NS44LDgtNjkuM2gtNjMuNmMtMi42LDIzLjUtNS4yLDQ2LjYtOCw2OS4zCgkJYy0yLjgsMjIuNy01LjUsNDUuOC04LDY5LjNoLTc5LjZjMi41LTIzLjUsNS4yLTQ2LjYsOC02OS4zYzIuOC0yMi43LDUuNS00NS44LDgtNjkuM0g2Mi4zYzEuNS0xMy4zLDMuMi0yNi4yLDUtMzguNwoJCWMxLjgtMTIuNSwzLjItMjUuMSw0LjItMzcuOWg2Ni42bDguNC02Ni42SDc5LjlsOC40LTc1LjhoNjUuOWMzLjYtMjQuNSw2LjgtNDguNCw5LjYtNzEuNmMyLjgtMjMuMiw1LjctNDYuOCw4LjgtNzAuOGg3OS42CgkJbC0xOC40LDE0Mi40aDY0LjNjMi41LTI0LjUsNS40LTQ4LjQsOC40LTcxLjZjMy4xLTIzLjIsNi4xLTQ2LjgsOS4yLTcwLjhoNzkuNkwzNzcsMTQ4LjRoNzIuN2MtMS41LDEyLjgtMi44LDI1LjQtMy44LDM3LjkKCQljLTEsMTIuNS0yLjMsMjUuMS0zLjgsMzcuOWgtNzMuNWwtNy43LDY2LjZoNzIuN2MtMS41LDEyLjgtMy4yLDI1LjQtNSwzNy45Yy0xLjgsMTIuNS0zLjIsMjUuNC00LjIsMzguN2gtNzIuN0wzMzQuOSw1MDZIMjU2egoJCSBNMjI1LjQsMjI0LjJjLTEsMTEuMi0yLjIsMjIuMy0zLjQsMzMuM2MtMS4zLDExLTIuNywyMi4xLTQuMiwzMy4zaDYzLjZsNy43LTY2LjZIMjI1LjR6Ii8+CjwvZz4KPC9zdmc+Cg=="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6Izk5OTk5OTt9Cjwvc3R5bGU+CjxnPgogICAgPHJlY3QgY2xhc3M9InN0MCIgeD0iMTAiIHk9IjEwIiB3aWR0aD0iMTQwIiBoZWlnaHQ9IjE0MCIgLz4KICAgIDxyZWN0IGNsYXNzPSJzdDAiIHg9IjE5MCIgeT0iMTAiIHdpZHRoPSIxNDAiIGhlaWdodD0iMTQwIiAvPgogICAgPHJlY3QgY2xhc3M9InN0MCIgeD0iMzcwIiB5PSIxMCIgd2lkdGg9IjE0MCIgaGVpZ2h0PSIxNDAiIC8+CgogICAgPHJlY3QgY2xhc3M9InN0MCIgeD0iMTAiIHk9IjE5MCIgd2lkdGg9IjE0MCIgaGVpZ2h0PSIxNDAiIC8+CiAgICA8cmVjdCBjbGFzcz0ic3QwIiB4PSIxOTAiIHk9IjE5MCIgd2lkdGg9IjE0MCIgaGVpZ2h0PSIxNDAiIC8+CiAgICA8cmVjdCBjbGFzcz0ic3QwIiB4PSIzNzAiIHk9IjE5MCIgd2lkdGg9IjE0MCIgaGVpZ2h0PSIxNDAiIC8+CgogICAgPHJlY3QgY2xhc3M9InN0MCIgeD0iMTAiIHk9IjM3MCIgd2lkdGg9IjE0MCIgaGVpZ2h0PSIxNDAiIC8+CiAgICA8cmVjdCBjbGFzcz0ic3QwIiB4PSIxOTAiIHk9IjM3MCIgd2lkdGg9IjE0MCIgaGVpZ2h0PSIxNDAiIC8+CiAgICA8cmVjdCBjbGFzcz0ic3QwIiB4PSIzNzAiIHk9IjM3MCIgd2lkdGg9IjE0MCIgaGVpZ2h0PSIxNDAiIC8+CjwvZz4KPC9zdmc+Cg=="},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6Izk5OTk5OTt9Cjwvc3R5bGU+CjxnPgoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTE2NS42LDQ0OS42aDYxLjRWNjIuNEgxMTQuOVYxMTZINTguNVY2aDM5NXYxMTBoLTU2LjRWNjIuNEgyODYuNHYzODcuMWg1Mi4xVjUwNkgxNjUuNlY0NDkuNnoiLz4KPC9nPgo8L3N2Zz4K"},function(t,e,n){"use strict";var r=n(154);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";var r=n(140),i=n(44),a=n(155),o=n(14),s=n(0),l=n(159);class u extends s.a{constructor(t,e,n={}){super(),this.node=t,this.data=e,this.node.classList.add("lu-taggle"),this.node.innerHTML='<aside class="panel">\n        <div class="lu-rule-button-chooser">\n          <span>Overview</span>\n          <div></div>\n        </div>\n    </aside>',this.spaceFilling=this.node.querySelector(".lu-rule-button-chooser"),this.spaceFilling.addEventListener("click",()=>{const t=this.spaceFilling.classList.toggle("chosen");this.renderer.switchRule(t?r.b:r.a)}),this.renderer=new l.a(this.node,e,Object.assign({violationChanged:(t,e)=>this.setViolation(e)},n)),this.panel=new a.a(this.renderer.ctx,this.node.ownerDocument,{formatItem:t=>`<span data-type="${t.desc?t.desc.type:t.text}"><span>${t.text}</span></span>`}),this.renderer.pushUpdateAble(t=>this.panel.update(t)),this.node.firstElementChild.appendChild(this.panel.node),this.forward(this.data,`${o.a.EVENT_SELECTION_CHANGED}.main`),this.forward(this.renderer,`${i.a}.main`)}createEventList(){return super.createEventList().concat([u.EVENT_HOVER_CHANGED,u.EVENT_SELECTION_CHANGED])}setViolation(t){t=t||"",this.spaceFilling.classList.toggle("violated",Boolean(t)),this.spaceFilling.lastElementChild.innerHTML=t.replace(/\n/g,"<br>")}destroy(){this.renderer.destroy(),this.node.remove()}dump(){return this.data.dump()}update(){this.renderer.update()}changeDataStorage(t,e){this.data&&this.unforward(this.data,`${o.a.EVENT_SELECTION_CHANGED}.taggle`),this.data=t,e&&this.data.restore(e),this.forward(this.data,`${o.a.EVENT_SELECTION_CHANGED}.taggle`),this.renderer.changeDataStorage(t),this.update(),this.panel.update(this.renderer.ctx)}}e.a=u,u.EVENT_HOVER_CHANGED=i.a,u.EVENT_SELECTION_CHANGED=o.a.EVENT_SELECTION_CHANGED},function(t,e,n){"use strict";var r=n(0),i=n(3),a=(n.n(i),n(13)),o=n(156),s=n(14),l=n(158),u=n(12);class c{constructor(t,e,n={}){this.ctx=t,this.options={additionalDescs:[Object(u.createStackDesc)("Weighted Sum"),Object(u.createScriptDesc)("Scripted Formula"),Object(u.createNestedDesc)("Nested"),Object(u.createMaxDesc)(),Object(u.createMinDesc)(),Object(u.createMeanDesc)(),Object(u.createImpositionDesc)()],chooser:!0,placeholder:"Add Column..."},this.descs=new Map,Object.assign(this.options,n),this.node=e.createElement("aside"),this.node.classList.add("lu-side-panel"),this.search=new l.a(this.options),this.data=t.provider,this.init(),this.update(t)}init(){this.node.innerHTML="\n      <div><main></main></div>\n    ",this.initChooser(),this.changeDataStorage(null,this.data)}initChooser(){this.options.chooser&&(this.node.insertAdjacentHTML("afterbegin","<header>\n        <form></form>\n      </header>"),this.node.querySelector("form").appendChild(this.search.node),this.search.on(l.a.EVENT_SELECT,t=>{const e=this.data.create(t.desc);e&&this.data.getLastRanking().push(e)}))}changeDataStorage(t,e){const n=this;t&&t.on(Object(r.u)(".panel",s.a.EVENT_ADD_RANKING,s.a.EVENT_REMOVE_RANKING,s.a.EVENT_ADD_DESC,s.a.EVENT_CLEAR_DESC),null),this.data=e,this.descs.forEach(t=>t.destroyVis()),this.descs.clear(),e.getColumns().concat(this.options.additionalDescs).forEach(t=>{this.descs.set(t,new o.a(t))});const i=(t,i)=>{const o=i?1:-1;t.flatColumns.forEach(t=>{this.descs.has(t.desc)&&(this.descs.get(t.desc).used+=o)}),i?(t.on(Object(r.u)(".panel",a.a.EVENT_GROUP_CRITERIA_CHANGED,a.a.EVENT_SORT_CRITERIAS_CHANGED),()=>{t===e.getRankings()[0]&&this.updateList()}),t.on(Object(r.u)(".panel",s.a.EVENT_ADD_COLUMN,s.a.EVENT_REMOVE_COLUMN),function(t){const e=t.desc,r="addColumn"===this.type;if(!n.descs.has(e))return;n.descs.get(e).used+=r?1:-1,n.updateList()})):t.on(Object(r.u)(".panel",a.a.EVENT_GROUP_CRITERIA_CHANGED,a.a.EVENT_SORT_CRITERIAS_CHANGED,a.a.EVENT_ADD_COLUMN,a.a.EVENT_REMOVE_COLUMN),null)};e.getRankings().forEach(t=>i(t,!0)),e.on(`${s.a.EVENT_ADD_DESC}.panel`,t=>{const e=new o.a(t);n.descs.set(t,e),this.updateChooser()}),e.on(`${s.a.EVENT_CLEAR_DESC}.panel`,()=>{n.descs.clear(),this.updateChooser()}),e.on(Object(r.u)(".panel",s.a.EVENT_ADD_RANKING,s.a.EVENT_REMOVE_RANKING),function(t){i(t,"addRanking"===this.type),n.updateList()})}update(t){const e=this.data;this.ctx=t,t.provider!==e&&this.changeDataStorage(e,t.provider),this.updateChooser(),this.updateList()}remove(){this.node.remove(),this.data&&(this.data.getRankings().forEach(t=>{t.on(Object(r.u)(".panel",a.a.EVENT_GROUP_CRITERIA_CHANGED,a.a.EVENT_SORT_CRITERIAS_CHANGED,a.a.EVENT_ADD_COLUMN,a.a.EVENT_REMOVE_COLUMN),null)}),this.data.on(Object(r.u)(".panel",s.a.EVENT_ADD_RANKING,s.a.EVENT_REMOVE_RANKING,s.a.EVENT_ADD_DESC),null))}columnOrder(){const t=this.data.getRankings()[0];if(!t)return[];const e=t.getGroupCriteria(),n=new Set(e);return t.getSortCriterias().forEach(({col:t})=>{n.has(t)||(e.push(t),n.add(t))}),t.flatColumns.forEach(t=>{n.has(t)||(e.push(t),n.add(t))}),e}prepareListData(){const t=this.columnOrder(),e=new Map;t.forEach(t=>e.set(t.desc,t)),this.data.getRankings().forEach(t=>{t.flatColumns.forEach(t=>{const n=t.desc;e.has(n)||Object(a.b)(n)||e.set(n,t)})});const n=Array.from(e.values());return n.sort((e,n)=>{const r=t.indexOf(e),i=t.indexOf(n);return r<0?i<0?0:1:i<0?-1:r-i}),n}updateList(){const t=this.node.querySelector("main"),e=this.prepareListData();if(0===e.length)return t.innerHTML="",void this.descs.forEach(t=>t.destroyVis());t.innerHTML="",e.forEach(e=>{const n=this.descs.get(e.desc);n&&(n.visColumn!==e?(n.destroyVis(),t.appendChild(n.createVis(e,this.ctx,t.ownerDocument))):t.appendChild(n.updateVis(this.ctx)))})}static groupByType(t){const e=["label","categorical","numerical","matrix","combined","others"];return Object(i.nest)().key(t=>{switch(t.desc.type){case"string":return e[0];case"ordinal":case"categorical":return e[1];case"number":return e[2];case"numbers":case"booleans":case"boxplot":return e[3];case"stack":case"min":case"max":case"mean":case"script":case"nested":case"imposition":return e[4];default:return e[5]}}).sortKeys((t,n)=>e.indexOf(t)-e.indexOf(n)).sortValues((t,e)=>t.text.localeCompare(e.text)).entries(t)}updateChooser(){if(!this.options.chooser)return;const t=c.groupByType(Array.from(this.descs.values()));this.search.data=t.map(t=>({text:t.key,children:t.values}))}}e.a=c},function(t,e,n){"use strict";var r=n(157);class i{constructor(t){this.desc=t,this.used=0,this.vis=null}get text(){return this.desc.label}get id(){return`${this.desc.type}@${this.desc.label}`}destroyVis(){this.vis&&this.vis.destroy()}get visColumn(){return this.vis?this.vis.column:null}updateVis(t){return this.vis?(this.vis.update(t),this.vis.node):null}createVis(t,e,n){return this.vis=new r.a(t,e,n),this.vis.node}}e.a=i},function(t,e,n){"use strict";var r=n(1),i=n(18);class a{constructor(t,e,n){this.column=t,this.ctx=e,this.node=n.createElement("article"),this.node.dataset.type=t.desc.type,this.column.on([`${r.a.EVENT_FILTER_CHANGED}.panel`,`${r.a.EVENT_DIRTY_HEADER}.panel`],()=>{this.update()}),this.init(),this.update()}init(){this.node.innerHTML='\n      <header><div class="lu-label"></div><div class="lu-toolbar"></div></header>\n      <main class="lu-summary"></main>',Object(i.e)(this.node.querySelector(".lu-toolbar"),this.column,this.ctx),this.node.querySelector(".lu-label").addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),this.column.toggleMySorting()}),Object(i.g)(this.node.querySelector("header"),this.column,this.ctx),Object(i.h)(this.node,this.column,this.ctx,"before",!0)}update(t=this.ctx){this.ctx=t,Object(i.j)(this.node,this.column,this.ctx,!0)}destroy(){this.column.on([`${r.a.EVENT_FILTER_CHANGED}.panel`,`${r.a.EVENT_DIRTY_HEADER}.panel`],null),this.node.remove()}}e.a=a},function(t,e,n){"use strict";var r=n(0);class i extends r.a{constructor(t={}){super(),this.options={formatItem:t=>t.text,doc:document,placeholder:"Select..."},this.values=[],Object.assign(this.options,t),this.node=this.options.doc.createElement("div"),this.node.classList.add("lu-search"),this.node.innerHTML=`<input type="search" placeholder="${this.options.placeholder}"><ul></ul>`,this.search=this.node.querySelector("input"),this.body=this.node.querySelector("ul"),this.search.onfocus=(()=>this.focus()),this.search.onblur=(()=>this.blur()),this.search.oninput=(()=>this.filter()),this.search.onkeydown=(t=>this.handleKey(t))}get data(){return this.values}set data(t){this.values=t,this.body.innerHTML="",this.buildDialog(this.body,this.values)}buildDialog(t,e){e.forEach(e=>{if(function(t){return void 0!==t.id}(e)){t.insertAdjacentHTML("beforeend",'<li class="lu-search-item"><span></span></li>');const n=t.lastElementChild;n.onmousedown=(t=>{t.preventDefault()}),n.onclick=(()=>this.select(e)),n.onmouseenter=(()=>this.highlighted=n),n.onmouseleave=(()=>this.highlighted=null)}else{t.insertAdjacentHTML("beforeend",'<li class="lu-search-group"><span></span><ul></ul></li>');const n=t.lastElementChild.lastElementChild;this.buildDialog(n,e.children)}const n=t.lastElementChild.firstElementChild;n.innerHTML=this.options.formatItem(e,n)})}handleKey(t){const e=27,n=13,r=38,i=40;switch(t.which){case e:this.search.blur();break;case n:const a=this.highlighted;a&&a.click();break;case r:this.highlightPrevious();break;case i:this.highlightNext()}}select(t){this.search.value="",this.search.blur(),this.filterResults(this.body,""),this.fire(i.EVENT_SELECT,t)}focus(){this.body.style.width=`${this.search.offsetWidth}px`,this.highlighted=this.body.firstElementChild||null,this.node.classList.add("lu-search-open")}get highlighted(){return this.body.querySelector(".lu-search-highlighted")||null}set highlighted(t){const e=this.highlighted;e!==t&&(e&&e.classList.remove("lu-search-highlighted"),t&&t.classList.add("lu-search-highlighted"))}highlightNext(){const t=this.highlighted;if(!t||t.classList.contains("hidden"))return void(this.highlighted=this.body.querySelector(".lu-search-item:not(.hidden)")||null);const e=Array.from(this.body.querySelectorAll(".lu-search-item:not(.hidden)")),n=e.indexOf(t);this.highlighted=e[n+1]||null}highlightPrevious(){const t=this.highlighted,e=Array.from(this.body.querySelectorAll(".lu-search-item:not(.hidden)"));if(!t||t.classList.contains("hidden"))return void(this.highlighted=e[e.length-1]||null);const n=e.indexOf(t);this.highlighted=e[n-1]||null}blur(){this.search.value="",this.node.classList.remove("lu-search-open")}filter(){const t=this.filterResults(this.body,this.search.value.toLowerCase());this.body.classList.toggle("lu-search-empty",t)}filterResults(t,e){if(""===e)return Array.from(t.querySelectorAll(".hidden")).forEach(t=>t.classList.remove("hidden")),!1;const n=Array.from(t.children);return n.forEach(t=>{let n=!t.firstElementChild.innerHTML.toLowerCase().includes(e);if(t.classList.contains("lu-search-group")){const r=t.lastElementChild,i=this.filterResults(r,e);n=n&&i}t.classList.toggle("hidden",n)}),n.every(t=>t.classList.contains("hidden"))}createEventList(){return super.createEventList().concat([i.EVENT_SELECT])}}e.a=i,i.EVENT_SELECT="select"},function(t,e,n){"use strict";var r=n(22),i=n(69),a=n(140),o=n(34),s=n(44),l=n(141),u=n(14),c=n(0);class d extends c.a{constructor(t,e,n={}){super(),this.data=e,this.isDynamicLeafHeight=!0,this.rule=a.a,this.resizeListener=(()=>this.update()),this.options={violationChanged:()=>void 0},this.options=Object.assign(this.options,n);const r=this.createConfig(n);this.renderer=new i.a(e,t,r),this.data.on(`${u.a.EVENT_SELECTION_CHANGED}.rule`,()=>{this.isDynamicLeafHeight&&this.update()}),this.forward(this.renderer,`${s.a}.main`),window.addEventListener("resize",this.resizeListener)}get ctx(){return this.renderer.ctx}pushUpdateAble(t){this.renderer.pushUpdateAble(t)}createConfig(t){return Object(c.p)(Object(o.a)(),t,{header:{summary:!0},body:{animation:!0,rowPadding:0,groupPadding:l.a,dynamicHeight:this.dynamicHeight.bind(this),customRowUpdate:this.customRowUpdate.bind(this)}})}customRowUpdate(t,e){this.levelOfDetail&&this.levelOfDetail(t,e)}dynamicHeight(t){const e=this.renderer?this.renderer.node.querySelector("main").clientHeight:100,n=this.rule.apply(t,e,new Set(this.data.getSelection()));this.isDynamicLeafHeight="function"==typeof n.item,this.options.violationChanged(this.rule,n.violation||"");const i=t=>Object(r.a)(t)?"number"==typeof n.group?n.group:n.group(t):"number"==typeof n.item?n.item:n.item(t);return this.levelOfDetail=((e,n)=>{const r=t[n];e.dataset.lod=this.rule.levelOfDetail(r,i(r))}),{defaultHeight:"number"==typeof n.item?n.item:NaN,height:i}}createEventList(){return super.createEventList().concat([d.EVENT_HOVER_CHANGED])}zoomOut(){this.renderer.zoomOut()}zoomIn(){this.renderer.zoomIn()}switchRule(t){this.rule=t,this.update()}destroy(){this.renderer.destroy(),window.removeEventListener("resize",this.resizeListener)}update(){this.renderer.update()}changeDataStorage(t){this.data&&this.data.on(`${u.a.EVENT_SELECTION_CHANGED}.rule`,null),this.data=t,this.data.on(`${u.a.EVENT_SELECTION_CHANGED}.rule`,()=>{this.isDynamicLeafHeight&&this.update()}),this.renderer.changeDataStorage(t),this.update()}}e.a=d,d.EVENT_HOVER_CHANGED=s.a}])});